<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner_2023.png">
  
  <title>The Buffer Geometry loader in three.js | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2018/04/12/threejs-buffer-geometry-loader/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="In this post I will be writing about the BufferGeometryLoader in threejs the popular javaScript library for working with 3D objects. The Buffer Geometry Loader is one of several options in threejs whe">
<meta property="og:type" content="article">
<meta property="og:title" content="The Buffer Geometry loader in three.js">
<meta property="og:url" content="https://dustinpfister.github.io/2018/04/12/threejs-buffer-geometry-loader/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="In this post I will be writing about the BufferGeometryLoader in threejs the popular javaScript library for working with 3D objects. The Buffer Geometry Loader is one of several options in threejs whe">
<meta property="og:updated_time" content="2023-07-09T23:46:25.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="The Buffer Geometry loader in three.js">
<meta name="twitter:description" content="In this post I will be writing about the BufferGeometryLoader in threejs the popular javaScript library for working with 3D objects. The Buffer Geometry Loader is one of several options in threejs whe">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-buffer-geometry-loader" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/04/12/threejs-buffer-geometry-loader/" class="article-date"> Published:
  <time datetime="2018-04-12T14:20:30.000Z" itemprop="datePublished">2018-04-12</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2018/04/12/threejs-buffer-geometry-loader/" class="article-date"> Modified:
  <time datetime="2023-07-09T23:46:25.000Z" itemprop="dateModified">2023-07-09</time>
</a>

    <span class="article-date">V1.4</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      The Buffer Geometry loader in three.js
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>In this post I will be writing about the <a href="https://threejs.org/docs/index.html#api/loaders/BufferGeometryLoader" target="_blank" rel="external">BufferGeometryLoader</a> in <a href="https://threejs.org/" target="_blank" rel="external">threejs</a> the popular javaScript library for working with 3D objects. The Buffer Geometry Loader is one of several options in threejs when it comes to external asset loaders, some of which might prove to be a better option depending on what needs to happen. What is nice about the buffer geometry loader is that it is baked into the core of threejs itself, so there is no need to boter loading an additional file beyond that which is often the case with many other options.</p>
<p>If I want to import a 3d model that has been created in a 3d modeling program like <a href="https://www.blender.org/" target="_blank" rel="external">blender</a>, and if I want to use the built in buffer geometry loader, it will have to be converted to a standard JSON format used by threejs. Luckily there is an official plugin to do just that for blender at least in the three.js repositories <a href="https://github.com/mrdoob/three.js/tree/r92/utils/exporters/blender" target="_blank" rel="external">exporters folder</a> of r92 of threejs. As of r93+ the exporter has been removed from the repository but the same old exporter should still work okay with the version of blender that is being used, if not doing this might prove to be a little involved. </p>
<p>Because I might run into problems exporting what I want to use from various programs I would not stop with the buffer geometry loader. One of the other options when it comes to loading assets into threejs that I like best thus far would be the <a href="/2021/04/30/threejs-dae-collada-loader/">Collada file loader</a>. This collada file loader allows me to load files that are in a format that works out of the box with blender without having to bother with external plug-ins to add the export functionality of that program. The collada file format is also a great format not just for geometry but also with materials, textures, and so forth as well. T his way I do not have to bother adding a plugin to blender, but I do have to add an additional file on top of threejs to load Collada Files as that loader is not built into the core of threejs like that of the Buffer Geometry loader.</p>
<p>Still if you are willing to do what is necessary to create buffer geometry JSON files, the buffer geometry loader is one way to go about loading external geometry at least. So then in this post I will be writing abut at least a few examples of this kind of option when it comes to this sort of thing.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/ELCdtbx8DPc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="The-buffer-Geometry-loader-and-what-to-know-first"><a href="#The-buffer-Geometry-loader-and-what-to-know-first" class="headerlink" title="The buffer Geometry loader and what to know first"></a>The buffer Geometry loader and what to know first</h2><p>This is a post on threejs that has to do with the buffered geometry loader, which is one of serverl options for loading a 3d model assets into a threejs project. It is not a <a href="/2018/04/04/threejs-getting-started/">getting started post on threejs</a>, or any additional skills needed before getting into threejs to begin with when it comes to <a href="/2018/11/27/js-getting-started/">client side javaScrpt in general</a>. However I will take a moment to write about a few things that you might want to read up more on if you have not done so before hand here.</p>
<h3 id="Know-a-thing-or-two-about-the-buffer-geometry-class"><a href="#Know-a-thing-or-two-about-the-buffer-geometry-class" class="headerlink" title="Know a thing or two about the buffer geometry class"></a>Know a thing or two about the buffer geometry class</h3><p>This post has to do with Buffered Geometry, but I will not be getting into that in depth in this post as there is a lot to write about and it would be a bit off topic to do so. So I assume that you have a good grasp on what is required before hand when it comes to the buffer geometry class, and are here because you want to learn the ins and outs of the buffered geometry loader alone. If you want to read up more on the <a href="/2021/04/22/threejs-buffer-geometry/">buffer geometry in general I have a post on that</a>. I also have a number of other posts on various core features of buffer geometry objects such as <a href="/2021/06/07/threejs-buffer-geometry-attributes-position/">position attributes</a>, and now also advanced topics such as <a href="/2023/02/03/threejs-buffer-geometry-morph-attributes/">morph attributes</a> as well.</p>
<h3 id="Why-use-the-buffered-geometry-loader"><a href="#Why-use-the-buffered-geometry-loader" class="headerlink" title="Why use the buffered geometry loader?"></a>Why use the buffered geometry loader?</h3><p>When first starting out with threejs one might use one of the built in constructors to create a simple geometry such as a cube geometry using the <a href="https://threejs.org/docs/index.html#api/geometries/BoxBufferGeometry" target="_blank" rel="external">BoxBufferGeometry</a> constructor. That works fine when you are just aiming to make a threejs hello world type project involving a spinning cube on the screen. However when making an actual project chances are you are going to want to make your own geometry one way or another.</p>
<p>Of course there are ways of making a hard coded geometry, or generating a geometry with javaScipt in the source code of your project. However it is also possible to create a geometry in an external application, and then import that geometry into threejs. The buffered geometry loader is one of many ways in threejs to load a geometry.</p>
<h3 id="Why-not-use-the-buffered-geometry-loader"><a href="#Why-not-use-the-buffered-geometry-loader" class="headerlink" title="Why not use the buffered geometry loader?"></a>Why not use the buffered geometry loader?</h3><p>The bad news is that there is a little leg work when it comes to adding a plug-in to blender to export to the standard that is used by the built in buffer geometry loader. To make matters worse if you are using a 3d modeling program other than blender there may not be a plug in to convert to this json format. So it might be a good idea to look into what the other options are, but the buffer geometry loader may still be a good starting point when it comes to looking into what the options are.</p>
<h3 id="The-JSON-file-format"><a href="#The-JSON-file-format" class="headerlink" title="The JSON file format"></a>The JSON file format</h3><p>The format of a json file that can be loaded with the buffered geometry loader should have a type of “BufferedGeometry” in it’s meta data. There are to general ways to generate this file format from some kind of resource. In blender if I added the io three plugin I can use that as a way to generate this type of file. The other general way to go about cretaing this kind of file would be to use the to json method of the buffer geometry class combined with the JSON.stringify method to produce text that can then be saves as a json file that in turn could be used with the loader, more on that in a later section. </p>
<p>For now it might be a good idea to just take a quick look at how this json is formated. A simple example that I made in blender and exported with the io_three plug in looks like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"metadata"</span>:&#123;</div><div class="line">        <span class="string">"version"</span>:<span class="number">3</span>,</div><div class="line">        <span class="string">"type"</span>:<span class="string">"BufferGeometry"</span>,</div><div class="line">        <span class="string">"normal"</span>:<span class="number">30</span>,</div><div class="line">        <span class="string">"position"</span>:<span class="number">30</span>,</div><div class="line">        <span class="string">"generator"</span>:<span class="string">"io_three"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="string">"data"</span>:&#123;</div><div class="line">        <span class="string">"index"</span>:&#123;</div><div class="line">            <span class="string">"array"</span>:[<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">2</span>,<span class="number">21</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">22</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">23</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">25</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">26</span>,<span class="number">10</span>,<span class="number">12</span>,<span class="number">27</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">28</span>,<span class="number">16</span>,<span class="number">18</span>,<span class="number">29</span>,<span class="number">19</span>],</div><div class="line">            <span class="string">"type"</span>:<span class="string">"Uint16Array"</span>,</div><div class="line">            <span class="string">"itemSize"</span>:<span class="number">1</span></div><div class="line">        &#125;,</div><div class="line">        <span class="string">"attributes"</span>:&#123;</div><div class="line">            <span class="string">"normal"</span>:&#123;</div><div class="line">                <span class="string">"array"</span>:[<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-2.98023e-08</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">-2.98023e-08</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">-2.98023e-08</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">2.98023e-08</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">2.98023e-08</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">2.98023e-08</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">2.98023e-08</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">2.98023e-08</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">2.98023e-08</span>,<span class="number">0</span>,<span class="number">0.894427</span>,<span class="number">-0.447214</span>,<span class="number">0</span>,<span class="number">0.894427</span>,<span class="number">-0.447214</span>,<span class="number">0</span>,<span class="number">0.894427</span>,<span class="number">-0.447214</span>,<span class="number">0</span>,<span class="number">0.894427</span>,<span class="number">0.447214</span>,<span class="number">0</span>,<span class="number">0.894427</span>,<span class="number">0.447214</span>,<span class="number">0</span>,<span class="number">0.894427</span>,<span class="number">0.447214</span>,<span class="number">-1</span>,<span class="number">-0</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-0</span>,<span class="number">-2.98023e-08</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">-0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">-0</span>,<span class="number">2.98023e-08</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">-1</span>,<span class="number">2.98023e-08</span>,<span class="number">0</span>,<span class="number">0.894427</span>,<span class="number">-0.447214</span>,<span class="number">0</span>,<span class="number">0.894427</span>,<span class="number">0.447214</span>],</div><div class="line">                <span class="string">"type"</span>:<span class="string">"Float32Array"</span>,</div><div class="line">                <span class="string">"itemSize"</span>:<span class="number">3</span></div><div class="line">            &#125;,</div><div class="line">            <span class="string">"position"</span>:&#123;</div><div class="line">                <span class="string">"array"</span>:[<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1.5</span>,<span class="number">-6.55671e-08</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1.5</span>,<span class="number">-6.55671e-08</span>,<span class="number">-1</span>,<span class="number">1.5</span>,<span class="number">-6.55671e-08</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1.5</span>,<span class="number">-6.55671e-08</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1.5</span>,<span class="number">-6.55671e-08</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1.5</span>,<span class="number">-6.55671e-08</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">1</span>,<span class="number">1</span>],</div><div class="line">                <span class="string">"type"</span>:<span class="string">"Float32Array"</span>,</div><div class="line">                <span class="string">"itemSize"</span>:<span class="number">3</span></div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="string">"groups"</span>:[&#123;</div><div class="line">            <span class="string">"count"</span>:<span class="number">48</span>,</div><div class="line">            <span class="string">"start"</span>:<span class="number">0</span>,</div><div class="line">            <span class="string">"materialIndex"</span>:<span class="number">0</span></div><div class="line">        &#125;]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Choosing-a-3d-modeling-program"><a href="#Choosing-a-3d-modeling-program" class="headerlink" title="Choosing a 3d modeling program"></a>Choosing a 3d modeling program</h3><p>In order to load buffered geometry you first must have such geometry to load in the first place. Typically I will create a model in a 3d modeling program, and one way or another produce a JSON file that resembles the example I have given. These days I am mainly just using blender when it comes to making a geometry with a program that I will then want to export to use in threejs as one format or another.</p>
<h3 id="Setting-up-the-blender-plugin"><a href="#Setting-up-the-blender-plugin" class="headerlink" title="Setting up the blender plugin"></a>Setting up the blender plugin</h3><p>The <a href="https://github.com/mrdoob/three.js/blob/r92/utils/exporters/blender/README.md" target="_blank" rel="external">readme file</a> at the repository covers this process well, and it is pretty quick, easy, and painless. The readme states that you will need blender version 2.73.0 or later, when I got this working I was using 2.79.0 but have not tested it out on any newer versions of blender. </p>
<p>To get this working I just copy and paste the contents of the plug-in folder to a path on my computers file system. The path depends on your operating system, and the version of blender used.</p>
<p>Some windows, and posix examples of what that path might be:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">C:\Program Files\Blender Foundation\Blender\2.7X\scripts\addons</div><div class="line">C:\Users\USERNAME\AppData\Roaming\Blender Foundation\Blender\2.6X\scripts\addons</div><div class="line">/home/USERNAME/.config/blender/2.6X/scripts/addons</div><div class="line">/usr/lib/blender/scripts/addons</div><div class="line">/usr/share/blender/scripts/addons</div><div class="line">/Users/(myuser)/Library/Application Support/Blender/2.7X/scripts/addons</div></pre></td></tr></table></figure>
<p>Wherever it is you are looking for, it is the add ons folder that is used by blender. Out of the box there should be a bunch of plug-ins there before hand, you just want to add the io_three plug-in to the collection there.</p>
<h3 id="The-source-code-examples-here-as-well-as-additional-assets-can-be-found-on-Github"><a href="#The-source-code-examples-here-as-well-as-additional-assets-can-be-found-on-Github" class="headerlink" title="The source code examples here, as well as additional assets can be found on Github"></a>The source code examples here, as well as additional assets can be found on Github</h3><p>The source code examples that I write about here in this post can also be found in the <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-buffer-geometry-loader" target="_blank" rel="external">for post folder of my test threejs repository on Github</a>. This is also where I park the source code for my <a href="/categories/three-js/">many other posts on threejs</a>. On top of the javaScript files I also have additional assets there such as the buffer geometry files that I am loading into the example with the buffer geometry loader.</p>
<h3 id="Version-Numbers-matter"><a href="#Version-Numbers-matter" class="headerlink" title="Version Numbers matter."></a>Version Numbers matter.</h3><p>I know there are a lot of projects where newer versions just patch programming mistakes, and the actual use of the project renames the same when it comes to the use of the public API. This is not so true with threejs, major changes happen often that result in code breaking changes in what some times seems like every revision number that comes out at times. When I first wrote this post I was using <a href="https://github.com/mrdoob/three.js/tree/r91" target="_blank" rel="external">three.js r91</a> that was release in March of 2018, and the last time I edited the post I was using r146 of threejs that was released in October of 2022. A great deal was removed and changed between those two version numbers, so always be mindful of what version you are using when looking at source code examples here elsewhere on the open web.</p>
<h2 id="1-Basic-demos-of-the-Buffer-Geometry-Loader-in-threejs"><a href="#1-Basic-demos-of-the-Buffer-Geometry-Loader-in-threejs" class="headerlink" title="1 - Basic demos of the Buffer Geometry Loader in threejs"></a>1 - Basic demos of the Buffer Geometry Loader in threejs</h2><p>One has to start somewhere with this sort of thing and with that said this will be a few basic examples of the Buffer Geometry loader. Although I will be making these examples as simple as I can make them, I am still assuming that you have a JSON file at the ready to load. if not I have a gew sections in this post where the subject is more on how to get the JSON from one or more sources to begin with.</p>
<h3 id="1-1-Basic-demo-of-a-static-scene"><a href="#1-1-Basic-demo-of-a-static-scene" class="headerlink" title="1.1 - Basic demo of a static scene"></a>1.1 - Basic demo of a static scene</h3><p>To start out with the most basic example of the use of the buffer geometry loader might involve just setting up the usual set of objects, and then loading just a single buffer geometry file.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LOADER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.BufferGeometryLoader();</div><div class="line">loader.load(</div><div class="line">    <span class="string">'/json/static/box_house1_solid.json'</span>,</div><div class="line">    (geometry) =&gt; &#123;</div><div class="line">        geometry.rotateX(<span class="built_in">Math</span>.PI * <span class="number">1.5</span>);</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">           geometry,</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">        scene.add(mesh);</div><div class="line">        camera.position.set(<span class="number">-10</span>, <span class="number">8</span>, <span class="number">-10</span>);</div><div class="line">        camera.lookAt(<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<h3 id="1-2-Basic-demo-using-the-buffered-geometry-loader-with-an-animaiton-loop"><a href="#1-2-Basic-demo-using-the-buffered-geometry-loader-with-an-animaiton-loop" class="headerlink" title="1.2 - Basic demo using the buffered geometry loader with an animaiton loop."></a>1.2 - Basic demo using the buffered geometry loader with an animaiton loop.</h3><p>A basic example of the loader will involve creating an instance of the loader, and then calling the load method of that instance. When calling the load method you will want to pass at least two arguments to the method. The first argument is the url of the json file that you want to load, and the second argument is a callback method that will fire when the file is loaded, and ready to use. There are additional options when it comes to more advanced examples, but for now I am just going to stick with the buffer geometry loader alone.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> pl = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>, <span class="number">100</span>);</div><div class="line">pl.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">scene.add(pl);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> mesh = <span class="literal">null</span>;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">12</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">300</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> degree = <span class="number">360</span> * (frame / frameMax);</div><div class="line">    mesh.rotation.y = THREE.MathUtils.degToRad(degree);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LOADER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.BufferGeometryLoader();</div><div class="line"><span class="comment">// load a resource</span></div><div class="line">loader.load(</div><div class="line">    <span class="comment">// resource URL</span></div><div class="line">     <span class="string">'/json/static/box_house1_solid.json'</span>,</div><div class="line">    <span class="comment">// onLoad callback</span></div><div class="line">    (geometry) =&gt; &#123;</div><div class="line">        geometry.rotateX(<span class="built_in">Math</span>.PI * <span class="number">1.5</span>);</div><div class="line">        <span class="comment">// create a mesh with the geometry</span></div><div class="line">        <span class="comment">// and a material, and add it to the scene</span></div><div class="line">        mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">           geometry,</div><div class="line">            <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">                <span class="attr">color</span>: <span class="number">0x00ff0000</span>,</div><div class="line">                <span class="attr">emissive</span>: <span class="number">0x2a2a2a</span>,</div><div class="line">                <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">            &#125;));</div><div class="line">        scene.add(mesh);</div><div class="line">        loop();</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<p>The callback gives just one argument that is the final parsed geometry object from the given JSON text that was loaded. For this example I am just rotating the geometry to correct an issue with the orientation of the json file source, and then I am using it to create a mesh object. I can then add the mesh object to scene object, and start the app loop.</p>
<h2 id="2-Additional-callbacks-when-calling-the-load-method-of-the-buffer-geometry-loader"><a href="#2-Additional-callbacks-when-calling-the-load-method-of-the-buffer-geometry-loader" class="headerlink" title="2 - Additional callbacks when calling the load method of the buffer geometry loader"></a>2 - Additional callbacks when calling the load method of the buffer geometry loader</h2><p>If desired additional callbacks can be given to the load method for reporting load progress, and handing errors if they happen. One way to go about dong this is to just give additional callbacks when calling the load function of the buffer geometry loader. So when calling the load method the first argument should be a string value to the json file that I want to load, and then a callback when the file is loaded as usual. However after that I can give an additional callback that will fire when it comes to the progress of the file that is being loaded, and after that yet another that will fire for any errors that might happen.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> light = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>, <span class="number">100</span>);</div><div class="line">light.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">scene.add(light);</div><div class="line"><span class="keyword">const</span> light2 = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>, <span class="number">100</span>);</div><div class="line">light2.position.set(<span class="number">-2</span>, <span class="number">-2</span>, <span class="number">-2</span>);</div><div class="line">scene.add(light2);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LOAD/RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>); </div><div class="line"><span class="comment">// Loader</span></div><div class="line"><span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.BufferGeometryLoader();</div><div class="line"><span class="comment">// load a resource</span></div><div class="line">loader.load(</div><div class="line">    <span class="comment">// URL</span></div><div class="line">    <span class="string">'/forpost/threejs-buffer-geometry-loader/buffer-geo/three_2.json'</span>,</div><div class="line">    <span class="comment">// Load Done</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"> geometry </span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geometry, <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;&#125;));</div><div class="line">        scene.add(mesh);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// Progress</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"> xhr </span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log( (xhr.loaded / xhr.total * <span class="number">100</span>) + <span class="string">'% loaded'</span> );</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// Error</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"> err </span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log( <span class="string">'An error happened'</span> );</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<h2 id="The-JSON-Format"><a href="#The-JSON-Format" class="headerlink" title="The JSON Format"></a>The JSON Format</h2><p>For this section I am now looking at a few examples that have to do with creating json text from geometry, and also creating buffer geometry objects from JSON text. There are a number of methods of various classes and also native javaScript features. There is the toJSON method of the buffer geometry class, the JSON.parse method, JSON.stringify method and the parse method of the buffer geometry loader.</p>
<p>Most of the time I will want to load the JSON in the form of an external file. However there are situations in which I might want to parse some text that is going to be obtained by some other means. Also it makes sense to work out a few examples such as this to get a better sense of how to create buffer geometry by just hand coding data. This might not be the best idea in the long run of course, but if I keep the geometry super low poly it is not so bad.</p>
<h3 id="3-1-To-JSON-text-and-back"><a href="#3-1-To-JSON-text-and-back" class="headerlink" title="3.1 - To JSON text and back"></a>3.1 - To JSON text and back</h3><p>To create JSON text from a buffer geometry instance I will first want to call the to non indexed method of the buffer geometry class, and then call the to json method to get an object that is formatted the way that I want it. If I do not call the non index method I can end up with a format that will not work well with the parser of the buffer geometry loader as of r140. Anyway once I have the object that looks good I can then just pass that to the JSON.stringify method to get the text that can then in turn be saved as a json file that will then work with the parser.</p>
<p>If I have some text that I just simply want to parse I can create an instance of the Buffer Geometry Loader and call the parse method directly. When doing so I will want to pass the text to the JSON.parse method and then pass an object to the parser as it expected and object rather than text.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// BUFFER GEOMETRY TO TEXT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">1</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line"><span class="comment">// make sure to use to non indexed before calling to json</span></div><div class="line"><span class="keyword">const</span> buffObj = geo.toNonIndexed().toJSON();</div><div class="line"><span class="keyword">const</span> text = <span class="built_in">JSON</span>.stringify(buffObj);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// TEXT TO BUFFER GEOMETRY</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.BufferGeometryLoader();</div><div class="line"><span class="keyword">const</span> obj = <span class="built_in">JSON</span>.parse(text);</div><div class="line"><span class="keyword">const</span> geo2 = loader.parse( obj );</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo2)</div><div class="line">scene.add(mesh)</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="3-2-Hand-Coded-json-in-the-javaScript-file"><a href="#3-2-Hand-Coded-json-in-the-javaScript-file" class="headerlink" title="3.2 - Hand Coded json in the javaScript file"></a>3.2 - Hand Coded json in the javaScript file</h3><p>One great way to learn a lot about buffer geometry is to hand code buffer geometry, and then use the parse method of the buffer geometry loader to get a workable object. If I use backticks I can just directly key in some human readable JSON data, and just mainly punch in data for each vertex that I want. For this first demo like this I am just creating a position attribute, and now an index as well for this. </p>
<p>Once I have my JSON text I can then do what all ready works as I have found above by using the JSON.parse method to create an object from this text. Once I have a plain object I can then pass that to the parse method of the buffer geometry loader to get a geometry object that I can then use with THREE.Lines.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// TEXT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> text_buffgeo = <span class="string">`&#123;</span></div><div class="line">  "metadata":&#123;</div><div class="line">    "version":4.5,</div><div class="line">    "type":"BufferGeometry",</div><div class="line">    "generator":"Hand Coded"</div><div class="line">  &#125;,</div><div class="line">  "type":"BufferGeometry",</div><div class="line">  "data":&#123;</div><div class="line">    "attributes":&#123;</div><div class="line">      "position":&#123;</div><div class="line">        "itemSize":3,</div><div class="line">        "type":"Float32Array",</div><div class="line">        "array":[</div><div class="line">            -8, 2,-8,     0, -1,-8,    8, 0,-8,</div><div class="line">            -8, 4, 0,     0, 0, 0,    8, 0, 0,</div><div class="line">            -8, 2, 8,     0, -2, 8,    8, 0, 8</div><div class="line">        ],</div><div class="line">        "normalized":false</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    "index":&#123;</div><div class="line">      "type": "Uint16Array",</div><div class="line">      "array": [</div><div class="line">          1,0,3,  3,4,1,</div><div class="line">          4,3,6,  6,7,4,</div><div class="line">          5,4,7,  7,8,5,</div><div class="line">          2,1,4,  4,5,2</div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">`</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS - Using THREE.BufferGeometryLoader parse method</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.BufferGeometryLoader();</div><div class="line"><span class="keyword">const</span> geometry = loader.parse( <span class="built_in">JSON</span>.parse(text_buffgeo) );</div><div class="line"><span class="keyword">const</span> line = <span class="keyword">new</span> THREE.Line(geometry, <span class="keyword">new</span> THREE.LineBasicMaterial());</div><div class="line">scene.add(line);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">20</span>, <span class="number">10</span>, <span class="number">20</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera)</div></pre></td></tr></table></figure>
<h2 id="4-Using-the-Loading-Manager"><a href="#4-Using-the-Loading-Manager" class="headerlink" title="4 - Using the Loading Manager"></a>4 - Using the Loading Manager</h2><p>If I want to load more than one file, or i find myself in a situation in which I need to load not just better geometry, but other assets as well. Then I will want to start making use of the THREE.LoadingManager class to do so. This is a class that allows for me to create a single object to which I can attach callback functions that will fire when a whole bunch of loading has been completed. In this section then I will be going over a few examples that make use of this loading manager class starting out with some very basic ones.</p>
<h3 id="4-1-A-loading-manager-hello-world-example"><a href="#4-1-A-loading-manager-hello-world-example" class="headerlink" title="4.1 - A loading manager hello world example"></a>4.1 - A loading manager hello world example</h3><p>To start out with this I just create an instance of the THREE.loadingManager class, after that I will want to attach at least an onLoad handler for the manager. There are a number of other handlers of course, but this is a very basic getting started example so for now I am just going to care about that. Anyway once I have my loading manager class i can pass that as the first argument for a call of the load method of a buffer geometry class instance. </p>
<p>When the loading is done with the buffer geometry loader the on load method will fire and in that call back I then render my over all scene. This might not be much of an improvement from the basic example in this post, but things will become more clear as we get into more complex examples in this section.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> pl = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>, <span class="number">100</span>);</div><div class="line">pl.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">scene.add(pl);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LOADING MANAGER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> manager = <span class="keyword">new</span> THREE.LoadingManager();</div><div class="line">manager.onLoad = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Done Loading'</span>);</div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// BUFFER GEOMETRY LOADER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> onBufferGeometryLoad =  <span class="function">(<span class="params">geometry</span>) =&gt;</span> &#123;</div><div class="line">    geometry.rotateX(<span class="built_in">Math</span>.PI * <span class="number">1.50</span>);</div><div class="line">    geometry.rotateY(<span class="built_in">Math</span>.PI * <span class="number">1.10</span>);</div><div class="line">    <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">       geometry,</div><div class="line">        <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0x00ff0000</span>,</div><div class="line">            <span class="attr">emissive</span>: <span class="number">0x2a2a2a</span>,</div><div class="line">            <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">        &#125;));</div><div class="line">    scene.add(mesh);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.BufferGeometryLoader(manager);</div><div class="line">loader.load(<span class="string">'/json/static/box_house1_solid.json'</span>, onBufferGeometryLoad);</div></pre></td></tr></table></figure>
<h3 id="4-2-Loading-more-than-one-geometry"><a href="#4-2-Loading-more-than-one-geometry" class="headerlink" title="4.2 - Loading more than one geometry"></a>4.2 - Loading more than one geometry</h3><p>For this next demo I am doing more or less the same thing as the first one, but now I am just making many calls of the load method of the buffer geometry loader. The only goal with this demo is to just simply load more than one geometry and then render the over all scene only after all of the external geometries have been  loaded. There is a whole lot more ground to cover when it comes to this sort of thing of course when it comes to additional handers for the manager, and also situations in which I might want to have more then one instance of the loader I am using and so forth. There is also the issue of the order in which the objects are loaded and that this will not always be the same each time. However for this example the basic idea of what a loading manager is good for should be clear all ready. I am loading a whole bunch of external geometry objects and the on load hander function files when all of it is done loading.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> pl = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>, <span class="number">100</span>);</div><div class="line">pl.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">scene.add(pl);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LOADING MANAGER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">-10</span>, <span class="number">15</span>, <span class="number">15</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> manager = <span class="keyword">new</span> THREE.LoadingManager();</div><div class="line">manager.onLoad = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Done Loading'</span>);</div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// BUFFER GEOMETRY LOADER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> object_index = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> onBufferGeometryLoad =  <span class="function">(<span class="params">geometry</span>) =&gt;</span> &#123;</div><div class="line">    geometry.rotateX(<span class="built_in">Math</span>.PI * <span class="number">1.50</span>);</div><div class="line">    geometry.rotateY(<span class="built_in">Math</span>.PI * <span class="number">1.10</span>);</div><div class="line">    <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">       geometry,</div><div class="line">        <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0x00ff0000</span>,</div><div class="line">            <span class="attr">emissive</span>: <span class="number">0x2a2a2a</span>,</div><div class="line">            <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">        &#125;));</div><div class="line">    scene.add(mesh);</div><div class="line">    mesh.position.set(<span class="number">6</span> * object_index,<span class="number">0</span>, <span class="number">1.8</span> * object_index);</div><div class="line">    object_index += <span class="number">1</span>;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.BufferGeometryLoader(manager);</div><div class="line">loader.load(<span class="string">'/json/static/box_house1_solid.json'</span>, onBufferGeometryLoad);</div><div class="line">loader.load(<span class="string">'/json/static/cube_thing.json'</span>, onBufferGeometryLoad);</div><div class="line">loader.load(<span class="string">'/json/static/wheel.json'</span>, onBufferGeometryLoad);</div></pre></td></tr></table></figure>
<h3 id="4-3-Return-a-promise-helper-function"><a href="#4-3-Return-a-promise-helper-function" class="headerlink" title="4.3 - Return a promise helper function"></a>4.3 - Return a promise helper function</h3><p>There is much more to this than just loading more than one json file of course. Often it seems that a lot of the problems that I run into have to do with things like how to go about parsing all of these json files into some kind of standard collection of objects to which I can then clone as needed in an over all project. However there are also things like just simply having some kind of helper function where I just pass an array of urls to each file that I want to load, and also have this helper function return a promise.</p>
<p>In an over all project I might be in some kind of situation in which I have to make sure that all the files that I need are loaded until I move on to the next thing, and the way that I do so is to return a promise object. So then I just need some kind of helper function that will resolve in the onLoad method of the loading manager. Also when I resolve the promise I can also pass a scene object that contains a collection of mesh objects as children, and each mesh object contains of course the geometry of the JSON file that was loaded.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> loadBufferGeometryJSON = <span class="function">(<span class="params"> urls = [], w = <span class="number">2</span>, scale = <span class="number">5</span>, material = <span class="keyword">new</span> THREE.MeshNormalMaterial(</span>) ) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> scene_source = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    <span class="keyword">const</span> onBuffLoad =  <span class="function">(<span class="params">geometry, i</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> x = i % w;</div><div class="line">        <span class="keyword">const</span> z = <span class="built_in">Math</span>.floor( i / w);</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geometry, material);</div><div class="line">        mesh.name = <span class="string">'buffer_source_'</span> + i;</div><div class="line">        mesh.position.set(x, <span class="number">0</span>, z).multiplyScalar(scale);</div><div class="line">        scene_source.add(mesh);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">const</span> onBuffProgress =  <span class="function">(<span class="params">geometry</span>) =&gt;</span> &#123;&#125;;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params"> resolve, reject </span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> manager = <span class="keyword">new</span> THREE.LoadingManager();</div><div class="line">        manager.onLoad = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            resolve(scene_source);</div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">const</span> onBuffError =  <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</div><div class="line">           reject(err);</div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.BufferGeometryLoader(manager);</div><div class="line">        urls.forEach( <span class="function">(<span class="params">url, index</span>) =&gt;</span> &#123;</div><div class="line">            loader.load(url, (geometry) =&gt; &#123; onBuffLoad(geometry, index) &#125;, onBuffProgress, onBuffError);</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GRID/ LIGHT / CAMERA POS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> grid = <span class="keyword">new</span> THREE.GridHelper(<span class="number">100</span>, <span class="number">10</span>);</div><div class="line">scene.add(grid)</div><div class="line"><span class="keyword">const</span> pl = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>, <span class="number">100</span>);</div><div class="line">pl.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">scene.add(pl);</div><div class="line">camera.position.set(<span class="number">-20</span>, <span class="number">15</span>, <span class="number">17</span>);</div><div class="line">camera.lookAt(<span class="number">5</span>,<span class="number">0</span>,<span class="number">10</span>);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// BUFFER GEOMETRY LOADER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material =  <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">vertexColors</span>: <span class="literal">true</span>, <span class="attr">side</span>: THREE.DoubleSide &#125;);</div><div class="line">loadBufferGeometryJSON([</div><div class="line">   <span class="string">'/json/vertcolor-trees/6tri/0.json'</span>,</div><div class="line">   <span class="string">'/json/vertcolor-trees/6tri/1.json'</span>,</div><div class="line">   <span class="string">'/json/vertcolor-trees/6tri/2.json'</span>,</div><div class="line">   <span class="string">'/json/vertcolor-trees/6tri/3.json'</span>,</div><div class="line">   <span class="string">'/json/vertcolor-trees/6tri/4.json'</span></div><div class="line">], <span class="number">2</span>, <span class="number">10</span>, material).then( <span class="function">(<span class="params">scene_source</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'JSON files are loaded!'</span>);</div><div class="line">    scene.add( scene_source );</div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;).catch( <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.warn(<span class="string">'No Good.'</span>);</div><div class="line">    <span class="built_in">console</span>.warn(e);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>There are many more loaders, some of which do more than just load geometry after all there are many other kinds of assets to use rather than just geometry such as textures, and materials. It is possible to load other assets besides just geometry as well with some of the built in loaders, however maybe those are all matters for another post. </p>
<p>In this post I also did not get into depth about Buffer Geometry Constructor, and why it is that you might want to use Buffered geometry over the plain old <a href="/2018/04/14/threejs-geometry/">Geometry Constructor</a> which is now no longer part of the core of three.js itself as of r127 forward.</p>
<p>Another project that might be worth checking out is my <a href="/2021/06/25/threejs-examples-dae-tools">dae tools threejs example</a>. This is a project where I am building on top of the DAE file loader, and in late versions of the example I have worked out some methods that have to go with converting dae files to buffer geometry json files.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2018/04/12/threejs-buffer-geometry-loader/" data-id="cllo1crcj02kz60v18e98rogd" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2018/04/12/threejs-buffer-geometry-loader/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/04/13/threejs-orbit-controls/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Orbit controls for threejs from the project itself
        
      </div>
    </a>
  
  
    <a href="/2018/04/11/threejs-spotlights/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Spotlights in three.js, creating them, and updating them.</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2018/04/12/threejs-buffer-geometry-loader/index.html';
    this.page.identifier = '172';
    this.page.title = 'The Buffer Geometry loader in three.js';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.38px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.48px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.33px;">angular</a> <a href="/tags/animation/" style="font-size: 11.9px;">animation</a> <a href="/tags/automation/" style="font-size: 11.9px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.38px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.71px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.57px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.86px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.95px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.43px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.81px;">electronjs</a> <a href="/tags/express/" style="font-size: 17.14px;">express</a> <a href="/tags/games/" style="font-size: 17.62px;">games</a> <a href="/tags/git/" style="font-size: 13.81px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15.24px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.9px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.76px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.48px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.43px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 18.1px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.57px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.76px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.52px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.1px;">phaser</a> <a href="/tags/python/" style="font-size: 16.19px;">python</a> <a href="/tags/statistics/" style="font-size: 14.29px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.05px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.67px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/08/23/threejs-sprite/">Sprite Objects, and 2d overlays in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/17/threejs-buffer-geometry-attributes-tangent/">The tangent attribute of buffer geometry and normal maps in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/10/threejs-matcap-material/">The Matcap material in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/02/threejs-matrix4/">Matrix4 Objects in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/01/linux-folders/">Linux Root Folders</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2018/04/12/threejs-buffer-geometry-loader/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>