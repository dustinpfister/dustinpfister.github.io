<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner_2023.png">
  
  <title>Materials in threejs an overview of options and features | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2018/04/30/threejs-materials/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="In threejs there are a few materials to choose from to help skin a mesh object that all share the same common base Material class. There are also additional materials for rendering lines, points, and">
<meta property="og:type" content="article">
<meta property="og:title" content="Materials in threejs an overview of options and features">
<meta property="og:url" content="https://dustinpfister.github.io/2018/04/30/threejs-materials/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="In threejs there are a few materials to choose from to help skin a mesh object that all share the same common base Material class. There are also additional materials for rendering lines, points, and">
<meta property="og:updated_time" content="2023-08-17T18:29:26.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Materials in threejs an overview of options and features">
<meta name="twitter:description" content="In threejs there are a few materials to choose from to help skin a mesh object that all share the same common base Material class. There are also additional materials for rendering lines, points, and">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-materials" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/04/30/threejs-materials/" class="article-date"> Published:
  <time datetime="2018-04-30T13:14:00.000Z" itemprop="datePublished">2018-04-30</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2018/04/30/threejs-materials/" class="article-date"> Modified:
  <time datetime="2023-08-17T18:29:26.000Z" itemprop="dateModified">2023-08-17</time>
</a>

    <span class="article-date">V1.122</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Materials in threejs an overview of options and features
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>In <a href="https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene" target="_blank" rel="external">threejs</a> there are a few materials to choose from to help skin a mesh object that all share the same common base <a href="https://threejs.org/docs/index.html#api/en/materials/Material" target="_blank" rel="external">Material class</a>. There are also additional materials for rendering lines, points, and sprites that stand out from the various materials that are used to change the look of of the typical mesh object. There is also the shader material that is a good way to get started with raw GLSL code, but with training wheels thanks to the shader lib of threejs, that is used to author custom shaders, and thus do just about everything that can be done with materials in a web browser by way of full power that is WebGL. There is then also the Raw Shader material in which one will drop kick the shader lib to the curb and just work directly with GLSL by itself.</p>
<p>There are materials that will respond to a light source, and then there are materials that will not. When it comes to materials that respond to light some will preform a little better than others, but will result in a less than desirable look compared to others that are a little more resource heavy but deliver in the looks department. When it comes to mesh materials that will not respond to a light source there are materials like the basic mesh material that is a good choice when it comes to just having a simple color map for the mesh. There are a few other materials that render textures based on the state of the normal attribute of the geometry used, or based on the depth in terms of a distance from the camera.</p>
<p>There is a whole lot to take in when it comes to materials, so this post will serve as a general overview of the materials in general in threejs then, not just as a starting point, but also as a fairly comprehensive post on the subject. However this will not be a truly comprehensive post on materials alone in threejs mind you as once one gets into custom shaders you will start to understand that even this post is not a even a drop in the bucket with this subject. As I have stated, just above there is the matter of GLSL code which is short for openGL Shader Language, so in other worlds when it comes to getting into THREE.ShaderMaterial, and THREE.RawShaderMaterial there is a whole language to learn.</p>
<p>I will start out this post with a whole lot of basic examples that at least touch base on various materials related subjects to be begin with. For example there is just simply having a simple \”I am bender, please insert girder\” type example of just simply adding texture to a material, but then also have a whole section in this post on just the subject of textures alone with materials.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/J7iGSqVXyzM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="Materials-in-threejs-and-what-to-know-first"><a href="#Materials-in-threejs-and-what-to-know-first" class="headerlink" title="Materials in threejs and what to know first"></a>Materials in threejs and what to know first</h2><p>This is not my <a href="/2018/04/04/threejs-getting-started/">getting started post on threejs</a>, if you are new to threejs you might choose to start with a post in which the basics of the library are covered. I assume you have basic knowledge of how to make a threejs project, and now only seek to have a deeper understanding of materials to work with when it comes to creating mesh objects. Also even if you have some experience with threejs there is a whole lot of other topics that branch off from the use of materials of course, much of which I will at least touch base on in this post. Still in this section I will be writing about a few things that you might want to read up more on regardless of experience, before reading this post in part or full.</p>
<iframe class="youtube_video" src="https://www.youtube.com/embed/EouYzHldZd8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h3 id="The-color-class-and-the-color-and-emissive-options-of-materials"><a href="#The-color-class-and-the-color-and-emissive-options-of-materials" class="headerlink" title="The color class, and the color and emissive options of materials"></a>The color class, and the color and emissive options of materials</h3><p>The <a href="/2021/05/03/threejs-color">Color class</a> can prove to be useful for creating color values for the various material options that expect a color for the value. Also it is a helpful tool for working with color in general. For example it can be used in the process of creating a color from some expressions that compute values for each color channel and then the get style method can be used to get a string values that can be used to set the fill or stroke style when drawing to a canvas element</p>
<p>Speaking of color many materials have a way to set a color option for the material, but how this works will change a little from one material to another. For example the basic material will not do anything with light, so when a solid color is set for the basic material that will just be the solid color for all the faces of the geometry used in the mesh. This might lead one to assume that will be the case in all other materials, but that is not true. The color property in the standard material is more or less the same thing, but it works in conjunction with what is going on when it comes to light in a scene. So if I set a solid color for an instance of a standard material, but do not add light to a scene, then I will not see anything. So when it comes to the standard material there is another property that comes into play called the emissive property. It is this emissive property that I use to set a color that will always show up not matter what when it comes to what might be going on with light.</p>
<h3 id="Lots-of-overlap-with-Materials-and-Geometry"><a href="#Lots-of-overlap-with-Materials-and-Geometry" class="headerlink" title="Lots of overlap with Materials and Geometry"></a>Lots of overlap with Materials and Geometry</h3><p>There is a lot of overlap between materials and geometry of course so you might want to read more on the <a href="/2021/04/22/threejs-buffer-geometry/">subject of geometry in general</a> then. For example certain features of materials will not work at all if corresponding attributes of the geometry are not there such as the Vertex Colors options of the base material class which will not work if there is no color attribute in the geometry.</p>
<p>Speaking of buffer geometry attributes it might not be such a bad idea to look into what the <a href="/2021/06/07/threejs-buffer-geometry-attributes-position/">position</a>, <a href="/2021/06/08/threejs-buffer-geometry-attributes-normals">normal</a>, and <a href="/2021/06/09/threejs-buffer-geometry-attributes-uv/">uv</a> attributes of a geometry are if you have not done so at this time.</p>
<h3 id="Source-is-also-on-Github"><a href="#Source-is-also-on-Github" class="headerlink" title="Source is also on Github"></a>Source is also on Github</h3><p>The source for these examples is <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-materials" target="_blank" rel="external">also on Github</a> in my test threejs repo. In the specific folder for this post I also have additional notes when it comes to future edits, as well as links to additional resources and so forth. </p>
<p>This test threejs repo is also where I place all the source code that I work out for my many <a href="/categories/three-js/">other blog posts on various threejs topics</a> as well.</p>
<h3 id="Version-number-matters-with-three-js"><a href="#Version-number-matters-with-three-js" class="headerlink" title="Version number matters with three.js"></a>Version number matters with three.js</h3><p>Threejs is a project in which the version number matters a whole lot as older posts on threejs often contain examples that will break on newer revisions and vise versa. When I first started writing this post I was using <a href="https://github.com/mrdoob/three.js/tree/r91" target="_blank" rel="external">three.js 0.91.0 (r91)</a>. However the last time I came around to edit this post I updated all of the demos to what I have layed down for my <a href="https://github.com/dustinpfister/test_threejs/blob/master/views/demos/r146/README.md" target="_blank" rel="external">r146 style rules</a>. This means that for the demos in this post I am still using plain javaScript script tags over that of modules type script tags. </p>
<p>However r146 will be the last revision in which I will be using plain text/javaScript mime type script tags as future code style rules will observe the use of module type script tags. There are a whole lot of code breaking changes up ahead that I will not be getting into detail about here. However I will say that it is as always very important to know what revision you are using, and also what revision an author of content might have used when writing a post such as this.</p>
<h2 id="1-Basic-getting-started-type-exmaples-of-matreials"><a href="#1-Basic-getting-started-type-exmaples-of-matreials" class="headerlink" title="1 - Basic getting started type exmaples of matreials"></a>1 - Basic getting started type exmaples of matreials</h2><p>There is a whole lot to say about materials in general, so this is going to be a very lengthy post. However there is just going over a few very basic examples of materials that should help to address most general concerns when first getting started with materials. There are for example a number of options for mesh materials that will help to show depth right away without getting too in depth with lights and various more advanced options. However there is still getting into some of those more advanced options just in a simple striped down way. There are also a lot of things that I would like to at least touch base on here that I will then expand more with in later more advanced sections in this post.</p>
<h3 id="1-1-First-Things-First-A-Basic-Mesh-example"><a href="#1-1-First-Things-First-A-Basic-Mesh-example" class="headerlink" title="1.1 - First Things First, A Basic Mesh example"></a>1.1 - First Things First, A Basic Mesh example</h3><p>One of the best ways to get started is to just create a geometry with one of the built in geometry class constructor functions such as THREE.BoxGeometry to create the geometry for a mesh object. When it comes to a mesh material options that will help show some depth without a light source a good one for that would be the mesh normal material. I will be going over what all the mesh material options are in a section later in this post, but for now there is just getting this very first simple demo up and working.</p>
<p>So after setting up the usual collection of objects when it comes to things like the main scene object, camera, and renderer I then create an instance of the mesh normal material. When doing so I am not going to bother with any options at all. There are of course options for the mesh normal material, as well as base material class options as well as a whole lot about geometry as well. However much of that will have to come up in later examples in this section and post over all.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'blue'</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// INSTANCE OF THE NORMAL MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshNormalMaterial();</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH with Box Geometry with the </span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">scene.add(<span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), material ));</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.3</span>, <span class="number">1.5</span>, <span class="number">1.3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="1-2-More-than-one-kind-of-object-so-more-than-one-kind-of-material"><a href="#1-2-More-than-one-kind-of-object-so-more-than-one-kind-of-material" class="headerlink" title="1.2 - More than one kind of object, so more than one kind of material"></a>1.2 - More than one kind of object, so more than one kind of material</h3><p>Most of the time I do very much use mesh objects, but there are also line and point objects as well that can be used as a way to display some content. For this example then I am creating a mesh and using the basic material for the mesh. This will often result in just a solid mass of color in the canvas when just used with the color option and nothing else. There are ways of dealing with this such as using a texture as a way to show some depth with this kind of material, but another way would be to add points, lines or both in this case as child objects of the mesh which is the main focus of this demo.</p>
<p>When it comes to using a line I must use the LineBasicMaterial or the LineBasicMaterial. When it comes to points there is just the point material alone that can be used to add style to these kinds of objects. There are some options that are just for each kind of material alone. For example the size option is just for points, and the lineWidth options is just for lines. However there are common options as well such as color in this example that are gained from the common base material class.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'blue'</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIALS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material_mesh = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0x00ffff</span> &#125;);</div><div class="line"><span class="keyword">const</span> material_line = <span class="keyword">new</span> THREE.LineBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0xffffff</span>, <span class="attr">linewidth</span>: <span class="number">6</span>&#125;);</div><div class="line"><span class="keyword">const</span> material_points = <span class="keyword">new</span> THREE.PointsMaterial(&#123; <span class="attr">color</span>: <span class="number">0xff0000</span>, <span class="attr">size</span>: <span class="number">0.25</span> &#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="keyword">const</span> geometry_edge = <span class="keyword">new</span> THREE.EdgesGeometry( geometry );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geometry, material_mesh );</div><div class="line">mesh.add( <span class="keyword">new</span> THREE.LineSegments( geometry_edge, material_line ) );</div><div class="line">mesh.add( <span class="keyword">new</span> THREE.Points( geometry_edge, material_points ) );</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.3</span>, <span class="number">1.5</span>, <span class="number">1.3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="1-3-Just-getting-started-with-texture-and-materials"><a href="#1-3-Just-getting-started-with-texture-and-materials" class="headerlink" title="1.3 - Just getting started with texture and materials"></a>1.3 - Just getting started with texture and materials</h3><p>One of the first things that many will want to figure out right away is how to go about getting started with textures and how to apply these textures to objects. Of course there is a great deal to cover when it comes to this, and not just with respect to the lengthy volume of options for materials that will take a texture as the value. There is a great deal of overlap with geometry as well when it comes to advanced topics surrounding the uv attribute of geometry and so forth. Still one has to start somewhere when it comes to textures and materials, so lets start out with a basic example of that then.</p>
<p>Although there is a lot to say about the geometry on top of the material option used, for this demo the focus is just going to be on how to get a texture to begin with. There is of course loading one or more images and then using those images as a way to create texture object. However there is also the subject of how to go about creating textures by way of some javaScript code. With that said the best way to go about doing that might very well be by way of canvas textures. This is a way to go about creating a texture object by passing a canvas element, and when it comes to creating the content of that canvas one can use everything there is to work with when it comes to the 2d drawing context, or any context for that matter.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">.025</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CANVAS ELEMENT, 2D DRAWING CONTEXT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>), ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas.width = <span class="number">32</span>; canvas.height = <span class="number">32</span>;</div><div class="line">ctx.lineWidth = <span class="number">5</span>;</div><div class="line">ctx.strokeStyle = <span class="string">'#ff0000'</span>;</div><div class="line">ctx.strokeRect(<span class="number">4</span>, <span class="number">4</span>, canvas.width - <span class="number">8</span>, canvas.height - <span class="number">8</span>);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CANVAS TEXTURE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> texture = <span class="keyword">new</span> THREE.CanvasTexture(canvas);</div><div class="line">texture.magFilter = THREE.NearestFilter;</div><div class="line">texture.minFilter = THREE.NearestFilter;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIAL - using basic material with the map option</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">map</span>: texture &#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY, MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geo, material);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.25</span>, <span class="number">1.25</span>, <span class="number">1.25</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>Although a demo like this might be a good start there is a whole lot more to be aware of when it comes to textures, features of geometry objects such as the UV attribute, and of course a massive amount of things to be aware of when it comes to material options and textures. What there is to work with in terms of material options will change form one material to the next. Also the way that options work will change form material to material as well including this map option as it will not work the same way as with the Basic Material in other mesh material options such as the Phong material. Be sore to read on with my Mesh Materials section and the textures section in this post for more details with this.</p>
<h3 id="1-4-Arrays-of-materials"><a href="#1-4-Arrays-of-materials" class="headerlink" title="1.4 - Arrays of materials"></a>1.4 - Arrays of materials</h3><p>One of the many subjects that I see being overlooked in other blog posts on materials in general is the subject of using an array of materials rather than just one for a display object. This subject alone can quickly turn into a time consuming black hole if one lets it become that and I have many times done just that over the years. There is a lot of overlap with this subject as there is not just simply passing an array of materials but also adding or changing the state of the groups property of the geometry.</p>
<p>For the sake of this basic section demo though there is just using the box geometry constructor as this has a groups property set up to begin with. Also on top of that the groups are set up to make use of six materials one for each side of the box which would often be the case when doing this sort of thing. So to get started with this as least one will just need to pass an array of six materials rather than just one when making the mesh object that will use the box geometry.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) ); </div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    [</div><div class="line">        <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0xff0000</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.5</span>, <span class="attr">side</span>: THREE.DoubleSide &#125;),</div><div class="line">        <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0x00ff00</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">1.0</span>, <span class="attr">side</span>: THREE.DoubleSide &#125;),</div><div class="line">        <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0x0000ff</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.5</span>, <span class="attr">side</span>: THREE.DoubleSide &#125;),</div><div class="line">        <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0xffff00</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">1.0</span>, <span class="attr">side</span>: THREE.DoubleSide &#125;),</div><div class="line">        <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0xffffff</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.5</span>, <span class="attr">side</span>: THREE.DoubleSide &#125;),</div><div class="line">        <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0x00ffff</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">1.0</span>, <span class="attr">side</span>: THREE.DoubleSide &#125;)</div><div class="line">    ]</div><div class="line">);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">0.75</span>, <span class="number">1</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>Do not let this fool you though if you thing that this is how to add texture to 3d objects. The first and foremost way to do this would typically be to use just one material, with one texture, and a well worked out uv attributive for the geometry. However some times there are in fact situations in which it would be a good idea to use more than one material, and this is how to get started with it. Once again the groups are set up to begin with in this demo though, so when it comes to working on an asset of some kind one might need to work out the state of the groups array. I have a more advanced section in this post where I get into this subject more in depth, with demos that make use of the add group method of the buffer geometry class for example.</p>
<h3 id="1-5-UV-mapping-and-textures"><a href="#1-5-UV-mapping-and-textures" class="headerlink" title="1.5 - UV mapping and textures"></a>1.5 - UV mapping and textures</h3><p>Although an array of materials can be used as a way to skin each side of a Box Geometry, this is not the way to go about skinning a geometry in general. The first and foremost way to skin a Box Geometry, or any geometry for that matter is to create, or in this case mutate the values of the <a href="/2021/06/09/threejs-buffer-geometry-attributes-uv/">uv attribute</a>. This attribute of a geometry contains offset values for each point in the <a href="/2021/06/07/threejs-buffer-geometry-attributes-position/">position attribute</a> of the geometry which is the actual points in space.</p>
<p>Anyway when it comes to a box geometry the UV attribute is set up for us to begin with. However by default the values are set in such a way that all of the content of the texture will be used for all of the faces of the box. Often this might very well be what I would want to happen when creating this kind of geometry anyway. However in some cases I might want to map just one area of a texture to one face, and then another area to another face and so forth. To do that I will need to write a little logic to set the values of the uv attributes to what I want for that kind of situation which is what I am doing in this demo.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">.025</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CANVAS ELEMENT, 2D DRAWING CONTEXT, TEXTURE - Whole Bunch of cells</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>), ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas.width = <span class="number">1024</span>; canvas.height = <span class="number">1024</span>;</div><div class="line">ctx.fillStyle = <span class="string">'#ffffff'</span>;</div><div class="line">ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line"><span class="keyword">const</span> w = <span class="number">8</span>;</div><div class="line"><span class="keyword">const</span> wp = canvas.width / w;</div><div class="line"><span class="keyword">const</span> len = w * w;</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">ctx.textBaseline = <span class="string">'middle'</span>;</div><div class="line">ctx.textAlign = <span class="string">'center'</span>;</div><div class="line">ctx.font = <span class="string">'100px arial'</span>;</div><div class="line">ctx.lineWidth = <span class="number">3</span>;</div><div class="line"><span class="keyword">while</span>( i  &lt; len )&#123;</div><div class="line">    <span class="keyword">const</span> a_cell = (i + <span class="number">5</span>) / (len + <span class="number">15</span>);</div><div class="line">    <span class="keyword">const</span> x = i % w;</div><div class="line">    <span class="keyword">const</span> y = <span class="built_in">Math</span>.floor( i / w );</div><div class="line">    ctx.fillStyle = <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, a_cell, <span class="number">1</span> - a_cell).getStyle();</div><div class="line">    ctx.fillRect(x * wp, y * wp, wp, wp);</div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.strokeStyle = <span class="string">'#5f5f5f'</span>;</div><div class="line">    ctx.fillText(i, x * wp + wp / <span class="number">2</span>, y * wp + wp / <span class="number">2</span>);</div><div class="line">    ctx.strokeText(i, x * wp + wp / <span class="number">2</span>, y * wp + wp / <span class="number">2</span>);</div><div class="line">    i += <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> texture = <span class="keyword">new</span> THREE.CanvasTexture(canvas);</div><div class="line">texture.magFilter = THREE.NearestFilter;</div><div class="line">texture.minFilter = THREE.NearestFilter;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIAL - using basic material with the map option and the texture from canvas</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">    <span class="attr">map</span>: texture</div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY - mutation of uv attribute</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="keyword">const</span> att_uv = geo.getAttribute(<span class="string">'uv'</span>);</div><div class="line"><span class="keyword">const</span> cellX = <span class="number">5</span>, cellY = <span class="number">3</span>; <span class="comment">// cellX and cellY can be used to set the cell to draw in the texture</span></div><div class="line"><span class="keyword">const</span> cx = <span class="number">1</span> / w * cellX;</div><div class="line"><span class="keyword">const</span> cy = <span class="number">1</span> / w * cellY;</div><div class="line"><span class="keyword">const</span> faceIndex = <span class="number">2</span>; <span class="comment">// the face index to use</span></div><div class="line"><span class="keyword">const</span> i2 = faceIndex * <span class="number">4</span>;</div><div class="line">att_uv.setXY(i2,     <span class="number">0.000</span> + cx, <span class="number">1.000</span> - cy);</div><div class="line">att_uv.setXY(i2 + <span class="number">1</span>, <span class="number">0.125</span> + cx, <span class="number">1.000</span> - cy);</div><div class="line">att_uv.setXY(i2 + <span class="number">2</span>, <span class="number">0.000</span> + cx, <span class="number">0.875</span> - cy);</div><div class="line">att_uv.setXY(i2 + <span class="number">3</span>, <span class="number">0.125</span> + cx, <span class="number">0.875</span> - cy);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geo, material);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.25</span>, <span class="number">1.25</span>, <span class="number">1.25</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>So what is going on with this demo on basic UV mapping and materials is that once again I am just passing a texture for the map option of an instance of the Basic Material. However this time when it comes to the nature of the texture I have worked out a little logic where I am drawing a whole bunch of cells in the texture. I will then want to have a way to draw a given cell in the texture to a given face index, and that is what I am doing with the additional logic that has to do with the mutation of the UV attribute values.</p>
<p>There is a whole lot more to write about this sort of subject of course that I will have to get into more later in this post in the texture section. However I wanted to work out at least one basic section demo of this along with the material array index values demo just to make it clear right away that an array of materials and the groups array is just one tool that is not a replacement for UV mapping.</p>
<h3 id="1-6-A-Basic-Starting-example-of-light-and-a-material-that-will-work-with-light"><a href="#1-6-A-Basic-Starting-example-of-light-and-a-material-that-will-work-with-light" class="headerlink" title="1.6 - A Basic Starting example of light and a material that will work with light"></a>1.6 - A Basic Starting example of light and a material that will work with light</h3><p>There is a whole lot of get into when it comes to the subject of adding light to a scene, and using materials that will work with one or more light sources. With that said I do very much have an advanced section in this post in which I get into this subject in depth. However this is still very much the basic section  of the post so if you just simply want to get started with light the demo I have here should be just that.</p>
<p>First off not all mesh material options will even work with a light source to begin with. So if you are using say the MeshBasicMaterial and wondering why it is that the light source you added is not working that is why. I have a section in this post in which I go over the various options for mesh materials, including the ones that will work with light, but for now I am just going to go with the Phong Material.</p>
<p>When working with a material that will respond to light sources the color option of the material will be the color that will show up to one extent or another depending on what the situation is with lighting. If you are wondering if there is another kind of material option that will define a color that will always show up regardless of what is going on with light the typical option for that in most mesh material options is the emissive color option. Be default this is set to black, so you might want to set it to something other than black if you want to use this color option. There is then also adjusting that by way of the emissive Intesnity option. The Phong material has a few other options that are relevant to the use of light such as the specular color and the shininess options.</p>
<p>There is then the question of what kind of light source to add. I will not be getting into depth here with that of course, so for now I think a good starting option for that might be directional light.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">.025</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="number">0xff0000</span>,</div><div class="line">    <span class="attr">emissive</span>: <span class="number">0x2a2a2a</span>,</div><div class="line">    <span class="attr">emissiveIntensity</span>: <span class="number">0.15</span>,</div><div class="line">    <span class="attr">specular</span>: <span class="number">0x8f8f8f</span>,</div><div class="line">    <span class="attr">shininess</span>: <span class="number">12</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LIGHT SOURCE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">3</span>, <span class="number">4</span>, <span class="number">-2</span>).normalize();</div><div class="line">scene.add(dl);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY / MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">1</span>, <span class="number">60</span>, <span class="number">60</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geo, material);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>So this might be a good starting point for light but there is still a whole lot more to read about when it comes to the various material options that a relevant to the use of light. There are a number of various texture map options for example, and also various little details from one mesh object to the next. If you want to read more on this there is the advanced light section later in this post in which I will be expanding more on this topic.</p>
<h3 id="1-7-More-than-one-map-option-when-it-comes-to-textures"><a href="#1-7-More-than-one-map-option-when-it-comes-to-textures" class="headerlink" title="1.7 - More than one map option when it comes to textures"></a>1.7 - More than one map option when it comes to textures</h3><p>In this section I all ready covered a basic example of getting started with texture. However that demo would just make use of the map option of the mesh basic material. Just using that map option of that material alone is not such a bad idea mind you, that can prove to be a simple way of just getting what I want to do done and then move on with things. However now that I covered a demo in this section that has to do with light I can now write about the emissive map option that is often found in materials that work with light sources. While I am at it I should also maybe make this demo about another typical map option that is found in most materials such as the alpha map option.</p>
<p>You see when using the basic material the texture that I give by way of the map option will just show up, but when I give such a texture to a material like the standard material the map texture will only should up for parts of the mesh where light it hitting the surface. So then this is where the emissive map comes into play, and with that the emissive color option and other standard material options such as emissive intensity. This emissive map will show up regardless of what is going on with light, however I will want to make sure that I am setting the color to something other than the default black color, and I might also want to adjust the intensity when using these kinds of maps. </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CAMERA RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">10</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> canvas_texture_grid = <span class="function">(<span class="params"> grid, size = <span class="number">4</span>, palette = <span class="literal">null</span> </span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">    <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    canvas.width = size;</div><div class="line">    canvas.height = size;</div><div class="line">    grid.forEach( <span class="function">(<span class="params">a, i</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> x = i % canvas.width;</div><div class="line">        <span class="keyword">const</span> y = <span class="built_in">Math</span>.floor( i / canvas.width );</div><div class="line">        <span class="keyword">if</span>(palette)&#123;</div><div class="line">            ctx.fillStyle = palette[a];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(!palette)&#123;</div><div class="line">            ctx.fillStyle = <span class="keyword">new</span> THREE.Color( a, a, a).getStyle();</div><div class="line">        &#125;</div><div class="line">        ctx.fillRect( x, y, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> texture = <span class="keyword">new</span> THREE.CanvasTexture(canvas);</div><div class="line">    texture.magFilter = THREE.NearestFilter;</div><div class="line">    <span class="keyword">return</span> texture;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// TEXTURES</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> texture_map = canvas_texture_grid([</div><div class="line">   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">   <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>,</div><div class="line">   <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>,</div><div class="line">   <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span></div><div class="line">], <span class="number">4</span>, [ <span class="string">'red'</span>, <span class="string">'green'</span>, <span class="string">'blue'</span> ]);</div><div class="line"><span class="keyword">const</span> texture_emissive = canvas_texture_grid([</div><div class="line">   <span class="number">0.10</span>, <span class="number">0.20</span>, <span class="number">0.20</span>, <span class="number">0.10</span>,</div><div class="line">   <span class="number">0.20</span>, <span class="number">0.80</span>, <span class="number">0.80</span>, <span class="number">0.20</span>,</div><div class="line">   <span class="number">0.20</span>, <span class="number">0.80</span>, <span class="number">0.80</span>, <span class="number">0.20</span>,</div><div class="line">   <span class="number">0.10</span>, <span class="number">0.20</span>, <span class="number">0.20</span>, <span class="number">0.10</span></div><div class="line">], <span class="number">4</span>);</div><div class="line"><span class="keyword">const</span> texture_alpha = canvas_texture_grid([</div><div class="line">    <span class="number">0.00</span>, <span class="number">1.00</span>, <span class="number">1.00</span>,<span class="number">0.00</span>,</div><div class="line">    <span class="number">1.00</span>, <span class="number">0.25</span>, <span class="number">1.00</span>,<span class="number">1.00</span>,</div><div class="line">    <span class="number">1.00</span>, <span class="number">1.00</span>, <span class="number">0.25</span>,<span class="number">1.00</span>,</div><div class="line">    <span class="number">0.00</span>, <span class="number">1.00</span>, <span class="number">1.00</span>,<span class="number">0.00</span></div><div class="line">], <span class="number">4</span>);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// BASIC MATERIAL USING A TEXTURE FOR THE MAP OPTION</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="number">0xffffff</span>,</div><div class="line">    <span class="attr">map</span>: texture_map,</div><div class="line">    <span class="attr">emissive</span>: <span class="number">0xffffff</span>,</div><div class="line">    <span class="attr">emissiveMap</span>: texture_emissive,</div><div class="line">    <span class="attr">emissiveIntensity</span>: <span class="number">0.75</span>,</div><div class="line">    <span class="attr">alphaMap</span>: texture_alpha,</div><div class="line">    <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">6</span>, <span class="number">2</span>, <span class="number">1</span>);</div><div class="line">scene.add(dl);</div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>));</div><div class="line">scene.add(<span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), material));</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">0.75</span>, <span class="number">1.2</span>, <span class="number">1.5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">-0.10</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera); <span class="comment">// render</span></div></pre></td></tr></table></figure>
<p>Another map of interest might be the alpha map, this is a way to define what the transparency effect should be for one part of a texture compared to another. The texture that I will want to give with this one should be in gray scale and the value of the gray scale will be what the opacity value should be for that part of the texture.</p>
<h2 id="1-8-Common-Base-Materials-class-features"><a href="#1-8-Common-Base-Materials-class-features" class="headerlink" title="1.8 - Common Base Materials class features"></a>1.8 - Common Base Materials class features</h2><p>I have read a lot of posts on materials on materials in threejs over the years, and continue to do so, and one thing that I see authors failing to do over and over again is to emphasize the importance of being aware of what there is to work with in the common base materials class. All mesh materials, as well as the various other materials that are used with other display objects all extent from the common material class. There is a whole lot to be aware of just in the base class alone, as such I have a whole section in this post on the subjects of the Material class.</p>
<p>For this demo alone though in the basic section of this post I will just be going over a quick example of the vertex colors feature of the base material class. This is just simply a Boolean value that can be set for any material that will cause the  material to use vertex coloring. Now this feature might not work for all materials mind you as just because something is a base materials class feature that does not mean that it will work in all materials. For this vertex color option for example it will not work with materials such as the Mesh Normal Material for example. Never the less this is very much a base material class feature that will work in most materials.</p>
<p>This vertex coloring is  a way to show depth by way of an additional buffer attribute that can  be added to a geometry that contains color channel data for each point in the position attribute of the geometry that is used.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIALS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material_mesh = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">vertexColors</span>: <span class="literal">true</span> &#125;);</div><div class="line"><span class="keyword">const</span> material_line = <span class="keyword">new</span> THREE.LineBasicMaterial(&#123; <span class="attr">vertexColors</span>: <span class="literal">true</span>, <span class="attr">linewidth</span>: <span class="number">2</span>&#125;);</div><div class="line"><span class="keyword">const</span> material_points = <span class="keyword">new</span> THREE.PointsMaterial(&#123; <span class="attr">vertexColors</span>: <span class="literal">true</span>, <span class="attr">size</span>: <span class="number">0.25</span> &#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY - with color</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.SphereGeometry( <span class="number">1</span>, <span class="number">16</span>, <span class="number">16</span> );</div><div class="line"><span class="keyword">const</span> len = geometry.getAttribute(<span class="string">'position'</span>).count;</div><div class="line"><span class="keyword">const</span> color_array = [];</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">   <span class="keyword">const</span> a_len = i / len;</div><div class="line">   color_array.push(a_len, <span class="number">0</span>,  <span class="number">0</span> );</div><div class="line">   i += <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> color_attribute = <span class="keyword">new</span> THREE.BufferAttribute(<span class="keyword">new</span> <span class="built_in">Float32Array</span>( color_array ), <span class="number">3</span>);</div><div class="line">geometry.setAttribute(<span class="string">'color'</span>, color_attribute);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> points = <span class="keyword">new</span> THREE.Points( geometry, material_points );</div><div class="line">points.position.x = <span class="number">2</span>;</div><div class="line">scene.add(points);</div><div class="line"><span class="keyword">const</span> line = <span class="keyword">new</span> THREE.Line( geometry, material_line );</div><div class="line">line.position.x = <span class="number">0</span>;</div><div class="line">scene.add(line);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geometry, material_mesh );</div><div class="line">mesh.position.x = <span class="number">-2</span>;</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="1-9-Basic-example-of-the-not-so-basic-THREE-ShaderMaterial"><a href="#1-9-Basic-example-of-the-not-so-basic-THREE-ShaderMaterial" class="headerlink" title="1.9 - Basic example of the not so basic THREE.ShaderMaterial"></a>1.9 - Basic example of the not so basic THREE.ShaderMaterial</h3><p>This is then a basic getting started at least type example when it comes to using THREE.ShaderMaterial for making custom materials with a little GLSL code. For this example I am just going to have a solid mass of white color for the geometry. Of course there is a great deal more to write about when it comes to this subject and for that I have a full section on this topic later in this post.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material1 = <span class="keyword">new</span> THREE.ShaderMaterial(&#123;</div><div class="line">    <span class="attr">vertexShader</span>: <span class="string">`</span></div><div class="line">        void main() &#123;</div><div class="line">            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );</div><div class="line">        &#125;`,</div><div class="line">    <span class="attr">fragmentShader</span>: <span class="string">`</span></div><div class="line">        void main() &#123;</div><div class="line">            gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );</div><div class="line">        &#125;`</div><div class="line">&#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY, MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.SphereGeometry( <span class="number">1</span>, <span class="number">16</span>, <span class="number">16</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geometry, material1);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h2 id="2-Overview-of-Mesh-Material-Options"><a href="#2-Overview-of-Mesh-Material-Options" class="headerlink" title="2 - Overview of Mesh Material Options"></a>2 - Overview of Mesh Material Options</h2><p>There might be points, lines, and sprites, but for the most part just about every threejs project will make use of Mesh objects, or a similar kind of object that will also make use of one of the Mesh Materials that there are to work with. There is a whole lot to be aware of with these so it is called for in a post such as this to go over each of the mesh material options and write a thing or two about what each of them are good at, and also there limitations of course.</p>
<p>Keep in mind that if you feel that you are getting overwhelmed with all of this the most important thing is application. If you want to go with a certain style the involves low poly models, a simple color map, and not bother at all with light in any capacity then just going with the Mesh Basic Material might prove to work okay. Things just get a little complex when you start pulling light into the mix, or you need to do some kind of weird custom rendering to which even none of these might work okay and as such you might need to go with the shader material and some custom GLSL code. However getting into that is a matter for a later more advanced section in this post.</p>
<h3 id="2-1-The-not-so-basic-basic-material-that-is-THREE-MeshBasicMaterial"><a href="#2-1-The-not-so-basic-basic-material-that-is-THREE-MeshBasicMaterial" class="headerlink" title="2.1 - The not so basic, basic material that is THREE.MeshBasicMaterial"></a>2.1 - The not so basic, basic material that is THREE.MeshBasicMaterial</h3><p>The <a href="https://threejs.org/docs/index.html#api/materials/MeshBasicMaterial" target="_blank" rel="external">basic material</a> is the kind of material that I would use if I do not aim to do anything special with light. The basic material will not respond to any light sources, and the faces will be filled with a solid color if it is just the color option alone that will be used with it. However there are a lot of options when it comes to doing things to show some depth, one option would be to create a texture by one means or another and use that with the map option. Another option would be to add a color attribute to the geometry that is used, and then set the vertex color boolean of the material to true.</p>
<p>Do not let the name fool you with this one, as that is a mistake I see other authors of content like this make over and over again. The Basic material is not so basic, you still have everything that there is to work with in the common base material class, as well as a lot of features with the Basic material itself. Not to mention that there is also adding an additional child object of some kind such as lines that use a geometry that is created by passing the geometry of the parent object into the edge geometry constructor. Then adding the line object as a child of the mesh object as yet another way to show some depth as I covered back in the basic section of this post.</p>
<p>If using textures to show depth there is then doing some shading when drawing the textures themselves that are to be used with the geometry that is worked out. With this said this is often the typical use case when it comes to using this material in an actual project.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CAMERA RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'blue'</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">10</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// INSTANCE OF THE BASIC MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> data = [</div><div class="line">    <span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">255</span>,  <span class="number">150</span>,<span class="number">150</span>,<span class="number">150</span>,<span class="number">255</span>,  <span class="number">150</span>,<span class="number">150</span>,<span class="number">150</span>,<span class="number">255</span>,  <span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">255</span>,</div><div class="line">    <span class="number">150</span>,<span class="number">150</span>,<span class="number">150</span>,<span class="number">255</span>,  <span class="number">200</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="number">255</span>,  <span class="number">200</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="number">255</span>,  <span class="number">150</span>,<span class="number">150</span>,<span class="number">150</span>,<span class="number">255</span>,</div><div class="line">    <span class="number">150</span>,<span class="number">150</span>,<span class="number">150</span>,<span class="number">255</span>,  <span class="number">200</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="number">255</span>,  <span class="number">200</span>,<span class="number">200</span>,<span class="number">200</span>,<span class="number">255</span>,  <span class="number">150</span>,<span class="number">150</span>,<span class="number">150</span>,<span class="number">255</span>,</div><div class="line">    <span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">255</span>,  <span class="number">150</span>,<span class="number">150</span>,<span class="number">150</span>,<span class="number">255</span>,  <span class="number">150</span>,<span class="number">150</span>,<span class="number">150</span>,<span class="number">255</span>,  <span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">255</span></div><div class="line">];</div><div class="line"><span class="keyword">const</span> texture = <span class="keyword">new</span> THREE.DataTexture(<span class="keyword">new</span> <span class="built_in">Uint8Array</span>( data ), <span class="number">4</span>, <span class="number">4</span>);</div><div class="line">texture.needsUpdate = <span class="literal">true</span>;</div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="number">0xffffff</span>,</div><div class="line">    <span class="attr">map</span>: texture</div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>))</div><div class="line">scene.add(<span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), material));</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">0.75</span>, <span class="number">1.2</span>, <span class="number">1.5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">-0.10</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera); <span class="comment">// render</span></div></pre></td></tr></table></figure>
<p>There are a number of ways of going about using the map option all of which will involve getting a texture object one way or another, such as using the <a href="/2021/06/21/threejs-texture-loader/">texture loader</a> to load in a texture from an external image, but there are also a number of ways of doing so that will involve the use of some javaScript code to create a texture. One option would be to use <a href="/2018/04/17/threejs-canvas-texture/">canvas elements</a>, and another would be to make use of the <a href="/2022/04/15/threejs-data-texture/">data texture constructor</a> as a way to create a texture from raw color channel data as I went with in this demo.</p>
<h3 id="2-2-THREE-MeshDepthMaterial"><a href="#2-2-THREE-MeshDepthMaterial" class="headerlink" title="2.2 - THREE.MeshDepthMaterial"></a>2.2 - THREE.MeshDepthMaterial</h3><p>Another mesh material option that will not respond to light sources would be the <a href="/2021/05/04/threejs-depth-material/">depth material</a> that will shade a geometry of a mesh based on the distance of the mesh object from the current position of the camera. Speaking of cameras there is the near and far values of camera objects such as the perspective camera that are a major part of getting this material to look right. With that said that is one good use case of using this material now and then as it makes me thing in terms of what the values should be for those properties of a camera object.</p>
<p>There does not appear to be much to write about in terms of other properties to know about with this one aside from the fact that the depth packing encoding can be changed from the default which is basic depth packing. The only other constant seems to be THREE.RGBADepthPacking apart from what the default if for this option which would be THREE.BasicDepthPacking. All the other options that are not Base material class options are options that I see in other materials.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CAMERA RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'blue'</span>);</div><div class="line"><span class="comment">// NEAR AND FAR VALUES MATTER WITH THE DEPTH MATERIAL</span></div><div class="line"><span class="keyword">const</span> near = <span class="number">0.5</span>,</div><div class="line">far = <span class="number">100</span>;</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, near, far);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || docuemnt.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// INSTANCE OF THE DEPTH MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshDepthMaterial(&#123;</div><div class="line">    <span class="attr">depthPacking</span>: THREE.RGBADepthPacking</div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">scene.add( <span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), material) );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.3</span>, <span class="number">1.5</span>, <span class="number">1.3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="2-3-The-THREE-MeshLambertMaterial"><a href="#2-3-The-THREE-MeshLambertMaterial" class="headerlink" title="2.3 - The THREE.MeshLambertMaterial"></a>2.3 - The THREE.MeshLambertMaterial</h3><p>In some ways the <a href="/2018/04/08/threejs-lambert-material/">Lambert material</a> is a good choice for having a general use case material that will work with light sources. It might prove to eat up the least amount of overhead compared to a lot of the other options so it might be a good idea to start with this one in any kind of real time project such as a game. However there is also the way that the end result looks when it comes to this kind of material and because this material lacks secular highlight features, it might not prove to be the best choice for certain types of surfaces such as metal, or any kind of polished surface. It will still look just fine with many surfaces though such as untreated wood, stone, dirt, and most fabrics.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// Scene</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'blue'</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// INSTANCE OF THE LAMBERT MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="number">0xffffff</span>,</div><div class="line">    <span class="attr">emissive</span>: <span class="number">0xff0000</span>,</div><div class="line">    <span class="attr">emissiveIntensity</span>: <span class="number">0.5</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">0.5</span>);</div><div class="line">dl.position.set(<span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>);</div><div class="line">scene.add(dl);</div><div class="line">scene.add(<span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), material));</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.3</span>, <span class="number">1.5</span>, <span class="number">1.3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera); ;</div></pre></td></tr></table></figure>
<h3 id="2-4-THREE-MeshNormalMaterial"><a href="#2-4-THREE-MeshNormalMaterial" class="headerlink" title="2.4 - THREE.MeshNormalMaterial"></a>2.4 - THREE.MeshNormalMaterial</h3><p>The <a href="/2021/06/23/threejs-normal-material/">normal material</a> has to do with <a href="https://en.wikipedia.org/wiki/Normal_%28geometry%29" target="_blank" rel="external">vector normals</a> that exist in the <a href="/2021/06/08/threejs-buffer-geometry-attributes-normals/">normal attribute of a buffer geometry instance</a> that is used with the mesh object. Coloring of the shape is based on the direction of the vector normals then, but the material does not take into account anything that is going on with light in a scene unlike other materials that make use of the normal attribute of the geometry. </p>
<p>This material then might serve well as a kind of debugging tool when working out any kind of problem that might be going on with the normals of a geometry as the final result should have a certain look when the normals are set in such a way that is typically what is desired with these values. However I would say that the mesh normal material is just one tool in the toolbox with that sort of thng and there are other add on features that I would say have more weight for that kind of task, mainly the <a href="https://threejs.org/docs/#examples/en/helpers/VertexNormalsHelper" target="_blank" rel="external">VertexNormalsHelper</a>.</p>
<p>I do often use this material for many of my demos in posts such as this one, the main reason why is that it is a nice quick way to show some depth without having to do something a bit advanced with things like adding light sources, color attributes, textures and so forth.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'blue'</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// INSTANCE OF THE NORMAL MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshNormalMaterial();</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH with Box Geometry with the </span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">scene.add(<span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), material ));</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) )</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.3</span>, <span class="number">1.5</span>, <span class="number">1.3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="2-5-THREE-MeshPhongMaterial"><a href="#2-5-THREE-MeshPhongMaterial" class="headerlink" title="2.5 - THREE.MeshPhongMaterial"></a>2.5 - THREE.MeshPhongMaterial</h3><p>The <a href="/2022/12/29/threejs-phong-material/">phong material</a> is another option for a material that will respond to a light source. Unlike the Lambert material the Phong material dos support secular highlights which makes it a better choice for polished shiny surfaces. However I might still want to go with Lambert all around if it is a real time project, or add some features for allowing users to change what material is used for certain objects in display settings when it comes to working out features that might help to improve FPS.</p>
<p>To get this material working great it might be best to use some kind of directional light source such as the directional light I am using in this demo. The specular property can be used to set the color of the shine is, by default it is a very dark gray so often that is something that I adjust when using this material. There is then also the shininess option that I might care to adjust as well with this one that has a default value of 30. There is also the specular map option of the phong material which is a way that one can adjust the intensity of the specular effect by way of a gray scale texture. The white areas of the texture will be full specular intensity where black areas will be areas of the material in which there is no specular effect at all.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'blue'</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SPECULAR TEXTURE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> data = [</div><div class="line">   <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">   <span class="number">9</span>,<span class="number">9</span>,<span class="number">9</span>,<span class="number">9</span>,<span class="number">9</span>,<span class="number">9</span>,</div><div class="line">   <span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">9</span>,<span class="number">9</span>,</div><div class="line">   <span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,</div><div class="line">   <span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,</div><div class="line">   <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span></div><div class="line">].map( <span class="function">(<span class="params">a</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> v = <span class="built_in">Math</span>.round( <span class="number">255</span> * (a / <span class="number">9</span>) );</div><div class="line">    <span class="keyword">return</span> [ v, v, v, <span class="number">255</span> ];</div><div class="line">&#125;).flat();</div><div class="line"><span class="keyword">const</span> texture_specular = <span class="keyword">new</span> THREE.DataTexture( <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(data), <span class="number">6</span>, <span class="number">6</span> );</div><div class="line">texture_specular.needsUpdate = <span class="literal">true</span>;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// INSTANCE OF THE PHONG MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">    <span class="attr">specular</span>: <span class="number">0xffffff</span>,</div><div class="line">    <span class="attr">specularMap</span>: texture_specular,</div><div class="line">    <span class="attr">shininess</span>: <span class="number">80</span>,</div><div class="line">    <span class="attr">color</span>: <span class="number">0xff0000</span>,</div><div class="line">    <span class="attr">emissive</span>: <span class="number">0x220000</span>,</div><div class="line">    <span class="attr">emissiveIntensity</span>: <span class="number">0.5</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1.0</span>);</div><div class="line">dl.position.set(<span class="number">1</span>, <span class="number">5</span>, <span class="number">-3</span>);</div><div class="line">scene.add(dl);</div><div class="line">scene.add(<span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">1</span>, <span class="number">30</span>, <span class="number">30</span>), material ));</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="2-6-THREE-MeshStandardMaterial"><a href="#2-6-THREE-MeshStandardMaterial" class="headerlink" title="2.6 - THREE.MeshStandardMaterial"></a>2.6 - THREE.MeshStandardMaterial</h3><p>The <a href="/2021/04/27/threejs-standard-material/">standard material</a> might be the best option for most surfaces if a more realistic rather than speedy rendering is desired when it comes to doing something with light. The standard material will also work with a wide range of various texture maps, and is somewhat of an industry standard, thus the name standard material. I tend to like to go with this material as it is generally a great all around material that results in a decent look when it comes to working on a final result.</p>
<p>Because this material supports light it is called for to use this material with a light source in order for anything to be seen when it comes to the color and map attributes of the material. If a light source is not going to be used it is still possible to have something to see with this material it is just that values need to be set with the emissive and emissive map properties rather than color and map alone witch is the case with the basic material.</p>
<p>Unlike the phong material this material does not support specular highlights, but it would appear that is the only feature lost of interest compared to phong.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'blue'</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// INSTANCE OF THE STANDARD MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="number">0xff0000</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1.0</span>);</div><div class="line">dl.position.set(<span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>);</div><div class="line">scene.add(dl);</div><div class="line">scene.add(<span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">1</span>, <span class="number">30</span>, <span class="number">30</span>), material ));</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="2-7-THREE-MeshPhysicalMaterial"><a href="#2-7-THREE-MeshPhysicalMaterial" class="headerlink" title="2.7 - THREE.MeshPhysicalMaterial"></a>2.7 - THREE.MeshPhysicalMaterial</h3><p>Another two materials in three.js that can be used with a mesh are the <a href="https://threejs.org/docs/index.html#api/materials/MeshPhysicalMaterial" target="_blank" rel="external">Physical</a>, and <a href="https://threejs.org/docs/index.html#api/materials/MeshToonMaterial" target="_blank" rel="external">Toon</a> materials. Both of these materials are like that of the standard material, and phong materials respectfully, but with additional features. The physical material is like the standard material but gives a greater deal of control over reflectivity, while the toon material is just like phong only with toon shading.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'blue'</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// INSTANCE OF THE PHYSICAL MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshPhysicalMaterial(&#123; <span class="attr">color</span>: <span class="number">0xff0000</span> &#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">scene.add(<span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">1</span>, <span class="number">30</span>, <span class="number">30</span>), material ));</div><div class="line"><span class="keyword">var</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1.0</span>);</div><div class="line">dl.position.set(<span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>);</div><div class="line">scene.add(dl);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="2-8-THREE-MeshToonMaterial"><a href="#2-8-THREE-MeshToonMaterial" class="headerlink" title="2.8 - THREE.MeshToonMaterial"></a>2.8 - THREE.MeshToonMaterial</h3><p>The toon material seems to shade with a limited number of tones which is a nice feature to have for certain projects and styles. This feature can be adjusted by making use of a texture for the gradientMap option which would seem to be a unique texture map option for this material. When working out this kind of texture the colors of the texture should be in gray scale like many similar map options such as the specular map in the phong material, or the alpha map which seems to be a feature in most mesh materials.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'blue'</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CANVAS ELEMENT for gradientMap used in toon material</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>), ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas.width = <span class="number">64</span>; canvas.height = <span class="number">64</span>;</div><div class="line"><span class="keyword">const</span> s = <span class="number">8</span>;</div><div class="line"><span class="keyword">const</span> len = s * s;</div><div class="line"><span class="keyword">const</span> ps = canvas.width / s;</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span>( i &lt; len )&#123;</div><div class="line">    <span class="keyword">const</span> x = i % s;</div><div class="line">    <span class="keyword">const</span> y = <span class="built_in">Math</span>.floor( i / s );</div><div class="line">    <span class="keyword">let</span> gValue = ( x / s + y / s ) / <span class="number">2</span>;</div><div class="line">    ctx.fillStyle = <span class="keyword">new</span> THREE.Color( gValue, gValue, gValue).getStyle();</div><div class="line">    ctx.fillRect(x * ps, y * ps, ps, ps);</div><div class="line">    i += <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CANVAS TEXTURE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> texture = <span class="keyword">new</span> THREE.CanvasTexture(canvas);</div><div class="line">texture.magFilter = THREE.NearestFilter;</div><div class="line">texture.minFilter = THREE.NearestFilter;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// INSTANCE OF THE TOON MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshToonMaterial(&#123; <span class="attr">color</span>: <span class="number">0xff0000</span>, <span class="attr">gradientMap</span>: texture &#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">scene.add(<span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">1</span>, <span class="number">30</span>, <span class="number">30</span>), material ));</div><div class="line"><span class="keyword">var</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1.0</span>);</div><div class="line">dl.position.set(<span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>);</div><div class="line">scene.add(dl);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="2-8-Baked-in-lighting-with-THREE-MeshMatcapMaterial"><a href="#2-8-Baked-in-lighting-with-THREE-MeshMatcapMaterial" class="headerlink" title="2.8 - Baked in lighting with THREE.MeshMatcapMaterial"></a>2.8 - Baked in lighting with THREE.MeshMatcapMaterial</h3><p>The mapcap material is a way to add baked in lighting using what is called a mapcap or lit sphere. Sense it is this mapcap option that is used to add baked in lighting then this is another material that will not work with light sources as this is the way to do about adding depth to the material. This matmap option can also then be used to add color to the material as well, but there is also a map option as well for this one. There is also the color option as always that is set to a default of white which in most cases is what one would want to leave this one on as well.</p>
<p>A good way to get started with this material would be to work out a quick demo involving sphere geometry and with that also a texture that is of a shaded sphere. There is a way to make quick work of this by using canvas textures, and with that the create Radial Gradient method of the 2d canvas drawing API. When using this method as a way to create the texture there is playing around with the values that are used to set the position and radius of the second circle of the radial gradient. It would seem that this is a way to change what the direction and intensity of the light is for this kind of map.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.querySelector(<span class="string">'#demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CANVAS / TEXTURE</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">canvas.width = <span class="number">512</span>;</div><div class="line">canvas.height = <span class="number">512</span>;</div><div class="line"><span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line"><span class="keyword">const</span> r1 = canvas.width / <span class="number">2</span>;</div><div class="line"><span class="keyword">const</span> x1 = r1, y1 = r1, x2 = r1 * <span class="number">1.35</span>, y2 = r1 * <span class="number">1.10</span>, r2 = r1 / <span class="number">8</span>;</div><div class="line"><span class="keyword">const</span> gradient = ctx.createRadialGradient(x1, y1, r1, x2, y2, r2);</div><div class="line">gradient.addColorStop(<span class="number">0</span>, <span class="string">'black'</span>);</div><div class="line">gradient.addColorStop(<span class="number">1</span>, <span class="string">'white'</span>);</div><div class="line">ctx.fillStyle = gradient;</div><div class="line">ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>, canvas.width, canvas.height);</div><div class="line"><span class="keyword">const</span> texture = <span class="keyword">new</span> THREE.CanvasTexture( canvas );</div><div class="line">texture.colorSpace = THREE.SRGBColorSpace;</div><div class="line">texture.magFilter = THREE.NearestFilter;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshMatcapMaterial(&#123; <span class="attr">matcap</span>: texture &#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY, MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">1</span>, <span class="number">30</span>, <span class="number">30</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geometry, material );</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h2 id="3-The-Points-Material"><a href="#3-The-Points-Material" class="headerlink" title="3 - The Points Material"></a>3 - The Points Material</h2><p>For more on Points and the points material I have <a href="/2018/05/12/threejs-points-material/">written a post on the points material</a>, I have also wrote one on <a href="/2023/02/23/threejs-points/">Points in general</a> at this time as well. However I can also save you a click by covering some key demos of features here.</p>
<p>There is one Material in threejs that can be used to display just the points of the position attribute in a geometry which can come in handy some times. One major use case with this has to do with creating custom geometry from the ground up as this helps to keep things simple as I only need to worry about the actual points in space alone and nothing else. Things will of course become far more complex when it comes to working out custom geometry that will work as expected with mesh objects of course and not just because of the additional attributes that are required. Even with the position attribute there is not just the position of each vertex but also the order of the points that also comes into play when figuring out what each side of a triangle is the front side. Still points are a great place to get started, and then worry about all of these sorts of things when it comes to moving on to mesh objects.</p>
<p>Anyway this is still very much a post on materials in general in threejs, so in this section the focus will be one many of the features of the points material. There are a number of features with the points material alone, but there is also writing about key features within the common materials class also that work well with the points material as well.</p>
<h3 id="3-1-The-Points-Material"><a href="#3-1-The-Points-Material" class="headerlink" title="3.1 - The Points Material"></a>3.1 - The Points Material</h3><p>If for some reason I want to create my own custom geometry in which I only care about points in space and nothing at all then I will want to have at least a <a href="/2021/06/07/threejs-buffer-geometry-attributes-position/">position attribute of the buffer geometry instance</a>. I will then pass this geometry to the THREE.Points constructor rather than the usual THREE.Mesh constructor. So for this example I am creating a blank buffer geometry object and then I will want to create a typed array that will contain the values for each axis of each point in space. For now I will be keeping this simple by just adding points for a single triangle, however when it comes to using points if I want I could make this even more basic by just setting a single point for the typed array actually.</p>
<p>Anyway once I have my data worked out for this I can call the Buffer Attribute constructor and pass the array as the first argument and then the item size which in the case is 3 as there is x, y, and z for each point. This buffer attribute object can then be used when calling the set attribute method of the blank buffer geometry object to create the position attribute of the geometry.</p>
<p>When it comes to creating an instance of the Points material I will just be creating a single instance of this material, and just set a color option for it. This will result in all points to be the given color rather than the default white color. However there are some additional options for styling the points, it is just for this dmeo at least I just want to keep things fairly simple.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'blue'</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// POINTS MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.PointsMaterial( &#123; <span class="attr">color</span>: <span class="number">0x00afaf</span> &#125; );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOETRY WITH JUST A POSITION ATTRIBUTE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BufferGeometry();</div><div class="line"><span class="keyword">const</span> vertices = <span class="keyword">new</span> <span class="built_in">Float32Array</span>([</div><div class="line">    <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">    <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">    <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span></div><div class="line">]);</div><div class="line">geometry.setAttribute(<span class="string">'position'</span>, <span class="keyword">new</span> THREE.BufferAttribute(vertices, <span class="number">3</span>));</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> points = <span class="keyword">new</span> THREE.Points(geometry, material);</div><div class="line">scene.add(points);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="3-2-Size-Attenuation-and-The-Points-Material"><a href="#3-2-Size-Attenuation-and-The-Points-Material" class="headerlink" title="3.2 - Size Attenuation and The Points Material"></a>3.2 - Size Attenuation and The Points Material</h3><p>By default the Size Attenuation option of the points material is set to true. What this means is out of the box the size of the points will get smaller or bigger depending on the distance of the point from the camera. In some cases I might want to set this option to false if I want to just have a single size for each point in the geometry.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// POINTS MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material1 = <span class="keyword">new</span> THREE.PointsMaterial(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="number">0x00ff00</span>,</div><div class="line">    <span class="attr">size</span>: <span class="number">0.8</span>,</div><div class="line">    <span class="attr">sizeAttenuation</span>: <span class="literal">true</span></div><div class="line">&#125;);</div><div class="line"><span class="keyword">const</span> material2 = <span class="keyword">new</span> THREE.PointsMaterial(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="number">0xff0000</span>,</div><div class="line">    <span class="attr">size</span>: <span class="number">10</span>,</div><div class="line">    <span class="attr">sizeAttenuation</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">opacity</span>: <span class="number">0.2</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY / SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>);</div><div class="line"><span class="keyword">const</span> points1 = <span class="keyword">new</span> THREE.Points(geometry, material1);</div><div class="line">scene.add(points1);</div><div class="line"><span class="keyword">const</span> points2 = <span class="keyword">new</span> THREE.Points(geometry, material2);</div><div class="line">scene.add(points2);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">-1.0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>If I want to apply some custom logic for the size of the points, on a point by point basis then that is something that might only be able to be done by way of a custom shader.</p>
<h2 id="4-Lines-Material"><a href="#4-Lines-Material" class="headerlink" title="4 - Lines Material"></a>4 - Lines Material</h2><p>Another object to work with that is an alternative to a mesh object would be <a href="/2018/04/19/threejs-line/">THREE.Line</a> or THREE.LineSegments. There are two material options to choose from when it comes to using these kinds of objects which include THREE.LineBasicMaterial and THREE.LineDashedMaterial. They work just like mesh objects in the sense that the first argument that is passed when making one is a geometry. Just like that of THREE.Points though it is just the position attribute of the geometry of these that only really matters. Also because one only has to worry about the position attribute for these it is also a good starting point for making custom geometry as well.</p>
<p>There are however some very good reasons why one would refrain from using Lines as well though. One major reason why is because certain features such as line width will not work so great on many platforms. There are other ways of drawing lines of sorts in space that will look better such as getting into curves and using tube geometry with mesh objects. Still they work okay when I just want to draw a 3d line and be done with it, so in this section I will be writing about some features of line materials.</p>
<h3 id="4-1-Using-the-Edge-Geometry-constructor-and-the-Line-Basic-Material"><a href="#4-1-Using-the-Edge-Geometry-constructor-and-the-Line-Basic-Material" class="headerlink" title="4.1 - Using the Edge Geometry constructor and the Line Basic Material"></a>4.1 - Using the Edge Geometry constructor and the Line Basic Material</h3><p>For this demo I am using the Edge Geometry constructor to create a geometry from another geometry made with the box geometry constructor. The end result geometry is then what I am using for the geometry that will be used with THREE.Line. When it comes to materials I am going with the Line Basic Material here, and I am also making use of a few common base material class features as I can also do with mesh and point materials.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.5</span>, <span class="number">10</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LINE MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.LineBasicMaterial(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="string">'lime'</span>),</div><div class="line">    <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">opacity</span>: <span class="number">0.25</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEO, SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> boxGeo = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="keyword">const</span> edgeGeo = <span class="keyword">new</span> THREE.EdgesGeometry(boxGeo);</div><div class="line"><span class="keyword">const</span> line = <span class="keyword">new</span> THREE.LineSegments( edgeGeo, material );</div><div class="line">line.rotation.y = <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">12</span>;</div><div class="line">scene.add(line);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.5</span>, <span class="number">1.5</span>, <span class="number">1.5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="4-2-Setting-the-width-of-lines-and-Tube-Geometry-as-a-possible-alternative"><a href="#4-2-Setting-the-width-of-lines-and-Tube-Geometry-as-a-possible-alternative" class="headerlink" title="4.2 - Setting the width of lines, and Tube Geometry as a possible alternative"></a>4.2 - Setting the width of lines, and Tube Geometry as a possible alternative</h3><p>If you care about how the final product looks you might want to look into <a href="/2023/06/02/threejs-tube-geometry/">curves and the tube geometry</a> class as an alternative to the use of these kinds of objects and materials. Lines and Line materials are okay when I just simply want to draw a line in space and be done with it. However if I care mouse about how the final product looks, and also try to get it to work on a wide range of clients I am generally not going to want to use lines in part because of a problem with line width. There is an option for changing the wide of course, but I have found that it will not work on a lot of clients, however using tube geometry and with that mesh materials will work on these clients of concern.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIALS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material_line = <span class="keyword">new</span> THREE.LineBasicMaterial(&#123;</div><div class="line">    <span class="attr">linewidth</span>: <span class="number">6</span>,</div><div class="line">    <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="string">'lime'</span>),</div><div class="line">    <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">opacity</span>: <span class="number">0.25</span></div><div class="line">&#125;);</div><div class="line"><span class="keyword">const</span> material_mesh = <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;</div><div class="line">    <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CURVE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> v1 = <span class="keyword">new</span> THREE.Vector3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> v2 = <span class="keyword">new</span> THREE.Vector3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">-5</span>);</div><div class="line"><span class="keyword">const</span> v_c1 = v1.clone().lerp(v2, <span class="number">0.5</span>).add( <span class="keyword">new</span> THREE.Vector3( <span class="number">-10</span>, <span class="number">0</span>, <span class="number">0</span> ) );</div><div class="line"><span class="keyword">const</span> curve = <span class="keyword">new</span> THREE.QuadraticBezierCurve3( v1, v_c1, v2);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY / LINE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry_line = <span class="keyword">new</span> THREE.BufferGeometry().setFromPoints( curve.getPoints( <span class="number">20</span> ) );</div><div class="line"><span class="keyword">const</span> line = <span class="keyword">new</span> THREE.Line( geometry_line, material_line );</div><div class="line">line.position.x = <span class="number">0</span>;</div><div class="line">scene.add(line);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY / MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry_mesh = <span class="keyword">new</span> THREE.TubeGeometry( curve, <span class="number">30</span>, <span class="number">0.25</span>, <span class="number">30</span> );</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geometry_mesh, material_mesh );</div><div class="line">mesh.position.x = <span class="number">-2</span>;</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h2 id="5-The-Sprite-Material"><a href="#5-The-Sprite-Material" class="headerlink" title="5 - The Sprite Material"></a>5 - The Sprite Material</h2><p>There are also sprite objects and with that the sprite material to skin these objects. These sprite objects are a way to add a texture to a scene that will always face the camera. I can then also adjust the scale and position values of the sprite objects to move them around in the scene and adjust the size. However there are also a number of options for the material, and also some relevant base material class features to write about with these.</p>
<h3 id="5-1-Crosshair-example-Sprite-Material-using-depthTest-and-sizeAttenuation-options"><a href="#5-1-Crosshair-example-Sprite-Material-using-depthTest-and-sizeAttenuation-options" class="headerlink" title="5.1 - Crosshair example Sprite Material using depthTest, and  sizeAttenuation options"></a>5.1 - Crosshair example Sprite Material using depthTest, and  sizeAttenuation options</h3><p>There are a number of options that can be set to make these sprite objects work as a kind of crosshair that will always show up over everything else by setting the depth test option to false. Like with the Points material there is also a size attenuation option that I will want to set to false for this kind of application. After that I can use the object2d features of the sprite object to do things like adjust the scale, and the position of the sprite in the scene.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.5</span>, <span class="number">10</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// create a texture for the sprite</span></div><div class="line"><span class="keyword">const</span> createTexture = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">    <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    <span class="keyword">const</span> w = <span class="number">32</span>, h = <span class="number">32</span>;</div><div class="line">    canvas.width = w; canvas.height = h;</div><div class="line">    ctx.fillStyle = <span class="string">'rgba(0,0,0,0.5)'</span>;</div><div class="line">    ctx.strokeStyle = <span class="string">'#ffff00'</span>;</div><div class="line">    ctx.lineWidth = <span class="number">3</span>;</div><div class="line">    ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.arc(w / <span class="number">2</span>, h / <span class="number">2</span>, w / <span class="number">2</span> - <span class="number">2</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">    ctx.stroke();</div><div class="line">    ctx.fill();</div><div class="line">    ctx.strokeStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.lineWidth = <span class="number">3</span>;</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo( <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    ctx.lineTo( w, h);</div><div class="line">    ctx.stroke();</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo( w, <span class="number">0</span>);</div><div class="line">    ctx.lineTo( <span class="number">0</span>, h);</div><div class="line">    ctx.stroke();</div><div class="line">    <span class="keyword">const</span> texture = <span class="keyword">new</span> THREE.CanvasTexture( canvas );</div><div class="line">    <span class="keyword">return</span> texture;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// create a sprite object using the THREE.SpriteMaterial</span></div><div class="line"><span class="keyword">const</span> createCursorSprite = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> material = <span class="keyword">new</span> THREE.SpriteMaterial(&#123;</div><div class="line">        <span class="attr">map</span>: createTexture(),</div><div class="line">        <span class="attr">sizeAttenuation</span>: <span class="literal">false</span>,</div><div class="line">        <span class="attr">depthTest</span>: <span class="literal">false</span>,</div><div class="line">        <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">opacity</span>: <span class="number">1</span></div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> sprite = <span class="keyword">new</span> THREE.Sprite(  material );</div><div class="line">    <span class="keyword">return</span> sprite;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> sprite = createCursorSprite();</div><div class="line">sprite.scale.set(<span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">0.1</span>);</div><div class="line">sprite.position.set(<span class="number">0.5</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">scene.add( sprite );</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">scene.add( <span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.BoxGeometry( <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span> ), <span class="keyword">new</span> THREE.MeshNormalMaterial()  ) );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.5</span>, <span class="number">1.5</span>, <span class="number">1.5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="5-2-The-rotation-option-of-the-sprite-material"><a href="#5-2-The-rotation-option-of-the-sprite-material" class="headerlink" title="5.2 - The rotation option of the sprite material"></a>5.2 - The rotation option of the sprite material</h3><p>The rotation option of the sprite material is a way to go about setting what the rotation should be used for the sprite. It would seem that this is generally what it is that I will want to use in place of the various features that have to do with the local rotation of the sprite object. In other words I want to use the rotation property of the sprite material, and not the various object3d class features to rotate the sprite such as the rotation, and quaternion properties.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.5</span>, <span class="number">10</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// create a texture for the sprite</span></div><div class="line"><span class="keyword">const</span> createTexture = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">    <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    <span class="keyword">const</span> w = <span class="number">32</span>, h = <span class="number">32</span>;</div><div class="line">    canvas.width = w; canvas.height = h;</div><div class="line">    ctx.strokeStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.lineWidth = <span class="number">3</span>;</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo( <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    ctx.lineTo( w, h);</div><div class="line">    ctx.stroke();</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo( w, <span class="number">0</span>);</div><div class="line">    ctx.lineTo( <span class="number">0</span>, h);</div><div class="line">    ctx.stroke();</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> THREE.CanvasTexture( canvas );</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> createSprite = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> material = <span class="keyword">new</span> THREE.SpriteMaterial(&#123;</div><div class="line">        <span class="attr">map</span>: createTexture(),</div><div class="line">        <span class="attr">sizeAttenuation</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">depthTest</span>: <span class="literal">false</span>,</div><div class="line">        <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">rotation</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">opacity</span>: <span class="number">1</span></div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">const</span> sprite = <span class="keyword">new</span> THREE.Sprite(  material );</div><div class="line">    <span class="keyword">return</span> sprite;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> sprite = createSprite();</div><div class="line">scene.add( sprite );</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.5</span>, <span class="number">1.5</span>, <span class="number">1.5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">let</span> deg = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> dps = <span class="number">20</span>;  <span class="comment">// degrees per second</span></div><div class="line"><span class="keyword">const</span> fps = <span class="number">12</span>;  <span class="comment">// frames per second</span></div><div class="line"><span class="keyword">let</span> lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">const</span> secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps)&#123;</div><div class="line">        deg += dps * secs;</div><div class="line">        deg %= <span class="number">360</span>;</div><div class="line">        sprite.material.rotation = <span class="built_in">Math</span>.PI / <span class="number">180</span> * deg;</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h3 id="5-3-Vertex-Colors-the-and-Points-Material"><a href="#5-3-Vertex-Colors-the-and-Points-Material" class="headerlink" title="5.3 - Vertex Colors the and Points Material"></a>5.3 - Vertex Colors the and Points Material</h3><p>A solid color for all the points in never really what is wanted when dealing with a geometry with a lot of points. The good news with this though is that the vertex colors option of the base material class works just fine with the points material. So I can just set vertex colors to true, and then add a color attribute to the geometry to get differing colors for each point.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// POINTS MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material1 = <span class="keyword">new</span> THREE.PointsMaterial(&#123;</div><div class="line">    <span class="attr">vertexColors</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">size</span>: <span class="number">0.8</span>,</div><div class="line">    <span class="attr">sizeAttenuation</span>: <span class="literal">true</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> pos = geometry.getAttribute(<span class="string">'position'</span>);</div><div class="line"><span class="keyword">const</span> data_color = [];</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span>(i &lt; pos.count)&#123;</div><div class="line">    <span class="keyword">const</span> a_count = i / pos.count;</div><div class="line">    <span class="keyword">const</span> r = <span class="number">0</span>, g = a_count, b = <span class="number">1</span> - a_count;</div><div class="line">    data_color.push( r, g, b)</div><div class="line">    i += <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line">geometry.setAttribute(<span class="string">'color'</span>, <span class="keyword">new</span> THREE.BufferAttribute( <span class="keyword">new</span> <span class="built_in">Float32Array</span>( data_color ), <span class="number">3</span> ) );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> points1 = <span class="keyword">new</span> THREE.Points(geometry, material1);</div><div class="line">scene.add(points1);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">9</span>, <span class="number">9</span>, <span class="number">9</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">-1.0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h2 id="6-The-Common-Base-Material-class"><a href="#6-The-Common-Base-Material-class" class="headerlink" title="6 - The Common Base Material class"></a>6 - The Common Base Material class</h2><p>There are a number of options in the base material class that should work with all materials, to some extend that is the case, but there are some exceptions. For example the side option is very much a part of the base material class, but this option has no effect when used with line or point materials as one would expect. Still there are lots of options in the material class that do work with all materials, or at least most of them to say the least. Maybe one good example would be vertex colors, but even then there are a few mesh material options in which they will not work. In any case there is a lot to be aware of here, and with that said when learning about a specific material option it is a good idea to not just look into the features of the material class, but also the base material class from which it is extended.</p>
<h3 id="6-1-Transparent-and-opacity-options"><a href="#6-1-Transparent-and-opacity-options" class="headerlink" title="6.1 - Transparent and opacity options"></a>6.1 - Transparent and opacity options</h3><p>The transparent boolean can be used to set transparency on and off for a material, and after that there are a number of other options that can come into play such as the opacity options that can be used to adjust the global alpha values of the material. With some materials there will be even more options such as alpha maps, but for this section I will be sticking mainly with what there is in the core material class. With that said there is working out a demo that involves just the transparent and opacity options then.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPER FUNCTION</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> createCube = <span class="function"><span class="keyword">function</span> (<span class="params">size, material, x, y, z</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BoxGeometry(size, size, size, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>),</div><div class="line">    cube = <span class="keyword">new</span> THREE.Mesh(geometry, material);</div><div class="line">    cube.position.set(x, y, z);</div><div class="line">    <span class="keyword">return</span> cube;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// mesh objects and mesh materials using opacity</span></div><div class="line">scene.add( createCube(<span class="number">1</span>, <span class="keyword">new</span> THREE.MeshNormalMaterial( &#123; <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.4</span> &#125; ), <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) );</div><div class="line">scene.add( createCube(<span class="number">1</span>, <span class="keyword">new</span> THREE.MeshBasicMaterial( &#123; <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.7</span> &#125; ), <span class="number">-1.4</span>, <span class="number">-0.5</span>, <span class="number">0</span>) );</div><div class="line">scene.add( createCube(<span class="number">1</span>, <span class="keyword">new</span> THREE.MeshPhongMaterial( &#123; <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.2</span> &#125; ), <span class="number">-0.4</span>, <span class="number">-0.5</span>, <span class="number">-2</span>) );</div><div class="line"><span class="comment">// points</span></div><div class="line"><span class="keyword">const</span> material_points = <span class="keyword">new</span> THREE.PointsMaterial(&#123; <span class="attr">size</span>: <span class="number">0.2</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.05</span> &#125;);</div><div class="line"><span class="keyword">const</span> points = <span class="keyword">new</span> THREE.Points( <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">2</span>, <span class="number">20</span>, <span class="number">20</span>), material_points );</div><div class="line">scene.add(points);</div><div class="line"><span class="comment">// light</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight();</div><div class="line">dl.position.set(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>)</div><div class="line">scene.add(dl);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>Here I am using the transparent and opacity options in the normal, basic, and phong mesh materials which all work just fine with this feature. However this also works well in not just other mesh materials, but also line and points material options as well. Sense this is a base material class feature it should work in just about all of them of course, unless there is some reason why not. One exceptions might be the Shader Material if the GLSL code does not make use of it, but that is a matter for a whole other section.</p>
<h3 id="6-2-Blending"><a href="#6-2-Blending" class="headerlink" title="6.2 - Blending"></a>6.2 - Blending</h3><p>It would seem that the blending property of the base material class is in itself just one feature of the class that deserves its own section in this post, and maybe even a whole other deep dive content piece actually. The reason why I say this is because there is not just the blending option, but also a whole lot of other options that come into play depending on the value that is set for the option. For example setting the THREE.CustomBlending constant value for this blending option will pull some additional options in to play, such as  blendSrc, blendDst or blendEquation options.</p>
<p>For now I worked out this demo where I am setting the blending value of all materials used to the THREE.NoBlending constant over that of what the default is for materials which is THREE.NormalBlending. There is then just setting the values to other blending options, or back to the default to just gain some sense as to what this is about for now. The main thing to keep in mind here is that if you run into a situation in which one object, or face behind another is not rendering the way that you expect it to, addressing that might involve blending.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIALS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// array of materials for a box geometry where each </span></div><div class="line"><span class="comment">// material is using THREE.NoBlending over the default of THREE.NormalBlending</span></div><div class="line"><span class="keyword">const</span> materials_box = [</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">blending</span>: THREE.NoBlending, <span class="attr">color</span>: <span class="number">0x00ffff</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.10</span> &#125; ),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">blending</span>: THREE.NoBlending, <span class="attr">color</span>: <span class="number">0x00ff00</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.10</span> &#125; ),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">blending</span>: THREE.NoBlending, <span class="attr">color</span>: <span class="number">0xffff00</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.10</span> &#125; ),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">blending</span>: THREE.NoBlending, <span class="attr">color</span>: <span class="number">0xff0000</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.10</span> &#125; ),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">blending</span>: THREE.NoBlending, <span class="attr">color</span>: <span class="number">0xff00ff</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.10</span> &#125; ),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">blending</span>: THREE.NoBlending, <span class="attr">color</span>: <span class="number">0xffffff</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.10</span> &#125; )</div><div class="line">];</div><div class="line"><span class="comment">// line material for grid. Also using THREE.NoBlending</span></div><div class="line"><span class="keyword">const</span> material_grid = <span class="keyword">new</span> THREE.LineBasicMaterial(&#123;</div><div class="line">    <span class="attr">blending</span>: THREE.NoBlending,</div><div class="line">    <span class="attr">vertexColors</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">linewidth</span>: <span class="number">8</span>,</div><div class="line">    <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">opacity</span>: <span class="number">0.1</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BoxGeometry( <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span> );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh_box = <span class="keyword">new</span> THREE.Mesh(geometry, materials_box);</div><div class="line">scene.add(mesh_box);</div><div class="line"><span class="keyword">const</span> grid = <span class="keyword">new</span> THREE.GridHelper( <span class="number">10</span>, <span class="number">10</span>, <span class="number">0x00ff00</span>, <span class="number">0x00ff00</span> );</div><div class="line">grid.material = material_grid;</div><div class="line">scene.add(grid);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.5</span>, <span class="number">1</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="6-3-Vertex-colors"><a href="#6-3-Vertex-colors" class="headerlink" title="6.3 - Vertex colors"></a>6.3 - Vertex colors</h3><p>One major common feature would be the vertex colors Boolean that when set to true will cause the material to use the color attribute of the geometry if it has one. Although this is a base material class feature it will not work with all materials, some will not make use of the base class feature such as the MeshNormalMaterial. However it does work with most mesh material options such as basic, standard, and phong just to name a s few. This feature also works with line materials and the points materials as well as a great way to style those materials when they are used.</p>
<p>If the geometry does not have a color attribute then one will need to be created for the geometry. If you would like to read more about his topic you might want to check out my <a href="/2023/01/20/threejs-buffer-geometry-attributes-color/">main blog post on color attributes</a> in buffer geometry objects.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.SphereGeometry( <span class="number">4</span>, <span class="number">20</span>, <span class="number">20</span> );</div><div class="line"><span class="keyword">const</span> len = geo.getAttribute(<span class="string">'position'</span>).count;</div><div class="line"><span class="keyword">const</span> color_array = [];</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">   <span class="keyword">const</span> a_vert = i / len;</div><div class="line">   <span class="keyword">const</span> a_blue = <span class="built_in">Math</span>.sin( <span class="built_in">Math</span>.PI * (<span class="number">16</span> * a_vert % <span class="number">1</span>) );</div><div class="line">   color_array.push(a_vert, <span class="number">1</span> - a_vert, a_blue );</div><div class="line">   i += <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> color_attribute = <span class="keyword">new</span> THREE.BufferAttribute(<span class="keyword">new</span> <span class="built_in">Float32Array</span>( color_array ), <span class="number">3</span>);</div><div class="line">geo.setAttribute(<span class="string">'color'</span>, color_attribute);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MATERIAL - using vertex colors</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material1 = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">    <span class="attr">vertexColors</span>: <span class="literal">true</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(geo, material1);</div><div class="line">scene.add(mesh1);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="6-4-Side"><a href="#6-4-Side" class="headerlink" title="6.4 - Side"></a>6.4 - Side</h3><p>The side option will set what side of a face is to be rendered which by default is set to the THREE.FontSide constant. Often I might want to set this to THREE.DoubleSide, and in a few rare cases THREE.BackSide. If you are wondering how the side of a face is determined it has to do with the order of the points in the <a href="/2021/06/07/threejs-buffer-geometry-attributes-position/">position attribute of the geometry</a>, or the <a href="/2022/12/09/threejs-buffer-geometry-index/">index</a> of it.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">    <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">&#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.PlaneGeometry(<span class="number">5</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo, material);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">let</span> frame = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> maxFrame = <span class="number">120</span>;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">const</span> a_frame = frame / maxFrame;</div><div class="line">    mesh.rotation.y = <span class="built_in">Math</span>.PI * <span class="number">2</span> * a_frame;</div><div class="line">    renderer.render(scene, camera);</div><div class="line">    frame += <span class="number">1</span>;</div><div class="line">    frame %= maxFrame;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="6-5-The-depth-test-property-to-making-something-show-up-on-top-of-everything-else"><a href="#6-5-The-depth-test-property-to-making-something-show-up-on-top-of-everything-else" class="headerlink" title="6.5 - The depth test property to making something show up on top of everything else"></a>6.5 - The depth test property to making something show up on top of everything else</h2><p>Now and then I might end up running into a problem in which I will need to make sure that a certain object will always render on top of everything else regardless of what the status might be in terms of that objects depth relative to the camera and any other objects between such an object and the camera. One way of doing this would be to work out some kind of system for layering, that is to have more than one renderer and therefor canvas element, and then just set the render order of all of these canvas elements in such a way that what I need rendering on top will be drawn to a final canvas element last. Doing something such as that will work of course, but one way to get a desired outcome with a single renderer might be to set the depth test option of the material of the object that I want to render on top to false.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material_mesh = <span class="keyword">new</span> THREE.MeshNormalMaterial();</div><div class="line"><span class="keyword">const</span> material_points = <span class="keyword">new</span> THREE.PointsMaterial(&#123;</div><div class="line">    <span class="attr">size</span>: <span class="number">5</span>,</div><div class="line">    <span class="attr">sizeAttenuation</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">depthTest</span>: <span class="literal">false</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.Mesh(geo, material_mesh) );</div><div class="line">scene.add( <span class="keyword">new</span> THREE.Points(geo, material_points) );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">1</span>, <span class="number">0.75</span>, <span class="number">1.5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">-0.15</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>There still might be some issues when it comes to z order when it comes to a collection of objects, I might also still want to do laying with some projects, but the main thing here is that this disables the threejs internal feature that has to do with the objects position in space relative to the camera.</p>
<h2 id="7-Blending-options"><a href="#7-Blending-options" class="headerlink" title="7 - Blending options"></a>7 - Blending options</h2><p>I covered one demo of the blending option in the above section in which I go over many of the features of the main base material class from which all other materials extend. However I would say that the blending option does very much deserve a section of its own. So I will at least start this section to say the least, and then expand more with additional future edits as I look into this subject about threejs materials more.</p>
<h3 id="7-1-No-Blending-compared-to-default-normal-blending"><a href="#7-1-No-Blending-compared-to-default-normal-blending" class="headerlink" title="7.1 - No Blending compared to default normal blending"></a>7.1 - No Blending compared to default normal blending</h3><p>I have all ready covered one demo of the no blending value for the blending option. However there are some things that I should do different in this section of blending in depth. To start out this section I am once again going to go with a demo that makes use of the no blending option over that of the default blending mode which is normal blending. However this time I am going to have two objects with two materials to have something to compare to.</p>
<p>Also I am doing something out of the usual when it comes to rendering in this example which is that I am using a canvas element that I draw to with the plain old 2d drawing content as the element that I am appending to my hard coded HTML. I am then drawing to this plain old 2d canvas with the drawImage method of the 2d canvas and I am passing the canvas of the webgl renderer as the image to draw with. This then allows me to use the 2d drawing context to draw a background that will show up when the canvas of the webgl renderer is transparent.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER, 2D CANVAS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line"><span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas.style.display = <span class="string">'block'</span>;</div><div class="line">canvas.width = <span class="number">640</span>;</div><div class="line">canvas.height = <span class="number">480</span>;</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(canvas);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; </div><div class="line">    <span class="attr">blending</span>: THREE.NoBlending, </div><div class="line">    <span class="attr">color</span>: <span class="number">0xff0000</span>,</div><div class="line">    <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">opacity</span>: <span class="number">0.1</span></div><div class="line">&#125;);</div><div class="line"><span class="keyword">const</span> material_compare = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; </div><div class="line">    <span class="attr">blending</span>: THREE.NormalBlending,</div><div class="line">    <span class="attr">color</span>: <span class="number">0x00ff00</span>,</div><div class="line">    <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">opacity</span>: <span class="number">0.1</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.SphereGeometry( <span class="number">1</span>, <span class="number">60</span>, <span class="number">60</span> );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh_1 = <span class="keyword">new</span> THREE.Mesh(geometry, material);</div><div class="line">mesh_1.position.x = <span class="number">-1.25</span>;</div><div class="line">scene.add(mesh_1);</div><div class="line"><span class="keyword">const</span> mesh_2 = <span class="keyword">new</span> THREE.Mesh(geometry, material_compare);</div><div class="line">mesh_2.position.x = <span class="number">1.25</span>;</div><div class="line">scene.add(mesh_2);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">scene.background = <span class="number">0x000000</span>;</div><div class="line">renderer.setClearColor(<span class="number">0x000000</span>, <span class="number">0.75</span>);</div><div class="line">renderer.render(scene, camera);</div><div class="line"><span class="keyword">const</span> gradient = ctx.createLinearGradient(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">gradient.addColorStop(<span class="number">0</span>, <span class="string">"black"</span>);</div><div class="line">gradient.addColorStop(<span class="number">0.5</span>, <span class="string">"white"</span>);</div><div class="line">gradient.addColorStop(<span class="number">1</span>, <span class="string">"black"</span>);</div><div class="line">ctx.fillStyle = gradient;</div><div class="line">ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">ctx.drawImage(renderer.domElement, <span class="number">0</span>,<span class="number">0</span>, canvas.width, canvas.height );</div></pre></td></tr></table></figure>
<p>When this is up and running the mesh with the material that is using THREE.NoBlending will not blend with the background as one might expect. This is true even thought transparency is set to true, and opacity is lower than one. However the material that is using the default THREE.NormalBlending, which is being made explicit here does blend with the background. So then it would seem that no blending means just simply that, the object will just render over whatever it it that is behind it, and this will always be the case, even if transparency is in effect.</p>
<h3 id="7-2-Additive-Blending"><a href="#7-2-Additive-Blending" class="headerlink" title="7.2 - Additive Blending"></a>7.2 - Additive Blending</h3><p>This is a way to add one material on top of what is going on behind the material.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER, 2D CANVAS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild( renderer.domElement );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123; </div><div class="line">    <span class="attr">blending</span>: THREE.AdditiveBlending, </div><div class="line">    <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">opacity</span>: <span class="number">0.5</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.SphereGeometry( <span class="number">1</span>, <span class="number">60</span>, <span class="number">60</span> );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh_1 = <span class="keyword">new</span> THREE.Mesh(geometry, material);</div><div class="line">mesh_1.position.x = <span class="number">0</span>;</div><div class="line">scene.add(mesh_1);</div><div class="line"><span class="keyword">const</span> mesh_2 = <span class="keyword">new</span> THREE.Mesh(geometry, material);</div><div class="line">mesh_2.position.set( <span class="number">0</span>,<span class="number">-2</span>, <span class="number">-3</span> );</div><div class="line">scene.add(mesh_2);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">3</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">scene.background = <span class="number">0x000000</span>;</div><div class="line">renderer.setClearColor(<span class="number">0x000000</span>, <span class="number">1</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h2 id="8-The-Material-loader-and-other-loader-related-concerns"><a href="#8-The-Material-loader-and-other-loader-related-concerns" class="headerlink" title="8 - The Material loader, and other loader related concerns"></a>8 - The Material loader, and other loader related concerns</h2><p>Creating a material by calling one of the constructor functions as a way to obtain a material is one thing. However when it comes to starting to work on real projects I will want to have a way to pack a lot of the data that has to do with one or more materials into some kind of external file format. With that said baked into the core of threejs itself is the <a href="/2023/07/27/threejs-materials-loader/">Material Loader</a> which is one option for doing this sort of thing. </p>
<p>However there are also a lot of other options for loading not just a material but other data that is needed to create final display objects. There is then a lot to say about how to go about loading materials, as well as everything else that one would want to load into a project by way of some external data as well such as textures to use with such materials. So in this section I will be writing a thing or two about loaders and what the options are for at least materials, but maybe also a few that help with more than just that.</p>
<h3 id="8-1-Parse-a-JSON-string-of-a-material-using-THREE-MaterialLoader"><a href="#8-1-Parse-a-JSON-string-of-a-material-using-THREE-MaterialLoader" class="headerlink" title="8.1 - Parse a JSON string of a material using THREE.MaterialLoader"></a>8.1 - Parse a JSON string of a material using THREE.MaterialLoader</h3><p>The toJSON method of a material can be used to convert a material to a JSON object format, that Object can then be passed to JSON.stringify to create a JSON text form that can then be used with the THREE.MaterialLoader. However for this demo I am hand coding a string of json and I would like to parse it into a workable material that I can then use with a mesh object. To create a material from one of these strings I can pass the string threw the JSON.parse method to get an object to which I can then pass to the parse method of an instance of the material loader. The end result of the call of the parse method is then  a material that I can then use with a mesh object just like with any other.</p>
<p>So then it would look like the JSON string of this demo could then be saved as a json file, and this JSON file can then also be loaded with the material loader as well.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.querySelector(<span class="string">'#demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MATERIAL JSON AS HARD CODED STRING</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> str_material = <span class="string">`&#123;</span></div><div class="line">  "metadata":</div><div class="line">    &#123;</div><div class="line">      "version":4.5,</div><div class="line">      "type":"Material",</div><div class="line">      "generator":"Hand Coded"</div><div class="line">    &#125;,</div><div class="line">    "uuid":"3106bcfd-f862-49cd-9f87-d4807d818af2",</div><div class="line">    "type":"MeshBasicMaterial",</div><div class="line">    "color":16711680</div><div class="line">&#125;`;</div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MaterialLoader().parse( <span class="built_in">JSON</span>.parse(str_material) );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper( <span class="number">10</span>,<span class="number">10</span> ) );</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), material );</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="8-2-One-loader-to-rule-them-all-THREE-ObjectLoader"><a href="#8-2-One-loader-to-rule-them-all-THREE-ObjectLoader" class="headerlink" title="8.2 - One loader to rule them all ( THREE.ObjectLoader )"></a>8.2 - One loader to rule them all ( THREE.ObjectLoader )</h3><p>The material loader might be the first option one might go with to go about loading materials, and if I just need to load materials and not much of anything else that will often work fine. However I have found that what often makes things a little tricky is the question of how to go about loading external image files that I want to use with the various material options that need a texture object. Also the material loader is just simply that, so with that said what about geometry, objects, animations and so on. So then I am of the mindset that <a href="/2023/07/19/threejs-object-loader/">the object loader</a> is a good option for having some kind of plain text format to work with that can then be loader with a loader option that is baked into the core of the threejs library alone.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.querySelector(<span class="string">'#demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// JSON STRING IN OBJECT FORMAT</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> uuid_geometry = <span class="keyword">new</span> THREE.MathUtils.generateUUID();</div><div class="line"><span class="keyword">const</span> uuid_material = <span class="keyword">new</span> THREE.MathUtils.generateUUID();</div><div class="line"><span class="keyword">const</span> uuid_mesh = <span class="keyword">new</span> THREE.MathUtils.generateUUID();</div><div class="line"><span class="keyword">const</span> mesh_json = <span class="string">`</span></div><div class="line">&#123;</div><div class="line">    "metadata": &#123;</div><div class="line">        "version": 4.5,</div><div class="line">        "type": "Object",</div><div class="line">        "generator": "Hand Coded"</div><div class="line">    &#125;,</div><div class="line">    "geometries": [&#123;</div><div class="line">            "uuid": "` + uuid_geometry + <span class="string">`",</span></div><div class="line">            "type": "BoxGeometry",</div><div class="line">            "width": 1,</div><div class="line">            "height": 1,</div><div class="line">            "depth": 1</div><div class="line">        &#125;</div><div class="line">    ],</div><div class="line">    "materials": [&#123;</div><div class="line">            "uuid": "` + uuid_material + <span class="string">`",</span></div><div class="line">            "type": "MeshNormalMaterial"</div><div class="line">        &#125;</div><div class="line">    ],</div><div class="line">    "object": &#123;</div><div class="line">        "uuid": "` + uuid_mesh + <span class="string">`",</span></div><div class="line">        "type": "Mesh",</div><div class="line">        "geometry": "` + uuid_geometry + <span class="string">`",</span></div><div class="line">        "material": "` + uuid_material + <span class="string">`"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">`</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.ObjectLoader().parse( <span class="built_in">JSON</span>.parse( mesh_json ) );</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="8-3-Texture-data-can-be-baked-into-the-object-format-also-by-way-of-data-urls"><a href="#8-3-Texture-data-can-be-baked-into-the-object-format-also-by-way-of-data-urls" class="headerlink" title="8.3 - Texture data can be baked into the object format also by way of data urls"></a>8.3 - Texture data can be baked into the object format also by way of data urls</h3><p>Another great thing that I like about the Object Loader over that of the material loader is that I can bake image data directly into the JSON data by way of data URL values. It is possible to get textures working with the material loader, but as one would expect it involves loading the images, and then creating a special object where each key of the textures object is the value to set for each material option key that is to use the texture in the JSON data. This way I can just bake everything that has to do with a single object, into just one file. Not just the material, and the material option values, but also all the additional values of the texture objects, and with that the image data used for each texture object.</p>
<p>Again with the material loader if I use the texture loader that will just create a new texture with the image that UI load. If for example I need to load a texture with all kinds of custom values for the image I can not do that with the texture loader. I am sure that there are ways of dealing with these issues and also there are things about going that way that will help to keep me from repeating data, but still over all this just makes things a lot easier.</p>
<p>For example everything that I want for a single object can be baked into a json file like this:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"metadata"</span>:&#123;</div><div class="line">    <span class="attr">"version"</span>:<span class="number">4.5</span>,</div><div class="line">    <span class="attr">"type"</span>:<span class="string">"Object"</span>,</div><div class="line">    <span class="attr">"generator"</span>: <span class="string">"Object3D.toJSON"</span></div><div class="line">   &#125;,</div><div class="line">  <span class="attr">"geometries"</span>:[</div><div class="line">    &#123;</div><div class="line">      <span class="attr">"uuid"</span>:<span class="string">"2edf3239-f3e2-42f1-b5f1-4d73f83ec1fe"</span>,</div><div class="line">      <span class="attr">"type"</span>:<span class="string">"BoxGeometry"</span>,</div><div class="line">      <span class="attr">"width"</span>:<span class="number">1</span>,</div><div class="line">      <span class="attr">"height"</span>:<span class="number">1</span>,</div><div class="line">      <span class="attr">"depth"</span>:<span class="number">1</span>,</div><div class="line">      <span class="attr">"widthSegments"</span>:<span class="number">1</span>,</div><div class="line">      <span class="attr">"heightSegments"</span>:<span class="number">1</span>,</div><div class="line">      <span class="attr">"depthSegments"</span>:<span class="number">1</span></div><div class="line">    &#125;</div><div class="line">  ],</div><div class="line">  <span class="attr">"materials"</span>:[</div><div class="line">    &#123;</div><div class="line">      <span class="attr">"uuid"</span>:<span class="string">"20a1a759-2af8-4ac7-8475-531cd36230b2"</span>,</div><div class="line">      <span class="attr">"type"</span>:<span class="string">"MeshBasicMaterial"</span>,</div><div class="line">      <span class="attr">"color"</span>:<span class="number">16777215</span>,</div><div class="line">      <span class="attr">"map"</span>:<span class="string">"09e8941e-b83b-478e-976b-7b3c53ee8298"</span>,</div><div class="line">      <span class="attr">"reflectivity"</span>:<span class="number">1</span>,</div><div class="line">      <span class="attr">"refractionRatio"</span>:<span class="number">0.98</span>,</div><div class="line">      <span class="attr">"depthFunc"</span>:<span class="number">3</span>,</div><div class="line">      <span class="attr">"depthTest"</span>:<span class="literal">true</span>,</div><div class="line">      <span class="attr">"depthWrite"</span>:<span class="literal">true</span>,</div><div class="line">      <span class="attr">"colorWrite"</span>:<span class="literal">true</span>,</div><div class="line">      <span class="attr">"stencilWrite"</span>:<span class="literal">false</span>,</div><div class="line">      <span class="attr">"stencilWriteMask"</span>:<span class="number">255</span>,</div><div class="line">      <span class="attr">"stencilFunc"</span>:<span class="number">519</span>,</div><div class="line">      <span class="attr">"stencilRef"</span>:<span class="number">0</span>,</div><div class="line">      <span class="attr">"stencilFuncMask"</span>:<span class="number">255</span>,</div><div class="line">      <span class="attr">"stencilFail"</span>:<span class="number">7680</span>,</div><div class="line">      <span class="attr">"stencilZFail"</span>:<span class="number">7680</span>,</div><div class="line">      <span class="attr">"stencilZPass"</span>:<span class="number">7680</span></div><div class="line">    &#125;</div><div class="line">  ],</div><div class="line">  <span class="attr">"textures"</span>:[</div><div class="line">    &#123;</div><div class="line">      <span class="attr">"uuid"</span>:<span class="string">"09e8941e-b83b-478e-976b-7b3c53ee8298"</span>,</div><div class="line">      <span class="attr">"name"</span>:<span class="string">""</span>,</div><div class="line">      <span class="attr">"image"</span>:<span class="string">"234825b5-4883-4f89-bc44-96428108b48b"</span>,</div><div class="line">      <span class="attr">"mapping"</span>:<span class="number">300</span>,</div><div class="line">      <span class="attr">"repeat"</span>:[<span class="number">1</span>,<span class="number">1</span>],</div><div class="line">      <span class="attr">"offset"</span>:[<span class="number">0</span>,<span class="number">0</span>],</div><div class="line">      <span class="attr">"center"</span>:[<span class="number">0</span>,<span class="number">0</span>],</div><div class="line">      <span class="attr">"rotation"</span>:<span class="number">0</span>,</div><div class="line">      <span class="attr">"wrap"</span>:[<span class="number">1001</span>,<span class="number">1001</span>],</div><div class="line">      <span class="attr">"format"</span>:<span class="number">1023</span>,</div><div class="line">      <span class="attr">"type"</span>:<span class="number">1009</span>,</div><div class="line">      <span class="attr">"encoding"</span>:<span class="number">3000</span>,</div><div class="line">      <span class="attr">"minFilter"</span>:<span class="number">1008</span>,</div><div class="line">      <span class="attr">"magFilter"</span>:<span class="number">1003</span>,</div><div class="line">      <span class="attr">"anisotropy"</span>:<span class="number">1</span>,</div><div class="line">      <span class="attr">"flipY"</span>:<span class="literal">true</span>,</div><div class="line">      <span class="attr">"premultiplyAlpha"</span>:<span class="literal">false</span>,</div><div class="line">      <span class="attr">"unpackAlignment"</span>:<span class="number">4</span></div><div class="line">    &#125;</div><div class="line">  ],</div><div class="line">  <span class="attr">"images"</span>:[</div><div class="line">    &#123;</div><div class="line">      <span class="attr">"uuid"</span>:<span class="string">"234825b5-4883-4f89-bc44-96428108b48b"</span>,</div><div class="line">      <span class="attr">"url"</span>:<span class="string">"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAABHNCSVQICAgIfAhkiAAAACJJREFUGFdjZPgPhHgAI1gBI1AFujKoGEQBQRPooIASRwIAF0kT+UaQEawAAAAASUVORK5CYII="</span></div><div class="line">    &#125;</div><div class="line">  ],</div><div class="line">  <span class="attr">"object"</span>:&#123;</div><div class="line">    <span class="attr">"uuid"</span>:<span class="string">"e5b75f7f-e1de-41f1-bff5-1d4ef7b5c944"</span>,</div><div class="line">    <span class="attr">"type"</span>:<span class="string">"Mesh"</span>,</div><div class="line">    <span class="attr">"layers"</span>:<span class="number">1</span>,</div><div class="line">    <span class="attr">"matrix"</span>:[<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>],</div><div class="line">    <span class="attr">"geometry"</span>:<span class="string">"2edf3239-f3e2-42f1-b5f1-4d73f83ec1fe"</span>,</div><div class="line">    <span class="attr">"material"</span>:<span class="string">"20a1a759-2af8-4ac7-8475-531cd36230b2"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Then I can load that file with the load method of the THREE.ObjectLoader class.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.querySelector(<span class="string">'#demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LOAD JSON FILE - that is in the object format with geometry, material, and texture</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.ObjectLoader();</div><div class="line">loader.load(<span class="string">'./demo.json'</span>, ( mesh ) =&gt; &#123;</div><div class="line">    scene.add(mesh)</div><div class="line">    camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="9-Textures"><a href="#9-Textures" class="headerlink" title="9 - Textures"></a>9 - Textures</h2><p>In the basic section I covered a simple getting started type example of the use of textures and materials. However there is of course a whole lot more to write about <a href="/2023/06/27/threejs-texture">when it comes to textures</a>, and how they overlap with geometry, and yes mesh material options that require a texture as the value to be given. In the basic example I was using the map option for the texture which is a good start but there are of course many other options from one material to another. So in this section the focus is going to be more so on textures, but while I am at it I will of course need to focus on features of buffer geometry objects as well, mainly the <a href="/2021/06/09/threejs-buffer-geometry-attributes-uv/">uv attribute</a> which I would say that you would want to look into more at some point.</p>
<p> I will also have to at least touch base on many other various features of threejs that are relevant to the use of textures with materials such as light sources. However this is still very much a section on the subject of materials in general with threejs. So there will still be a lot to say about the various options when it comes to the kinds of maps there are to work with from one material to another.</p>
<h3 id="9-1-Repeating-The-WrapS-and-WrapT-properties-of-textures"><a href="#9-1-Repeating-The-WrapS-and-WrapT-properties-of-textures" class="headerlink" title="9.1 - Repeating The WrapS and WrapT properties of textures"></a>9.1 - Repeating The WrapS and WrapT properties of textures</h3><p>One thing that might come up when dealing with a texture, geometry, and the material that is being used with a mesh is a situation that will happen when dealing with uv attributes values that will go out of range of the texture. I have found that it is a good practice to try to keep the uv attributes values in a range between 0, and 1. However that is more of a guild line than a rule it would seem on my part as I see a lot of uv generator code that does very much result in UV values that go out of that range. This might not present much of a problem though as long as you know about what the deal is with the wrapS and wrapT values of the texture object mind you.</p>
<p>By default the wrapS and wrapT properties of a texture will be set to the THREE.ClampToEdgeWrapping, which again should not be a problem as along as you keep the UV values in the 0 to 1 range. However if UV values are going are of range, and you can not work out how to go about addressing that, then you might try setting the wrapS and wrapT property values to THREE.RepeatWrapping. The demo in this section will do a good job of showing what the deal is with this.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">.025</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CANVAS ELEMENT, 2D DRAWING CONTEXT, TEXTURE - Whole Bunch of cells</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>), ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas.width = <span class="number">1024</span>; canvas.height = <span class="number">1024</span>;</div><div class="line">ctx.fillStyle = <span class="string">'#ffffff'</span>;</div><div class="line">ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line"><span class="keyword">const</span> w = <span class="number">2</span>;</div><div class="line"><span class="keyword">const</span> wp = canvas.width / w;</div><div class="line"><span class="keyword">const</span> len = w * w;</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">ctx.textBaseline = <span class="string">'middle'</span>;</div><div class="line">ctx.textAlign = <span class="string">'center'</span>;</div><div class="line">ctx.font = <span class="string">'500px arial'</span>;</div><div class="line">ctx.lineWidth = <span class="number">8</span>;</div><div class="line"><span class="keyword">while</span>( i  &lt; len )&#123;</div><div class="line">    <span class="keyword">const</span> a_cell = i / len;</div><div class="line">    <span class="keyword">const</span> x = i % w;</div><div class="line">    <span class="keyword">const</span> y = <span class="built_in">Math</span>.floor( i / w );</div><div class="line">    ctx.fillStyle = <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, a_cell, <span class="number">1</span> - a_cell).getStyle();</div><div class="line">    ctx.fillRect(x * wp, y * wp, wp, wp);</div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.strokeStyle = <span class="string">'#8f8f8f'</span>;</div><div class="line">    ctx.fillText(i, x * wp + wp / <span class="number">2</span>, y * wp + wp * <span class="number">0.6</span>);</div><div class="line">    ctx.strokeText(i, x * wp + wp / <span class="number">2</span>, y * wp + wp * <span class="number">0.6</span>);</div><div class="line">    i += <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> texture = <span class="keyword">new</span> THREE.CanvasTexture(canvas);</div><div class="line">texture.magFilter = THREE.NearestFilter;</div><div class="line">texture.minFilter = THREE.NearestFilter;</div><div class="line"><span class="comment">// USING THREE.RepeatWrapping OVER THE DEFAULT VALUE OF</span></div><div class="line"><span class="comment">// THREE.ClampToEdgeWrapping FOR wrapS and WrapT</span></div><div class="line">texture.wrapS = THREE.RepeatWrapping;</div><div class="line">texture.wrapT = THREE.RepeatWrapping;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">    <span class="attr">map</span>: texture</div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY - mutation of uv attribute</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.PlaneGeometry(<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">geo.rotateX( <span class="built_in">Math</span>.PI * <span class="number">1.5</span> );</div><div class="line"><span class="keyword">const</span> att_uv = geo.getAttribute(<span class="string">'uv'</span>);</div><div class="line"><span class="built_in">console</span>.log( att_uv.array );</div><div class="line">att_uv.setXY(<span class="number">0</span>, <span class="number">-0.25</span>,  <span class="number">1.25</span>);</div><div class="line">att_uv.setXY(<span class="number">1</span>,  <span class="number">0.25</span>,  <span class="number">1.25</span>);</div><div class="line">att_uv.setXY(<span class="number">2</span>, <span class="number">-0.25</span>,  <span class="number">0.75</span>);</div><div class="line">att_uv.setXY(<span class="number">3</span>,  <span class="number">0.25</span>,  <span class="number">0.75</span>);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geo, material );</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set( <span class="number">1.7</span>, <span class="number">1.2</span>, <span class="number">1.7</span> );</div><div class="line">camera.lookAt( <span class="number">0</span>, <span class="number">-0.5</span>, <span class="number">0</span> );</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="9-2-Light-standard-material-Set-UVmapping-of-BoxGeometry-diffuse-and-emissive-maps"><a href="#9-2-Light-standard-material-Set-UVmapping-of-BoxGeometry-diffuse-and-emissive-maps" class="headerlink" title="9.2 - Light, standard material, Set UVmapping of BoxGeometry, diffuse and emissive maps"></a>9.2 - Light, standard material, Set UVmapping of BoxGeometry, diffuse and emissive maps</h3><p>This example features a helper function that can be called over and over again to create not one, but many textures using canvas elements. I am then using this create canvas texture helper to create not one but two textures. One texture will be used for the map option of an instance of the standard material, and the other texture will be used for the emissive map of the material. </p>
<p>As I have covered in the mesh materials section the standard material is an example of the kind of material that will respond to a light source. As such the map option does not work the same way as it does in say the basic material as the texture will only show up when some light is shining on it. There is however the emissive color, and with that the emissive map that will work like what one might be used to when it comes to the use of the basic material. So for the instance of the standard material in this demo I am using one texture for the map option, and another for the emissive map option. I am also using the emissive option to set what the emissive color is as I will want it to be something other than the default black color, and there is also the emissive intensity option that will of course adjust the intestacy of the emissive effect.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>));</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">.025</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPER FUNCTIONS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// function to help create a texture with javaScript code</span></div><div class="line"><span class="keyword">const</span> createCanvasTexture = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    opt.size = opt.size === <span class="literal">undefined</span> ? <span class="number">1024</span> : opt.size;</div><div class="line">    opt.userData = opt.userData || &#123;&#125;;</div><div class="line">    opt.draw = opt.draw || <span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas, state</span>) </span>&#123;&#125;;</div><div class="line">    <span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>),</div><div class="line">    ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    canvas.width = opt.size;</div><div class="line">    canvas.height = opt.size;</div><div class="line">    opt.draw(ctx, canvas, opt.userData);</div><div class="line">    <span class="keyword">const</span> texture = <span class="keyword">new</span> THREE.CanvasTexture(canvas);</div><div class="line">    texture.userData = <span class="built_in">Object</span>.assign(texture.userData, opt.userData);</div><div class="line">    texture.magFilter = THREE.NearestFilter;</div><div class="line">    texture.minFilter = THREE.NearestFilter;</div><div class="line">    texture.wrapS = THREE.RepeatWrapping;</div><div class="line">    texture.wrapT = THREE.RepeatWrapping;</div><div class="line">    <span class="keyword">return</span> texture</div><div class="line">&#125;;</div><div class="line"><span class="comment">// mutate the state of a BoxGeometrys UV attribute</span></div><div class="line"><span class="keyword">const</span> setUVBoxFace = <span class="function">(<span class="params">geo, w = <span class="number">8</span>, face_index = <span class="number">0</span>, v_cell = <span class="keyword">new</span> THREE.Vector2( <span class="number">0</span>, <span class="number">0</span> </span>), <span class="params">offset</span> = <span class="params">new</span> <span class="params">THREE</span>.<span class="params">Vector2</span>(<span class="params"> <span class="number">0</span>, <span class="number">0</span> </span>)) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> att_uv = geo.getAttribute(<span class="string">'uv'</span>);</div><div class="line">    <span class="keyword">const</span> cx = <span class="number">1</span> / w * v_cell.x + offset.x;</div><div class="line">    <span class="keyword">const</span> cy = <span class="number">1</span> / w * v_cell.y + offset.y;</div><div class="line">    <span class="keyword">const</span> i2 = face_index * <span class="number">4</span>;</div><div class="line">    att_uv.setXY(i2, <span class="number">0.000</span> + cx, <span class="number">1.000</span> - cy);</div><div class="line">    att_uv.setXY(i2 + <span class="number">1</span>, <span class="number">0.125</span> + cx, <span class="number">1.000</span> - cy);</div><div class="line">    att_uv.setXY(i2 + <span class="number">2</span>, <span class="number">0.000</span> + cx, <span class="number">0.875</span> - cy);</div><div class="line">    att_uv.setXY(i2 + <span class="number">3</span>, <span class="number">0.125</span> + cx, <span class="number">0.875</span> - cy);</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// TEXTURES</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// diffuse color map texture composed of a grid where each cell has and index number</span></div><div class="line"><span class="keyword">const</span> texture_map = createCanvasTexture(&#123;</div><div class="line">    <span class="attr">userData</span>: &#123;</div><div class="line">        <span class="attr">w</span> : <span class="number">8</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">draw</span>: <span class="function">(<span class="params">ctx, canvas, userData</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> w = userData.w;</div><div class="line">        <span class="keyword">const</span> wp = canvas.width / w;</div><div class="line">        <span class="keyword">const</span> len = w * w;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        ctx.textBaseline = <span class="string">'middle'</span>;</div><div class="line">        ctx.textAlign = <span class="string">'center'</span>;</div><div class="line">        ctx.font = <span class="string">'100px arial'</span>;</div><div class="line">        ctx.lineWidth = <span class="number">3</span>;</div><div class="line">        <span class="keyword">while</span> (i &lt; len) &#123;</div><div class="line">            <span class="keyword">const</span> a_cell = (i + <span class="number">5</span>) / (len + <span class="number">15</span>);</div><div class="line">            <span class="keyword">const</span> x = i % w;</div><div class="line">            <span class="keyword">const</span> y = <span class="built_in">Math</span>.floor(i / w);</div><div class="line">            ctx.fillStyle = <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, a_cell, <span class="number">1</span> - a_cell).getStyle();</div><div class="line">            ctx.fillRect(x * wp, y * wp, wp, wp);</div><div class="line">            ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">            ctx.strokeStyle = <span class="string">'#5f5f5f'</span>;</div><div class="line">            ctx.fillText(i, x * wp + wp / <span class="number">2</span>, y * wp + wp / <span class="number">2</span>);</div><div class="line">            ctx.strokeText(i, x * wp + wp / <span class="number">2</span>, y * wp + wp / <span class="number">2</span>);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// texture for the emissive map where I have just random gray scale blocks</span></div><div class="line"><span class="keyword">const</span> texture_emissive = createCanvasTexture(&#123;</div><div class="line">    <span class="attr">userData</span>: &#123;</div><div class="line">        <span class="attr">w</span> : <span class="number">32</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">draw</span>: <span class="function">(<span class="params">ctx, canvas, userData</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">const</span> w = userData.w;</div><div class="line">        <span class="keyword">const</span> pw = canvas.width / w;</div><div class="line">        <span class="keyword">const</span> len = w * w;</div><div class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">            <span class="keyword">const</span> x = i % w;</div><div class="line">            <span class="keyword">const</span> y = <span class="built_in">Math</span>.floor( i / w );</div><div class="line">            <span class="keyword">const</span> v = <span class="number">0.25</span> * <span class="number">0.75</span> * <span class="built_in">Math</span>.random();</div><div class="line">            ctx.fillStyle = <span class="keyword">new</span> THREE.Color( v, v, v ).getStyle();</div><div class="line">            ctx.fillRect(x * pw, y * pw, pw, pw)</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIAL - </span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">    <span class="attr">map</span>: texture_map,</div><div class="line">    <span class="attr">emissive</span>: <span class="keyword">new</span> THREE.Color(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="attr">emissiveMap</span>: texture_emissive,</div><div class="line">    <span class="attr">emissiveIntensity</span>: <span class="number">1</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY - mutation of uv attribute</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="keyword">const</span> v_cell = <span class="keyword">new</span> THREE.Vector2( <span class="number">-0.5</span>, <span class="number">-0.5</span> );</div><div class="line">setUVBoxFace(geo, <span class="number">8</span>, <span class="number">2</span>, v_cell)</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">0.7</span>);</div><div class="line">dl.position.set(<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>);</div><div class="line">scene.add(dl);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo, material);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.25</span>, <span class="number">1.25</span>, <span class="number">1.25</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="9-3-Rotation-of-UV-values-demo"><a href="#9-3-Rotation-of-UV-values-demo" class="headerlink" title="9.3 - Rotation of UV values demo"></a>9.3 - Rotation of UV values demo</h3><p>For this demo I worked out another demo that has to do with the mutation of the uv attribute to change what the state is when it comes to mapping the 2d texture to the 3D geometry. With this demo I am once again just using the Mesh Basic Material with the map option and I am once again using a canvas texture to create a simple texture with a little javaScript code. This time I am also once again mutating the state of the uv attribute but now I am doing so in a way that will result in a rotation kind of effect with a very simple plain geometry once again.</p>
<p>This demo might be a bit off topic when it comes to materials, but still a major part of starting to do something involving a final product of some kind will have to deal with setting up things with the UV attribute. The focus here in this section is still with materials, but there is not just what is going on with materials but also the state of the geometry as well.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">.025</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELEPRS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> setUVRotation = <span class="function">(<span class="params"> geo, c = <span class="keyword">new</span> THREE.Vector2(<span class="number">0.5</span>, <span class="number">0.5</span></span>), <span class="params">radius</span> = 0.75, <span class="params">a_start</span> = <span class="params">Math</span>.<span class="params">PI</span> * 1.75, <span class="params">order</span> = '<span class="params">XZ</span>' ) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> att_uv = geo.getAttribute(<span class="string">'uv'</span>);</div><div class="line">    <span class="keyword">const</span> att_pos = geo.getAttribute(<span class="string">'position'</span>);</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>( i &lt; att_uv.count )&#123;</div><div class="line">        <span class="keyword">const</span> a = a_start + <span class="built_in">Math</span>.atan2( att_pos[ <span class="string">'get'</span> + order[<span class="number">0</span>] ](i), att_pos[ <span class="string">'get'</span> + order[<span class="number">1</span>] ](i) );</div><div class="line">        <span class="keyword">const</span> u = c.x + <span class="built_in">Math</span>.cos(a) * radius;</div><div class="line">        <span class="keyword">const</span> v = c.y + <span class="built_in">Math</span>.sin(a) * radius;</div><div class="line">        att_uv.setXY( i, u, v );</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">   &#125;</div><div class="line">   att_uv.needsUpdate = <span class="literal">true</span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CANVAS ELEMENT, 2D DRAWING CONTEXT, TEXTURE - Whole Bunch of cells</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>), ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas.width = <span class="number">1024</span>; canvas.height = <span class="number">1024</span>;</div><div class="line">ctx.fillStyle = <span class="string">'#ffffff'</span>;</div><div class="line">ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line"><span class="keyword">const</span> w = <span class="number">2</span>;</div><div class="line"><span class="keyword">const</span> wp = canvas.width / w;</div><div class="line"><span class="keyword">const</span> len = w * w;</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">ctx.textBaseline = <span class="string">'middle'</span>;</div><div class="line">ctx.textAlign = <span class="string">'center'</span>;</div><div class="line">ctx.font = <span class="string">'500px arial'</span>;</div><div class="line">ctx.lineWidth = <span class="number">8</span>;</div><div class="line"><span class="keyword">while</span>( i  &lt; len )&#123;</div><div class="line">    <span class="keyword">const</span> a_cell = i / len;</div><div class="line">    <span class="keyword">const</span> x = i % w;</div><div class="line">    <span class="keyword">const</span> y = <span class="built_in">Math</span>.floor( i / w );</div><div class="line">    ctx.fillStyle = <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, a_cell, <span class="number">1</span> - a_cell).getStyle();</div><div class="line">    ctx.fillRect(x * wp, y * wp, wp, wp);</div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.strokeStyle = <span class="string">'#8f8f8f'</span>;</div><div class="line">    ctx.fillText(i, x * wp + wp / <span class="number">2</span>, y * wp + wp * <span class="number">0.6</span>);</div><div class="line">    ctx.strokeText(i, x * wp + wp / <span class="number">2</span>, y * wp + wp * <span class="number">0.6</span>);</div><div class="line">    i += <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> texture = <span class="keyword">new</span> THREE.CanvasTexture(canvas);</div><div class="line">texture.magFilter = THREE.NearestFilter;</div><div class="line">texture.minFilter = THREE.NearestFilter;</div><div class="line">texture.wrapS = THREE.RepeatWrapping;</div><div class="line">texture.wrapT = THREE.RepeatWrapping;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">    <span class="attr">map</span>: texture</div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY - mutation of uv attribute</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.PlaneGeometry(<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">geo.rotateX( <span class="built_in">Math</span>.PI * <span class="number">1.5</span> );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geo, material );</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set( <span class="number">1.7</span>, <span class="number">1.2</span>, <span class="number">1.7</span> );</div><div class="line">camera.lookAt( <span class="number">0</span>, <span class="number">-0.5</span>, <span class="number">0</span> );</div><div class="line"><span class="keyword">const</span> sm = &#123;</div><div class="line">   <span class="attr">FPS_UPDATE</span>: <span class="number">12</span>,     <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">   FPS_MOVEMENT: <span class="number">30</span>,  <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">   FRAME_MAX: <span class="number">900</span>,</div><div class="line">   <span class="attr">secs</span>: <span class="number">0</span>,</div><div class="line">   <span class="attr">frame_frac</span>: <span class="number">0</span>,    <span class="comment">// 30.888 / 450</span></div><div class="line">   frame: <span class="number">0</span>,         <span class="comment">// 30 / 450</span></div><div class="line">   tick: <span class="number">0</span>,           <span class="comment">//  1 / 450 ( about 1 FPS then )</span></div><div class="line">   now: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">   <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">   <span class="attr">c</span>: <span class="keyword">new</span> THREE.Vector2(<span class="number">0.5</span>, <span class="number">0.5</span>),</div><div class="line">   <span class="attr">radius</span>: <span class="number">0.8</span>,</div><div class="line">   <span class="attr">a_start</span>: <span class="number">0</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">sm</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> a_frame = sm.frame / sm.FRAME_MAX;</div><div class="line">    <span class="keyword">const</span> a_rotation = a_frame * <span class="number">16</span> % <span class="number">1</span>;</div><div class="line">    <span class="keyword">const</span> a_radius = (<span class="number">1</span> + <span class="built_in">Math</span>.sin( <span class="built_in">Math</span>.PI * <span class="number">2</span> * (a_frame * <span class="number">4</span> % <span class="number">1</span>) ) ) / <span class="number">2</span></div><div class="line">    sm.a_start = <span class="built_in">Math</span>.PI * <span class="number">2</span> * a_rotation;</div><div class="line">    sm.radius = <span class="number">0.5</span> + <span class="number">1.75</span> * a_radius;</div><div class="line">    setUVRotation(geo, sm.c, sm.radius, sm.a_start);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    sm.now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    sm.secs = (sm.now - sm.lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(sm.secs &gt; <span class="number">1</span> / sm.FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render to 3d canvas, and then render to 2d canvas</span></div><div class="line">        update(sm);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        sm.frame_frac += sm.FPS_MOVEMENT * sm.secs;</div><div class="line">        sm.frame_frac %= sm.FRAME_MAX;</div><div class="line">        sm.frame = <span class="built_in">Math</span>.floor(sm.frame_frac);</div><div class="line">        sm.tick = (sm.tick += <span class="number">1</span>) % sm.FRAME_MAX;</div><div class="line">        sm.lt = sm.now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="10-Light-and-Materials"><a href="#10-Light-and-Materials" class="headerlink" title="10 - Light and Materials"></a>10 - Light and Materials</h2><p>Of course I am going to need to write at least a few things about light sources and materials in general in threejs. The first thing that people that are new to threejs should know is that not all materials will work with light sources to begin with. Another major thing is that some of the options of materials will work a little differently between certain materials. I would say that this is the case with the color option of the basic material compared to that of a material that will work with light such as the standard material. So in this section I will be focusing on at least some of these basic details about light. You might want to check out my <a href="/2022/02/25/threejs-light/">main blog post on light in threejs</a> if you would like to read up more on this subject though.</p>
<h3 id="10-1-Getting-started-with-Directional-Light"><a href="#10-1-Getting-started-with-Directional-Light" class="headerlink" title="10.1 - Getting started with Directional Light"></a>10.1 - Getting started with Directional Light</h3><p>A good option to start with I think would be directional light as a light source. This is a kind of object where I just set the direction part of the Vector of the position property of the directional light object to create a situation in which light is moving in an even, parallel direction along the direction part alone of the position. Sense it is just the direction part of the vector that matters with this light option I might choose to <a href="/2021/06/14/threejs-vector3-normalize/">normalize the vector</a> to a length of 1.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>).normalize();</div><div class="line">scene.add(dl);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// INSTANCE OF THE STANDARD MATERIAL</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="number">0xff0000</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GRID AND MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">scene.add(<span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), material ));</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="10-2-Ambient-Light-and-Emissive-color"><a href="#10-2-Ambient-Light-and-Emissive-color" class="headerlink" title="10.2 - Ambient Light and Emissive color"></a>10.2 - Ambient Light and Emissive color</h3><p>There is the ambient light option that when added to the scene object will result in a base intensity of light being applied to all materials that will work with light sources. When calling the THREE.AmbientLight constructor I can give a color as the first argument followed by a starting intensity value of the light. </p>
<p>There is also the emissive color, and the emissive intensity options that are typically found in materials that respond to light sources that can also be used to get a base amount of color. By default the emissive color is black, so often I might want to set the emissive color to something other than black. After that another option of interest would be the emissive intensity option. This emissive intensity option can be adjusted along with the intensity of the ambient light to change the base intensity of the emissive and color options of the matreial.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> al = <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>, <span class="number">0.25</span>);</div><div class="line">scene.add(al);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERAILS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material_1 = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="number">0xff0000</span></div><div class="line">&#125;);</div><div class="line"><span class="keyword">const</span> material_2 = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="number">0xffffff</span>,</div><div class="line">    <span class="attr">emissive</span>: <span class="number">0x00ff00</span>,</div><div class="line">    <span class="attr">emissiveIntensity</span>: <span class="number">1</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GRID AND MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="keyword">const</span> mesh_1 = <span class="keyword">new</span> THREE.Mesh( geo, material_1 );</div><div class="line">mesh_1.position.x = <span class="number">-0.7</span>;</div><div class="line">scene.add( mesh_1 );</div><div class="line"><span class="keyword">const</span> mesh_2 = <span class="keyword">new</span> THREE.Mesh( geo, material_2 );</div><div class="line">mesh_2.position.x = <span class="number">0.7</span>;</div><div class="line">scene.add( mesh_2 );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h2 id="11-Shadows"><a href="#11-Shadows" class="headerlink" title="11 - Shadows"></a>11 - Shadows</h2><p>For this section I will be taking a look at the use of shadows with materials. There are a lot of details to be aware of when it comes to getting these up and running with a project. There is not just what one should be aware of when it comes to materials mind you, but also the various other typical features of the project. For example there is checking if the renderer that you are using will even support shades to begin with, when t comes to that the webGl Renderer seems to do so just fine, but the shadow map setting might need to be set to true first. There are also a lot of other properties at the mesh object level, and also with the light sources that one is using as well that need to be addressed.</p>
<h3 id="11-1-Spotlight-Example-of-Shadows"><a href="#11-1-Spotlight-Example-of-Shadows" class="headerlink" title="11.1 - Spotlight Example of Shadows"></a>11.1 - Spotlight Example of Shadows</h3><p>For this example I worked out a bAsic hello world kind of example with shadows. When setting up the renderer I need to make sure shadow map is set to true for it. After that there are the castShadow and receive shadow booleans of the mesh objects that I also want to make sure are set to true as well. When it comes to the spot light that I am using there are a whole bunch of properties that I might want to adjust as well. However when it comes to the materials uses it would seem that there is not that much that I need to bother with, at least when it comes to the basics with this when using the standard material, and phong material at least. One thing that I have noticed thus far is that the material option used for an object that is casting a shadow might not matter that much, but the object that is receiving a shadow does very much matter. Although much of this has to do with the renderer, mesh, and light source objects the material used still does need to support these shadow effects as well.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">45</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.shadowMap.enabled = <span class="literal">true</span>;</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MESH OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> cube = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">        <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">        <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0xff0000</span></div><div class="line">       &#125;));</div><div class="line">cube.position.set(<span class="number">0</span>, <span class="number">0.5</span>, <span class="number">0</span>);</div><div class="line">cube.castShadow = <span class="literal">true</span>;</div><div class="line">scene.add(cube);</div><div class="line"><span class="keyword">const</span> plane = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">        <span class="keyword">new</span> THREE.PlaneGeometry(<span class="number">10</span>, <span class="number">10</span>, <span class="number">8</span>, <span class="number">8</span>),</div><div class="line">        <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0x00afaf</span></div><div class="line">        &#125;));</div><div class="line">plane.geometry.rotateX(<span class="built_in">Math</span>.PI * <span class="number">1.5</span>)</div><div class="line">plane.receiveShadow = <span class="literal">true</span>; <span class="comment">// the plane will receive a shadow</span></div><div class="line">scene.add(plane);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SPOTLIGHT</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> spotLight = <span class="keyword">new</span> THREE.SpotLight(<span class="number">0xffffff</span>);</div><div class="line"><span class="comment">// I must at least set the caseShadow boolean</span></div><div class="line"><span class="comment">// of the spotLight to true</span></div><div class="line">spotLight.castShadow = <span class="literal">true</span>;</div><div class="line"><span class="comment">// additional shadow properties of interest</span></div><div class="line">spotLight.shadow.mapSize.width = <span class="number">1024</span>;</div><div class="line">spotLight.shadow.mapSize.height = <span class="number">1024</span>;</div><div class="line">spotLight.shadow.camera.near = <span class="number">1</span>;</div><div class="line">spotLight.shadow.camera.far = <span class="number">1000</span>;</div><div class="line"><span class="comment">// additional spotlight properties of interest</span></div><div class="line">spotLight.intensity = <span class="number">2</span>;</div><div class="line">spotLight.penumbra = <span class="number">.5</span>;</div><div class="line">spotLight.angle = <span class="built_in">Math</span>.PI / <span class="number">2.5</span>;</div><div class="line">spotLight.distance = <span class="number">1000</span>;</div><div class="line">spotLight.position.set(<span class="number">-2.5</span>, <span class="number">2.5</span>, <span class="number">2.5</span>);</div><div class="line">scene.add(spotLight);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CALLING RENDER OF RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h2 id="12-Using-Arrays-of-Materials-and-the-Groups-property-of-Buffer-Geometry-Objects"><a href="#12-Using-Arrays-of-Materials-and-the-Groups-property-of-Buffer-Geometry-Objects" class="headerlink" title="12 - Using Arrays of Materials and the Groups property of Buffer Geometry Objects"></a>12 - Using Arrays of Materials and the Groups property of Buffer Geometry Objects</h2><p>For this section I will now be getting more into the subject of using an <a href="/2018/05/14/threejs-mesh-material-index/">array of materials</a> rather than just one for a display object. When it comes to older versions of threejs this would involve the use of the now defunct face3 class. I will not be getting into the use of that class of course, however I am still seeing a lot of outdated threejs source code examples pop up in Google search when it comes to this so be aware of that when looking elsewhere when it comes to this topic. I have my own posts on face3 mind you, but the difference is that I keep up with editing, and thus inform people visiting that it is an outdated feature of the library.</p>
<p>The general process of doing this will not always just involving passing an array of materials and then moving on with ones life. If you are lucky the groups property is all ready set up just the way that you want it and maybe that will in fact actually be the case. However more often that not one will need to update, or even create to begin with the groups property of the geometry that is used with the over all display object.</p>
<h3 id="12-1-Cube-Example-Revisited"><a href="#12-1-Cube-Example-Revisited" class="headerlink" title="12.1 - Cube Example Revisited"></a>12.1 - Cube Example Revisited</h3><p>In the Basic Section I covered a simple example of the use of an array of materials using an instance of the Box Geometry. The Box geometry is one example of a geometry cerated with a built in geometry constructor where the groups property is set up to begin with. So demos that involve this kind of geometry often serve as a good start point for this sort of thing for that reason. With that said for this first demo on my arrays of materials section here I will once again be starting out with that, but this time I will be looping over the array of groups objects and setting the values of the material index properties of each group object.</p>
<p>So then this time I will not just be passing an array fo six materials, but rather an array of only three materials. Sense the total number of materials is less than the number of groups one way to work with this would be to set each material index value of each group to the material index value that I want fir each side.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) ); </div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH - Using BoxGeometry and an Array of Materials</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    [</div><div class="line">        <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0xff0000</span> &#125;),</div><div class="line">        <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0x00ff00</span> &#125;),</div><div class="line">        <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0x0000ff</span> &#125;)</div><div class="line">    ]</div><div class="line">);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MUTATION OF MATERIAL INDEX VALUES OF GROUP OBEJCTS THAT ARE ALL READY IN PLACE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = mesh.geometry;</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> len_groups = geometry.groups.length;</div><div class="line"><span class="keyword">const</span> len_materials = mesh.material.length;</div><div class="line"><span class="keyword">while</span>( i &lt; len_groups )&#123;</div><div class="line">    <span class="keyword">const</span> group = geometry.groups[i];</div><div class="line">    group.materialIndex = i % len_materials;</div><div class="line">    i += <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    mesh.rotation.y += <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">5</span>;</div><div class="line">    mesh.rotation.y %= <span class="built_in">Math</span>.PI * <span class="number">2</span>;</div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>There are a lot of other ways of branching off from this point such as using more than six materials and what one might want to do with that kind of situation. There is updating the material index values over time to switch to whatever material I want to use for whatever side at any given moment. However there is also increasing the point density of the box geometry and creating a whole new groups array from the ground up by leaning how to use the various buffer geometry class methods that there are to work with when it comes to this sort of thing.</p>
<h3 id="12-2-Material-for-each-side-of-a-plane-getting-started-with-the-add-group-method"><a href="#12-2-Material-for-each-side-of-a-plane-getting-started-with-the-add-group-method" class="headerlink" title="12.2 - Material for each side of a plane, getting started with the add group method"></a>12.2 - Material for each side of a plane, getting started with the add group method</h3><p>So when it comes to working with a geometry in which the groups property is worked out for me to begin with, often I might just need to give an array of materials that I want to use and that is it. In other cases I might need to loop over the array of group objects and adjust the material index values, but not mess with anything that has to do with the start and count properties of these group objects.</p>
<p>However often I might need to adjust things with the start and count values of these kinds of objects. Of course this will be the case when working out custom geometry in the form of an external asset, or a custom geometry constructor that extends from one of the buffer geometry classes. As far as we are concerned with this demo at least here I am just starting with a plane geometry which I would say is a good way to get started with this aspect of buffer geometry objects, and with that arrays of materials Unlike the box geometry the plane geometry does not have a group property set up to begin with, it must be added to the geometry by making use of the add group method of the buffer geometry class.</p>
<p>One thing to watch out for here is to check if the geometry that is being used is an indexed geometry or not. This is of course a whole other ball of wax when it comes to overlap between materials, geometry objects, and the object3d class based mesh objects that wrap up everything together. However getting back to the matter at hand here at least, by default the geometry that is returned after calling the plane geometry constructor is an indexed geometry. So then I will want to look at the index of the geometry for values that will help me to know what the range is with the start, and count values to use when calling the add group method. When it comes to non indexed geometry there is just looking at the count of points in the position attribute. I made a helper for this demo that seems to work okay for both cases with plane geometry though. So this is just an For Your information type deal when it comes to dealing with geometry other than than of plane geometry that may or may not be indexed.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) ); </div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> addPlaneGroups = <span class="function">(<span class="params"> geometry </span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> pos = geometry.getAttribute(<span class="string">'position'</span>);</div><div class="line">    <span class="keyword">let</span> count = pos.count;</div><div class="line">    <span class="keyword">if</span>(geometry.index)&#123;</div><div class="line">        count = geometry.index.count;</div><div class="line">    &#125;</div><div class="line">    geometry.addGroup(<span class="number">0</span>, count, <span class="number">0</span>);</div><div class="line">    geometry.addGroup(<span class="number">0</span>, count, <span class="number">1</span>);</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIALS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> materials = [</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0xff0000</span>, <span class="attr">side</span>: THREE.FrontSide &#125;),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: <span class="number">0x00ff00</span>, <span class="attr">side</span>: THREE.BackSide &#125;)</div><div class="line">];</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.PlaneGeometry(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>).toNonIndexed();</div><div class="line">addPlaneGroups(geometry);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH </span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geometry, materials );</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    mesh.rotation.y += <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">5</span>;</div><div class="line">    mesh.rotation.y %= <span class="built_in">Math</span>.PI * <span class="number">2</span>;</div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="13-Fog-and-materials"><a href="#13-Fog-and-materials" class="headerlink" title="13 - Fog and materials"></a>13 - Fog and materials</h2><p>I thought that I should start a section on the <a href="/2018/04/16/threejs-fog">subject of FOG and materials</a>, and have at least one demo that I might expand on more as there is a great deal to be aware of when it comes to this subject. When it comes to the options for Fog Objects to set to the scene.fog property there are two options <a href="https://threejs.org/docs/#api/en/scenes/FogExp2" target="_blank" rel="external">THREE.FogExp2</a>, and <a href="https://threejs.org/docs/#api/en/scenes/Fog" target="_blank" rel="external">THREE.Fog</a>. More often than not I like to go with THREE.FogExp2 over that of THREE.Fog as I like the exponential effects rather than the similar linear effect of THREE.Fog.</p>
<h3 id="13-1-EXP2-FOG"><a href="#13-1-EXP2-FOG" class="headerlink" title="13.1 - EXP2 FOG"></a>13.1 - EXP2 FOG</h3><p>Here I have an animation loop demo of THREE.FogExp2 where I pass the color I want to use as the first argument and then a density value for the fog. I then this fog object as the value for scene.fog, and then any material that supports fog will then be effected by it such as with the mesh basic material which is what I am using in this demo here. I will also more often than not want to set the background color to that of the fig color as well as the fog will just effect materials and not much of anything else. So If I am not going to add additional mesh objects to serve as background in the scene that will also be effected by the fog I will want to set the style of my solid background to work well with what I want to do here.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">75</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.025</span>, <span class="number">20</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// ADDING BACKGROUND AND FOG</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> fog_color = <span class="keyword">new</span> THREE.Color(<span class="number">0xffffff</span>);</div><div class="line">scene.background = fog_color;</div><div class="line">scene.fog = <span class="keyword">new</span> THREE.FogExp2(fog_color, <span class="number">0.5</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">        <span class="attr">color</span>: <span class="number">0xff0000</span></div><div class="line">    &#125;)</div><div class="line">);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">1.5</span>, <span class="number">0.75</span>, <span class="number">1.5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">400</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> per = frame / frameMax,</div><div class="line">    bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - per) / <span class="number">0.5</span>;</div><div class="line">    mesh.position.z = <span class="number">1</span> + <span class="number">4</span> * bias;</div><div class="line">    mesh.rotation.x = <span class="built_in">Math</span>.PI * <span class="number">2</span> * <span class="number">4</span> * per;</div><div class="line">    mesh.rotation.y = <span class="built_in">Math</span>.PI * <span class="number">2</span> * <span class="number">2</span> * per;</div><div class="line">    camera.lookAt(mesh.position);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h3 id="13-2-Simple-Linear-Fog"><a href="#13-2-Simple-Linear-Fog" class="headerlink" title="13.2 - Simple Linear Fog"></a>13.2 - Simple Linear Fog</h3><p>The other built in option for adding Fog would be to use the Plain Linear Fog that is created using THREE.Fog. For this one I want to give not just a density, but rather a near and far value for when the fog starts and when it is full blast. Sense this is a linear fog option the rate at which the Fog goes up is alone a straight line from the near and far value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">75</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.025</span>, <span class="number">20</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// ADDING BACKGROUND AND FOG</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> near = <span class="number">1.5</span>, far = <span class="number">6</span>;</div><div class="line"><span class="keyword">const</span> fog_color = <span class="keyword">new</span> THREE.Color(<span class="number">0xffffff</span>);</div><div class="line">scene.background = fog_color;</div><div class="line">scene.fog = <span class="keyword">new</span> THREE.Fog(fog_color, near, far);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">        <span class="attr">color</span>: <span class="number">0xff0000</span></div><div class="line">    &#125;)</div><div class="line">);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">400</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> a_frame = frame / frameMax;</div><div class="line">    <span class="keyword">const</span> a_near = a_frame * <span class="number">16</span> % <span class="number">1</span>;</div><div class="line">    scene.fog.near = <span class="number">5</span> * a_near;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="14-Shader-Materials"><a href="#14-Shader-Materials" class="headerlink" title="14 - Shader Materials"></a>14 - Shader Materials</h2><p>First thing is first and that is that chances are what it is that you want to do can be done with one of the built in material options. If you think that what you want to do can only be done with a custom shader, think again, take a step back, and make sure because this is where things really start to get time consuming when it comes to materials.</p>
<p>After looking over everything there is to work with the built in materials then there might be a situation here and there where you might want to work out some kind of custom material by writing a little bit of original GLSL code that will then be used for the the vertex and fragment shaders that are needed to <a href="/2023/01/13/threejs-shader-material/">create an instance of the THREE.ShaderMaterial</a>. This is without queation the best way to get started with this because with the THREE.ShaderMatreial there is the whole of the threejs shader library to work with to make quick work of just adding in certain features of the built in materials such as a diffuse color map just to give one example.</p>
<p>So then there are a number of things that you will need to look into more before even getting started with this, if you are in fact up for the task. With this there is not just looking into what there is to work with in threejs, there is also a whole other language that is used to crate these custom shaders Called GLSL which is short for openGL Shader Language. Mind you that you will not need to write everything from the ground up with GLSL with THREE.ShaderMaterial, but you will still need to lean enough to hack over things a little.</p>
<h3 id="14-1-Shader-Material-Hello-World"><a href="#14-1-Shader-Material-Hello-World" class="headerlink" title="14.1 - Shader Material Hello World"></a>14.1 - Shader Material Hello World</h3><p>For this very first demo in this shader material section I will be starting out with a very simple hello world type example of this sort of thing to at least get the ball rolling with this. Nothing fancy here at all just getting to a point where we have a solid mass of color on the screen, but I would like to go beyond that at least a little for this one as this is no longer the basic section of the post after all.</p>
<p>When it comes to this there is working out just two values of interest which is gl_position in the vertex shader, and gl_FragColor in the fragment shader.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">1.8</span>, <span class="number">3</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material1 = <span class="keyword">new</span> THREE.ShaderMaterial(&#123;</div><div class="line">    <span class="attr">vertexShader</span>: <span class="string">`</span></div><div class="line">        void main() &#123;</div><div class="line">            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );</div><div class="line">        &#125;`,</div><div class="line">    <span class="attr">fragmentShader</span>: <span class="string">`</span></div><div class="line">        void main() &#123;</div><div class="line">            float d = 1.0 - gl_FragCoord.z;</div><div class="line">            vec3 v = vec3( d );</div><div class="line">            gl_FragColor = vec4( v, 1.0 );</div><div class="line">        &#125;`</div><div class="line">&#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY, MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.SphereGeometry( <span class="number">1.2</span>, <span class="number">80</span>, <span class="number">80</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geometry, material1);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="14-2-Uniform-values"><a href="#14-2-Uniform-values" class="headerlink" title="14.2 - Uniform values"></a>14.2 - Uniform values</h3><p>A <a href="https://www.khronos.org/opengl/wiki/Uniform_%28GLSL%29" target="_blank" rel="external">uniform value IN GLSL</a> is a global Shader variable declared with the “uniform” <a href="https://www.khronos.org/opengl/wiki/Type_Qualifier_%28GLSL%29#Storage_qualifier" target="_blank" rel="external">storage qualifier</a>. These kinds of values are values that can be passed to the shader program by the user. For example there is setting the color option, or the opacity option of the Mesh basic Material. </p>
<p>With this example then I made a custom kind of Depth Material by studying the GLSL source code of the Mesh Depth Material which is where I found out that I can use gl_FragCoord.z over the higher precision values that are used in the Depth Material. One feature that I would like to add while making this is to have a kind of base color optiin for the depth material that is then effected by the depth values.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">1.8</span>, <span class="number">10</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material1 = <span class="keyword">new</span> THREE.ShaderMaterial(&#123;</div><div class="line">    <span class="attr">uniforms</span>: &#123;</div><div class="line">        <span class="attr">baseColor</span> : &#123; <span class="attr">value</span>: <span class="keyword">new</span> THREE.Color(<span class="string">'cyan'</span>) &#125;,</div><div class="line">        <span class="attr">opacity</span>: &#123; <span class="attr">value</span>: <span class="number">1</span> &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">vertexShader</span>: <span class="string">`</span></div><div class="line">        varying vec2 vHighPrecisionZW;</div><div class="line">        void main() &#123;</div><div class="line">            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );</div><div class="line">        &#125;`,</div><div class="line">    <span class="attr">fragmentShader</span>: <span class="string">`</span></div><div class="line">        uniform vec3 baseColor;</div><div class="line">        uniform float opacity;</div><div class="line">        uniform float depthAlpha;</div><div class="line">        varying vec2 vHighPrecisionZW;</div><div class="line">        void main() &#123;</div><div class="line">            float d = (1.0 - gl_FragCoord.z);</div><div class="line">            gl_FragColor = vec4( baseColor * d, opacity );</div><div class="line">        &#125;`</div><div class="line">&#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY, MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BoxGeometry( <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(geometry, material1);</div><div class="line">mesh1.rotation.y = <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">20</span>;</div><div class="line">scene.add(mesh1);</div><div class="line"><span class="keyword">const</span> material2 = material1.clone();</div><div class="line">material2.uniforms.baseColor.value = <span class="keyword">new</span> THREE.Color(<span class="string">'lime'</span>);</div><div class="line"><span class="built_in">console</span>.log(material2);</div><div class="line"><span class="keyword">const</span> mesh2 = <span class="keyword">new</span> THREE.Mesh(geometry, material2);</div><div class="line">mesh2.position.set(<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>)</div><div class="line">mesh2.rotation.y = <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">20</span>;</div><div class="line">scene.add(mesh2);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="14-3-Varying-variables"><a href="#14-3-Varying-variables" class="headerlink" title="14.3 - Varying variables"></a>14.3 - Varying variables</h3><p>So we have Uniform values that are a way to set values by way of some custom user space options, but then we also have varying variables as well. These are another kind of value that will come up all the time in GLSL code also and they are a way to share values from the vertex shader to the fragment shader.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">1.8</span>, <span class="number">10</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material1 = <span class="keyword">new</span> THREE.ShaderMaterial(&#123;</div><div class="line">    <span class="attr">uniforms</span>: &#123;</div><div class="line">        <span class="attr">intensity</span>: &#123; <span class="attr">value</span>: <span class="number">3.0</span> &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">vertexShader</span>: <span class="string">`</span></div><div class="line">        uniform float intensity;</div><div class="line">        varying vec3 v_color;</div><div class="line">        void main() &#123;</div><div class="line">            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );</div><div class="line">            v_color = position * intensity;</div><div class="line">        &#125;`,</div><div class="line">    <span class="attr">fragmentShader</span>: <span class="string">`</span></div><div class="line">        varying vec3 v_color;</div><div class="line">        void main() &#123;</div><div class="line">            gl_FragColor = vec4( v_color, 1.0 );</div><div class="line">        &#125;`</div><div class="line">&#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY, MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.SphereGeometry( <span class="number">1.0</span>, <span class="number">30</span>, <span class="number">30</span>);</div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(geometry, material1);</div><div class="line">scene.add(mesh1);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">let</span> frame = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> frameMax = <span class="number">900</span>;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> a_frame = frame / frameMax;</div><div class="line">    a_inten = <span class="built_in">Math</span>.sin( <span class="built_in">Math</span>.PI * (a_frame * <span class="number">9</span> % <span class="number">1</span>) );</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    material1.uniforms.intensity.value = <span class="number">1</span> + (<span class="number">1</span> + <span class="number">7</span> * a_frame) * a_inten;</div><div class="line">    renderer.render(scene, camera);</div><div class="line">    frame += <span class="number">1</span>;</div><div class="line">    frame %= frameMax;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>That covers just about everything when it comes to materials, but I would still not go so far as to say that this post is truly comprehensive on the subject of materials in threejs. Many of these sections could still use further expansion and refinement. Also when it comes to getting into the subject of the shader material, and with that what there is to work with in the shader library, the sky might very will be the limit with materials. There are all the little chunks of the shader lib to use to help add various common parts of materials to a custom material. Also there is the subject of using the Raw shader material and with that using raw GLSL code to create a material from the ground up. So yes there is a whole other language to learn when it comes to getting truly proficient with materials in threejs. I have been at this for years off and on and I am still just scratching the surface on this subject alone with threejs, and there is still every other little part of the library to look into.</p>
<p>This is one of my oldest blog posts on threejs that I have of course edited a number of times sense I first started it. I will of course come around to edit this post some more now and then in an effort to try my best to really do this subject justice.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2018/04/30/threejs-materials/" data-id="cllo1cuv503e960v1dzyt0cf2" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2018/04/30/threejs-materials/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/05/03/threejs-scene/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Working with a scene object in three.js
        
      </div>
    </a>
  
  
    <a href="/2018/04/23/threejs-object3d/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Object3D Class in threejs</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2018/04/30/threejs-materials/index.html';
    this.page.identifier = '181';
    this.page.title = 'Materials in threejs an overview of options and features';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.38px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.48px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.33px;">angular</a> <a href="/tags/animation/" style="font-size: 11.9px;">animation</a> <a href="/tags/automation/" style="font-size: 11.9px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.38px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.71px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.57px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.86px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.95px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.43px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.81px;">electronjs</a> <a href="/tags/express/" style="font-size: 17.14px;">express</a> <a href="/tags/games/" style="font-size: 17.62px;">games</a> <a href="/tags/git/" style="font-size: 13.81px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15.24px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.9px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.76px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.48px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.43px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 18.1px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.57px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.76px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.52px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.1px;">phaser</a> <a href="/tags/python/" style="font-size: 16.19px;">python</a> <a href="/tags/statistics/" style="font-size: 14.29px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.05px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.67px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/08/23/threejs-sprite/">Sprite Objects, and 2d overlays in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/17/threejs-buffer-geometry-attributes-tangent/">The tangent attribute of buffer geometry and normal maps in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/10/threejs-matcap-material/">The Matcap material in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/02/threejs-matrix4/">Matrix4 Objects in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/01/linux-folders/">Linux Root Folders</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2018/04/30/threejs-materials/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>