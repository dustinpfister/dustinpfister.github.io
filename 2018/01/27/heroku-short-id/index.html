<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>Making a Heroku with a basic user ID system using shortid | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2018/01/27/heroku-short-id/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="When making some kind of full stack node.js application I will want to have some kind of way to make it so I can have at least something that can work as user accounts. Maybe it would be best to have">
<meta property="og:type" content="article">
<meta property="og:title" content="Making a Heroku with a basic user ID system using shortid">
<meta property="og:url" content="https://dustinpfister.github.io/2018/01/27/heroku-short-id/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="When making some kind of full stack node.js application I will want to have some kind of way to make it so I can have at least something that can work as user accounts. Maybe it would be best to have">
<meta property="og:updated_time" content="2018-01-27T23:03:38.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Making a Heroku with a basic user ID system using shortid">
<meta name="twitter:description" content="When making some kind of full stack node.js application I will want to have some kind of way to make it so I can have at least something that can work as user accounts. Maybe it would be best to have">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-heroku-short-id" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/27/heroku-short-id/" class="article-date"> Published:
  <time datetime="2018-01-27T22:31:00.000Z" itemprop="datePublished">2018-01-27</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2018/01/27/heroku-short-id/" class="article-date"> Modified:
  <time datetime="2018-01-27T23:03:38.000Z" itemprop="dateModified">2018-01-27</time>
</a>

    <span class="article-date">V1</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/heroku/">heroku</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Making a Heroku with a basic user ID system using shortid
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>When making some kind of full stack node.js application I will want to have some kind of way to make it so I can have at least something that can work as user accounts. Maybe it would be best to have some kind of system that authenticates by way of doing something with oAuth, but maybe not, maybe I just want some kind of basic user id system, I see some projects that do that.</p>
<a id="more"></a>
<p>The reason why I just got into doing this is because I have just started making full stack apps that I can host on heroku.</p>
<p>Well I have found a great node.js solution that can be used to generate user ids called <a href="https://www.npmjs.com/package/shortid" target="_blank" rel="external">shortid</a>.</p>
<h2 id="Basic-short-id-example"><a href="#Basic-short-id-example" class="headerlink" title="Basic short id example"></a>Basic short id example</h2><p>For a basic example of using shortId I just put together something that just responds to a request with a new id each time.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// using the http module</span></div><div class="line"><span class="keyword">let</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>),</div><div class="line"> </div><div class="line">shortId = <span class="built_in">require</span>(<span class="string">'shortid'</span>),</div><div class="line"> </div><div class="line"><span class="comment">// look for PORT environment variable,</span></div><div class="line"><span class="comment">// else look for CLI argument,</span></div><div class="line"><span class="comment">// else use hard coded value for port 8080</span></div><div class="line">port = process.env.PORT || process.argv[<span class="number">2</span>] || <span class="number">8080</span>,</div><div class="line"> </div><div class="line"><span class="comment">// create a simple server</span></div><div class="line"><span class="keyword">let</span> server = http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"> </div><div class="line">        res.writeHead(<span class="number">200</span>, &#123;</div><div class="line">            <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span></div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">        res.write(<span class="string">'id: '</span> + shortId.generate(), <span class="string">'utf-8'</span>);</div><div class="line"> </div><div class="line">        res.end();</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line"><span class="comment">// listen on the port</span></div><div class="line">server.listen(port, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'app up on port: '</span> + port);</div><div class="line"> </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="My-user-system-so-far"><a href="#My-user-system-so-far" class="headerlink" title="My user system so far"></a>My user system so far</h2><p>So My actual user account system is a little more advanced.</p>
<ul>
<li>A client system is delivered to the client.</li>
<li>The client system makes a post request to the back end with a user id if stored in local storage</li>
<li>If the client system does not have a user id is sends a post request with a user id of undefined</li>
<li>If the back end gets a user id it checks if it has a *.json file that corresponds to that id.</li>
<li>If the back end has a *.json file for that id it will update, and respond with that record.</li>
<li>If it does not have a record that corresponds to the given id, or it is given undefined it will generated and return a new record, and id.</li>
</ul>
<p>So for now I have this all in one index.js file.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// using the http module</span></div><div class="line"><span class="keyword">let</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>),</div><div class="line">fs = <span class="built_in">require</span>(<span class="string">'fs-extra'</span>),</div><div class="line">path = <span class="built_in">require</span>(<span class="string">'path'</span>),</div><div class="line">shortId = <span class="built_in">require</span>(<span class="string">'shortid'</span>),</div><div class="line"> </div><div class="line"><span class="comment">// hard coded conf object</span></div><div class="line">conf = &#123;</div><div class="line"> </div><div class="line">    <span class="comment">// look for PORT environment variable,</span></div><div class="line">    <span class="comment">// else look for CLI argument,</span></div><div class="line">    <span class="comment">// else use hard coded value for port 8080</span></div><div class="line">    port: process.env.PORT || process.argv[<span class="number">2</span>] || <span class="number">8080</span>,</div><div class="line"> </div><div class="line">    <span class="comment">// max body length for posts</span></div><div class="line">    maxBodyLength: <span class="number">100</span></div><div class="line"> </div><div class="line">&#125;,</div><div class="line"> </div><div class="line"><span class="comment">// basic request check</span></div><div class="line">checkReq = <span class="function"><span class="keyword">function</span> (<span class="params">req</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">if</span> (req.method != <span class="string">'POST'</span>) &#123;</div><div class="line"> </div><div class="line">            reject(<span class="string">'not a post request'</span>);</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">        resolve(&#123;</div><div class="line"> </div><div class="line">            <span class="attr">success</span>: <span class="literal">true</span>,</div><div class="line">            <span class="attr">mess</span>: <span class="string">'request has passed request check'</span></div><div class="line"> </div><div class="line">        &#125;)</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;,</div><div class="line"> </div><div class="line"><span class="comment">// parse body of request</span></div><div class="line">parseReq = <span class="function"><span class="keyword">function</span> (<span class="params">req</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="comment">// the array of buffer chunks</span></div><div class="line">        <span class="keyword">let</span> body = [];</div><div class="line"> </div><div class="line">        <span class="comment">// as chunks start coming in</span></div><div class="line">        req.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">chunk</span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="comment">// push the next chunk</span></div><div class="line">            body.push(chunk);</div><div class="line"> </div><div class="line">            <span class="comment">// kill the connection if someone is posting a large</span></div><div class="line">            <span class="comment">// amount of data for whatever reason</span></div><div class="line">            <span class="keyword">if</span> (body.length &gt; conf.maxBodyLength) &#123;</div><div class="line"> </div><div class="line">                req.connection.destroy();</div><div class="line"> </div><div class="line">                reject(<span class="string">'Please do not do that, thank you. ( body length limit: '</span> +</div><div class="line">                    conf.maxBodyLength + <span class="string">')'</span>);</div><div class="line"> </div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">        <span class="comment">// when the post is received</span></div><div class="line">        req.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">            body = Buffer.concat(body).toString();</div><div class="line"> </div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line"> </div><div class="line">                body = <span class="built_in">JSON</span>.parse(body);</div><div class="line"> </div><div class="line">                resolve(&#123;</div><div class="line"> </div><div class="line">                    <span class="attr">mess</span>: <span class="string">'body parsed'</span>,</div><div class="line">                    <span class="attr">success</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">body</span>: body</div><div class="line"> </div><div class="line">                &#125;);</div><div class="line"> </div><div class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</div><div class="line"> </div><div class="line">                reject(<span class="string">'could not parse body.'</span>);</div><div class="line"> </div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;,</div><div class="line"> </div><div class="line"><span class="comment">// write user to it's file</span></div><div class="line">writeToUser = <span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">let</span> dir = path.join(<span class="string">'./users'</span>, <span class="string">'user_'</span> + user.id + <span class="string">'.json'</span>);</div><div class="line"> </div><div class="line">        fs.writeFile(dir, <span class="built_in">JSON</span>.stringify(user), <span class="string">'utf-8'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">            resolve(user);</div><div class="line"> </div><div class="line">        &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">            reject(e.message);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;,</div><div class="line"> </div><div class="line"><span class="comment">// update users data</span></div><div class="line">updateUser = <span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">let</span> dir = path.join(<span class="string">'./users'</span>, <span class="string">'user_'</span> + user.id + <span class="string">'.json'</span>);</div><div class="line"> </div><div class="line">        fs.readFile(dir, <span class="string">'utf-8'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line"> </div><div class="line">            user = <span class="built_in">JSON</span>.parse(user);</div><div class="line"> </div><div class="line">            user.visit.count += <span class="number">1</span>;</div><div class="line">            user.visit.last = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"> </div><div class="line">            <span class="keyword">return</span> writeToUser(user);</div><div class="line"> </div><div class="line">        &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line"> </div><div class="line">            resolve(user);</div><div class="line"> </div><div class="line">        &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">mess</span>) </span>&#123;</div><div class="line"> </div><div class="line">            reject(mess);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line">&#125;,</div><div class="line"> </div><div class="line"><span class="comment">// check for the given id</span></div><div class="line">idCheck = <span class="function"><span class="keyword">function</span> (<span class="params">id</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line"> </div><div class="line">        fs.ensureDir(<span class="string">'./users'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">let</span> dir = path.join(<span class="string">'./users'</span>, <span class="string">'user_'</span> + id + <span class="string">'.json'</span>);</div><div class="line"> </div><div class="line">            fs.readFile(dir, <span class="string">'utf-8'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line"> </div><div class="line">                resolve(<span class="built_in">JSON</span>.parse(user));</div><div class="line"> </div><div class="line">            &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">                reject(e.message);</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">            reject(e.message);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;,</div><div class="line"> </div><div class="line"><span class="comment">// check for the given id</span></div><div class="line">idNew = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> fs.ensureDir(<span class="string">'./users'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">let</span> id = shortId.generate(),</div><div class="line">            now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">            user = &#123;</div><div class="line"> </div><div class="line">                <span class="attr">id</span>: id,</div><div class="line">                <span class="attr">visit</span>: &#123;</div><div class="line"> </div><div class="line">                    <span class="attr">count</span>: <span class="number">1</span>,</div><div class="line">                    <span class="attr">first</span>: now,</div><div class="line">                    <span class="attr">last</span>: now</div><div class="line"> </div><div class="line">                &#125;</div><div class="line"> </div><div class="line">            &#125;,</div><div class="line">            dir = path.join(<span class="string">'./users'</span>, <span class="string">'user_'</span> + id + <span class="string">'.json'</span>);</div><div class="line"> </div><div class="line">            <span class="keyword">return</span> fs.writeFile(dir, <span class="built_in">JSON</span>.stringify(user), <span class="string">'utf-8'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">                resolve(user);</div><div class="line"> </div><div class="line">            &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">                reject(e.message);</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">            reject(e.message);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line">&#125;,</div><div class="line"> </div><div class="line"><span class="comment">// check Body</span></div><div class="line">checkBody = <span class="function"><span class="keyword">function</span> (<span class="params">body</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">if</span> (body.action) &#123;</div><div class="line"> </div><div class="line">            <span class="comment">// if log set action</span></div><div class="line">            <span class="keyword">if</span> (body.action === <span class="string">'log-set'</span>) &#123;</div><div class="line"> </div><div class="line">                <span class="keyword">if</span> (body.id) &#123;</div><div class="line"> </div><div class="line">                    <span class="comment">// check for that id</span></div><div class="line">                    idCheck(body.id).then(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line"> </div><div class="line">                        <span class="keyword">return</span> updateUser(user);</div><div class="line"> </div><div class="line">                    &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line"> </div><div class="line">                        resolve(&#123;</div><div class="line"> </div><div class="line">                            <span class="attr">success</span>: <span class="literal">true</span>,</div><div class="line">                            <span class="attr">mess</span>: <span class="string">'log-set action.'</span>,</div><div class="line">                            <span class="attr">id</span>: user.id,</div><div class="line">                            <span class="attr">user</span>: user</div><div class="line"> </div><div class="line">                        &#125;);</div><div class="line"> </div><div class="line">                    &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">                        <span class="comment">// new user</span></div><div class="line">                        idNew().then(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line"> </div><div class="line">                            resolve(&#123;</div><div class="line"> </div><div class="line">                                <span class="attr">success</span>: <span class="literal">true</span>,</div><div class="line">                                <span class="attr">mess</span>: <span class="string">'log-set action.'</span>,</div><div class="line">                                <span class="attr">id</span>: user.id,</div><div class="line">                                <span class="attr">user</span>: user</div><div class="line"> </div><div class="line">                            &#125;);</div><div class="line"> </div><div class="line">                        &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">mess</span>) </span>&#123;</div><div class="line"> </div><div class="line">                            reject(mess);</div><div class="line"> </div><div class="line">                        &#125;);</div><div class="line"> </div><div class="line">                    &#125;);</div><div class="line"> </div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">                    <span class="comment">// new user</span></div><div class="line">                    idNew().then(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</div><div class="line"> </div><div class="line">                        resolve(&#123;</div><div class="line"> </div><div class="line">                            <span class="attr">success</span>: <span class="literal">true</span>,</div><div class="line">                            <span class="attr">mess</span>: <span class="string">'log-set action.'</span>,</div><div class="line">                            <span class="attr">id</span>: user.id,</div><div class="line">                            <span class="attr">user</span>: user</div><div class="line"> </div><div class="line">                        &#125;);</div><div class="line"> </div><div class="line">                    &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">mess</span>) </span>&#123;</div><div class="line"> </div><div class="line">                        reject(mess);</div><div class="line"> </div><div class="line">                    &#125;);</div><div class="line"> </div><div class="line">                &#125;</div><div class="line"> </div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">                reject(<span class="string">'unkown action.'</span>)</div><div class="line"> </div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">            reject(<span class="string">'no action given'</span>)</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;,</div><div class="line"> </div><div class="line"><span class="comment">// create a simple server</span></div><div class="line">server = http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">if</span> (req.method === <span class="string">'POST'</span>) &#123;</div><div class="line"> </div><div class="line">            checkReq(req).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">                <span class="keyword">return</span> parseReq(req);</div><div class="line"> </div><div class="line">            &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</div><div class="line"> </div><div class="line">                <span class="keyword">return</span> checkBody(result.body);</div><div class="line"> </div><div class="line">            &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</div><div class="line"> </div><div class="line">                res.writeHead(<span class="number">200</span>, &#123;</div><div class="line">                    <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span></div><div class="line">                &#125;);</div><div class="line"> </div><div class="line">                res.write(<span class="built_in">JSON</span>.stringify(result), <span class="string">'utf-8'</span>);</div><div class="line">                res.end();</div><div class="line"> </div><div class="line">            &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">mess</span>) </span>&#123;</div><div class="line"> </div><div class="line">                res.writeHead(<span class="number">200</span>, &#123;</div><div class="line">                    <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span></div><div class="line">                &#125;);</div><div class="line">                res.end(<span class="built_in">JSON</span>.stringify(&#123;</div><div class="line">                        <span class="attr">success</span>: <span class="literal">false</span>,</div><div class="line">                        <span class="attr">mess</span>: mess,</div><div class="line">                        <span class="attr">id</span>: <span class="string">''</span>,</div><div class="line">                        <span class="attr">user</span>: <span class="string">''</span></div><div class="line">                    &#125;));</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">            <span class="keyword">if</span> (req.method === <span class="string">'GET'</span> &amp;&amp; req.url === <span class="string">'/'</span>) &#123;</div><div class="line"> </div><div class="line">                fs.readFile(<span class="string">'./public/index.html'</span>, <span class="string">'utf-8'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">html</span>) </span>&#123;</div><div class="line"> </div><div class="line">                    res.writeHead(<span class="number">200</span>, &#123;</div><div class="line">                        <span class="string">'Content-Type'</span>: <span class="string">'text/html'</span></div><div class="line">                    &#125;);</div><div class="line">                    res.write(html, <span class="string">'utf-8'</span>);</div><div class="line">                    res.end();</div><div class="line"> </div><div class="line">                &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">                    res.writeHead(<span class="number">200</span>, &#123;</div><div class="line">                        <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span></div><div class="line">                    &#125;);</div><div class="line">                    res.end(<span class="built_in">JSON</span>.stringify(&#123;</div><div class="line">                            <span class="attr">success</span>: <span class="literal">false</span>,</div><div class="line">                            <span class="attr">mess</span>: e.message,</div><div class="line">                            <span class="attr">id</span>: <span class="string">''</span>,</div><div class="line">                            <span class="attr">user</span>: <span class="string">''</span></div><div class="line">                        &#125;));</div><div class="line"> </div><div class="line">                &#125;);</div><div class="line"> </div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">                res.end();</div><div class="line"> </div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line"><span class="comment">// listen on the port</span></div><div class="line">server.listen(conf.port, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'app up on port: '</span> + conf.port);</div><div class="line"> </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>I am also making use of a simple client system in a public folder that just consists of a sinle index.html file that makes a post request to the back end.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>heroku short id<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"> </div><div class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Heroku short id system<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">"out"</span> <span class="attr">cols</span>=<span class="string">"60"</span> <span class="attr">rows</span>=<span class="string">"15"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"> </div><div class="line"><span class="keyword">var</span> postIt = <span class="function"><span class="keyword">function</span> (<span class="params">argu</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line"> </div><div class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> argu != <span class="string">'object'</span>)&#123;</div><div class="line"> </div><div class="line">        argu = &#123;<span class="attr">data</span> : argu&#125;;</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    argu.url = argu.url || <span class="built_in">window</span>.location.href;</div><div class="line">    argu.data = argu.data || &#123;&#125;;</div><div class="line">    argu.beforeSend = argu.beforeSend || <span class="function"><span class="keyword">function</span>(<span class="params">xhr,next</span>)</span>&#123;</div><div class="line">       next();</div><div class="line">    &#125;;</div><div class="line">    argu.done = argu.done || <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(res);</div><div class="line">    &#125;;</div><div class="line">    argu.fail = argu.fail || <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(res);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    xhr.open(<span class="string">'post'</span>, argu.url);</div><div class="line"> </div><div class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.readyState === <span class="number">4</span>) &#123;</div><div class="line"> </div><div class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.status === <span class="number">200</span>) &#123;</div><div class="line"> </div><div class="line">                argu.done(<span class="keyword">this</span>);</div><div class="line"> </div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">                argu.fail(<span class="keyword">this</span>);</div><div class="line"> </div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    argu.beforeSend(xhr, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"> </div><div class="line">        xhr.send(argu.data);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// login, or setup if no user_id</span></div><div class="line"><span class="keyword">var</span> logSet = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"> </div><div class="line">    postIt(&#123;</div><div class="line"> </div><div class="line">        <span class="comment">// try to login with the given id, or undefined from local storage</span></div><div class="line">        data : <span class="built_in">JSON</span>.stringify(&#123;</div><div class="line"> </div><div class="line">            <span class="attr">action</span> : <span class="string">'log-set'</span>,</div><div class="line">            <span class="attr">id</span> : <span class="built_in">window</span>.localStorage[<span class="string">'user_id'</span>]</div><div class="line"> </div><div class="line">        &#125;),</div><div class="line">        <span class="attr">done</span> : <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">var</span> result = <span class="built_in">JSON</span>.parse(res.response),</div><div class="line">            text = <span class="string">''</span>;</div><div class="line"> </div><div class="line">            text += <span class="string">'mess : '</span> + result.mess + <span class="string">'; \n'</span>;</div><div class="line">            text += <span class="string">'success : '</span> + result.success + <span class="string">'; \n'</span>;</div><div class="line">            text += <span class="string">'id : '</span> + result.id + <span class="string">'; \n'</span>;</div><div class="line">            text += <span class="built_in">JSON</span>.stringify(result.user) + <span class="string">'; \n'</span>;</div><div class="line">            text += <span class="string">'********** \n'</span></div><div class="line"> </div><div class="line">            <span class="built_in">document</span>.getElementById(<span class="string">'out'</span>).innerText += text;</div><div class="line"> </div><div class="line">            <span class="keyword">if</span>(result.id)&#123;</div><div class="line"> </div><div class="line">                <span class="built_in">window</span>.localStorage[<span class="string">'user_id'</span>] = result.id;</div><div class="line"> </div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line">logSet();</div><div class="line"> </div><div class="line">         <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"> </div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>So far the system works as expected, but I have not at all put it threw a meat grinder. One thing that bothers me with it so far is that I will end up with thousands of *.json files in the users folder, but when I think about it a lot of data will have to be stored some how. In any case I am not attached to the way that the user accounts are stored.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>I might work on this more, because I would like a system like this for when making some kind of full stack application, but it might just end up being yet another one of my little prototypes.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2018/01/27/heroku-short-id/" data-id="cjm8dsykh00gemov109um1lnq" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2018/01/27/heroku-short-id/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/heroku/">heroku</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node-js/">node.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/01/28/heroku-cors/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Using CORS in a Heroku app with the cors npm package in node.js
        
      </div>
    </a>
  
  
    <a href="/2018/01/26/heroku-hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Heroku node.js hello world example</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2018/01/27/heroku-short-id/index.html';
    this.page.identifier = '137';
    this.page.title = 'Making a Heroku with a basic user ID system using shortid';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.22px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.56px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.89px;">angular</a> <a href="/tags/animation/" style="font-size: 12.78px;">animation</a> <a href="/tags/automation/" style="font-size: 12.78px;">automation</a> <a href="/tags/backbone/" style="font-size: 13.33px;">backbone</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/canvas/" style="font-size: 16.67px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.78px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11.11px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.67px;">ejs</a> <a href="/tags/express/" style="font-size: 17.22px;">express</a> <a href="/tags/games/" style="font-size: 17.78px;">games</a> <a href="/tags/git/" style="font-size: 10.56px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.67px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.44px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.56px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.67px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 11.67px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.33px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.44px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.44px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.89px;">phaser</a> <a href="/tags/statistics/" style="font-size: 12.22px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 16.11px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 15.56px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/06/26/lodash_indexof/">loash _.indexOf</a>
          </li>
        
          <li>
            <a href="/2019/06/26/hapi-routing/">Routing in hapi js</a>
          </li>
        
          <li>
            <a href="/2019/06/25/js-async-await/">JavaScript async await</a>
          </li>
        
          <li>
            <a href="/2019/06/25/hapi-plugins/">Plugins in hapi js</a>
          </li>
        
          <li>
            <a href="/2019/06/24/js-promise-all/">Promise all method for a collection of promises</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2018/01/27/heroku-short-id/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>