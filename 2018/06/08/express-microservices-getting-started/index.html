<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>Getting started with micro services using node.js, and express.js | Dustin John Pfister at github pages</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="In my experience so far when making some kind of full stack web application I run into problems with the programing becoming to complex. Often is the case so far that I end up doing everything in a si">
<meta property="og:type" content="article">
<meta property="og:title" content="Getting started with micro services using node.js, and express.js">
<meta property="og:url" content="https://dustinpfister.github.io/2018/06/08/express-microservices-getting-started/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="In my experience so far when making some kind of full stack web application I run into problems with the programing becoming to complex. Often is the case so far that I end up doing everything in a si">
<meta property="og:updated_time" content="2018-06-11T15:46:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Getting started with micro services using node.js, and express.js">
<meta name="twitter:description" content="In my experience so far when making some kind of full stack web application I run into problems with the programing becoming to complex. Often is the case so far that I end up doing everything in a si">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <script src="/js/phaser-2.6.2.min.js"></script>
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-express-microservices-getting-started" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/08/express-microservices-getting-started/" class="article-date"> Published:
  published: <time datetime="2018-06-08T15:41:00.000Z" itemprop="datePublished">2018-06-08</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2018/06/08/express-microservices-getting-started/" class="article-date"> Modified:
  <time datetime="2018-06-11T15:46:28.000Z" itemprop="dateModified">2018-06-11</time>
</a>

    <span class="article-date">V1.6</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/express/">express</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Getting started with micro services using node.js, and express.js
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>In my experience so far when making some kind of full stack web application I run into problems with the programing becoming to complex. Often is the case so far that I end up doing everything in a single application. That is rendering and delivering the client system, authentication, database management, and so forth all within a single package. When it comes to simple hobby apps that are  not that complex, and may never have more than 50 visitors at any given moment, maybe this is not such a bad thing. However as a project grows in both complexity, and or popularity there is a threshold where it becomes desirable or necessary to break things down more. </p>
<a id="more"></a>
<p>One way to do this is to start to get into micro services using node.js, and the popular <a href="https://expressjs.com/" target="_blank" rel="external">express.js</a> framework. In this post I will be writing about a simple example that will be just that.</p>
<h2 id="What-defines-a-micro-service"><a href="#What-defines-a-micro-service" class="headerlink" title="What defines a micro service?"></a>What defines a micro service?</h2><p>There might be a lot that comes to mind when aiming to not just make a micro service, but a production code worthy micro service. When this is the case a great deal of things might come to mind like scaling to meet demand for the service that is being provided, and how to go about sharing information between services. However as I understand it a micro serive just needs to meet two simple criteria.</p>
<ul>
<li>It provides one or more services of some kind.</li>
<li>It is deployed to the web, and can be used by way of an http request.</li>
</ul>
<p>In other words if you take a complex full stack web application, and break it down into smaller pieces, and have each pieces deployed separately. I would say that one of the pieces fits a loose definition of a micro service. There is a great deal more to it than that of course, but at the core of it that is the idea.</p>
<h2 id="A-basic-micro-service-example-about-keywords"><a href="#A-basic-micro-service-example-about-keywords" class="headerlink" title="A basic micro service example about keywords"></a>A basic micro service example about keywords</h2><p>I have been toying with the idea of making a game about bogging. The idea is that people sign up to start an account, and then write short simple blog posts to make in game currency. The amount of currency made depends on how well the posts rank, and how many other people visit them. This might just be yet another one of my unfinished prototypes, but at the very least I should end up making at least one simple micro service example in the process.</p>
<p>I am sure that I will want to keep track of the volume of certain keywords to be used as a way to determine keyword value. So for a simple example of a micro service how about something that just keeps track of a simple count of keywords.</p>
<p>For this demo I will want to make a keyword service that just keeps a simple count for each given keyword. It will have to except post requests for a keyword, and create a database record, or update an existing one. In addition it will have to respond with a count for the given keyword as well.</p>
<p>Also I will need another separate project that will make use of this service.</p>
<h3 id="Getting-started"><a href="#Getting-started" class="headerlink" title="Getting started"></a>Getting started</h3><p>So for this demo I will actually be making two projects, one will be my micro service, and the other will be an app that makes use of this service. For the keyword service I will want to use express.js, and some kind of database solution. For a simple hobby project like this lowdb will work just fine for now. The other app will be something that just provides a client system, and back end that makes use of this service. This app will not be the highlight of this post, so I can just quickly throw something together involving something like express, and jQuery maybe.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">$ mkdir micro_keywords_logger</div><div class="line">$ cd micro_keywords_logger</div><div class="line">$ npm init</div><div class="line">$ npm install express --save</div><div class="line">$ npm install lowdb --save</div><div class="line">$ npm install mkdirp --save</div><div class="line">$ cd ..</div><div class="line">$ mkdir micro_keywords_main</div><div class="line">$ cd micro_keywords_main</div><div class="line">$ npm init</div><div class="line">$ npm install express --save</div><div class="line">$ mkdir public</div><div class="line">$ cd public</div><div class="line">$ mkdir js</div></pre></td></tr></table></figure>
<p>So the micro_keywords_main demo will just serve up some static assets, and make post requests either directly to the service from the client, or indirectly via it’s back end by making the request with the node.js http module for example. The other project micro_keywords_logger will be the actual micro service demo for this post.</p>
<h3 id="The-app-js-file-for-micro-keywords-logger"><a href="#The-app-js-file-for-micro-keywords-logger" class="headerlink" title="The app.js file for micro_keywords_logger"></a>The app.js file for micro_keywords_logger</h3><p>This project just needs to have a single app.js file at the root that will make a database for the keywords if it is not there. It will accept incoming post requests, creating a new database record, or updating one that may all ready exist, responding with the current count for that keyword. For the purpose of this post this is all that it will do for now, however going by the definition I have given it meets the basic idea.</p>
<p>So at the root of the service I have an app.js file like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>),</div><div class="line">FileSync = <span class="built_in">require</span>(<span class="string">'lowdb/adapters/FileSync'</span>),</div><div class="line">low = <span class="built_in">require</span>(<span class="string">'lowdb'</span>),</div><div class="line">mkdirp = <span class="built_in">require</span>(<span class="string">'mkdirp'</span>),</div><div class="line">port = process.env.PORT || process.argv[<span class="number">2</span>] || <span class="number">8080</span>,</div><div class="line">kw,</div><div class="line">app = express();</div><div class="line"> </div><div class="line"><span class="comment">// using the body-parser json to parse incoming</span></div><div class="line"><span class="comment">// post requests with keyword json data</span></div><div class="line">app.use(<span class="built_in">require</span>(<span class="string">'body-parser'</span>).json());</div><div class="line"> </div><div class="line"><span class="comment">// about path</span></div><div class="line">app.get(<span class="string">'/about'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"> </div><div class="line">    res.json(&#123;</div><div class="line"> </div><div class="line">        <span class="attr">service_name</span>: <span class="string">'micro_keywords_logger'</span></div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="comment">// GET requests at /</span></div><div class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// just serve up the whole database for now</span></div><div class="line">    res.json(kw.get(<span class="string">'keywords'</span>).value());</div><div class="line"> </div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="comment">// POST incoming keywords</span></div><div class="line">app.post(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// response object to respond with</span></div><div class="line">    <span class="keyword">let</span> resObj = &#123;</div><div class="line">        <span class="attr">success</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">mess</span>: <span class="string">'.'</span>,</div><div class="line">        <span class="attr">data</span>: &#123;&#125;</div><div class="line">    &#125;,</div><div class="line"> </div><div class="line">    <span class="comment">// the keyword</span></div><div class="line">    keyword = req.body.keyword,</div><div class="line"> </div><div class="line">    <span class="comment">// the count of that keyword</span></div><div class="line">    count = <span class="number">1</span>,</div><div class="line"> </div><div class="line">    <span class="comment">// get the record for the given keyword</span></div><div class="line">    record = kw.get(<span class="string">'keywords'</span>).find(&#123;</div><div class="line">            <span class="attr">keyword</span>: keyword</div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    <span class="comment">// get or update the count of the keyword</span></div><div class="line">    <span class="keyword">if</span> (!record.value()) &#123;</div><div class="line"> </div><div class="line">        <span class="comment">// write a new record</span></div><div class="line">        kw.get(<span class="string">'keywords'</span>).push(&#123;</div><div class="line"> </div><div class="line">            <span class="attr">keyword</span>: keyword,</div><div class="line">            <span class="attr">count</span>: <span class="number">1</span></div><div class="line"> </div><div class="line">        &#125;).write();</div><div class="line"> </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">        <span class="comment">// add to an existing record</span></div><div class="line">        count = record.value().count += <span class="number">1</span>;</div><div class="line">        kw.write();</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">// set the keyword, and count for the response object</span></div><div class="line">    resObj.data.keyword = keyword;</div><div class="line">    resObj.data.count = count;</div><div class="line"> </div><div class="line">    res.json(resObj);</div><div class="line"> </div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="comment">// make sure db folder is there</span></div><div class="line">mkdirp(<span class="string">'db'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// create keywords.json if it is not there</span></div><div class="line">    kw = low(<span class="keyword">new</span> FileSync(<span class="string">'db/keywords.json'</span>));</div><div class="line"> </div><div class="line">    <span class="comment">// default to empty keyword array</span></div><div class="line">    kw.defaults(&#123;</div><div class="line">        <span class="attr">keywords</span>: []</div><div class="line">    &#125;).write();</div><div class="line"> </div><div class="line">    <span class="comment">// start service with the value of port</span></div><div class="line">    app.listen(port, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'micro_keywords_logger is up on port: '</span> + port);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>I am using mkdirp to make sure a folder exists before creating a file there. If interested I have posts on both mkdirp, and lowdb if interested.</p>
<h3 id="The-app-js-file-for-micro-keywords-main"><a href="#The-app-js-file-for-micro-keywords-main" class="headerlink" title="The app.js file for micro_keywords_main"></a>The app.js file for micro_keywords_main</h3><p>So this is a quick project that I threw together to make use of my micro service. This is not the highlight of this post. The idea here is that a micro service should be kind of independent from the rest of the project. It is okay if that is not the case, when getting into some things that are really involved it might be unavoidable. However I would say that a well designed micro service is something that can at least potential be used from a back end, or front end system, from the same domain or even maybe a different one.</p>
<p>So for this demo though I just put together a simple back end that will not start if the micro service is not running before hand, and will make the call from a node.js environment rather than the browser.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>),</div><div class="line">http = <span class="built_in">require</span>(<span class="string">'http'</span>),</div><div class="line">port = process.env.PORT || process.argv[<span class="number">2</span>] || <span class="number">8888</span>,</div><div class="line">app = express();</div><div class="line"> </div><div class="line"><span class="comment">// serve up the static assets in the public folder</span></div><div class="line">app.use(<span class="string">'/'</span>, express.static(<span class="string">'public'</span>));</div><div class="line"> </div><div class="line"><span class="comment">// using body-parser to parse incoming json</span></div><div class="line">app.use(<span class="built_in">require</span>(<span class="string">'body-parser'</span>).json());</div><div class="line"> </div><div class="line"><span class="comment">// post requests given at root</span></div><div class="line">app.post(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// make a post request to the service</span></div><div class="line">    <span class="keyword">let</span> mReq = http.request(&#123;</div><div class="line"> </div><div class="line">            <span class="attr">hostname</span>: <span class="string">'localhost'</span>,</div><div class="line">            <span class="attr">path</span>: <span class="string">'/'</span>,</div><div class="line">            <span class="attr">port</span>: <span class="number">8080</span>,</div><div class="line">            <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">            <span class="attr">headers</span>: &#123;</div><div class="line">                <span class="string">"Content-Type"</span>: <span class="string">"application/json"</span>,</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">microRes</span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">let</span> data = <span class="string">''</span>;</div><div class="line">            microRes.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">chunk</span>) </span>&#123;</div><div class="line">                <span class="comment">// expect json</span></div><div class="line">                data += chunk.toString();</div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">            <span class="comment">// respond with the count</span></div><div class="line">            microRes.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                res.json(&#123;</div><div class="line">                    <span class="attr">mess</span>: <span class="string">'response from micro service'</span>,</div><div class="line">                    <span class="attr">data</span>: <span class="built_in">JSON</span>.parse(data),</div><div class="line">                    <span class="attr">success</span>: <span class="literal">true</span></div><div class="line">                &#125;);</div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    <span class="comment">// if error</span></div><div class="line">    mReq.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">        res.json(&#123;</div><div class="line">            <span class="attr">mess</span>: <span class="string">'ERROR: '</span> + e.message,</div><div class="line">            <span class="attr">success</span>: <span class="literal">false</span></div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">    <span class="comment">// write payload and end</span></div><div class="line">    mReq.write(<span class="built_in">JSON</span>.stringify(req.body));</div><div class="line">    mReq.end();</div><div class="line"> </div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="comment">// Start the APP if the micro service is running</span></div><div class="line"><span class="keyword">let</span> req = http.request(&#123;</div><div class="line">        <span class="attr">hostname</span>: <span class="string">'localhost'</span>,</div><div class="line">        <span class="attr">port</span>: <span class="number">8080</span>,</div><div class="line">        <span class="attr">path</span>: <span class="string">'/about'</span></div><div class="line">    &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">let</span> data = <span class="string">''</span>;</div><div class="line">        res.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">chunk</span>) </span>&#123;</div><div class="line">            data += chunk.toString();</div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">        res.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'looks like we have a response, parsing what should be JSON.'</span>);</div><div class="line"> </div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                data = <span class="built_in">JSON</span>.parse(data);</div><div class="line"> </div><div class="line">                <span class="comment">// if this is the micro servcie</span></div><div class="line">                <span class="keyword">if</span> (data.service_name === <span class="string">'micro_keywords_logger'</span>) &#123;</div><div class="line">                    <span class="built_in">console</span>.log(<span class="string">'looks good lets listen on port: '</span> + port);</div><div class="line"> </div><div class="line">                    <span class="comment">// start listening</span></div><div class="line">                    app.listen(port, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                        <span class="built_in">console</span>.log(<span class="string">'micro_keywords_main is up on port: '</span> + port);</div><div class="line"> </div><div class="line">                    &#125;);</div><div class="line"> </div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">                    <span class="built_in">console</span>.log(<span class="string">'not what I am looking for sorry'</span>);</div><div class="line"> </div><div class="line">                &#125;</div><div class="line"> </div><div class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</div><div class="line"> </div><div class="line">                <span class="built_in">console</span>.log(e.message);</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">'error parsing json response'</span>);</div><div class="line"> </div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line"><span class="comment">// if error log message</span></div><div class="line">req.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'error: '</span> + e.message);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'This app needs mocro_keywords_logger running on port: 8080'</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'The app WILL NOT listen, end of line bye'</span>);</div><div class="line"> </div><div class="line">&#125;);</div><div class="line">req.end();</div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>There is a whole lot more on micro services to write about, however this is just a getting stared post in which I am just covering a very lose definition of what a micro service is. If you are aiming to make a complex full stack application it is important to avoid the tenancy to do everything in a single app that will be placed in a single deployment.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2018/06/08/express-microservices-getting-started/" data-id="cjiayibkn000638v1vv3r1xrn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/express/">express</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node-js/">node.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/06/11/express-response-download/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Managing file downloads in express with the response download method
        
      </div>
    </a>
  
  
    <a href="/2018/06/05/express-app-all/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Express.js app.all method for handing all incoming requests</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.5px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.63px;">SEO</a> <a href="/tags/angular/" style="font-size: 14.38px;">angular</a> <a href="/tags/animation/" style="font-size: 11.25px;">animation</a> <a href="/tags/automation/" style="font-size: 13.13px;">automation</a> <a href="/tags/backbone/" style="font-size: 13.75px;">backbone</a> <a href="/tags/blog/" style="font-size: 16.25px;">blog</a> <a href="/tags/canvas/" style="font-size: 16.88px;">canvas</a> <a href="/tags/corejs/" style="font-size: 13.13px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11.25px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.88px;">ejs</a> <a href="/tags/express/" style="font-size: 15.63px;">express</a> <a href="/tags/games/" style="font-size: 18.75px;">games</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.88px;">heroku</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.63px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.88px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 11.88px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.75px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/node-js/" style="font-size: 19.38px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.13px;">phaser</a> <a href="/tags/statistics/" style="font-size: 12.5px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 17.5px;">three.js</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/06/11/express-response-download/">Managing file downloads in express with the response download method</a>
          </li>
        
          <li>
            <a href="/2018/06/08/express-microservices-getting-started/">Getting started with micro services using node.js, and express.js</a>
          </li>
        
          <li>
            <a href="/2018/06/05/express-app-all/">Express.js app.all method for handing all incoming requests</a>
          </li>
        
          <li>
            <a href="/2018/06/04/lodash_countby/">The lodash _.countBy method</a>
          </li>
        
          <li>
            <a href="/2018/06/01/express-session/">Using express-session for session data in express.js</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>