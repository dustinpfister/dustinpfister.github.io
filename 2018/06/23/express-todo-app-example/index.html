<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>A todo app example using express, lowdb, and much more. | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2018/06/23/express-todo-app-example/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="So I have been working with express.js for a while now when it comes to making simple demos, but now I think it is time to start making something that is a full working project of some kind. Often peo">
<meta property="og:type" content="article">
<meta property="og:title" content="A todo app example using express, lowdb, and much more.">
<meta property="og:url" content="https://dustinpfister.github.io/2018/06/23/express-todo-app-example/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="So I have been working with express.js for a while now when it comes to making simple demos, but now I think it is time to start making something that is a full working project of some kind. Often peo">
<meta property="og:updated_time" content="2018-06-27T00:08:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A todo app example using express, lowdb, and much more.">
<meta name="twitter:description" content="So I have been working with express.js for a while now when it comes to making simple demos, but now I think it is time to start making something that is a full working project of some kind. Often peo">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas-Examples</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-express-todo-app-example" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/23/express-todo-app-example/" class="article-date"> Published:
  <time datetime="2018-06-23T23:52:00.000Z" itemprop="datePublished">2018-06-23</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2018/06/23/express-todo-app-example/" class="article-date"> Modified:
  <time datetime="2018-06-27T00:08:01.000Z" itemprop="dateModified">2018-06-26</time>
</a>

    <span class="article-date">V1.35</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/express/">express</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      A todo app example using express, lowdb, and much more.
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>So I have been working with <a href="https://expressjs.com/" target="_blank" rel="external">express.js</a> for a while now when it comes to making simple demos, but now I think it is time to start making something that is a full working project of some kind. Often people start with a simple todo list project of some kind, so maybe that will do for now. I do not have to make this the kind of project that I will devote a few years of my life to, it can just be a good start. In this post I will be writing about this first express.js project, and if all goes well maybe this will not be the last post like this, as I progress into something else that is more interesting.</p>
<a id="more"></a>
<h2 id="1-What-to-know-before-continuing"><a href="#1-What-to-know-before-continuing" class="headerlink" title="1 - What to know before continuing"></a>1 - What to know before continuing</h2><p>This is a post on an example of a full stack web application built using node.js, express.js, and a whole bunch of other modules. This is not at all a getting started post on express.js, javaScript, html, css, and so forth. If you are new to this sort of thing it might be best to start at my <a href="/2018/06/12/express/">main post on express.js</a>, as this is a more advanced post on full stack web development using express.js.</p>
<h3 id="1-1-This-is-the-first-release-I-am-writing-about"><a href="#1-1-This-is-the-first-release-I-am-writing-about" class="headerlink" title="1.1 - This is the first release I am writing about"></a>1.1 - This is the first release I am writing about</h3><p>This is the first release that I am writing about in this post express_todo 0.0.125. There might be a 1.x in the future as there is a lot about this project that I am not satisfied with. However I am interested in progressing into more interesting projects as well, so that might not come to pass. So in other words, this project is not at all production ready, and if you are going to use it I would only do so locally.</p>
<h2 id="2-install-or-setup"><a href="#2-install-or-setup" class="headerlink" title="2 - install, or setup"></a>2 - install, or setup</h2><p>Because this has turned out to be a complex project I have made a repo on my github page. So If for some reason you want to install this locally you can by cloning it down, and doing an npm install to install all the dependencies for it.</p>
<h3 id="2-1-install-by-cloning-the-repo"><a href="#2-1-install-by-cloning-the-repo" class="headerlink" title="2.1 - install by cloning the repo"></a>2.1 - install by cloning the repo</h3><p>So one way to quickly reproduce what I am wrting about here is to just clone down what I have made with git clone, make sure you are using the version that I am writing about (0.0.125), and then install the dependencies with an npm install.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ git clone https://github.com/dustinpfister/express_todo</div><div class="line">$ cd express_todo</div><div class="line">$ git checkout tags/0.0.125 -b foobar</div><div class="line">$ npm install</div><div class="line">$ node app</div></pre></td></tr></table></figure>
<p>Once everything is installed you would just need to call node app to start the main app.js file, and if all goes well you will be able to use the app when you navigate to localhost:8080 in a web browser.</p>
<h3 id="2-2-Reproducing-from-scratch"><a href="#2-2-Reproducing-from-scratch" class="headerlink" title="2.2 - Reproducing from scratch"></a>2.2 - Reproducing from scratch</h3><p>If you want to reproduce from scratch there are a few things to install, and study if you are not familiar with them.</p>
<p>However you might start out like this.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ mkdir express_todo</div><div class="line">$ cd express_todo</div><div class="line">$ npm init</div><div class="line">$ npm install ejs@2.6.1 --save</div><div class="line">$ npm install express@4.16.3 --save</div><div class="line">$ npm install fs-extra@6.0.1 --save</div><div class="line">$ npm install js-yaml@3.12.0 --save</div><div class="line">$ npm install lodash@4.17.10 --save</div><div class="line">$ npm install lowdb@1.0.0 --save</div><div class="line">$ npm install shortid@2.2.8 --save</div></pre></td></tr></table></figure></p>
<h2 id="3-At-the-root"><a href="#3-At-the-root" class="headerlink" title="3 - At the root"></a>3 - At the root</h2><p>At the root of the project folder is a few files of interest, like any other express.js project or demo of mine there is the main app.js file, also there will be a conf.yaml file as well for some app settings. There are also many folders of interest that lead into many other folders and files that compose both a front end, and back end system.</p>
<h3 id="3-2-The-main-app-js-file"><a href="#3-2-The-main-app-js-file" class="headerlink" title="3.2 - The main app.js file"></a>3.2 - The main app.js file</h3><p>The main app.js file might always be a good starting location, as this is the file that is called with node to start the app. It is here that the main app object instance is, I am also calling a conf.js file in the lib folder that makes a conf.yaml file, or get settings from it that are used to set app settings like what port or theme to use. </p>
<p>I am also setting up all my static paths here as well as using some routes defined in the routes folder, that in turn also use some built in middleware methods.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>),</div><div class="line">path = <span class="built_in">require</span>(<span class="string">'path'</span>),</div><div class="line">app = express();</div><div class="line"> </div><div class="line"><span class="comment">// use lib/conf.js to load app settings from conf.yaml</span></div><div class="line"><span class="built_in">require</span>(<span class="string">'./lib/conf.js'</span>)(app, __dirname).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// static paths for all themes</span></div><div class="line">    app.use(<span class="string">'/js'</span>, express.static(<span class="string">'public/js'</span>));</div><div class="line"> </div><div class="line">    <span class="comment">// static paths for current theme</span></div><div class="line">    app.use(<span class="string">'/theme/js'</span>, express.static(path.join(__dirname, <span class="string">'themes'</span>, app.get(<span class="string">'theme'</span>), <span class="string">'js'</span>)));</div><div class="line">    app.use(<span class="string">'/theme/css'</span>, express.static(path.join(__dirname, <span class="string">'themes'</span>, app.get(<span class="string">'theme'</span>), <span class="string">'css'</span>)));</div><div class="line"> </div><div class="line">    <span class="comment">// use /list path</span></div><div class="line">    app.use(<span class="built_in">require</span>(<span class="string">'./routes/list'</span>)(&#123;</div><div class="line">            <span class="attr">dir_root</span>: __dirname</div><div class="line">        &#125;));</div><div class="line"> </div><div class="line">    <span class="comment">// main render</span></div><div class="line">    app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"> </div><div class="line">        res.render(<span class="string">'index'</span>, &#123;</div><div class="line">            <span class="attr">layout</span>: <span class="string">'index'</span></div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">    app.get(<span class="string">'/create'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"> </div><div class="line">        res.render(<span class="string">'index'</span>, &#123;</div><div class="line">            <span class="attr">layout</span>: <span class="string">'create'</span></div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">    <span class="comment">//app.use('/edit', require('./routes/edit')());</span></div><div class="line">    app.use(<span class="built_in">require</span>(<span class="string">'./routes/edit'</span>)(&#123;</div><div class="line">            <span class="attr">app</span>: app</div><div class="line">        &#125;));</div><div class="line"> </div><div class="line">    <span class="comment">// start listening</span></div><div class="line">    app.listen(app.get(<span class="string">'port'</span>), <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'express_todo is live.'</span>);</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'port: '</span> + app.get(<span class="string">'port'</span>));</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'theme: '</span> + app.get(<span class="string">'theme'</span>));</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="built_in">console</span>.log(e.message);</div><div class="line"> </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Of course this is also where I am calling app.listen to start the project on a port that is in the port app setting.</p>
<h3 id="3-1-config-yaml"><a href="#3-1-config-yaml" class="headerlink" title="3.1 - config.yaml"></a>3.1 - config.yaml</h3><p>So the config.yaml is a file that will be created when starting express_todo for the first time. as of this writing there are just two settings the port, and the theme. As of this writing the only value you might want to change is the port, as there is only one theme.</p>
<h2 id="4-The-lib-folder"><a href="#4-The-lib-folder" class="headerlink" title="4 - The /lib folder"></a>4 - The /lib folder</h2><p>This lib folder contains tow files, conf.js that is used to make or read the main conf.yaml file that is used to store app settings, and the db_lists file that is used to help work with the lowdb powered database.</p>
<h3 id="4-1-conf-js"><a href="#4-1-conf-js" class="headerlink" title="4.1 - conf.js"></a>4.1 - conf.js</h3><p>So the conf.js file reads the main conf.yaml file and sets app settings for the main instance of the app object. In the event that the conf.yaml file is not there one is created, and set up with some hard coded default settings.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>),</div><div class="line">fs = <span class="built_in">require</span>(<span class="string">'fs-extra'</span>),</div><div class="line">_ = <span class="built_in">require</span>(<span class="string">'lodash'</span>),</div><div class="line">yaml = <span class="built_in">require</span>(<span class="string">'js-yaml'</span>),</div><div class="line">path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// set settings to the given app with the given settings object</span></div><div class="line"><span class="keyword">let</span> setWithYAML = <span class="function"><span class="keyword">function</span> (<span class="params">app, root, yamlConf</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// load yaml</span></div><div class="line">    <span class="keyword">let</span> setObj = yaml.safeLoad(yamlConf.toString());</div><div class="line"> </div><div class="line">    <span class="comment">// set settings</span></div><div class="line">    _.each(setObj, <span class="function"><span class="keyword">function</span> (<span class="params">val, key</span>) </span>&#123;</div><div class="line"> </div><div class="line">        app.set(key, val);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">    <span class="comment">// insure port is set to the PORT environment variable if present</span></div><div class="line">    <span class="keyword">if</span> (process.env.PORT) &#123;</div><div class="line"> </div><div class="line">        app.set(<span class="string">'port'</span>, process.env.PORT);</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">// always use ejs for now</span></div><div class="line">    app.set(<span class="string">'views'</span>, path.join(root, <span class="string">'themes'</span>,app.get(<span class="string">'theme'</span>)));</div><div class="line">    app.set(<span class="string">'view engine'</span>, <span class="string">'ejs'</span>);</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> app;</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// read conf.yaml</span></div><div class="line"><span class="keyword">let</span> readConf = <span class="function"><span class="keyword">function</span> (<span class="params">app, dir</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> fs.readFile(path.join(dir, <span class="string">'conf.yaml'</span>)).then(<span class="function"><span class="keyword">function</span> (<span class="params">yamlConf</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'conf.yaml found.'</span>);</div><div class="line">        <span class="keyword">return</span> setWithYAML(app, dir,yamlConf);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// set settings for the given instance of app</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">app, dirroot</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// these values should be given from the main app.js</span></div><div class="line">    app = app || express();</div><div class="line">    dirroot = dirroot || process.cwd();</div><div class="line"> </div><div class="line">    <span class="comment">// read yaml file</span></div><div class="line">    <span class="keyword">return</span> readConf(app, dirroot).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="comment">// create new conf.yaml</span></div><div class="line">        <span class="keyword">let</span> conf = &#123;</div><div class="line"> </div><div class="line">            <span class="attr">port</span>: process.env.PORT || process.argv[<span class="number">2</span>] || <span class="number">8080</span>,</div><div class="line">            <span class="attr">theme</span>: <span class="string">'landscape'</span></div><div class="line"> </div><div class="line">        &#125;;</div><div class="line"> </div><div class="line">        <span class="keyword">let</span> data = yaml.safeDump(conf);</div><div class="line">        <span class="keyword">return</span> fs.writeFile(path.join(dirroot, <span class="string">'conf.yaml'</span>), data, <span class="string">'utf8'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">yamlConf</span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'new conf.yaml'</span>);</div><div class="line"> </div><div class="line">            <span class="keyword">return</span> readConf(app, dirroot);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;)</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>This file might be a bit overkill at the moment, but if I do take the time to expand this project, then there might come a time where I would want a setup like this.</p>
<h3 id="4-2-db-lists-js"><a href="#4-2-db-lists-js" class="headerlink" title="4.2 - db_lists.js"></a>4.2 - db_lists.js</h3><p>This is the lib that I am using to interact with my database. For this simple todo app I am using lowdb for a database solution, not the best choice for a production app, but this is no production app. I do like the simplicity of lowdb, and for simple projects like this that I do not intent to deploy, it gets the job done.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>),</div><div class="line">fs = <span class="built_in">require</span>(<span class="string">'fs-extra'</span>),</div><div class="line">FileAsync = <span class="built_in">require</span>(<span class="string">'lowdb/adapters/FileAsync'</span>),</div><div class="line">low = <span class="built_in">require</span>(<span class="string">'lowdb'</span>),</div><div class="line">shortId = <span class="built_in">require</span>(<span class="string">'shortid'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// okay just do this for now.</span></div><div class="line"><span class="keyword">let</span> dir_db = <span class="string">'db'</span>,</div><div class="line">path_lists = path.join(dir_db, <span class="string">'lists.json'</span>);</div><div class="line"> </div><div class="line"><span class="comment">/********* ********** **********</span></div><div class="line">HELPER</div><div class="line"> ********** ********** *********/</div><div class="line"> </div><div class="line"><span class="comment">// ensure db folder, and default list.json</span></div><div class="line">exports.ensureDB = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">let</span> listAdapter = <span class="keyword">new</span> FileAsync(path_lists);</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> fs.ensureDir(dir_db).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> low(listAdapter).then(<span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">return</span> list.defaults(&#123;</div><div class="line">                <span class="attr">lists</span>: []</div><div class="line">            &#125;).write();</div><div class="line"> </div><div class="line">        &#125;)</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">/********* ********** **********</span></div><div class="line">LISTS</div><div class="line"> ********** ********** *********/</div><div class="line"> </div><div class="line"><span class="comment">// read the lists</span></div><div class="line">exports.readLists = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">let</span> listAdapter = <span class="keyword">new</span> FileAsync(path_lists);</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> low(listAdapter);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// push new list</span></div><div class="line">exports.pushList = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">    obj = obj || &#123;&#125;;</div><div class="line"> </div><div class="line">    obj.name = obj.name || <span class="string">'new list'</span>;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.readLists().then(<span class="function"><span class="keyword">function</span> (<span class="params">lists</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">let</span> list = &#123;</div><div class="line"> </div><div class="line">            <span class="attr">name</span>: obj.name,</div><div class="line">            <span class="attr">id</span>: shortId.generate(),</div><div class="line">            <span class="attr">items</span>: []</div><div class="line"> </div><div class="line">        &#125;;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> lists.get(<span class="string">'lists'</span>).push(list).write().then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">return</span> list;</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// getListById</span></div><div class="line">exports.getListById = <span class="function"><span class="keyword">function</span> (<span class="params">id</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.readLists().then(<span class="function"><span class="keyword">function</span> (<span class="params">lists</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> lists.get(<span class="string">'lists'</span>).find(&#123;</div><div class="line">            <span class="attr">id</span>: id</div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="comment">// sort by done</span></div><div class="line">        <span class="keyword">return</span> list.assign(&#123;</div><div class="line"> </div><div class="line">            <span class="attr">items</span>: list.get(<span class="string">'items'</span>).sortBy(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line"> </div><div class="line">                <span class="keyword">return</span> !item.done;</div><div class="line"> </div><div class="line">            &#125;).value()</div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// delete a list by listId</span></div><div class="line">exports.deleteListById = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.readLists().then(<span class="function"><span class="keyword">function</span> (<span class="params">db</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> db.get(<span class="string">'lists'</span>).remove(&#123;</div><div class="line"> </div><div class="line">            <span class="attr">id</span>: obj.listId</div><div class="line"> </div><div class="line">        &#125;).write();</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">/********* ********** **********</span></div><div class="line">ITEM</div><div class="line"> ********** ********** *********/</div><div class="line"> </div><div class="line"><span class="comment">// get an item by list and item id</span></div><div class="line">exports.getItemById = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.getListById(obj.listId).then(<span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> list.get(<span class="string">'items'</span>).find(&#123;</div><div class="line">            <span class="attr">id</span>: obj.itemId</div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// edit an item by list and item id</span></div><div class="line">exports.editItemById = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.getListById(obj.listId).then(<span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">var</span> item = list.get(<span class="string">'items'</span>).find(&#123;</div><div class="line">                <span class="attr">id</span>: obj.itemId</div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        <span class="comment">// toggle done flag?</span></div><div class="line">        <span class="keyword">if</span> (obj.toggleDone) &#123;</div><div class="line"> </div><div class="line">            <span class="keyword">return</span> item.assign(&#123;</div><div class="line">                <span class="attr">done</span>: !item.value().done</div><div class="line">            &#125;).write();</div><div class="line"> </div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">            <span class="comment">// then direct edit, if we have an item object to do so with</span></div><div class="line">            <span class="keyword">if</span> (obj.item) &#123;</div><div class="line">                <span class="keyword">return</span> item.assign(obj.item).write();</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">        <span class="comment">// if this happens just return a promise,</span></div><div class="line">        <span class="comment">// and change nothing.</span></div><div class="line">        <span class="keyword">return</span> item.write();</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// get an item by list and item id</span></div><div class="line">exports.deleteItemById = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.getListById(obj.listId).then(<span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> list.get(<span class="string">'items'</span>).remove(&#123;</div><div class="line">            <span class="attr">id</span>: obj.itemId</div><div class="line">        &#125;).write();</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// push a new item to a list</span></div><div class="line">exports.pushItem = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.getListById(obj.listId).then(<span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</div><div class="line"> </div><div class="line">        obj.item.id = shortId.generate();</div><div class="line">        obj.item.done = <span class="literal">false</span>;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> list.get(<span class="string">'items'</span>).push(obj.item).write();</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>This is used by my middleware functions to handle everything with respect to the lists.json file in the db folder. Also any additional future middleware will use this as well when it comes to doing anything with the list data.</p>
<h2 id="5-The-public-folder"><a href="#5-The-public-folder" class="headerlink" title="5 - The /public folder"></a>5 - The /public folder</h2><p>So like many of my express.js projects so far there is a public folder. I put this folder in as a way to serve up some static assets that will be shared across what might eventually be more than one theme. For the moment I am using it as a way to just host a single javaScript file that acts as a kind of api to access everything of interest in the back end.</p>
<h3 id="5-1-public-js-list-client-js"><a href="#5-1-public-js-list-client-js" class="headerlink" title="5.1 /public/js/list_client.js"></a>5.1 /public/js/list_client.js</h3><p>So this is a javaScript file that provides a simple custom trailered http client using XMLHttprequest, and a bunch of methods that can be called to make certain kinds of requests from the front end. Requests for a certain list if I know the id, and making post requests for new lists, and items.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> get = <span class="function"><span class="keyword">function</span> (<span class="params">id</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(id);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// list client.</span></div><div class="line"><span class="keyword">var</span> lc = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// simple, custom, http client using XMLHttpRequest</span></div><div class="line">    <span class="keyword">var</span> http = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">        obj = obj || &#123;&#125;;</div><div class="line"> </div><div class="line">        <span class="comment">// defaults to making GET requests to the /list path</span></div><div class="line">        <span class="keyword">this</span>.method = obj.method || <span class="string">'GET'</span>;</div><div class="line">        <span class="keyword">this</span>.path = obj.path || <span class="string">'/list'</span>;</div><div class="line">        <span class="keyword">this</span>.body = obj.body || <span class="literal">null</span>;</div><div class="line">        <span class="keyword">this</span>.onDone = obj.onDone || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.response);</div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">this</span>.onFail = obj.onFail || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.response);</div><div class="line">        &#125;;</div><div class="line"> </div><div class="line">        <span class="comment">// start the request</span></div><div class="line">        <span class="keyword">var</span> xhr = <span class="keyword">this</span>.xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">        xhr.open(<span class="keyword">this</span>.method, <span class="keyword">this</span>.path);</div><div class="line"> </div><div class="line">        <span class="comment">// with this client all GET,and POST request should be for JSON</span></div><div class="line">        xhr.setRequestHeader(<span class="string">'Content-Type'</span>, <span class="string">'application/json'</span>);</div><div class="line"> </div><div class="line">        <span class="keyword">var</span> req = <span class="keyword">this</span>;</div><div class="line">        xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.readyState === <span class="number">4</span>) &#123;</div><div class="line"> </div><div class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.status === <span class="number">200</span>) &#123;</div><div class="line"> </div><div class="line">                    req.onDone.call(<span class="keyword">this</span>, <span class="keyword">this</span>);</div><div class="line"> </div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">                    req.onFail.call(<span class="keyword">this</span>, <span class="keyword">this</span>);</div><div class="line"> </div><div class="line">                &#125;</div><div class="line"> </div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;;</div><div class="line"> </div><div class="line">        <span class="comment">// send</span></div><div class="line">        xhr.send(<span class="keyword">this</span>.body);</div><div class="line"> </div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// no call back default</span></div><div class="line">    <span class="keyword">var</span> nocb = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.response);</div><div class="line"> </div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// public api</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line"> </div><div class="line">        <span class="comment">// expose http</span></div><div class="line">        http: http,</div><div class="line"> </div><div class="line">        <span class="comment">// just get the main index</span></div><div class="line">        getIndex: <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">            obj = obj || &#123;&#125;;</div><div class="line"> </div><div class="line">            obj.onDone = obj.onDone || nocb;</div><div class="line">            obj.onFail = obj.onFail || nocb;</div><div class="line"> </div><div class="line">            <span class="keyword">new</span> http(&#123;</div><div class="line"> </div><div class="line">                <span class="attr">onDone</span>: obj.onDone,</div><div class="line">                <span class="attr">onFail</span>: obj.onFail</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// get a list by id</span></div><div class="line">        getList: <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">            obj = obj || &#123;&#125;;</div><div class="line"> </div><div class="line">            obj.onDone = obj.onDone || nocb;</div><div class="line">            obj.onFail = obj.onFail || nocb;</div><div class="line">            obj.listId = obj.listId || <span class="literal">null</span>;</div><div class="line"> </div><div class="line">            <span class="keyword">new</span> http(&#123;</div><div class="line">                <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">                <span class="attr">body</span>: <span class="built_in">JSON</span>.stringify(&#123;</div><div class="line">                    <span class="attr">mode</span>: <span class="string">'get'</span>,</div><div class="line">                    <span class="attr">listId</span>: obj.listId</div><div class="line">                &#125;),</div><div class="line">                <span class="attr">onDone</span>: obj.onDone,</div><div class="line">                <span class="attr">onFail</span>: obj.onFail</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// delete a list</span></div><div class="line">        delList: <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">            obj = obj || &#123;&#125;;</div><div class="line"> </div><div class="line">            obj.onDone = obj.onDone || nocb;</div><div class="line">            obj.onFail = obj.onFail || nocb;</div><div class="line">            obj.listId = obj.listId || <span class="literal">null</span>;</div><div class="line"> </div><div class="line">            <span class="keyword">new</span> lc.http(&#123;</div><div class="line"> </div><div class="line">                <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">                <span class="attr">body</span>: <span class="built_in">JSON</span>.stringify(&#123;</div><div class="line">                    <span class="attr">mode</span>: <span class="string">'delete'</span>,</div><div class="line">                    <span class="attr">listId</span>: obj.listId</div><div class="line">                &#125;),</div><div class="line">                <span class="attr">onDone</span>: obj.onDone,</div><div class="line">                <span class="attr">onFail</span>: obj.onFail</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// creates a new list</span></div><div class="line">        createList: <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">            obj = obj || &#123;&#125;;</div><div class="line"> </div><div class="line">            obj.onDone = obj.onDone || nocb;</div><div class="line">            obj.onFail = obj.onFail || nocb;</div><div class="line"> </div><div class="line">            obj.body.mode = <span class="string">'create'</span>;</div><div class="line">            obj.body = <span class="built_in">JSON</span>.stringify(obj.body);</div><div class="line"> </div><div class="line">            <span class="keyword">new</span> http(&#123;</div><div class="line"> </div><div class="line">                <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">                <span class="attr">body</span>: obj.body,</div><div class="line">                <span class="attr">onDone</span>: obj.onDone,</div><div class="line">                <span class="attr">onFail</span>: obj.onFail</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// creates a new list</span></div><div class="line">        addListItem: <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">            obj = obj || &#123;&#125;;</div><div class="line"> </div><div class="line">            obj.onDone = obj.onDone || nocb;</div><div class="line">            obj.onFail = obj.onFail || nocb;</div><div class="line"> </div><div class="line">            obj.body = obj.body || &#123;&#125;;</div><div class="line">            obj.body.mode = <span class="string">'add_list_item'</span>;</div><div class="line">            obj.body.item = obj.body.item || &#123;</div><div class="line">                <span class="attr">name</span>: <span class="string">'cry'</span></div><div class="line">            &#125;;</div><div class="line">            obj.body = <span class="built_in">JSON</span>.stringify(obj.body);</div><div class="line"> </div><div class="line">            <span class="keyword">new</span> http(&#123;</div><div class="line"> </div><div class="line">                <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">                <span class="attr">path</span>: <span class="string">'/edit'</span>,</div><div class="line">                <span class="attr">body</span>: obj.body,</div><div class="line">                <span class="attr">onDone</span>: obj.onDone,</div><div class="line">                <span class="attr">onFail</span>: obj.onFail</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="6-The-routes-folder"><a href="#6-The-routes-folder" class="headerlink" title="6 - The routes folder"></a>6 - The routes folder</h2><p>So the routes folder is a way to help break down the many paths that are defined by this project. For the most part when I think about it I am going to want to have a path that has to do with editing a list, and another path that has to do with creating, deleting, and getting a main index of lists. So in this folder there is an edit.js, and list.js files, as well as a middleare folder that has all the middleware functions that are used by these two paths.</p>
<h3 id="6-1-routes-edit-js"><a href="#6-1-routes-edit-js" class="headerlink" title="6.1 - /routes/edit.js"></a>6.1 - /routes/edit.js</h3><p>Here in the edit.js file I am setting what should be done for get, and post requests to the /edit path. This path is used by the client to edit a list that was created before hand.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>),</div><div class="line">dbLists = <span class="built_in">require</span>(<span class="string">'../lib/db_lists'</span>),</div><div class="line"> </div><div class="line">editApp = express();</div><div class="line"> </div><div class="line"><span class="comment">//editApp.get('/edit', require('../lib/mw_edit_get'));</span></div><div class="line"> </div><div class="line">editApp.get(<span class="string">'/edit'</span>, <span class="built_in">require</span>(<span class="string">'./mw/edit_get'</span>));</div><div class="line"> </div><div class="line"><span class="comment">// POST</span></div><div class="line">editApp.use(<span class="built_in">require</span>(<span class="string">'body-parser'</span>).json());</div><div class="line">editApp.post(<span class="string">'/edit'</span>,</div><div class="line"> </div><div class="line">    [</div><div class="line">        <span class="comment">// check body</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/check_body'</span>),</div><div class="line"> </div><div class="line">        <span class="comment">// set postRes object</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/setobj_postres'</span>),</div><div class="line"> </div><div class="line">        <span class="comment">// add item?</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/item_add'</span>),</div><div class="line"> </div><div class="line">        <span class="comment">// delete item?</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/item_delete'</span>),</div><div class="line"> </div><div class="line">        <span class="comment">// edit item?</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/item_edit'</span>),</div><div class="line"> </div><div class="line">        <span class="comment">// get item?</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/item_get'</span>),</div><div class="line"> </div><div class="line">        <span class="comment">// fail</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/check_fail'</span>)]);</div><div class="line"> </div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// set views from main app</span></div><div class="line">    editApp.set(<span class="string">'views'</span>, obj.app.get(<span class="string">'views'</span>));</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> editApp;</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="6-2-routes-list-js"><a href="#6-2-routes-list-js" class="headerlink" title="6.2 - /routes/list.js"></a>6.2 - /routes/list.js</h3><p>The list.js file is where I set up what is to be done for GET and POST requests to the /list path.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>),</div><div class="line">path = <span class="built_in">require</span>(<span class="string">'path'</span>),</div><div class="line">fs = <span class="built_in">require</span>(<span class="string">'fs-extra'</span>),</div><div class="line">FileAsync = <span class="built_in">require</span>(<span class="string">'lowdb/adapters/FileAsync'</span>),</div><div class="line">low = <span class="built_in">require</span>(<span class="string">'lowdb'</span>),</div><div class="line">shortId = <span class="built_in">require</span>(<span class="string">'shortid'</span>),</div><div class="line"> </div><div class="line">dbLists = <span class="built_in">require</span>(<span class="string">'../lib/db_lists'</span>),</div><div class="line"> </div><div class="line">listApp = express();</div><div class="line"> </div><div class="line"><span class="comment">// GET for /list path</span></div><div class="line">listApp.get(<span class="string">'/list'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// send just a list of names, and ids</span></div><div class="line">    dbLists.readLists().then(<span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</div><div class="line"> </div><div class="line">        res.json(&#123;</div><div class="line">            <span class="attr">lists</span>: list.get(<span class="string">'lists'</span>).value().map(<span class="function"><span class="keyword">function</span> (<span class="params">l</span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> &#123;</div><div class="line">                    <span class="attr">name</span>: l.name,</div><div class="line">                    <span class="attr">id</span>: l.id</div><div class="line">                &#125;</div><div class="line">            &#125;)</div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="comment">// POST for /list path</span></div><div class="line">listApp.use(<span class="built_in">require</span>(<span class="string">'body-parser'</span>).json());</div><div class="line">listApp.post(<span class="string">'/list'</span>,</div><div class="line">    [</div><div class="line"> </div><div class="line">        <span class="comment">// check for a body</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/check_body'</span>),</div><div class="line"> </div><div class="line">        <span class="comment">// set postRes object</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/setobj_postres'</span>),</div><div class="line"> </div><div class="line">        <span class="comment">// create a list?</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/list_create'</span>),</div><div class="line"> </div><div class="line">        <span class="comment">// delete a list?</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/list_delete'</span>),</div><div class="line"> </div><div class="line">        <span class="comment">// get a list?</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/list_get'</span>),</div><div class="line"> </div><div class="line">        <span class="comment">// fail</span></div><div class="line">        <span class="built_in">require</span>(<span class="string">'./mw/check_fail'</span>)</div><div class="line"> </div><div class="line">    ]);</div><div class="line"> </div><div class="line"><span class="comment">// export a list app</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line"> </div><div class="line">    listApp.set(<span class="string">'dir_root'</span>, obj.dir_root || process.cwd());</div><div class="line">    listApp.set(<span class="string">'path_lists'</span>, path.join(listApp.get(<span class="string">'dir_root'</span>), <span class="string">'db'</span>, <span class="string">'lists.json'</span>));</div><div class="line"> </div><div class="line">    <span class="comment">// ensure db folder</span></div><div class="line">    dbLists.ensureDB();</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> listApp;</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>like with edit.js I am using many middleware methods in an additional folder that I placed in the routes folder.</p>
<h3 id="6-3-The-middleware-at-the-routes-mw-folder"><a href="#6-3-The-middleware-at-the-routes-mw-folder" class="headerlink" title="6.3 - The middleware at the /routes/mw folder"></a>6.3 - The middleware at the /routes/mw folder</h3><p>here I have a much of middleware files that I use with the /edit and /list paths as a way of breaking things down more, so they are easier to understand, and manage.</p>
<h4 id="6-3-1-edit-get-js"><a href="#6-3-1-edit-get-js" class="headerlink" title="6.3.1 - edit_get.js"></a>6.3.1 - edit_get.js</h4><p>So making a get request to the /edit path will result in server side rendering, and what will be rendered depends on the query string given.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// a middleware that starts a render object</span></div><div class="line"><span class="keyword">let</span> dbLists = <span class="built_in">require</span>(<span class="string">'../../lib/db_lists'</span>);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = [</div><div class="line"> </div><div class="line">    <span class="comment">// set up a standard render object</span></div><div class="line">    <span class="built_in">require</span>(<span class="string">'./setobj_rend'</span>),</div><div class="line"> </div><div class="line">    <span class="comment">// make sure we are using the edit layout</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="comment">// use edit layout</span></div><div class="line">        req.rend.layout = <span class="string">'edit'</span>;</div><div class="line"> </div><div class="line">        next();</div><div class="line"> </div><div class="line">    &#125;,</div><div class="line"> </div><div class="line">    <span class="comment">// render list of lists, if no listId is given in the query string</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">if</span> (req.query.l === <span class="literal">undefined</span>) &#123;</div><div class="line"> </div><div class="line">            dbLists.readLists().then(<span class="function"><span class="keyword">function</span> (<span class="params">lists</span>) </span>&#123;</div><div class="line"> </div><div class="line">                req.rend.lists = lists.get(<span class="string">'lists'</span>).value();</div><div class="line">                res.render(req.rend.main, req.rend);</div><div class="line"> </div><div class="line">            &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">                res.render(req.rend.main, req.rend);</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">            <span class="comment">// else we where given a list id so set the list id, and continue.</span></div><div class="line">            req.rend.listId = req.query.l;</div><div class="line">            next();</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;,</div><div class="line"> </div><div class="line">    <span class="comment">// if no item id is given, just send out the list</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="comment">// no item id given?</span></div><div class="line">        <span class="keyword">if</span> (req.query.i === <span class="literal">undefined</span>) &#123;</div><div class="line"> </div><div class="line">            dbLists.getListById(req.query.l).then(<span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</div><div class="line"> </div><div class="line">                req.rend.list = list.value();</div><div class="line">                res.render(req.rend.main, req.rend);</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">            <span class="comment">// item id given</span></div><div class="line">            req.rend.itemId = req.query.i;</div><div class="line">            next();</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;,</div><div class="line"> </div><div class="line">    <span class="comment">// get the item</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"> </div><div class="line">        dbLists.getItemById(&#123;</div><div class="line"> </div><div class="line">            <span class="attr">listId</span>: req.query.l,</div><div class="line">            <span class="attr">itemId</span>: req.query.i</div><div class="line"> </div><div class="line">        &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line"> </div><div class="line">            req.rend.item = item.value();</div><div class="line">            res.render(req.rend.main, req.rend);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">];</div></pre></td></tr></table></figure>
<h4 id="6-3-2-setobj-rend-js"><a href="#6-3-2-setobj-rend-js" class="headerlink" title="6.3.2 - setobj_rend.js"></a>6.3.2 - setobj_rend.js</h4><p>I made this middleware as a way to setup a standard object that will be passed to ejs wen rendering templates.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// a middleware that starts a render object</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"></div><div class="line">    req.rend = &#123;</div><div class="line"> </div><div class="line">        <span class="attr">main</span>: <span class="string">'index'</span>, <span class="comment">// main ejs file to use in the root of the theme</span></div><div class="line">        layout: <span class="string">'index'</span>, <span class="comment">// layout ejs file to use</span></div><div class="line"> </div><div class="line">        listId: <span class="literal">null</span>,</div><div class="line">        <span class="attr">itemId</span>: <span class="literal">null</span>,</div><div class="line">        <span class="attr">lists</span>: [],</div><div class="line">        <span class="attr">list</span>: &#123;&#125;,</div><div class="line">        <span class="attr">item</span>: &#123;&#125;</div><div class="line"> </div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    next();</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="6-3-3-setobj-postres-js"><a href="#6-3-3-setobj-postres-js" class="headerlink" title="6.3.3 - setobj_postres.js"></a>6.3.3 - setobj_postres.js</h4><p>This one sets a standard object that is send for responses to post requests.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// a middleware that starts a render object</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// set defaults for an standard object</span></div><div class="line">    <span class="comment">// that will be send back for a post</span></div><div class="line">    <span class="comment">// request</span></div><div class="line">    req.postRes = &#123;</div><div class="line">        <span class="attr">success</span>: <span class="literal">false</span>,</div><div class="line">        <span class="attr">body</span>: req.body,</div><div class="line">        <span class="attr">mess</span>: <span class="string">''</span>,</div><div class="line">        <span class="attr">eMess</span>: <span class="string">''</span>,</div><div class="line">        <span class="attr">list</span>: [],</div><div class="line">        <span class="attr">item</span>: &#123;&#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    next();</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="6-3-4-check-body-js"><a href="#6-3-4-check-body-js" class="headerlink" title="6.3.4 - check_body.js"></a>6.3.4 - check_body.js</h4><p>As the name suggests this middeware just checks for a body, and makes sure a mode is set as well. If something is missing it responds, else it does nothing.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// check body</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// body must be there,</span></div><div class="line">    <span class="keyword">if</span> (req.body) &#123;</div><div class="line"> </div><div class="line">        <span class="comment">//  and the body must have a mode property</span></div><div class="line">        <span class="keyword">if</span> (req.body.mode) &#123;</div><div class="line"> </div><div class="line">            <span class="comment">// then we are good to continue</span></div><div class="line">            next();</div><div class="line"> </div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">            <span class="comment">// respond with no mode mess</span></div><div class="line">            res.json(&#123;</div><div class="line"> </div><div class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</div><div class="line">                <span class="attr">mess</span>: <span class="string">'no mode.'</span>,</div><div class="line">                <span class="attr">body</span>: req.body</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">        <span class="comment">// respond with no body mess</span></div><div class="line">        res.json(&#123;</div><div class="line"> </div><div class="line">            <span class="attr">success</span>: <span class="literal">false</span>,</div><div class="line">            <span class="attr">mess</span>: <span class="string">'no body was parsed.'</span></div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="6-3-5-check-fail-js"><a href="#6-3-5-check-fail-js" class="headerlink" title="6.3.5 - check_fail.js"></a>6.3.5 - check_fail.js</h4><p>This is a standard middleware that is used at the end of an array of middlewares as a sort of end of the line middleware if nothing happens.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// end of the line.</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line"> </div><div class="line">    req.postRes.mess = <span class="string">'post recived, but nothing was done. Check the given body'</span>;</div><div class="line">    res.json(req.postRes);</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="6-3-6-item-add-js"><a href="#6-3-6-item-add-js" class="headerlink" title="6.3.6 - item_add.js"></a>6.3.6 - item_add.js</h4><p>adds an item to a list.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> dbLists = <span class="built_in">require</span>(<span class="string">'../../lib/db_lists'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// check body</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> (req.body.mode === <span class="string">'add_list_item'</span> &amp;&amp; req.body.item &amp;&amp; req.body.listId) &#123;</div><div class="line"> </div><div class="line">        dbLists.pushItem(req.body).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">            res.json(&#123;</div><div class="line"> </div><div class="line">                <span class="attr">success</span>: <span class="literal">true</span>,</div><div class="line">                <span class="attr">mess</span>: <span class="string">'item added to db'</span>,</div><div class="line">                <span class="attr">body</span>: req.body</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">            res.json(&#123;</div><div class="line"> </div><div class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</div><div class="line">                <span class="attr">mess</span>: <span class="string">'error writing item to db'</span>,</div><div class="line">                <span class="attr">eMess</span>: e.message</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">        <span class="comment">// else not the mode</span></div><div class="line">        next();</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="6-3-7-item-delete-js"><a href="#6-3-7-item-delete-js" class="headerlink" title="6.3.7 - item_delete.js"></a>6.3.7 - item_delete.js</h4><p>Deletes an item from a list.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> dbLists = <span class="built_in">require</span>(<span class="string">'../../lib/db_lists'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// check body</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> (req.body.mode === <span class="string">'delete_list_item'</span>) &#123;</div><div class="line"> </div><div class="line">        <span class="keyword">if</span> (req.body.listId &amp;&amp; req.body.itemId) &#123;</div><div class="line"> </div><div class="line">            dbLists.deleteItemById(req.body).then(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line"> </div><div class="line">                res.json(&#123;</div><div class="line"> </div><div class="line">                    <span class="attr">success</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">mess</span>: <span class="string">'item deleted'</span>,</div><div class="line">                    <span class="attr">body</span>: req.body</div><div class="line"> </div><div class="line">                &#125;);</div><div class="line"> </div><div class="line">            &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">                res.json(&#123;</div><div class="line"> </div><div class="line">                    <span class="attr">success</span>: <span class="literal">false</span>,</div><div class="line">                    <span class="attr">mess</span>: <span class="string">'error deleteing item'</span>,</div><div class="line">                    <span class="attr">eMess</span>: e.message</div><div class="line"> </div><div class="line">                &#125;);</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">            res.json(&#123;</div><div class="line"> </div><div class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</div><div class="line">                <span class="attr">mess</span>: <span class="string">'must give a list, and item id in the body'</span></div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">        <span class="comment">// not the mode</span></div><div class="line">        next();</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="6-3-8-item-edit-js"><a href="#6-3-8-item-edit-js" class="headerlink" title="6.3.8 - item_edit.js"></a>6.3.8 - item_edit.js</h4><p>Edits an item.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> dbLists = <span class="built_in">require</span>(<span class="string">'../../lib/db_lists'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// edit list item middleware</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> (req.body.mode === <span class="string">'edit_list_item'</span>) &#123;</div><div class="line"> </div><div class="line">        <span class="keyword">if</span> (req.body.listId &amp;&amp; req.body.itemId) &#123;</div><div class="line"> </div><div class="line">            dbLists.editItemById(req.body).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">                res.json(&#123;</div><div class="line"> </div><div class="line">                    <span class="attr">success</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">mess</span>: <span class="string">'yes this is edit item'</span>,</div><div class="line">                    <span class="attr">body</span>: req.body</div><div class="line"> </div><div class="line">                &#125;);</div><div class="line"> </div><div class="line">            &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">                res.json(&#123;</div><div class="line"> </div><div class="line">                    <span class="attr">success</span>: <span class="literal">false</span>,</div><div class="line">                    <span class="attr">mess</span>: <span class="string">'error editing item'</span>,</div><div class="line">                    <span class="attr">eMess</span>: e.message,</div><div class="line">                    <span class="attr">body</span>: req.body</div><div class="line"> </div><div class="line">                &#125;);</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">        <span class="comment">// not the mode</span></div><div class="line">        next();</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="6-3-9-item-get-js"><a href="#6-3-9-item-get-js" class="headerlink" title="6.3.9 - item_get.js"></a>6.3.9 - item_get.js</h4><p>Gets an item.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> dbLists = <span class="built_in">require</span>(<span class="string">'../../lib/db_lists'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// check body</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> (req.body.mode === <span class="string">'get_list_item'</span>) &#123;</div><div class="line"> </div><div class="line">        <span class="keyword">if</span> (req.body.listId &amp;&amp; req.body.itemId) &#123;</div><div class="line"> </div><div class="line">            dbLists.getItemById(req.body).then(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line"> </div><div class="line">                res.json(&#123;</div><div class="line">                    <span class="attr">success</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">mess</span>: <span class="string">'got the item'</span>,</div><div class="line">                    <span class="attr">item</span>: item.value(),</div><div class="line">                    <span class="attr">body</span>: req.body</div><div class="line">                &#125;);</div><div class="line"> </div><div class="line">            &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">                res.json(&#123;</div><div class="line"> </div><div class="line">                    <span class="attr">success</span>: <span class="literal">false</span>,</div><div class="line">                    <span class="attr">mess</span>: <span class="string">'error getting list'</span>,</div><div class="line">                    <span class="attr">eMess</span>: e.message</div><div class="line"> </div><div class="line">                &#125;);</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">            res.json(&#123;</div><div class="line"> </div><div class="line">                <span class="attr">success</span>: <span class="literal">false</span>,</div><div class="line">                <span class="attr">mess</span>: <span class="string">'must give a list, and item id in the body'</span></div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">        <span class="comment">// not the mode</span></div><div class="line">        next();</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="6-3-10-list-create-js"><a href="#6-3-10-list-create-js" class="headerlink" title="6.3.10 - list_create.js"></a>6.3.10 - list_create.js</h4><p>Creates a list.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> dbLists = <span class="built_in">require</span>(<span class="string">'../../lib/db_lists'</span>);</div><div class="line"></div><div class="line"><span class="comment">// create a list</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> (req.body.mode === <span class="string">'create'</span>) &#123;</div><div class="line"> </div><div class="line">        dbLists.pushList(&#123;</div><div class="line"> </div><div class="line">            <span class="attr">name</span>: req.body.name || <span class="string">'a new list'</span></div><div class="line"> </div><div class="line">        &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</div><div class="line"> </div><div class="line">            req.postRes.success = <span class="literal">true</span>;</div><div class="line">            req.postRes.mess = <span class="string">'cretaed a new list'</span>;</div><div class="line">            req.postRes.list = list;</div><div class="line">            res.json(req.postRes);</div><div class="line"> </div><div class="line">        &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">            req.postRes.mess = <span class="string">'error with database.'</span>;</div><div class="line">            req.postRes.eMess = e.message;</div><div class="line">            res.json(req.postRes);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">        next();</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="6-3-11-list-delete-js"><a href="#6-3-11-list-delete-js" class="headerlink" title="6.3.11 - list_delete.js"></a>6.3.11 - list_delete.js</h4><p>Deletes a whole list.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> dbLists = <span class="built_in">require</span>(<span class="string">'../../lib/db_lists'</span>);</div><div class="line"></div><div class="line"><span class="comment">// delete a list</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> (req.body.mode === <span class="string">'delete'</span> &amp;&amp; req.body.listId) &#123;</div><div class="line"> </div><div class="line">        dbLists.deleteListById(req.body).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">            req.postRes.success = <span class="literal">true</span>;</div><div class="line">            req.postRes.mess = <span class="string">'list deleted'</span>;</div><div class="line">            res.json(req.postRes);</div><div class="line"> </div><div class="line">        &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">            req.postRes.mess = <span class="string">'error deleteing list'</span>;</div><div class="line">            req.postRes.eMess = e.message;</div><div class="line">            res.json(req.postRes);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">        next();</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="6-3-12-list-get-js"><a href="#6-3-12-list-get-js" class="headerlink" title="6.3.12 - list_get.js"></a>6.3.12 - list_get.js</h4><p>Used to get a list.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> dbLists = <span class="built_in">require</span>(<span class="string">'../../lib/db_lists'</span>);</div><div class="line"></div><div class="line"><span class="comment">// get a list</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> (req.body.mode === <span class="string">'get'</span> &amp;&amp; req.body.listId) &#123;</div><div class="line"> </div><div class="line">        dbLists.getListById(req.body.listId).then(<span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</div><div class="line"> </div><div class="line">            req.postRes.success = <span class="literal">true</span>;</div><div class="line">            req.postRes.mess = <span class="string">'got the list.'</span>;</div><div class="line">            req.postRes.list = list;</div><div class="line">            res.json(req.postRes);</div><div class="line"> </div><div class="line">        &#125;).catch (<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">            req.postRes.mess = <span class="string">'error getting the list.'</span>;</div><div class="line">            req.postRes.eMess = e.message;</div><div class="line">            res.json(req.postRes);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">        next()</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="7-The-themes-folder"><a href="#7-The-themes-folder" class="headerlink" title="7 - The /themes folder"></a>7 - The /themes folder</h2><p>This is the folder that will store the themes for the project. For now there is only one theme, but if I continue developing this I will likely experiment with different front end solutions. The one and only theme in use so far is called landscape, and it is nothing to write home about. I just wanted to quickly slap something together that just works for this first release.</p>
<h3 id="7-1-The-Landscape-theme"><a href="#7-1-The-Landscape-theme" class="headerlink" title="7.1 - The Landscape theme"></a>7.1 - The Landscape theme</h3><p>For the landscape theme I just put together something that is composed of just my own vanilla javaScript, css, and ejs markup.</p>
<h4 id="7-1-2-landscape-css-style-css"><a href="#7-1-2-landscape-css-style-css" class="headerlink" title="7.1.2 - landscape/css/style.css"></a>7.1.2 - landscape/css/style.css</h4><p>There is a css path for the theme, but for now there are only two classes so there is not much to write about.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.item_done</span>&#123;</div><div class="line"> </div><div class="line">  <span class="attribute">text-decoration</span>: line-through</div><div class="line"> </div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="selector-class">.item_not_done</span>&#123;</div><div class="line"> </div><div class="line">  <span class="attribute">text-decoration</span>: none</div><div class="line"> </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="7-1-3-landscape-js-create-js"><a href="#7-1-3-landscape-js-create-js" class="headerlink" title="7.1.3 - landscape/js/create.js"></a>7.1.3 - landscape/js/create.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// when create button is clicked</span></div><div class="line">get(<span class="string">'create_submit'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// get all inputs with class 'meta'</span></div><div class="line">    <span class="keyword">var</span> nodes = get(<span class="string">'create'</span>).querySelectorAll(<span class="string">'.meta'</span>),</div><div class="line"> </div><div class="line">    <span class="comment">// set up a new body to send</span></div><div class="line">    body = &#123;&#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// forEach 'meta' input</span></div><div class="line">    [].forEach.call(nodes, <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="comment">// make it part of body</span></div><div class="line">        body[el.name] = el.value;</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">    <span class="comment">// use list clients createList Method to send the body</span></div><div class="line">    lc.createList(&#123;</div><div class="line"> </div><div class="line">        <span class="attr">body</span>: body,</div><div class="line">        <span class="attr">onDone</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">var</span> res = <span class="built_in">JSON</span>.parse(<span class="keyword">this</span>.response);</div><div class="line"> </div><div class="line">            <span class="comment">// redirect to origin</span></div><div class="line">            <span class="built_in">window</span>.location.href = <span class="string">'/edit?l='</span> + res.list.id;</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="7-1-4-landscape-js-edit-js"><a href="#7-1-4-landscape-js-edit-js" class="headerlink" title="7.1.4 - landscape/js/edit.js"></a>7.1.4 - landscape/js/edit.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// edit path client for 'landscape' theme</span></div><div class="line"> </div><div class="line"><span class="keyword">var</span> reload = <span class="function"><span class="keyword">function</span> (<span class="params">noListId</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> param = <span class="string">''</span>;</div><div class="line"> </div><div class="line">    <span class="keyword">if</span> (!noListId) &#123;</div><div class="line"> </div><div class="line">        param = <span class="string">'?l='</span> + get(<span class="string">'listid'</span>).innerHTML;</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="built_in">window</span>.location.href = <span class="string">'/edit'</span> + param;</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// when a list item is clicked</span></div><div class="line"><span class="keyword">var</span> onItemClick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'li element clicked'</span>);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// when a done button is clicked</span></div><div class="line"><span class="keyword">var</span> onDoneClick = <span class="function"><span class="keyword">function</span> (<span class="params">e, done</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Done button clicked'</span>);</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> li = e.target.parentElement,</div><div class="line">    itemId = li.id.replace(<span class="regexp">/^item_/</span>, <span class="string">''</span>),</div><div class="line">    listId = get(<span class="string">'listid'</span>).innerHTML;</div><div class="line"> </div><div class="line">    done = done || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">new</span> lc.http(&#123;</div><div class="line"> </div><div class="line">        <span class="attr">path</span>: <span class="string">'/edit'</span>,</div><div class="line">        <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">        <span class="attr">body</span>: <span class="built_in">JSON</span>.stringify(&#123;</div><div class="line"> </div><div class="line">            <span class="attr">mode</span>: <span class="string">'edit_list_item'</span>,</div><div class="line">            <span class="attr">listId</span>: listId,</div><div class="line">            <span class="attr">itemId</span>: itemId,</div><div class="line"> </div><div class="line">            <span class="attr">toggleDone</span>: <span class="literal">true</span></div><div class="line"> </div><div class="line">        &#125;),</div><div class="line">        <span class="attr">onDone</span>: done</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// when the delete button is clieck</span></div><div class="line"><span class="keyword">var</span> onDeleteClick = <span class="function"><span class="keyword">function</span> (<span class="params">e, done</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> itemId = e.target.dataset.itemId,</div><div class="line">    listId = get(<span class="string">'listid'</span>).innerHTML;</div><div class="line"> </div><div class="line">    done = done || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">new</span> lc.http(&#123;</div><div class="line"> </div><div class="line">        <span class="attr">path</span>: <span class="string">'/edit'</span>,</div><div class="line">        <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">        <span class="attr">body</span>: <span class="built_in">JSON</span>.stringify(&#123;</div><div class="line"> </div><div class="line">            <span class="attr">mode</span>: <span class="string">'delete_list_item'</span>,</div><div class="line">            <span class="attr">listId</span>: listId,</div><div class="line">            <span class="attr">itemId</span>: itemId</div><div class="line"> </div><div class="line">        &#125;),</div><div class="line">        <span class="attr">onDone</span>: done</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">if</span> (get(<span class="string">'listid'</span>)) &#123;</div><div class="line"> </div><div class="line">    <span class="comment">// for each hard coded list item</span></div><div class="line">    [].forEach.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">'.button_done'</span>), <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</div><div class="line"> </div><div class="line">        el.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">            onDoneClick(e, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">                reload();</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">    <span class="comment">// for each delete button</span></div><div class="line">    [].forEach.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">'.button_delete'</span>), <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</div><div class="line"> </div><div class="line">        el.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">            onDeleteClick(e, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                reload();</div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">    <span class="comment">// if add item button is clicked</span></div><div class="line">    get(<span class="string">'newitem_submit'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">         <span class="keyword">var</span> text = get(<span class="string">'newitem_text'</span>).value;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (text !== <span class="string">''</span>) &#123;</div><div class="line"> </div><div class="line">            lc.addListItem(&#123;</div><div class="line"> </div><div class="line">                <span class="attr">body</span>: &#123;</div><div class="line">                    <span class="attr">listId</span>: get(<span class="string">'listid'</span>).innerText,</div><div class="line">                    <span class="attr">item</span>: &#123;</div><div class="line"> </div><div class="line">                        <span class="attr">name</span>: text</div><div class="line">                    &#125;</div><div class="line"> </div><div class="line">                &#125;,</div><div class="line">                <span class="attr">onDone</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">                    <span class="keyword">var</span> res = <span class="built_in">JSON</span>.parse(<span class="keyword">this</span>.response);</div><div class="line"> </div><div class="line">                    <span class="keyword">if</span> (res.success) &#123;</div><div class="line"> </div><div class="line">                        reload();</div><div class="line"> </div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">                        <span class="built_in">console</span>.log(<span class="keyword">this</span>.response);</div><div class="line"> </div><div class="line">                    &#125;</div><div class="line"> </div><div class="line">                &#125;</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line"> </div><div class="line">    [].forEach.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">'.list_delete'</span>), <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</div><div class="line"> </div><div class="line">        el.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">var</span> li = e.target.parentElement,</div><div class="line">            listId = li.id.replace(<span class="regexp">/^list_/</span>, <span class="string">''</span>);</div><div class="line"> </div><div class="line">            <span class="built_in">console</span>.log(listId);</div><div class="line"> </div><div class="line">            lc.delList(&#123;</div><div class="line"> </div><div class="line">                <span class="attr">listId</span>: listId,</div><div class="line">                <span class="attr">onDone</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">                    <span class="comment">//console.log(this.response);</span></div><div class="line">                    reload(<span class="literal">true</span>);</div><div class="line"> </div><div class="line">                &#125;</div><div class="line"> </div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="7-1-5-landscape-layouts-create-ejs"><a href="#7-1-5-landscape-layouts-create-ejs" class="headerlink" title="7.1.5 - landscape/layouts/create.ejs"></a>7.1.5 - landscape/layouts/create.ejs</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;h2&gt;Create new:&lt;/h2&gt;</div><div class="line">&lt;div id=&quot;create&quot;&gt;</div><div class="line">    List Name: &lt;input class=&quot;meta&quot; name=&quot;name&quot; type=&quot;text&quot; value=&quot;The foo list&quot;&gt;&lt;br&gt;</div><div class="line">    &lt;input id=&quot;create_submit&quot; type=&quot;submit&quot; value=&quot;create&quot;&gt;&lt;br&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;script src=&quot;/theme/js/create.js&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<h4 id="7-1-6-landscape-layouts-edit-ejs"><a href="#7-1-6-landscape-layouts-edit-ejs" class="headerlink" title="7.1.6 - landscape/layouts/edit.ejs"></a>7.1.6 - landscape/layouts/edit.ejs</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">&lt;h2&gt;EDIT:&lt;/h2&gt;</div><div class="line"> </div><div class="line">&lt;% if(listId)&#123; %&gt;</div><div class="line"> </div><div class="line">   &lt;% if(itemId)&#123; %&gt;</div><div class="line"> </div><div class="line">       &lt;h3&gt;Item Edit: &lt;/h3&gt;</div><div class="line"> </div><div class="line">    &lt;% &#125;else&#123; %&gt;</div><div class="line"> </div><div class="line">        &lt;h3&gt;&lt;span&gt;&lt;%= list.name %&gt;&lt;/span&gt; (List#: &lt;span id=&quot;listid&quot;&gt;&lt;%= list.id %&gt;&lt;/span&gt; ) &lt;/h3&gt;</div><div class="line"> </div><div class="line">        &lt;ul id=&quot;list_current&quot;&gt;</div><div class="line"> </div><div class="line">        &lt;% list.items.forEach(function(item)&#123; %&gt;</div><div class="line">            &lt;li id=&quot;item_&lt;%= item.id %&gt;&quot; class=&quot;&lt;%= item.done ? &apos;item_done&apos;: &apos;item_not_done&apos;; %&gt;&quot; &gt;</div><div class="line">                &lt;a href=&quot;/edit?l=&lt;%= listId %&gt;&amp;i=&lt;%= item.id %&gt;&quot;&gt;&lt;%= item.name %&gt;&lt;/a&gt; | </div><div class="line">                &lt;%= item.id %&gt; | </div><div class="line">                &lt;input class=&quot;button_done&quot; data-item-id=&quot;&lt;%= item.id %&gt;&quot; type=&quot;button&quot; value=&quot;done&quot;&gt;</div><div class="line">                &lt;input class=&quot;button_delete&quot; data-item-id=&quot;&lt;%= item.id %&gt;&quot; type=&quot;button&quot; value=&quot;delete&quot;&gt;</div><div class="line">            &lt;/li&gt;</div><div class="line">        &lt;% &#125;); %&gt;</div><div class="line"> </div><div class="line">   &lt;/ul&gt;</div><div class="line"> </div><div class="line">    &lt;input id=&quot;newitem_text&quot; type=&quot;text&quot; value=&quot;foo&quot;&gt;</div><div class="line">    &lt;input id=&quot;newitem_submit&quot; type=&quot;submit&quot; value=&quot;add item&quot;&gt;</div><div class="line"> </div><div class="line">    &lt;% &#125; %&gt;</div><div class="line"> </div><div class="line">&lt;% &#125;else&#123; %&gt;</div><div class="line"> </div><div class="line">   &lt;h3&gt;No List Id: index of lists given&lt;/h3&gt;</div><div class="line">   &lt;ul&gt;</div><div class="line">       &lt;% lists.forEach(function(list)&#123; %&gt;</div><div class="line">           &lt;li id=&quot;list_&lt;%= list.id %&gt;&quot;&gt;</div><div class="line">               &lt;a href=&quot;/edit?l=&lt;%= list.id %&gt;&quot;&gt;&lt;%= list.name %&gt;&lt;/a&gt; | </div><div class="line">               &lt;%= list.id %&gt; | </div><div class="line">               &lt;input class=&quot;list_delete&quot; type=&quot;button&quot; value=&quot;delete&quot;&gt;</div><div class="line">           &lt;/li&gt;</div><div class="line">       &lt;% &#125;); %&gt;</div><div class="line">   &lt;/ul&gt;</div><div class="line"> </div><div class="line">&lt;% &#125; %&gt;</div><div class="line"> </div><div class="line">&lt;script src=&quot;/theme/js/edit.js&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<h4 id="7-1-7-landscape-layouts-index-ejs"><a href="#7-1-7-landscape-layouts-index-ejs" class="headerlink" title="7.1.7 - landscape/layouts/index.ejs"></a>7.1.7 - landscape/layouts/index.ejs</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;h2&gt;Welcome to express_todo&lt;/h2&gt;</div><div class="line"> </div><div class="line">&lt;p&gt;This is an express.js powered todo list app.&lt;/p&gt;</div></pre></td></tr></table></figure>
<h4 id="7-1-8-landscape-index-ejs"><a href="#7-1-8-landscape-index-ejs" class="headerlink" title="7.1.8 - landscape/index.ejs"></a>7.1.8 - landscape/index.ejs</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;!doctype html&gt;</div><div class="line">&lt;html lang=&quot;en&quot;&gt;</div><div class="line">  &lt;head&gt;</div><div class="line">    &lt;title&gt;express_todo&lt;/title&gt;</div><div class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</div><div class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;/theme/css/style.css&quot; &gt;</div><div class="line">  &lt;/head&gt;</div><div class="line">  &lt;body&gt;</div><div class="line">    &lt;h1&gt;express_todo&lt;/h1&gt;</div><div class="line">    &lt;p&gt;Yet another todo list app. &lt;a href=&quot;https://www.youtube.com/watch?v=NmPhaG1ud38&quot;&gt;hurray!&lt;/a&gt;&lt;/p&gt;</div><div class="line"> </div><div class="line">    &lt;%- include(&apos;nav&apos;); %&gt;</div><div class="line"> </div><div class="line">    &lt;script src=&quot;/js/list_client.js&quot;&gt;&lt;/script&gt;</div><div class="line">    &lt;script src=&quot;/theme/js/main.js&quot;&gt;&lt;/script&gt;</div><div class="line"> </div><div class="line">    &lt;%- include(&apos;layouts/&apos;+layout); %&gt;</div><div class="line">  &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h4 id="7-1-9-landscape-nav-ejs"><a href="#7-1-9-landscape-nav-ejs" class="headerlink" title="7.1.9 - landscape/nav.ejs"></a>7.1.9 - landscape/nav.ejs</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;p&gt;&lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt; | &lt;a href=&quot;/edit&quot;&gt;Edit&lt;/a&gt; | &lt;a href=&quot;/create&quot;&gt;Create&lt;/a&gt;&lt;/p&gt;</div></pre></td></tr></table></figure>
<h2 id="8-the-db-folder"><a href="#8-the-db-folder" class="headerlink" title="8 - the /db folder"></a>8 - the /db folder</h2><p>The db folder is where the list database will be stored.</p>
<h2 id="9-Conclusion"><a href="#9-Conclusion" class="headerlink" title="9 - Conclusion"></a>9 - Conclusion</h2><p>This project was put together pretty quickly, but I just wanted a full stack example to write about for my collection of posts on express. I might work on this project a bit more to address some of its shortcomings. However so far it all ready works good enough as a way of maintaining a todo list. Looks like I might start using it in place of my old txt file solution, to say the least..</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2018/06/23/express-todo-app-example/" data-id="ckt7oqhd700vy54v1167cb9e5" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2018/06/23/express-todo-app-example/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/express/">express</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node-js/">node.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/06/25/express-middleware/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Express Middleware
        
      </div>
    </a>
  
  
    <a href="/2018/06/22/express-app-request-response/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Using more than one app in express, with req.app, res.app, and require</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2018/06/23/express-todo-app-example/index.html';
    this.page.identifier = '215';
    this.page.title = 'A todo app example using express, lowdb, and much more.';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 14.55px;">blog</a> <a href="/tags/canvas/" style="font-size: 19.09px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/express/" style="font-size: 16.36px;">express</a> <a href="/tags/games/" style="font-size: 16.82px;">games</a> <a href="/tags/git/" style="font-size: 12.73px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.09px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.27px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.18px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.09px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 17.73px;">phaser</a> <a href="/tags/python/" style="font-size: 15.45px;">python</a> <a href="/tags/statistics/" style="font-size: 13.64px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 18.64px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 15.91px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/09/03/js-javascript-example-game-framework/">A game framework JavaScript example</a>
          </li>
        
          <li>
            <a href="/2021/08/27/js-javascript-example-canvas-module/">Canvas Module JavaScript example</a>
          </li>
        
          <li>
            <a href="/2021/08/20/js-javascript-example-grid-module/">JavaScript example of a grid module</a>
          </li>
        
          <li>
            <a href="/2021/08/13/js-javascript-example-idle-game-wild-plant-grid/">JavaScript While Plant Grid idle game prototype example</a>
          </li>
        
          <li>
            <a href="/2021/08/06/js-javascript-example-utils/">JavaScript general utility module example</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas-Examples</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2018/06/23/express-todo-app-example/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>