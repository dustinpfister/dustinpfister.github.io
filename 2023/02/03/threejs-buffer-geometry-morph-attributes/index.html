<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Morph Attributes of buffer geometry objects | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2023/02/03/threejs-buffer-geometry-morph-attributes/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="The morph attributes property of a buffer geometry instance will store an object which contains buffer attributes that are used to mutate the state of other buffer attributes of the geometry over time">
<meta property="og:type" content="article">
<meta property="og:title" content="Morph Attributes of buffer geometry objects">
<meta property="og:url" content="https://dustinpfister.github.io/2023/02/03/threejs-buffer-geometry-morph-attributes/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="The morph attributes property of a buffer geometry instance will store an object which contains buffer attributes that are used to mutate the state of other buffer attributes of the geometry over time">
<meta property="og:updated_time" content="2023-06-07T20:01:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Morph Attributes of buffer geometry objects">
<meta name="twitter:description" content="The morph attributes property of a buffer geometry instance will store an object which contains buffer attributes that are used to mutate the state of other buffer attributes of the geometry over time">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-buffer-geometry-morph-attributes" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2023/02/03/threejs-buffer-geometry-morph-attributes/" class="article-date"> Published:
  <time datetime="2023-02-03T15:02:00.000Z" itemprop="datePublished">2023-02-03</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2023/02/03/threejs-buffer-geometry-morph-attributes/" class="article-date"> Modified:
  <time datetime="2023-06-07T20:01:13.000Z" itemprop="dateModified">2023-06-07</time>
</a>

    <span class="article-date">V1.13</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Morph Attributes of buffer geometry objects
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>The <a href="https://threejs.org/docs/#api/en/core/BufferGeometry.morphAttributes" target="_blank" rel="external">morph attributes property of a buffer geometry instance</a> will store an object which contains buffer attributes that are used to mutate the state of other buffer attributes of the geometry over time. Simply put it is a way to go about creating animation by having say additional position attributes for several other kinds of states for the points of a buffer geometry. These additional attributes that are used to morph a buffer geometry can contain absolute values foe each item, or they can be delta values that store a rate of change for each item as well.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/fAvJjuLP_m8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="Morph-Attributes-of-buffer-geometry-and-what-to-know-first"><a href="#Morph-Attributes-of-buffer-geometry-and-what-to-know-first" class="headerlink" title="Morph Attributes of buffer geometry and what to know first"></a>Morph Attributes of buffer geometry and what to know first</h2><p>This is a blog post on more attributes of buffer geometry objects in the javaScript library known as threejs. If you are fairly new to threejs this post my prove to be a little too advanced as there is a whole lot to be aware of before getting into this sort of thing. For one thing there is knowing a thing or two about what buffer attributes of buffer geometry objects are to begin with. So in this section I will be writing about a few quick key things that you might want to read up a bit more on before counting to read the rest of thing post.</p>
<h3 id="Position-and-normal-attributes-only-for-WebGl1-color-attributes-as-well-with-WebGl2-only"><a href="#Position-and-normal-attributes-only-for-WebGl1-color-attributes-as-well-with-WebGl2-only" class="headerlink" title="Position and normal attributes only for WebGl1, color attributes as well with WebGl2 only."></a>Position and normal attributes only for WebGl1, color attributes as well with WebGl2 only.</h3><p>Looking at the WebGlRenderer source code for threejs it would seem that position, normal, and color attributes are being updated by way of morph attributes. However if you are sticking with using webGl1 only, then it is just position and normals that will update.</p>
<h3 id="Read-up-more-on-Buffer-Geometry-in-general"><a href="#Read-up-more-on-Buffer-Geometry-in-general" class="headerlink" title="Read up more on Buffer Geometry in general"></a>Read up more on Buffer Geometry in general</h3><p>There is a whole lot of ground to cover when it comes to buffer geometry in general before getting into this topic of morph attributes. So you might want to start out with my <a href="/2021/04/22/threejs-buffer-geometry/">main blog post on buffer geometry</a> for starters. I also have wrote blog posts on the <a href="/2021/06/07/threejs-buffer-geometry-attributes-position/">position attribute of buffer geometry</a> as well as on the <a href="/2022/12/09/threejs-buffer-geometry-index/">index that is used to make it so one can reuse points</a> in the position attribute as well.</p>
<h3 id="Source-code-is-also-up-on-Github"><a href="#Source-code-is-also-up-on-Github" class="headerlink" title="Source code is also up on Github"></a>Source code is also up on Github</h3><p>The source code examples as well as additional assets that i am using in this post can be found in my <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-buffer-geometry-morph-attributes" target="_blank" rel="external">test threejs repository on Github</a>.</p>
<h3 id="Version-Numbers-matter"><a href="#Version-Numbers-matter" class="headerlink" title="Version Numbers matter"></a>Version Numbers matter</h3><p>When I first wrote this post I was using r146 of threejs.</p>
<h2 id="1-Some-Basic-Examples-of-using-morph-attributes"><a href="#1-Some-Basic-Examples-of-using-morph-attributes" class="headerlink" title="1 - Some Basic Examples of using morph attributes"></a>1 - Some Basic Examples of using morph attributes</h2><p>Before I start getting into some examples that are are some real over all examples of morph attributes in this section I will be starting out with a few very simple hello world style examples first. The general idea here is to create an additional buffer attribute with the same item size and count of items as the buffer attribute that I want to mutate. Then I create a property of the morph attributes object that is the same key as the name of the attribute I want to mutate and the value should be an array. I can then push this additional buffer attribute as an item of this array. Once that is all set and down it is just a matter of setting the morph targets influences alpha value to set how much an additional buffer attribute in the morph attributes array will impact the state of the buffer attribute I want to mutate.</p>
<p>Still confused? Well thats okay this is a little involved, but it is still only so hard, and maybe it would be best to just read some source code examples here. These examples will just involve one more attribute and I will be sticking to just the position attribute of the buffer geometry. Also for now I will be sticking to using built in geometry constructor functions, and also just keep these as simple static scenes as will in order to focus on just what is more important with this.</p>
<h3 id="1-1-Random-points-to-move-the-points-of-a-sphere-to"><a href="#1-1-Random-points-to-move-the-points-of-a-sphere-to" class="headerlink" title="1.1 - Random points to move the points of a sphere to."></a>1.1 - Random points to move the points of a sphere to.</h3><p>For this basic example I am creating a sphere geometry, and then creating a single buffer attribute of random points the count of which is the same as the position attribute of the sphere geometry. Some times one just has to start somewhere so this just seems like a real simple way to go about getting started with morph attributes.</p>
<p>Anyway after setting up my usual set of objects for any threejs project such as the scene object, camera, and renderer I start out with the geometry by calling the <a href="/2021/05/26/threejs-sphere/">THREE.SphereGeometry</a> constructor function. So then I have a sphere geometry with a position attribute of course, so now what I want to do is just create a new buffer attribute of random points for each point in the position attribute of this geometry. I can then set this new buffer attribute as the first element of an array for the position property of this morph attributes object of the geometry.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.5</span>,<span class="number">20</span>,<span class="number">20</span>);</div><div class="line">geo.morphAttributes.position = [];</div><div class="line"><span class="keyword">const</span> pos = geo.attributes.position;</div><div class="line"><span class="keyword">const</span> data_rnd = [];</div><div class="line"><span class="keyword">for</span> ( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; pos.count; i ++ ) &#123;</div><div class="line">    data_rnd.push( <span class="number">-0.5</span> + <span class="built_in">Math</span>.random(), <span class="number">-0.5</span> + <span class="built_in">Math</span>.random(), <span class="number">-0.5</span> + <span class="built_in">Math</span>.random() );</div><div class="line">&#125;</div><div class="line">geo.morphAttributes.position[ <span class="number">0</span> ] = <span class="keyword">new</span> THREE.Float32BufferAttribute( data_rnd, <span class="number">3</span> );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MATERIAL, MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123; <span class="attr">side</span>: THREE.DoubleSide&#125;);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo, material);</div><div class="line">scene.add(mesh);</div><div class="line">mesh.morphTargetInfluences[ <span class="number">0</span> ] = <span class="number">0.10</span>;</div><div class="line">mesh.geometry.computeVertexNormals();</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>Once I have a more attribute set up for this geometry I can then use the morph targets influences array to set what the alpha value should be between the original position attribute state of the sphere, and these random points I made for each point in the sphere. For this example I am going with the <a href="/2021/06/23/threejs-normal-material/">mesh normal material</a> and because I made the geometry with the sphere geometry constructor there is a normal attribute, but as I mutate the position attribute I will want to also update the normals. One way to quickly update the normals is to use the <a href="/2022/04/22/threejs-buffer-geometry-compute-vertex-normals/">compute vertex normals</a> method as I am doing in this example</p>
<h3 id="1-2-Box-to-sphere-example"><a href="#1-2-Box-to-sphere-example" class="headerlink" title="1.2 - Box to sphere example"></a>1.2 - Box to sphere example</h3><p>One of the first examples that I looked at to get an idea of how to do this was to look at the source code of one of the <a href="https://github.com/mrdoob/three.js/blob/master/examples/webgl_morphtargets.html" target="_blank" rel="external">official threejs examples on more attributes that can be found here</a>. This example was a good resource for getting started with buffer attributes, but I have found that it is just a little to complex for a basic getting started type example. So I remove some of the code that has to go with adding a twist and keep the code that has to do with just mutating the buffer geometry state from a box to that of a sphere.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">4</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">// base on this: https://github.com/mrdoob/three.js/blob/master/examples/webgl_morphtargets.html</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">32</span>);</div><div class="line">geo.morphAttributes.position = [];</div><div class="line"><span class="keyword">const</span> pos = geo.attributes.position;</div><div class="line"><span class="keyword">const</span> data_pos = [];</div><div class="line"><span class="keyword">for</span> ( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; pos.count; i ++ ) &#123;</div><div class="line">     <span class="keyword">const</span> x = pos.getX( i );</div><div class="line">     <span class="keyword">const</span> y = pos.getY( i );</div><div class="line">     <span class="keyword">const</span> z = pos.getZ( i );</div><div class="line">     data_pos.push(</div><div class="line">         x * <span class="built_in">Math</span>.sqrt( <span class="number">1</span> - ( y * y / <span class="number">2</span> ) - ( z * z / <span class="number">2</span> ) + ( y * y * z * z / <span class="number">3</span> ) ),</div><div class="line">         y * <span class="built_in">Math</span>.sqrt( <span class="number">1</span> - ( z * z / <span class="number">2</span> ) - ( x * x / <span class="number">2</span> ) + ( z * z * x * x / <span class="number">3</span> ) ),</div><div class="line">         z * <span class="built_in">Math</span>.sqrt( <span class="number">1</span> - ( x * x / <span class="number">2</span> ) - ( y * y / <span class="number">2</span> ) + ( x * x * y * y / <span class="number">3</span> ) )</div><div class="line">     );</div><div class="line">&#125;</div><div class="line">geo.morphAttributes.position[ <span class="number">0</span> ] = <span class="keyword">new</span> THREE.Float32BufferAttribute( data_pos, <span class="number">3</span> );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MATERIAL, MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123; <span class="attr">side</span>: THREE.DoubleSide&#125;);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo, material);</div><div class="line">scene.add(mesh);</div><div class="line">mesh.morphTargetInfluences[ <span class="number">0</span> ] = <span class="number">0.75</span>;</div><div class="line">mesh.geometry.computeVertexNormals();</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h2 id="2-Custom-geometry-and-morph-attributes"><a href="#2-Custom-geometry-and-morph-attributes" class="headerlink" title="2 - Custom geometry and morph attributes"></a>2 - Custom geometry and morph attributes</h2><p>Now that I have a few basic examples out of the way in this section I will be getting into a few more advanced examples not just of more attributes but many buffer geometry features for that matter. These examples will then involve creating a custom geometry from the ground up using hard coded javaScript array literals for the data. However some of the examples will also involve exporting this kind of data into a JSON format that can then be used with the buffer geometry attribute. With that said one of the goals here is to export how to go about making an over all model that will involve morph attributes.</p>
<h3 id="2-1-A-custom-geometry-with-more-than-one-morph-attribute"><a href="#2-1-A-custom-geometry-with-more-than-one-morph-attribute" class="headerlink" title="2.1 - A custom geometry with more than one morph attribute"></a>2.1 - A custom geometry with more than one morph attribute</h3><p>For this fist example and all the other examples in this section I am going to be making a very crude bird like model that contains just 12 points in the position attribute. I will then draw triangles using these 12 points by figuring out what the values should be for the index of the position attribute of the buffer geometry. So this geometry will contain just a few points, but it will still be enough to have some parts of the geometry that resemble wings, and the rest of what can be considered a kind of body. However what is really important here is just having a way to define not just one, but a few buffer attributes for this geometry. You see I would like to move the wings, move the head back and froth, and move the tail up and down. On top of all of this I would like to control the state of each of these Independently from each other.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0.7</span>, <span class="number">0.7</span>, <span class="number">0.7</span>);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) )</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.BufferGeometry();</div><div class="line">geo.morphAttributes.position = [];</div><div class="line"><span class="comment">// USING MORPH TARGETS RELATIVE</span></div><div class="line">geo.morphTargetsRelative = <span class="literal">true</span>;</div><div class="line"><span class="comment">// home data position</span></div><div class="line"><span class="keyword">const</span> data_pos = [</div><div class="line">  <span class="comment">// body</span></div><div class="line">  <span class="number">-0.5</span>,<span class="number">-1.0</span>, <span class="number">1.0</span>,  <span class="number">-1.0</span>,<span class="number">-1.0</span>, <span class="number">0.0</span>,</div><div class="line">   <span class="number">0.0</span>,<span class="number">-1.5</span>,<span class="number">-4.0</span>,   <span class="number">1.0</span>,<span class="number">-1.0</span>, <span class="number">0.0</span>,</div><div class="line">   <span class="number">0.0</span>,<span class="number">-2.0</span>, <span class="number">0.0</span>,   <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>,</div><div class="line">   <span class="comment">// wings</span></div><div class="line">   <span class="number">1.0</span>, <span class="number">1.0</span>,<span class="number">-0.7</span>,   <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.7</span>,   <span class="number">2.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>,</div><div class="line">  <span class="number">-1.0</span>, <span class="number">1.0</span>,<span class="number">-0.7</span>,  <span class="number">-1.0</span>, <span class="number">1.0</span>, <span class="number">0.7</span>,  <span class="number">-2.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span></div><div class="line">];</div><div class="line">geo.setAttribute(<span class="string">'position'</span>, <span class="keyword">new</span> THREE.Float32BufferAttribute(data_pos, <span class="number">3</span>) );</div><div class="line">geo.setIndex([ <span class="number">0</span>,<span class="number">5</span>,<span class="number">1</span>, <span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>, <span class="number">0</span>,<span class="number">4</span>,<span class="number">3</span>, <span class="number">0</span>,<span class="number">1</span>,<span class="number">4</span>, <span class="number">5</span>,<span class="number">3</span>,<span class="number">2</span>, <span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>, <span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>, <span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>, <span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>, <span class="number">5</span>,<span class="number">7</span>,<span class="number">6</span>, <span class="number">10</span>,<span class="number">9</span>,<span class="number">11</span>, <span class="number">5</span>,<span class="number">9</span>,<span class="number">10</span> ]);</div><div class="line">geo.computeVertexNormals();</div><div class="line"><span class="comment">// position deltas 0 - move tail up and down</span></div><div class="line"><span class="keyword">const</span> data_pos_deltas0 = [</div><div class="line">   <span class="comment">// body</span></div><div class="line">   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>,</div><div class="line">   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">   <span class="comment">// wings</span></div><div class="line">   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">];</div><div class="line">geo.morphAttributes.position[ <span class="number">0</span> ] = <span class="keyword">new</span> THREE.Float32BufferAttribute( data_pos_deltas0, <span class="number">3</span> );</div><div class="line"><span class="comment">// position deltas 1 - move head side to side</span></div><div class="line"><span class="keyword">const</span> data_pos_deltas1 = [</div><div class="line">   <span class="number">1</span>, <span class="number">0</span>, <span class="number">0.0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">   <span class="number">0</span>, <span class="number">0</span>,<span class="number">-0.5</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">   <span class="comment">// wings</span></div><div class="line">   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></div><div class="line">];</div><div class="line">geo.morphAttributes.position[ <span class="number">1</span> ] = <span class="keyword">new</span> THREE.Float32BufferAttribute( data_pos_deltas1, <span class="number">3</span> );</div><div class="line"><span class="comment">// position deltas 2 - move wings</span></div><div class="line"><span class="keyword">const</span> data_pos_deltas2 = [</div><div class="line">   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">   <span class="comment">// wings</span></div><div class="line">   <span class="number">0</span>,<span class="number">-2</span>,<span class="number">-1</span>,   <span class="number">0</span>,<span class="number">-2</span>,<span class="number">-1</span>,   <span class="number">0</span>,<span class="number">-2</span>,<span class="number">-1</span>,</div><div class="line">   <span class="number">0</span>,<span class="number">-2</span>,<span class="number">-1</span>,   <span class="number">0</span>,<span class="number">-2</span>,<span class="number">-1</span>,   <span class="number">0</span>,<span class="number">-2</span>,<span class="number">-1</span></div><div class="line">];</div><div class="line">geo.morphAttributes.position[ <span class="number">2</span> ] = <span class="keyword">new</span> THREE.Float32BufferAttribute( data_pos_deltas2, <span class="number">3</span> );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// COLOR ATTRIBUTE</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> data_color = [</div><div class="line">    <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>,   <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">    <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>,   <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>,   <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>,</div><div class="line">    <span class="comment">// wings</span></div><div class="line">    <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>,   <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>,   <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>,</div><div class="line">    <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>,   <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>,   <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span></div><div class="line">];</div><div class="line">geo.setAttribute(<span class="string">'color'</span>, <span class="keyword">new</span> THREE.Float32BufferAttribute(data_color, <span class="number">3</span>) );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight();</div><div class="line">dl.position.set(<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>)</div><div class="line">scene.add(dl);</div><div class="line"><span class="keyword">const</span> al = <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>, <span class="number">0.2</span>);</div><div class="line">scene.add(al);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">     <span class="attr">vertexColors</span>: <span class="literal">true</span>,</div><div class="line">     <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">&#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo, material);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">-1</span>, <span class="number">-1</span>);</div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">300</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">    <span class="keyword">const</span> a2 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1 * <span class="number">8</span> % <span class="number">1</span>) / <span class="number">0.5</span>;</div><div class="line">    <span class="keyword">const</span> a3 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1 * <span class="number">4</span> % <span class="number">1</span>) / <span class="number">0.5</span>;</div><div class="line">    <span class="keyword">const</span> a4 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1 * <span class="number">20</span> % <span class="number">1</span>) / <span class="number">0.5</span>;</div><div class="line">    <span class="comment">// using morph target influences to set current state of each position attribite</span></div><div class="line">    mesh.morphTargetInfluences[ <span class="number">0</span> ] = a2;</div><div class="line">    mesh.morphTargetInfluences[ <span class="number">1</span> ] = a3;</div><div class="line">    mesh.morphTargetInfluences[ <span class="number">2</span> ] = a4;</div><div class="line">    mesh.geometry.computeVertexNormals();</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h3 id="2-2-Making-a-non-indexed-geometry"><a href="#2-2-Making-a-non-indexed-geometry" class="headerlink" title="2.2 - Making a non indexed geometry"></a>2.2 - Making a non indexed geometry</h3><p>Indexed geometry is great but one thing that I need to be aware of when making them is that it will not just reduce the count of points in the position attribute but also other attributes such as the normal attribute. This will result in just one vertex normal for each point which can result in rendering problems if I want to use the mesh normal material, or any material where the state of the normal attributes is of dire importance in rendering the state of the textures for each face. The good news with this though is that there is the to non indexed method of the buffer geometry that can be used to quickly create a non indexed geometry form an indexed one. I then have points for each triangle and with that independent vertex normal values as well so when I call the compute vertex normals method I get vertex normal values for each of these points that are not the same for each original vertex value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0.7</span>, <span class="number">0.7</span>, <span class="number">0.7</span>);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) )</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">4</span>, <span class="number">1</span>, <span class="number">4</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">-1</span>, <span class="number">-1</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.BufferGeometry();</div><div class="line">geo.morphAttributes.position = [];</div><div class="line">geo.morphTargetsRelative = <span class="literal">true</span>;</div><div class="line"><span class="comment">// home data position</span></div><div class="line"><span class="keyword">const</span> data_pos = [</div><div class="line">  <span class="number">-0.5</span>,<span class="number">-1.0</span>, <span class="number">1.0</span>, <span class="number">-1.0</span>,<span class="number">-1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>,<span class="number">-1.5</span>,<span class="number">-4.0</span>, <span class="number">1.0</span>,<span class="number">-1.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>,<span class="number">-2.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, </div><div class="line">   <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>,<span class="number">-0.7</span>, <span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">0.7</span>, <span class="number">2.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>, <span class="number">-1.0</span>, <span class="number">1.0</span>,<span class="number">-0.7</span>, <span class="number">-1.0</span>, <span class="number">1.0</span>, <span class="number">0.7</span>, <span class="number">-2.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span></div><div class="line">];</div><div class="line">geo.setAttribute(<span class="string">'position'</span>, <span class="keyword">new</span> THREE.Float32BufferAttribute(data_pos, <span class="number">3</span>) );</div><div class="line">geo.setIndex([<span class="number">0</span>,<span class="number">5</span>,<span class="number">1</span>, <span class="number">0</span>,<span class="number">3</span>,<span class="number">5</span>, <span class="number">0</span>,<span class="number">4</span>,<span class="number">3</span>, <span class="number">0</span>,<span class="number">1</span>,<span class="number">4</span>,  <span class="number">5</span>,<span class="number">3</span>,<span class="number">2</span>, <span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>, <span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>, <span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,     <span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>, <span class="number">5</span>,<span class="number">7</span>,<span class="number">6</span>,   <span class="number">10</span>,<span class="number">9</span>,<span class="number">11</span>, <span class="number">5</span>,<span class="number">9</span>,<span class="number">10</span> ]);</div><div class="line"><span class="comment">// position deltas 0 - move tail up and down</span></div><div class="line"><span class="keyword">const</span> data_pos_deltas0 = [</div><div class="line">   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></div><div class="line">];</div><div class="line">geo.morphAttributes.position[ <span class="number">0</span> ] = <span class="keyword">new</span> THREE.Float32BufferAttribute( data_pos_deltas0, <span class="number">3</span> );</div><div class="line"><span class="comment">// position deltas 1 - move head side to side</span></div><div class="line"><span class="keyword">const</span> data_pos_deltas1 = [</div><div class="line">   <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>,<span class="number">-0.5</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></div><div class="line">];</div><div class="line">geo.morphAttributes.position[ <span class="number">1</span> ] = <span class="keyword">new</span> THREE.Float32BufferAttribute( data_pos_deltas1, <span class="number">3</span> );</div><div class="line"><span class="comment">// position deltas 2 - move wings</span></div><div class="line"><span class="keyword">const</span> data_pos_deltas2 = [</div><div class="line">   <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>,<span class="number">-2</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">-2</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">-2</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">-2</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">-2</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">-2</span>,<span class="number">-1</span></div><div class="line">];</div><div class="line">geo.morphAttributes.position[ <span class="number">2</span> ] = <span class="keyword">new</span> THREE.Float32BufferAttribute( data_pos_deltas2, <span class="number">3</span> );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;</div><div class="line">     <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">&#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY 2 - non indexed geometry from geo</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo2 = geo.toNonIndexed();</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo2, material);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">300</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">    <span class="keyword">const</span> a2 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1 * <span class="number">8</span> % <span class="number">1</span>) / <span class="number">0.5</span>;</div><div class="line">    <span class="keyword">const</span> a3 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1 * <span class="number">4</span> % <span class="number">1</span>) / <span class="number">0.5</span>;</div><div class="line">    <span class="keyword">const</span> a4 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1 * <span class="number">20</span> % <span class="number">1</span>) / <span class="number">0.5</span>;</div><div class="line">    mesh.morphTargetInfluences[ <span class="number">0</span> ] = a2;</div><div class="line">    mesh.morphTargetInfluences[ <span class="number">1</span> ] = a3;</div><div class="line">    mesh.morphTargetInfluences[ <span class="number">2</span> ] = a4;</div><div class="line">    mesh.geometry.computeVertexNormals();</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>So the mesh normal material is looking great as well as the animations. So now that this is all in great working state it is just a question of getting the uv attribute set for this as well at which point I can ad textures to the geometry.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>So it would seem that morph attributes are a great way to go about defining some animations for a geometry. However they might still not be the end all way to go about mutating the state of a geometry over time. In some cases I might want to mutate one state of geometry to another, but not do so in a way in which all the points move in a steerage line from one set of values to another. When it comes to doing something like that I might still need to directly change the state of the arrays of buffer attributes and do so with a little custom javaScript code.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2023/02/03/threejs-buffer-geometry-morph-attributes/" data-id="clj7de41t02m55ov1ksmu2bbk" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2023/02/03/threejs-buffer-geometry-morph-attributes/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/02/10/threejs-curves-cubicbeziercurve3/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Cubic Bezier Curves in threejs
        
      </div>
    </a>
  
  
    <a href="/2023/01/27/threejs-examples-house-two/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">House Model two threejs project example</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2023/02/03/threejs-buffer-geometry-morph-attributes/index.html';
    this.page.identifier = '1026';
    this.page.title = 'Morph Attributes of buffer geometry objects';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 13.64px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/06/22/threejs-buffer-attribute/">Buffer Attributes in threejs</a>
          </li>
        
          <li>
            <a href="/2023/06/21/linux-du/">File Space usage with Linux du command</a>
          </li>
        
          <li>
            <a href="/2023/06/15/linux-aplay/">Linux aplay command and ALSA</a>
          </li>
        
          <li>
            <a href="/2023/06/13/threejs-extrude-geometry/">Extrude Geometry in threejs</a>
          </li>
        
          <li>
            <a href="/2023/06/09/threejs-vector2/">The Vector2 class for 2D curves, mouse pointers, ect</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2023/02/03/threejs-buffer-geometry-morph-attributes/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>