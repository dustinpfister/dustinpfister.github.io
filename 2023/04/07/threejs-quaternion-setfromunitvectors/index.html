<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Quaternion set from unit vectors method in threejs | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2023/04/07/threejs-quaternion-setfromunitvectors/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="As of late I have been working on demos that have to do with Quaternion objects in order to gain a better understanding of them. Thus far I have found that there is a core set of prototype methods tha">
<meta property="og:type" content="article">
<meta property="og:title" content="Quaternion set from unit vectors method in threejs">
<meta property="og:url" content="https://dustinpfister.github.io/2023/04/07/threejs-quaternion-setfromunitvectors/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="As of late I have been working on demos that have to do with Quaternion objects in order to gain a better understanding of them. Thus far I have found that there is a core set of prototype methods tha">
<meta property="og:updated_time" content="2023-04-07T19:05:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Quaternion set from unit vectors method in threejs">
<meta name="twitter:description" content="As of late I have been working on demos that have to do with Quaternion objects in order to gain a better understanding of them. Thus far I have found that there is a core set of prototype methods tha">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-quaternion-setfromunitvectors" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2023/04/07/threejs-quaternion-setfromunitvectors/" class="article-date"> Published:
  <time datetime="2023-04-07T17:21:00.000Z" itemprop="datePublished">2023-04-07</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2023/04/07/threejs-quaternion-setfromunitvectors/" class="article-date"> Modified:
  <time datetime="2023-04-07T19:05:27.000Z" itemprop="dateModified">2023-04-07</time>
</a>

    <span class="article-date">V1.3</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Quaternion set from unit vectors method in threejs
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>As of late I have been working on demos that have to do with <a href="https://threejs.org/docs/#api/en/math/Quaternion" target="_blank" rel="external">Quaternion objects</a> in order to gain a better understanding of them. Thus far I have found that there is a core set of prototype methods that I am going to want to use to start working with these. Maybe the very first method that one will want to get solid with is the set from axis angle method, but I have found that the set from unit vectors method is also often fairly useful as well. With that said todays post will be on this set from unit vectors method of the quaternion class.</p>
<a id="more"></a>
<h2 id="The-set-from-unit-vectors-method-of-the-Quaternion-class-and-what-to-know-first"><a href="#The-set-from-unit-vectors-method-of-the-Quaternion-class-and-what-to-know-first" class="headerlink" title="The set from unit vectors method of the Quaternion class and what to know first"></a>The set from unit vectors method of the Quaternion class and what to know first</h2><p>This is a post centered around the set from unit vectors method of the quaternion class of the javaScript library called threejs. With that said it should go without saying that this is not a <a href="/2018/04/04/threejs-getting-started/">post for people that are new to threejs</a>, as this is a fairly advanced topic when it comes to the use of this library. However in any case, even if you have some experience, it might be a good idea to refresh a bit on some things before continuing with reading the rest of this content. So I will take a moment to outline what some of those things might be here.</p>
<h3 id="There-is-starting-out-with-Euler-angles-and-the-Object3d-lookAt-method"><a href="#There-is-starting-out-with-Euler-angles-and-the-Object3d-lookAt-method" class="headerlink" title="There is starting out with Euler angles, and the Object3d.lookAt method."></a>There is starting out with Euler angles, and the Object3d.lookAt method.</h3><p>If you are new to rotations using threejs there are a lot of features that you should be aware of first. <a href="/2021/04/28/threejs-euler/">Euler angles</a> for example are generally easier to work with, and if what you need to do can be done with them it might be best to do so and move on. It is only when you run into problems with using Euler angles, and other options such as the <a href="/2021/05/13/threejs-object3d-lookat/">look at method of the Obejct3d class</a>, that you should get into using more complex options such as Quaternion objects, and with that the set from unit vectors method of the Quaternion class.</p>
<h3 id="Do-not-forget-about-Buffer-Geometry-rotation-methods"><a href="#Do-not-forget-about-Buffer-Geometry-rotation-methods" class="headerlink" title="Do not forget about Buffer Geometry rotation methods"></a>Do not forget about Buffer Geometry rotation methods</h3><p>There is setting the orientation of an object3d class based object itself such as a mesh object, and then there is <a href="/2021/05/20/threejs-buffer-geometry-rotation/">rotating the geometry</a> of a mesh object without doing anything with the state of the mesh objects rotation. If you are not aware of what there is to work with in the buffer geometry class now might be a good time to look into that more as well.</p>
<h3 id="Check-out-my-main-blog-post-on-Quaternion-objects"><a href="#Check-out-my-main-blog-post-on-Quaternion-objects" class="headerlink" title="Check out my main blog post on Quaternion objects"></a>Check out my main blog post on Quaternion objects</h3><p>There is also taking a look at my <a href="/2023/03/24/threejs-quaternion/">main blog post on the subject of using these quaternion objects</a> as well. As I write more content on these kinds of objects I am sure that I will be doing a fair amount of editing with that post, but I am not so sure that I will be doing the same for this one.</p>
<h3 id="Source-code-examples-are-up-on-Github"><a href="#Source-code-examples-are-up-on-Github" class="headerlink" title="Source code examples are up on Github"></a>Source code examples are up on Github</h3><p>The source code examples that I am writing about here, as well as additional notes for future edits and so forth can be <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-quaternion-setfromunitvectors" target="_blank" rel="external">found in my test threejs repository on Github</a>. This is also where I park the source code examples for all the <a href="/categories/three-js/">other blog posts that I have wrote on threejs</a> as well.</p>
<h3 id="Version-Numbers-matter"><a href="#Version-Numbers-matter" class="headerlink" title="Version Numbers matter"></a>Version Numbers matter</h3><p>When I first wrote this blog post I was using r146 of threejs.</p>
<h2 id="1-Basic-getting-started-examples-of-the-Set-From-Unit-Vectors-method"><a href="#1-Basic-getting-started-examples-of-the-Set-From-Unit-Vectors-method" class="headerlink" title="1 - Basic getting started examples of the Set From Unit Vectors method"></a>1 - Basic getting started examples of the Set From Unit Vectors method</h2><p>Just as with everything else in threejs one has to start somewhere. In this section I will be starting out with a few basic examples of the set from unit vectors quaternion method. While doing so I will also end up having to write a whole lot about some Vector3 class methods as well that are closely related to the use of this method.</p>
<h3 id="1-1-Just-using-the-Vector3-constructor-alone"><a href="#1-1-Just-using-the-Vector3-constructor-alone" class="headerlink" title="1.1 - Just using the Vector3 constructor alone"></a>1.1 - Just using the Vector3 constructor alone</h3><p>For this very first basic example I am going to start out my making the Vector3 objects that will be used with the set from unit vectors method by just using the THREE.Vector3 constructor function alone, and not any additional prototype methods. When doing so I will want to make sure that I keep the vector unit length of these at 1 as the set from unit vectors method assumes that is the case. One way to do so, and to keep things very easy for starters to to just use vectors like 0,1,0, and 0,0,1 for the from and to vector3 objects</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>));</div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;<span class="attr">wireframe</span>: <span class="literal">true</span>, <span class="attr">wireframeLinewidth</span>: <span class="number">2</span> &#125;);</div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">2</span>, <span class="number">20</span>, <span class="number">20</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geometry, material);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ROTATE WITH QUATERNIONS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> v_from = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> v_to = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">mesh.quaternion.setFromUnitVectors(v_from, v_to);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="1-2-Using-the-lerp-clone-and-normalize-methods-of-the-Vector3-class"><a href="#1-2-Using-the-lerp-clone-and-normalize-methods-of-the-Vector3-class" class="headerlink" title="1.2 - Using the lerp, clone, and normalize methods of the Vector3 class"></a>1.2 - Using the lerp, clone, and normalize methods of the Vector3 class</h3><p>Now that I got the very basic example out of the way, in this demo I am now making use of a few prototype methods in the Vector3 class toolbox. The clone method is great for making a new Vector3 object from another vector3 object, the <a href="/2022/05/17/threejs-vector3-lerp/">lerp method</a> is useful for getting a vector between two vectors, and also the <a href="/2021/06/14/threejs-vector3-normalize/">normalize method</a> can be used to set a vector to a unit length of 1 while preserving the direction of the vector.</p>
<p>With all of that said I am once again starting out with two vector3 objects that are 0,1,0, and 1,0,0. However I am making my from vector cloning the first vector. Then when it comes to the to vector I can clone the from vector, and then lerp to v2 by way of a given alpha value. I can then also use the normalize method when doing all of this to make sure that the unit length of these vector3 objects is always 1 as well.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>));</div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;<span class="attr">wireframe</span>: <span class="literal">true</span>, <span class="attr">wireframeLinewidth</span>: <span class="number">2</span> &#125;);</div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">2</span>, <span class="number">20</span>, <span class="number">20</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geometry, material);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ROTATE WITH QUATERNIONS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> alpha = <span class="number">0.5</span>;</div><div class="line"><span class="keyword">const</span> v1 = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> v2 = <span class="keyword">new</span> THREE.Vector3(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> v_from = v1.clone();</div><div class="line"><span class="keyword">const</span> v_to = v_from.clone().lerp(v2, alpha).normalize();</div><div class="line">mesh.quaternion.setFromUnitVectors(v_from, v_to);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="1-3-The-apply-Euler-method-of-Vector3-to-change-direction"><a href="#1-3-The-apply-Euler-method-of-Vector3-to-change-direction" class="headerlink" title="1.3 - The apply Euler method of Vector3 to change direction"></a>1.3 - The apply Euler method of Vector3 to change direction</h3><p>Euler objects might have there limitations, but in some cases they can still prove to be useful. The thing to keep in mind here is that quaternions are to be used on top of Euler angles, not as a total replacement for them. With that said I have found that Euler angles are still work great when used in conjunction with the <a href="/2021/06/18/threejs-vector3-apply-euler/">apply Euler method of the vector3 class</a> to create a vector3 object with a desired direction. The vector3 object can then be used to set the position of an object, and on top of that I can just call the clone and normalize methods off of the position to get a vector of 1 unit length to use with the set from unit vectors quaternion method without mutation the vectro3 object of the object position.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>));</div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;<span class="attr">wireframe</span>: <span class="literal">true</span>, <span class="attr">wireframeLinewidth</span>: <span class="number">2</span> &#125;);</div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">2</span>, <span class="number">20</span>, <span class="number">20</span>);</div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh( geometry, material);</div><div class="line">scene.add(mesh1);</div><div class="line"><span class="keyword">const</span> mesh2 = <span class="keyword">new</span> THREE.Mesh( geometry, material);</div><div class="line">mesh2.scale.set(<span class="number">0.25</span>, <span class="number">0.25</span>, <span class="number">0.25</span>);</div><div class="line">scene.add(mesh2);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SET MESH2 POSITION - using euler objects amd vector3 class methods</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> e2 = <span class="keyword">new</span> THREE.Euler(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">e2.y = <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">270</span>;</div><div class="line">e2.z = <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">40</span>;</div><div class="line"><span class="keyword">let</span> radius2 = <span class="number">3.5</span>;</div><div class="line">mesh2.position.set(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>).applyEuler(e2).multiplyScalar(radius2);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ROTATE MESH1 WITH QUATERNIONS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> v_from = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> v_to = mesh2.position.clone().normalize();</div><div class="line">mesh1.quaternion.setFromUnitVectors(v_from, v_to);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h2 id="2-Animation-loop-demos"><a href="#2-Animation-loop-demos" class="headerlink" title="2 - Animation loop demos"></a>2 - Animation loop demos</h2><p>Often I think that in order to really gain a sense of what a threejs feature is really useful for I need to work out at least one or more animation loop examples.</p>
<h3 id="2-1-Vector3-array-demo"><a href="#2-1-Vector3-array-demo" class="headerlink" title="2.1 - Vector3 array demo"></a>2.1 - Vector3 array demo</h3><p>For this demo I wanted to look into the idea of having an array of vector3 objects that are then used to create to and from vector3 objects. The end goal would then be have a way to preform a whole bunch of rotations based on this list of two and from vector3 objects. For the most part this demo seems to work okay, but I think I might like to get around to refining this a bit more before I write much more about it.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">scene.background = <span class="literal">null</span>;</div><div class="line">renderer.setClearColor(<span class="number">0x000000</span>, <span class="number">0</span>)</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="keyword">const</span> canvas_2d = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line"><span class="keyword">const</span> ctx = canvas_2d.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas_2d.width = <span class="number">640</span>;</div><div class="line">canvas_2d.height = <span class="number">480</span>;</div><div class="line"><span class="keyword">const</span> canvas_3d = renderer.domElement;</div><div class="line"><span class="keyword">const</span> container = <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body;</div><div class="line">container.appendChild(canvas_2d);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// V3 ARRAY</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> v3array = [</div><div class="line">    [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</div><div class="line">    [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</div><div class="line">    [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</div><div class="line">    [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>],</div><div class="line">    [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</div><div class="line">    [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</div><div class="line">    [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]</div><div class="line">].map( <span class="function">(<span class="params">arr</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> THREE.Vector3().fromArray(arr).normalize();</div><div class="line">&#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper( <span class="number">10</span>,<span class="number">10</span> ) );</div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">1</span>, <span class="number">20</span>, <span class="number">20</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123; <span class="attr">wireframe</span>: <span class="literal">true</span>&#125;));</div><div class="line">scene.add(mesh1);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CONTROLS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">let</span> controls = <span class="literal">null</span>;</div><div class="line"><span class="keyword">if</span>(THREE.OrbitControls)&#123;</div><div class="line">    controls = <span class="keyword">new</span> THREE.OrbitControls(camera, canvas_2d);</div><div class="line">&#125;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> sm = &#123;</div><div class="line">   <span class="attr">FPS_UPDATE</span>: <span class="number">12</span>,     <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">   FPS_MOVEMENT: <span class="number">30</span>,  <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">   FRAME_MAX: <span class="number">900</span>,</div><div class="line">   <span class="attr">secs</span>: <span class="number">0</span>,</div><div class="line">   <span class="attr">frame_frac</span>: <span class="number">0</span>,     <span class="comment">// 30.888 / 450</span></div><div class="line">   frame: <span class="number">0</span>,          <span class="comment">// 30 / 450</span></div><div class="line">   tick: <span class="number">0</span>,           <span class="comment">//  1 / 450 ( about 1 FPS then )</span></div><div class="line">   now: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">   <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> q_home = <span class="keyword">new</span> THREE.Quaternion();</div><div class="line">q_home.setFromAxisAngle( v3array[<span class="number">1</span>], <span class="built_in">Math</span>.PI * <span class="number">0.5</span> );</div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">sm</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> a1 = sm.frame / sm.FRAME_MAX;</div><div class="line">    <span class="keyword">const</span> a2 = a1 * v3array.length % <span class="number">1</span>;</div><div class="line">    <span class="keyword">const</span> a3 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a2) / <span class="number">0.5</span>;</div><div class="line">    <span class="keyword">const</span> vi1 = <span class="built_in">Math</span>.floor( v3array.length * a1 );</div><div class="line">    <span class="keyword">const</span> vi2 = ( vi1 + <span class="number">1</span> ) % v3array.length;</div><div class="line">    <span class="keyword">const</span> v1 = v3array[vi1];</div><div class="line">    <span class="keyword">const</span> v2 = v3array[vi2];</div><div class="line">    <span class="keyword">const</span> v_from = v1.clone();</div><div class="line">    <span class="keyword">const</span> v_to = v_from.clone().lerp(v2, a3).normalize();</div><div class="line">    <span class="keyword">const</span> q2 = <span class="keyword">new</span> THREE.Quaternion().setFromUnitVectors(v_from, v_to);</div><div class="line">    mesh1.quaternion.copy(q2);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> render2d = <span class="function">(<span class="params">sm</span>) =&gt;</span> &#123;</div><div class="line">    ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    ctx.drawImage(canvas_3d, <span class="number">0</span>, <span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    ctx.fillStyle = <span class="string">'rgba(0,0,0,0.25)'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.font = <span class="string">'10px monospace'</span>;</div><div class="line">    ctx.fillText(<span class="string">'tick              : '</span> + sm.tick, <span class="number">5</span>, <span class="number">5</span>)</div><div class="line">    ctx.fillText(<span class="string">'frame_frac        : '</span> + sm.frame_frac.toFixed(<span class="number">3</span>), <span class="number">5</span>, <span class="number">20</span>);</div><div class="line">    ctx.fillText(<span class="string">'frame / FRAME_MAX : '</span> + sm.frame + <span class="string">'/'</span> + sm.FRAME_MAX, <span class="number">5</span>, <span class="number">35</span>);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    sm.now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    sm.secs = (sm.now - sm.lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(sm.secs &gt; <span class="number">1</span> / sm.FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render to 3d canvas, and then render to 2d canvas</span></div><div class="line">        update(sm);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        render2d(sm);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        sm.frame_frac += sm.FPS_MOVEMENT * sm.secs;</div><div class="line">        sm.frame_frac %= sm.FRAME_MAX;</div><div class="line">        sm.frame = <span class="built_in">Math</span>.floor(sm.frame_frac);</div><div class="line">        sm.tick = (sm.tick += <span class="number">1</span>) % sm.FRAME_MAX;</div><div class="line">        sm.lt = sm.now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h3 id="2-2-Animation-of-the-basic-apply-Euler-demo"><a href="#2-2-Animation-of-the-basic-apply-Euler-demo" class="headerlink" title="2.2 - Animation of the basic apply Euler demo"></a>2.2 - Animation of the basic apply Euler demo</h3><p>This animation loop demo is based off of what I started with the apply Euler basic section example. This far this seems to work very well as a way to set the orientation of an object over time.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">scene.background = <span class="literal">null</span>;</div><div class="line">renderer.setClearColor(<span class="number">0x000000</span>, <span class="number">0</span>)</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="keyword">const</span> canvas_2d = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line"><span class="keyword">const</span> ctx = canvas_2d.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas_2d.width = <span class="number">640</span>;</div><div class="line">canvas_2d.height = <span class="number">480</span>;</div><div class="line"><span class="keyword">const</span> canvas_3d = renderer.domElement;</div><div class="line"><span class="keyword">const</span> container = <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body;</div><div class="line">container.appendChild(canvas_2d);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>));</div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;<span class="attr">wireframe</span>: <span class="literal">true</span>, <span class="attr">wireframeLinewidth</span>: <span class="number">2</span> &#125;);</div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">2</span>, <span class="number">20</span>, <span class="number">20</span>);</div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh( geometry, material);</div><div class="line">scene.add(mesh1);</div><div class="line"><span class="keyword">const</span> mesh2 = <span class="keyword">new</span> THREE.Mesh( geometry, material);</div><div class="line">mesh2.scale.set(<span class="number">0.25</span>, <span class="number">0.25</span>, <span class="number">0.25</span>);</div><div class="line">scene.add(mesh2);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CONTROLS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">let</span> controls = <span class="literal">null</span>;</div><div class="line"><span class="keyword">if</span>(THREE.OrbitControls)&#123;</div><div class="line">    controls = <span class="keyword">new</span> THREE.OrbitControls(camera, canvas_2d);</div><div class="line">&#125;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> sm = &#123;</div><div class="line">   <span class="attr">FPS_UPDATE</span>: <span class="number">12</span>,     <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">   FPS_MOVEMENT: <span class="number">30</span>,  <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">   FRAME_MAX: <span class="number">900</span>,</div><div class="line">   <span class="attr">secs</span>: <span class="number">0</span>,</div><div class="line">   <span class="attr">frame_frac</span>: <span class="number">0</span>,     <span class="comment">// 30.888 / 450</span></div><div class="line">   frame: <span class="number">0</span>,          <span class="comment">// 30 / 450</span></div><div class="line">   tick: <span class="number">0</span>,           <span class="comment">//  1 / 450 ( about 1 FPS then )</span></div><div class="line">   now: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">   <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">sm</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> a1 = sm.frame / sm.FRAME_MAX;</div><div class="line">    <span class="keyword">const</span> a2 = <span class="built_in">Math</span>.sin( <span class="built_in">Math</span>.PI * (a1 * <span class="number">32</span> % <span class="number">1</span>) );</div><div class="line">    <span class="keyword">const</span> e2 = <span class="keyword">new</span> THREE.Euler(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    e2.y = <span class="built_in">Math</span>.PI / <span class="number">180</span> * (<span class="number">360</span> * a1);</div><div class="line">    e2.z = <span class="built_in">Math</span>.PI / <span class="number">180</span> * (<span class="number">90</span> * <span class="built_in">Math</span>.sin( <span class="built_in">Math</span>.PI * <span class="number">8</span> * a1 ) ) ;</div><div class="line">    <span class="keyword">const</span> radius2 = <span class="number">3</span> + <span class="number">1.5</span> * a2;</div><div class="line">    mesh2.position.set(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>).applyEuler(e2).multiplyScalar(radius2);</div><div class="line">    <span class="keyword">const</span> v_from = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">const</span> v_to = mesh2.position.clone().normalize();</div><div class="line">    mesh1.quaternion.setFromUnitVectors(v_from, v_to);</div><div class="line"></div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> render2d = <span class="function">(<span class="params">sm</span>) =&gt;</span> &#123;</div><div class="line">    ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    ctx.drawImage(canvas_3d, <span class="number">0</span>, <span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    ctx.fillStyle = <span class="string">'rgba(0,0,0,0.25)'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.font = <span class="string">'10px monospace'</span>;</div><div class="line">    ctx.fillText(<span class="string">'frame: '</span> + sm.frame + <span class="string">'/'</span> + sm.FRAME_MAX, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    sm.now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    sm.secs = (sm.now - sm.lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(sm.secs &gt; <span class="number">1</span> / sm.FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render to 3d canvas, and then render to 2d canvas</span></div><div class="line">        update(sm);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        render2d(sm);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        sm.frame_frac += sm.FPS_MOVEMENT * sm.secs;</div><div class="line">        sm.frame_frac %= sm.FRAME_MAX;</div><div class="line">        sm.frame = <span class="built_in">Math</span>.floor(sm.frame_frac);</div><div class="line">        sm.tick = (sm.tick += <span class="number">1</span>) % sm.FRAME_MAX;</div><div class="line">        sm.lt = sm.now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Thus far I have to say that this set from unit vectors might be a core set of must know functions of the quaternion class. It is a great way to set the state of the orientation with a set of vectors that contain from and to directions. It is still not a replacement for the set from axis angle method though, and in any case I think that the premultiply methods might be one of the most importance methods to get solid when it comes to this class. You see there is setting the first state of a quaternion object, and then there is adding from that first state with another rotation. This set from unit vectors method is good for setting the first state that I want, then after that there is using premulitply one or more times from there.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2023/04/07/threejs-quaternion-setfromunitvectors/" data-id="cliahb63n02la3ov1kpncb89s" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2023/04/07/threejs-quaternion-setfromunitvectors/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/04/14/threejs-quaternion-slerp/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Quaternion slerp method
        
      </div>
    </a>
  
  
    <a href="/2023/03/31/threejs-quaternion-premultiply/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Quaternion premultiply method in threejs</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2023/04/07/threejs-quaternion-setfromunitvectors/index.html';
    this.page.identifier = '1035';
    this.page.title = 'Quaternion set from unit vectors method in threejs';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 13.64px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/25/threejs-curve-quadratic-bezier-curve/">2D Quadratic Bezier Curves in threejs</a>
          </li>
        
          <li>
            <a href="/2023/05/24/git-push/">Git Push command</a>
          </li>
        
          <li>
            <a href="/2023/05/19/threejs-lod/">Level Of Detail Objects in threejs</a>
          </li>
        
          <li>
            <a href="/2023/05/18/git-pull/">Git Pull sub command</a>
          </li>
        
          <li>
            <a href="/2023/05/12/threejs-buffer-geometry-set-draw-range/">The set draw range method of the buffer geometry class in threejs</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2023/04/07/threejs-quaternion-setfromunitvectors/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>