<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>The shader material in threejs and getting started with a little GLSL | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2023/01/13/threejs-shader-material/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="The Shader material in threejs is one way to go about getting started with custom shaders in threejs, the other general option would be to look into the raw shader material. The main difference betwee">
<meta property="og:type" content="article">
<meta property="og:title" content="The shader material in threejs and getting started with a little GLSL">
<meta property="og:url" content="https://dustinpfister.github.io/2023/01/13/threejs-shader-material/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="The Shader material in threejs is one way to go about getting started with custom shaders in threejs, the other general option would be to look into the raw shader material. The main difference betwee">
<meta property="og:updated_time" content="2023-01-14T19:20:05.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="The shader material in threejs and getting started with a little GLSL">
<meta name="twitter:description" content="The Shader material in threejs is one way to go about getting started with custom shaders in threejs, the other general option would be to look into the raw shader material. The main difference betwee">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-shader-material" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2023/01/13/threejs-shader-material/" class="article-date"> Published:
  <time datetime="2023-01-13T14:41:00.000Z" itemprop="datePublished">2023-01-13</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2023/01/13/threejs-shader-material/" class="article-date"> Modified:
  <time datetime="2023-01-14T19:20:05.000Z" itemprop="dateModified">2023-01-14</time>
</a>

    <span class="article-date">V1.13</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      The shader material in threejs and getting started with a little GLSL
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>The <a href="https://threejs.org/docs/#api/en/materials/ShaderMaterial" target="_blank" rel="external">Shader material</a> in threejs is one way to go about getting started with custom shaders in threejs, the other general option would be to look into the <a href="https://threejs.org/docs/#api/en/materials/RawShaderMaterial" target="_blank" rel="external">raw shader material</a>. The main difference between the two has to do with built-in uniforms and attributes when it comes to the starting state of the GLSL ( <a href="https://en.wikipedia.org/wiki/OpenGL_Shading_Language" target="_blank" rel="external">openGL Shader Language</a> ) code. For this reason it might be best to start out with the Shader material rather than the raw shader material as there are some built in values that I will not have to worry about setting up myself when it comes to the raw shader material. Yet again it is a bit of a toss up with that as if one wants to learn a thing or two about GLSL alone then the raw material might prove to be a better starting point actually.</p>
<p>In any case the Shader material is what I am starting with, and that will be the main topic of this post today. Using the shader material alone is simple enough, but what is not so simple is coming up with custom GLSL code to use with this material. However one has to start somewhere so this post will start out with some very simply hello world style examples, before moving on into one or more real examples when it comes to the topic of custom shaders.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/i8jd1kiNNPk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="The-Shader-Material-in-threejs-and-what-to-know-first"><a href="#The-Shader-Material-in-threejs-and-what-to-know-first" class="headerlink" title="The Shader Material in threejs and what to know first"></a>The Shader Material in threejs and what to know first</h2><p>This is a post on getting started with making custom GLSL shaders in threejs by way of the THREE.ShaderMaterial class as well as many other core threejs features. This is then not in any way a kind of <a href="/2018/04/04/threejs-getting-started/">getting started post with threejs</a>, <a href="/2018/11/27/js-getting-started/">client side javaScript</a>, and many other skills that are needed before hand. Also on top of the usual set of skills that are needed for doing just about anything with threejs there is one new additional skill that one is going to need to start to scratch the surface with at least. As I mentioned in the opening of this post GLSL is what is used to write the code for these custom shaders. I will then not be getting into great detail about everything that you should know before hand here. However I do as aways use this first opening section to outline some things that you might want to read up more on before reading the rest of this post.</p>
<h3 id="Start-to-learn-at-least-a-thing-or-two-about-GLSL"><a href="#Start-to-learn-at-least-a-thing-or-two-about-GLSL" class="headerlink" title="Start to learn at least a thing or two about GLSL"></a>Start to learn at least a thing or two about GLSL</h3><p>If you want to write custom shaders you will want to learn at least a little GLSL, and getting into every little thing about that may be outside the scope of this post. Also I am still very new to this specific language anyway, so I would need to study more myself in order to start writing a collection of posts on this language anyway. There is however learning just enough GLSL to start effectively hacking over shaders that have all ready been written though and that is more or less what I am doing in this post.</p>
<p>Still there is the question of what is the Modzilla Developer Network equivalent site for GLSL? That is indeed a good question and thus far I can not say that I have found that. Thus far I have found the <a href="https://www.khronos.org/opengles/sdk/docs/manglsl/docbook4/" target="_blank" rel="external">khronos group pages</a> to be somewhat helpful, however thus far I have been mainly just looking at the code that is used in the core of threejs itself as an example of core features of this language by looking at the <a href="https://github.com/mrdoob/three.js/tree/r146/src/renderers/shaders/ShaderChunk" target="_blank" rel="external">source code files that compose the THREE.ShaderChunk library</a> as well as just working with this Object in the process of creating a custom shader. Working closely with this object just strikes me as what the THREE.ShaderMaterial is all about as there is also the THREE.RawShaderMaterial class which seems to be what one will want to use when it comes to doing everything from the ground up with GLSL.</p>
<h3 id="There-is-learning-a-thing-or-two-about-the-built-in-materials-first-of-course"><a href="#There-is-learning-a-thing-or-two-about-the-built-in-materials-first-of-course" class="headerlink" title="There is learning a thing or two about the built in materials first of course"></a>There is learning a thing or two about the built in materials first of course</h3><p>If you are still new to threejs, and also even if you do have a fair amount of experience there is still just sticking with the <a href="/2018/04/30/threejs-materials/">built in materials</a> and moving on with life. Many of the material options will work just fine for just about all typical use case examples. However there are some situations that call for writing a custom shader as doing so with with built in materials will have to involve some kind of very complex trickery using canvas textures, so complex that it might be better to ditch that idea and just write a little GLSL code.</p>
<h3 id="Be-aware-of-features-that-have-to-do-with-buffer-geometry"><a href="#Be-aware-of-features-that-have-to-do-with-buffer-geometry" class="headerlink" title="Be aware of features that have to do with buffer geometry"></a>Be aware of features that have to do with buffer geometry</h3><p>There is a lot to be aware of when it comes to the state of <a href="/2021/04/22/threejs-buffer-geometry/">buffer geometry</a> as well of course. Once again this is very much an advanced post on threejs so I assume you know what a <a href="/2021/06/07/threejs-buffer-geometry-attributes-position/">position attribute</a> is, as well as many other such attributes both standard, and not so standard. There is not just getting into making custom shaders, but also custom attributes of geometry as well after all. In some cases I might want to create shaders that will make use of a color attribute, or one or more custom attributes that should be parked in the geometry.</p>
<h3 id="Source-code-examples-are-also-on-Github"><a href="#Source-code-examples-are-also-on-Github" class="headerlink" title="Source code examples are also on Github"></a>Source code examples are also on Github</h3><p>I also have the source code examples that I am writing about here up on <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-shader-material" target="_blank" rel="external">my Github</a>.</p>
<h3 id="Version-Numbers-matter"><a href="#Version-Numbers-matter" class="headerlink" title="Version Numbers matter"></a>Version Numbers matter</h3><p>When I was first writing this post I was using r146 of threejs.</p>
<h2 id="1-Basic-hello-world-exmaples-of-THREE-ShaderMaterial-in-threejs"><a href="#1-Basic-hello-world-exmaples-of-THREE-ShaderMaterial-in-threejs" class="headerlink" title="1 - Basic, hello world exmaples of THREE.ShaderMaterial in threejs"></a>1 - Basic, hello world exmaples of THREE.ShaderMaterial in threejs</h2><p>There is a lot to take in when it comes to even just simply getting started with the THREE.ShaderMaterial. However this is to be expected as this is without question one of the most, if not the most advanced topics there is when it comes to threejs. I have been working with threejs on and off for years and even I still find this to be a little intense for me, however I started taking a swing or two at it now and then because there is not much that remains when it comes to more ground to cover with threejs for me.</p>
<p>Anyway not just for your sake, but very much for my own sake as well, this will be a collection of very basic, getting started type examples of custom shaders in threejs by way of THREE.ShaderMaterial. This might prove to be an easier alternative to that of the THREE.RawShaderMaterial but that will only help so much of course. Still I have found that if I just want to reproduce the functionally of the <a href="/2018/05/05/threejs-basic-material/">THREE.MeshBasicMatreial</a> with just the color option, that is not so hard of a starting point. With that said these examples will just be focusing one various ways to go about doing that which will just result in a solid blob of color for the object rendered in the scene. Everything else should be something that I get to in more advanced sections.</p>
<h3 id="1-1-Custom-Shader-hello-world-with-gl-Position-and-gl-FragColor"><a href="#1-1-Custom-Shader-hello-world-with-gl-Position-and-gl-FragColor" class="headerlink" title="1.1 - Custom Shader hello world with gl_Position and gl_FragColor"></a>1.1 - Custom Shader hello world with gl_Position and gl_FragColor</h3><p>To create an instance of the Shader material I will need to pass an object that contains three properties, unifroms, vertexShader, and fragmentShader. The uniforms property contains a set of values that will be the same for for all vertices, for this getting started example I am dealing with just one uniform value that is a diffuse color. Each value of the uniforms object should itself be an object and the value property of this nested object is how to go about setting a value for the uniform value. The vertexShader and fragmentShader properties should both contain string values, and each string value should contain GLSL code for the vertex and fragment shaders that will provide the custom rendering logic.</p>
<p>The vertex shader runs first and the main job of this shader is to set the value of gl_Position. After the vertex shader there is the fragment shader there is the fragment shader which is what is used to set what the color should be for each pixel location. The main job of this fragment shader then is to set what the color should be for the gl_FragColor value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> shader_basic = &#123;&#125;;</div><div class="line"><span class="comment">// unifrom values for basic shader</span></div><div class="line">shader_basic.uniforms = &#123;</div><div class="line">    <span class="attr">diffuse</span>: &#123; <span class="attr">value</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0x1a1a1a</span>) &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// vertex shader for basic shader</span></div><div class="line">shader_basic.vertexShader = [</div><div class="line">    <span class="string">'void main() &#123;'</span>,</div><div class="line">    <span class="string">'    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );'</span>,</div><div class="line">    <span class="string">'&#125;'</span></div><div class="line">].join(<span class="string">'\n'</span>);</div><div class="line"><span class="comment">// fragment shader for hatching shader</span></div><div class="line">shader_basic.fragmentShader = [</div><div class="line">    <span class="string">'uniform vec3 diffuse;'</span>,</div><div class="line">    <span class="string">'void main() &#123;'</span>,</div><div class="line">    <span class="string">'    gl_FragColor = vec4( diffuse, 1.0 );'</span>,</div><div class="line">    <span class="string">'&#125;'</span></div><div class="line">].join(<span class="string">'\n'</span>);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material1 = <span class="keyword">new</span> THREE.ShaderMaterial(&#123;</div><div class="line">    <span class="attr">uniforms</span>: THREE.UniformsUtils.clone(shader_basic.uniforms),</div><div class="line">    <span class="attr">vertexShader</span>: shader_basic.vertexShader,</div><div class="line">    <span class="attr">fragmentShader</span>: shader_basic.fragmentShader</div><div class="line">&#125;);</div><div class="line">material1.uniforms.diffuse.value = <span class="keyword">new</span> THREE.Color(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY, MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.TorusGeometry( <span class="number">3</span>, <span class="number">1</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line">geo.rotateX(<span class="built_in">Math</span>.PI * <span class="number">0.5</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo, material1);</div><div class="line">mesh.position.y = <span class="number">1</span>;</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>So then the end result of this custom shader is that I have just a solid blob of color in the location of the mesh object that contains a Torus geometry. This is then just a very complex way to go about getting the same effect as just using the basic material and setting the color option to what I want for the solid diffuse color value. However there is of course expanding on this to do somersetting else that can not be done with the basic material, or any other material for that matter. It is just that this seems like a good starting point for me when it comes to getting into doing this sort of thing. However before getting into more advanced examples of this kind of custom material I will want to cover at least a few more options when it comes to just a basic getting started type point for this sort of thing.</p>
<h3 id="1-2-THREE-ShaderChunk"><a href="#1-2-THREE-ShaderChunk" class="headerlink" title="1.2 - THREE.ShaderChunk"></a>1.2 - THREE.ShaderChunk</h3><p>Although a big part of getting into this sort of thing is to write at least a little custom GLSL code, there are a lot of tools built into the core of threejs to help speed things along when using the THREE.ShaderMaterial class. One feature of threejs that I think I should cover right away that I have found is the THREE.ShaderChunk object. In this shader chunk object there is a meshbasic_vert, and meshbasic_frag properties that as you might guess contains GLSL code for the vertex shader, and fragment shader of the mesh basic material. So then another way to create a Shader material hello world would be to just use those values for the shaders.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER OBJECT - Using THREE.ShaderChunk for the vertex and fragment shaders</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> shdaer_basic =  &#123;</div><div class="line">    <span class="comment">// just a default diffuse color of cyan for uniforms</span></div><div class="line">    uniforms: &#123; </div><div class="line">        <span class="attr">diffuse</span>: &#123; <span class="attr">value</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0.5</span>, <span class="number">1</span>, <span class="number">1</span>) &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// just using the same code from 'MeshBasicMaterial' for</span></div><div class="line">    <span class="comment">// vertex and fragment shaders</span></div><div class="line">    vertexShader: THREE.ShaderChunk[ <span class="string">'meshbasic_vert'</span> ],</div><div class="line">    <span class="attr">fragmentShader</span>: THREE.ShaderChunk[ <span class="string">'meshbasic_frag'</span> ],</div><div class="line">&#125;;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.ShaderMaterial(shdaer_basic);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY, MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.BoxGeometry( <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo, material);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>That makes things for more concise, but it also totally defeats the purpose of bothering with the shader material because I could just use the basic material. Again the goal here is to just be aware fo what there is to work with to just get started with this sort of thing, and the THREE.ShaderChunk is just one thing to be aware of. Also in some cases I might want to start with functionality that is not all to different from that of the basic material, <a href="/2022/12/29/threejs-phong-material/">phong material</a>, <a href="/2021/06/23/threejs-normal-material/">normal material</a> and so forth. It is just that typically I will not want to do something like this, but rather start with the actual code rather than a reference to it as a start point.</p>
<h3 id="1-3-Full-code-from-THREE-ShaderChunk-example"><a href="#1-3-Full-code-from-THREE-ShaderChunk-example" class="headerlink" title="1.3 - Full code from THREE.ShaderChunk example"></a>1.3 - Full code from THREE.ShaderChunk example</h3><p>So then in the last basic example I made use of the THREE.ShaderChunk object to create a material that is more or less about the same as the basic material. However I did so by just simply referencing the GLSL code. In this example I am doing the same thing, but now I am passing the GLSL code into the actually code of the example, rather than just referencing what is there.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER OBJECT - Using GLSL code from THREE.ShaderChunk</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> shdaer_basic =  &#123;</div><div class="line">    <span class="comment">// just a default diffuse color of cyan for uniforms</span></div><div class="line">    uniforms: &#123; </div><div class="line">        <span class="attr">diffuse</span>: &#123; <span class="attr">value</span>: <span class="keyword">new</span> THREE.Color(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>) &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// just using the same code from 'MeshBasicMaterial' for</span></div><div class="line">    <span class="comment">// vertex and fragment shaders but now I am puling the actual shader code in</span></div><div class="line">    vertexShader: [</div><div class="line">        <span class="string">'#include &lt;common&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;uv_pars_vertex&gt;'</span>, </div><div class="line">        <span class="string">'#include &lt;uv2_pars_vertex&gt;'</span>, </div><div class="line">        <span class="string">'#include &lt;envmap_pars_vertex&gt;'</span>, </div><div class="line">        <span class="string">'#include &lt;color_pars_vertex&gt;'</span>, </div><div class="line">        <span class="string">'#include &lt;fog_pars_vertex&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;morphtarget_pars_vertex&gt;'</span>, </div><div class="line">        <span class="string">'#include &lt;skinning_pars_vertex&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;logdepthbuf_pars_vertex&gt;'</span>, </div><div class="line">        <span class="string">'#include &lt;clipping_planes_pars_vertex&gt;'</span>, </div><div class="line">        <span class="string">'void main() &#123;'</span>,</div><div class="line">        <span class="string">'    #include &lt;uv_vertex&gt;'</span>, </div><div class="line">        <span class="string">'    #include &lt;uv2_vertex&gt;'</span>, </div><div class="line">        <span class="string">'    #include &lt;color_vertex&gt;'</span>, </div><div class="line">        <span class="string">'    #include &lt;morphcolor_vertex&gt;'</span>,</div><div class="line">        <span class="string">'    #if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )'</span>, </div><div class="line">        <span class="string">'        #include &lt;beginnormal_vertex&gt;'</span>,</div><div class="line">        <span class="string">'        #include &lt;morphnormal_vertex&gt;'</span>, </div><div class="line">        <span class="string">'        #include &lt;skinbase_vertex&gt;'</span>,</div><div class="line">        <span class="string">'        #include &lt;skinnormal_vertex&gt;'</span>, </div><div class="line">        <span class="string">'        #include &lt;defaultnormal_vertex&gt;'</span>, </div><div class="line">        <span class="string">'    #endif'</span>,</div><div class="line">        <span class="string">'    #include &lt;begin_vertex&gt;'</span>, </div><div class="line">        <span class="string">'    #include &lt;morphtarget_vertex&gt;'</span>, </div><div class="line">        <span class="string">'    #include &lt;skinning_vertex&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;project_vertex&gt;'</span>, </div><div class="line">        <span class="string">'    #include &lt;logdepthbuf_vertex&gt;'</span>, </div><div class="line">        <span class="string">'    #include &lt;clipping_planes_vertex&gt;'</span>, </div><div class="line">        <span class="string">'    #include &lt;worldpos_vertex&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;envmap_vertex&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;fog_vertex&gt;'</span>,</div><div class="line">        <span class="string">'&#125;'</span></div><div class="line">    ].join(<span class="string">'\n'</span>),</div><div class="line">    <span class="attr">fragmentShader</span>: [</div><div class="line">        <span class="string">'uniform vec3 diffuse;'</span>,</div><div class="line">        <span class="string">'uniform float opacity;'</span>,</div><div class="line">        <span class="string">'#ifndef FLAT_SHADED'</span>,</div><div class="line">        <span class="string">'    varying vec3 vNormal;'</span>,</div><div class="line">        <span class="string">'#endif'</span>,</div><div class="line">        <span class="string">'#include &lt;common&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;dithering_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;color_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;uv_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;uv2_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;map_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;alphamap_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;alphatest_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;aomap_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;lightmap_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;envmap_common_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;envmap_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;fog_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;specularmap_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;logdepthbuf_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'#include &lt;clipping_planes_pars_fragment&gt;'</span>,</div><div class="line">        <span class="string">'void main() &#123;'</span>,</div><div class="line">        <span class="string">'    #include &lt;clipping_planes_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    vec4 diffuseColor = vec4( diffuse, opacity );'</span>,</div><div class="line">        <span class="string">'    #include &lt;logdepthbuf_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;map_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;color_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;alphamap_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;alphatest_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;specularmap_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );'</span>,</div><div class="line">        <span class="string">'    #ifdef USE_LIGHTMAP'</span>,</div><div class="line">        <span class="string">'        vec4 lightMapTexel = texture2D( lightMap, vUv2 );'</span>,</div><div class="line">        <span class="string">'        reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;'</span>,</div><div class="line">        <span class="string">'    #else'</span>,</div><div class="line">        <span class="string">'        reflectedLight.indirectDiffuse += vec3( 1.0 );'</span>,</div><div class="line">        <span class="string">'    #endif'</span>,</div><div class="line">        <span class="string">'    #include &lt;aomap_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    reflectedLight.indirectDiffuse *= diffuseColor.rgb;'</span>,</div><div class="line">        <span class="string">'    vec3 outgoingLight = reflectedLight.indirectDiffuse;'</span>,</div><div class="line">        <span class="string">'    #include &lt;envmap_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;output_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;tonemapping_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;encodings_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;fog_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;premultiplied_alpha_fragment&gt;'</span>,</div><div class="line">        <span class="string">'    #include &lt;dithering_fragment&gt;'</span>,</div><div class="line">        <span class="string">'&#125;'</span></div><div class="line">    ].join(<span class="string">'\n'</span>)</div><div class="line">&#125;;</div><div class="line"><span class="comment">//console.log(THREE.ShaderChunk[ 'meshbasic_frag' ])</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.ShaderMaterial(shdaer_basic);</div><div class="line"><span class="built_in">console</span>.log(material.vertexShader);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY, MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.BoxGeometry( <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo, material);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>Notice all the include statements that begin with a hashtag, followed by a name for what is some additional GLSL code? This is a way to include one or more parts of the THREE.ShaderChunk object in the GLSL code. So say that I quickly just want to add alpha map functionally to a material of mine. I could go threw the time consuming process of trying how to go about writing something like that from the ground up with GLSL code, but why other with that when I can just include what is baked into threejs to begin with?</p>
<p>This is still just a very complex way of just reproducing the functionally of the basic material, but the goal here was not to make a custom material to begin with, but rather to just get started with this. With these three examples I am not somewhat ready to start to move on to some real examples in which I am just hacking over and expanding from one of these kinds of start points.</p>
<h2 id="2-Using-Vertex-Colors-and-a-Base-color-to-set-frac-color"><a href="#2-Using-Vertex-Colors-and-a-Base-color-to-set-frac-color" class="headerlink" title="2 - Using Vertex Colors and a Base color to set frac color"></a>2 - Using Vertex Colors and a Base color to set frac color</h2><p>In the basic section of this post I wrote a whole bunch of examples that do more or less the same thing, but in some very different ways. They all had to do with just simply drawing a single color for each pixel that is the same end result of just using the Mesh basic material with the color option. That’s okay considering that the goal in that section was to just get started, but not create some kind of final product. </p>
<p>However in this section though the goal is to create an actual final result by making use of core threejs GLSL code to work with to create the same starting set of features there are to work with in the mesh basic material. Then hack over things a bit from there to create a material the will render a geometry by way of a ratio between a single solid base color, and whatever is going in in terms of any color attribute in the geometry that is used for what is called vertex coloring. For those of you not in the know with this one, vertex coloring is a way to define a color for each vertex in the position attribute of a buffer geometry. It is a nice quick way to have something other than a solid blob of color, that does not require light sources, or textures, but does require a color attribute in the geometry.</p>
<h3 id="2-1-Vertex-and-Base-Color-shader-material-example"><a href="#2-1-Vertex-and-Base-Color-shader-material-example" class="headerlink" title="2.1 - Vertex and Base Color shader material example"></a>2.1 - Vertex and Base Color shader material example</h3><p>The first thing that I did when making this example is create a geometry using one of the built in geometry constructor functions. Then I would just get a reference to the position attribute of the geometry, and use the count value to know how many items I need for the color attribute that I will create for the geometry. For that I just worked out some quick code to create the color attribute by making an array and pushing values for the red, green, and blue color channels for each vertex. I then confirmed that everything is working okay by making use of the basic material with the vertexColors Boolean set to true. So now the next step is to just get the same result with the shader material by just using the same GLSL code as the basic material, but just commenting out everything that does not have to do with the features that I want.</p>
<p>I really like the process of creating an array of strings for each line of GLSL code as this allows me to comment out lines of code one by one to get a quick idea of what I want to keep, and what might be unneeded bloat for what I want to do. Starting with the example in the basic section that has all the include statements I start to do just that until I have just the core features along that I want working. After that I started to go threw each of those include statements and just took a look at what the GLSL code is for each of them in the THREE.ShaderChunk object. Then I just replaced the includes with the actually GLSL lines, but with one exception which is the common lib.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER OBJECT - a custom shader that uses vertex colors along with a base color</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> shader_basevert =  &#123;</div><div class="line">    <span class="attr">uniforms</span>: &#123; </div><div class="line">        <span class="attr">uBaseColor</span>: &#123; <span class="attr">value</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>) &#125;,</div><div class="line">        <span class="attr">uBaseVertRatio</span>: &#123; <span class="attr">value</span>: <span class="keyword">new</span> THREE.Vector2(<span class="number">0.50</span>,<span class="number">0.50</span>) &#125;,</div><div class="line">        <span class="attr">opacity</span>: &#123; <span class="attr">value</span>: <span class="number">1.0</span> &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">vertexShader</span>: [</div><div class="line">        <span class="string">'#include &lt;common&gt;'</span>,</div><div class="line">        <span class="string">'varying vec3 vColor;'</span>,</div><div class="line">        <span class="string">'void main() &#123;'</span>,</div><div class="line">        <span class="string">'    vColor = vec3( 1.0 );'</span>,</div><div class="line">        <span class="string">'    vColor *= color;'</span>,</div><div class="line">        <span class="string">'    vec3 transformed = vec3( position );'</span>,</div><div class="line">        <span class="string">'    vec4 mvPosition = vec4( transformed, 1.0 );'</span>,</div><div class="line">        <span class="string">'    mvPosition = modelViewMatrix * mvPosition;'</span>,</div><div class="line">        <span class="string">'    gl_Position = projectionMatrix * mvPosition;'</span>,</div><div class="line">        <span class="string">'&#125;'</span></div><div class="line">    ].join(<span class="string">'\n'</span>),</div><div class="line">    <span class="attr">fragmentShader</span>: [</div><div class="line">        <span class="string">'uniform vec3 uBaseColor;'</span>,</div><div class="line">        <span class="string">'uniform float opacity;'</span>,</div><div class="line">        <span class="string">'uniform vec2 uBaseVertRatio;'</span>,</div><div class="line">        <span class="string">'#include &lt;common&gt;'</span>,</div><div class="line">        <span class="string">'varying vec3 vColor;'</span>,</div><div class="line">        <span class="string">'void main() &#123;'</span>,</div><div class="line">        <span class="string">'    vec4 color = vec4(uBaseColor, 1.0);'</span>,</div><div class="line">        <span class="string">'    color *= uBaseVertRatio.x;'</span>,</div><div class="line">        <span class="string">'    color += vec4(vColor, 1.0) * uBaseVertRatio.y;'</span>,</div><div class="line">        <span class="string">'    gl_FragColor = vec4( color.rgb, opacity );'</span>,</div><div class="line">        <span class="string">'&#125;'</span></div><div class="line">    ].join(<span class="string">'\n'</span>)</div><div class="line">&#125;;</div><div class="line"><span class="comment">//console.log(THREE.ShaderChunk[ 'common' ])</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// HELPER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> MeshBaseAndVertexMaterial = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    <span class="keyword">const</span> mat = <span class="keyword">new</span> THREE.ShaderMaterial(&#123;</div><div class="line">        <span class="attr">uniforms</span>: THREE.UniformsUtils.clone(shader_basevert.uniforms),</div><div class="line">        <span class="attr">vertexShader</span>: shader_basevert.vertexShader,</div><div class="line">        <span class="attr">fragmentShader</span>: shader_basevert.fragmentShader</div><div class="line">    &#125;);</div><div class="line">    mat.vertexColors = <span class="literal">true</span>;</div><div class="line">    mat.transparent = <span class="literal">true</span>;</div><div class="line">    <span class="keyword">if</span>(opt.uBaseColor)&#123;</div><div class="line">        mat.uniforms.uBaseColor.value = <span class="keyword">new</span> THREE.Color(opt.uBaseColor);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(opt.uBaseVertRatio)&#123;</div><div class="line">         mat.uniforms.uBaseVertRatio.value = opt.uBaseVertRatio;</div><div class="line">    &#125;</div><div class="line">    mat.uniforms.opacity.value = opt.opacity === <span class="literal">undefined</span> ? <span class="number">1</span> : opt.opacity;</div><div class="line">    <span class="keyword">return</span> mat;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material1 = MeshBaseAndVertexMaterial(&#123;</div><div class="line">    <span class="attr">uBaseColor</span>: <span class="number">0x888888</span>,</div><div class="line">    <span class="attr">uBaseVertRatio</span>: <span class="keyword">new</span> THREE.Vector2(<span class="number">0.1</span>, <span class="number">0.9</span>),</div><div class="line">    <span class="attr">opacity</span>: <span class="number">0.75</span> &#125;);</div><div class="line"><span class="keyword">const</span> material2 = MeshBaseAndVertexMaterial(&#123;</div><div class="line">    <span class="attr">uBaseColor</span>: <span class="number">0xff00ff</span>,</div><div class="line">    <span class="attr">opacity</span>: <span class="number">0.5</span> &#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.SphereGeometry( <span class="number">3</span>, <span class="number">60</span>, <span class="number">60</span> );</div><div class="line"><span class="comment">// adding a color attribute</span></div><div class="line"><span class="keyword">const</span> len = geo.getAttribute(<span class="string">'position'</span>).count;</div><div class="line"><span class="keyword">const</span> color_array = [];</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">   <span class="keyword">const</span> a1 = i / len;</div><div class="line">   <span class="keyword">const</span> a2 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1) / <span class="number">0.5</span>;</div><div class="line">   color_array.push(<span class="number">0</span>, a2, <span class="number">1</span> - a2);</div><div class="line">   i += <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">const</span> color_attribute = <span class="keyword">new</span> THREE.BufferAttribute(<span class="keyword">new</span> <span class="built_in">Float32Array</span>(color_array), <span class="number">3</span>);</div><div class="line">geo.setAttribute(<span class="string">'color'</span>, color_attribute)</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(geo, material1);</div><div class="line">mesh1.position.x = <span class="number">3.2</span>;</div><div class="line">scene.add(mesh1);</div><div class="line"><span class="keyword">const</span> mesh2 = <span class="keyword">new</span> THREE.Mesh(geo, material2);</div><div class="line">mesh2.position.x = <span class="number">-3.2</span>;</div><div class="line">scene.add(mesh2);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>After a while I found what lines are used to add the vertex coloring feature, along with other core features that have to do with just the plain old diffuse color feature, and opacity. So then I ended up with just a few lines as I commented out, and removed lines that have to do with all kinds of features like alpha maps and so forth. Turns out that the mesh basic material is not so basic as there is a whole to to work with still. Anyway once I had just the features that I wanted from the basic feature I found ways to further reduce the complexity even more with this as all I want to do with this example at least is to color each fragment by way of a ratio between vertex coloring and a single uniform base color.</p>
<p>The end result is then just what I wanted for this example at least. I can set a base color, and a ratio in the form of a THREE.Vector2 object, to set the ratio between the base color and what is going on with vertex coloring as a way to render the geometry.</p>
<h2 id="3-A-crosshatching-example"><a href="#3-A-crosshatching-example" class="headerlink" title="3 - A crosshatching example"></a>3 - A crosshatching example</h2><p>One of the first real examples of a custom shader material that I have made thus far is actually a hacked over version of one <a href="https://codepen.io/EvanBacon/pen/xgEBPX" target="_blank" rel="external">that I found on line</a>. That is that I just did some quick google work to find a shader that does more or less what I wanted and found something that was close at least. I then hacked over it a lot, removing code that I did not want or need for the simple black and white look that I wanted and ended up with this.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0.2</span>,<span class="number">0.2</span>, <span class="number">0.2</span>);</div><div class="line"><span class="comment">//scene.add( new THREE.GridHelper(10, 10) );</span></div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">0.8</span>, <span class="number">1</span>, <span class="number">0.5</span>);</div><div class="line">scene.add(dl);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER OBJECT</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// based on what as found at: https://codepen.io/EvanBacon/pen/xgEBPX</span></div><div class="line"><span class="comment">// by EvanBacon ( https://codepen.io/EvanBacon , https://twitter.com/baconbrix )</span></div><div class="line"><span class="comment">// * made it so that there are just two colors</span></div><div class="line"><span class="comment">// * figured out how to make the lines thicker</span></div><div class="line"><span class="comment">// * figured out how to mutate color</span></div><div class="line"><span class="keyword">const</span> shader_hatch = &#123;&#125;;</div><div class="line"><span class="comment">// unifrom values for hatching shader</span></div><div class="line">shader_hatch.uniforms = &#123;</div><div class="line">    <span class="attr">uDirLightPos</span>: &#123; <span class="attr">type</span>: <span class="string">'v3'</span>, <span class="attr">value</span>: <span class="keyword">new</span> THREE.Vector3() &#125;,</div><div class="line">    <span class="attr">uDirLightColor</span>: &#123; <span class="attr">type</span>: <span class="string">'c'</span>, <span class="attr">value</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0xeeeeee</span>) &#125;,</div><div class="line">    <span class="attr">uAmbientLightColor</span>: &#123; <span class="attr">type</span>: <span class="string">'c'</span>, <span class="attr">value</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0x050505</span>) &#125;,</div><div class="line">    <span class="attr">uBaseColor</span>: &#123; <span class="attr">type</span>: <span class="string">'c'</span>, <span class="attr">value</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0xffffff</span>) &#125;,</div><div class="line">    <span class="attr">uLineColor1</span>: &#123; <span class="attr">type</span>: <span class="string">'c'</span>, <span class="attr">value</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0x000000</span>) &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// vertex shader for hatching shader</span></div><div class="line">shader_hatch.vertexShader = [</div><div class="line">    <span class="string">'varying vec3 vNormal;'</span>,</div><div class="line">    <span class="string">'void main() &#123;'</span>,</div><div class="line">    <span class="string">'     gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );'</span>,</div><div class="line">    <span class="string">'     vNormal = normalize( normalMatrix * normal );'</span>,</div><div class="line">    <span class="string">'&#125;'</span></div><div class="line">].join(<span class="string">'\n'</span>);</div><div class="line"><span class="comment">// fragment shader for hatching shader</span></div><div class="line">shader_hatch.fragmentShader = [</div><div class="line">    <span class="comment">//'uniform vec3 uBaseColor;',</span></div><div class="line">    <span class="string">'uniform vec3 uLineColor1;'</span>,</div><div class="line">    <span class="string">'uniform vec3 uDirLightPos;'</span>,</div><div class="line">    <span class="string">'uniform vec3 uDirLightColor;'</span>,</div><div class="line">    <span class="string">'uniform vec3 uAmbientLightColor;'</span>,</div><div class="line">    <span class="string">'varying vec3 vNormal;'</span>,</div><div class="line">    <span class="string">'const float fSpace = 10.0;'</span>,    <span class="comment">// added an fSpace Float</span></div><div class="line">    <span class="string">''</span>,</div><div class="line">    <span class="string">'void main() &#123;'</span>,</div><div class="line">    <span class="string">'    float directionalLightWeighting = max( dot( vNormal, uDirLightPos ), 0.0);'</span>,</div><div class="line">    <span class="string">'    vec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;'</span>,</div><div class="line">    <span class="string">'    float len = length(lightWeighting);'</span>,     <span class="comment">// added a len Float</span></div><div class="line">    <span class="comment">//'    gl_FragColor = vec4( uBaseColor, 1.0 );',</span></div><div class="line">    <span class="string">'    vec3 color = vec3(len * 0.50);'</span>, <span class="comment">// figured out how to mutate color</span></div><div class="line">    <span class="comment">//'    color[0] = len * 0.40;',</span></div><div class="line">    <span class="string">'    gl_FragColor = vec4(color, 1.0);'</span>,</div><div class="line">    <span class="string">'    if ( len &lt; 1.00 ) &#123;'</span>,</div><div class="line">    <span class="string">'        float n = mod(gl_FragCoord.x + gl_FragCoord.y, fSpace);'</span>, <span class="comment">// added a n Float for each of these</span></div><div class="line">    <span class="string">'        if ( n &lt; 4.0 ) &#123;'</span>, <span class="comment">// new expression that allows for thicker lines</span></div><div class="line">    <span class="string">'            gl_FragColor = vec4( uLineColor1, 1.0 );'</span>,</div><div class="line">    <span class="string">'        &#125;'</span>,</div><div class="line">    <span class="string">'    &#125;'</span>,</div><div class="line">    <span class="string">'    if ( len &lt; 0.75 ) &#123;'</span>,</div><div class="line">    <span class="string">'        float n = mod(gl_FragCoord.x - gl_FragCoord.y, fSpace);'</span>,</div><div class="line">    <span class="string">'        if ( n &lt; 4.0 ) &#123;'</span>,</div><div class="line">    <span class="string">'            gl_FragColor = vec4( uLineColor1, 1.0 );'</span>,</div><div class="line">    <span class="string">'        &#125;'</span>,</div><div class="line">    <span class="string">'    &#125;'</span>,</div><div class="line">    <span class="string">'    if ( len &lt; 0.50 ) &#123;'</span>,</div><div class="line">    <span class="string">'        float n = mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, fSpace);'</span>,</div><div class="line">    <span class="string">'        if ( n &lt; 4.0 ) &#123;'</span>,</div><div class="line">    <span class="string">'            gl_FragColor = vec4( uLineColor1, 1.0 );'</span>,</div><div class="line">    <span class="string">'        &#125;'</span>,</div><div class="line">    <span class="string">'    &#125;'</span>,</div><div class="line">    <span class="string">'    if ( len &lt; 0.25 ) &#123;'</span>,</div><div class="line">    <span class="string">'        float n = mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, fSpace);'</span>,</div><div class="line">    <span class="string">'        if ( n &lt; 4.0 ) &#123;'</span>,</div><div class="line">    <span class="string">'            gl_FragColor = vec4( uLineColor1, 1.0 );'</span>,</div><div class="line">    <span class="string">'        &#125;'</span>,</div><div class="line">    <span class="string">'    &#125;'</span>,</div><div class="line">    <span class="string">'&#125;'</span></div><div class="line">].join(<span class="string">'\n'</span>);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHADER MATERIAL</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material1 = <span class="keyword">new</span> THREE.ShaderMaterial(&#123;</div><div class="line">    <span class="attr">uniforms</span>: THREE.UniformsUtils.clone(shader_hatch.uniforms),</div><div class="line">    <span class="attr">vertexShader</span>: shader_hatch.vertexShader,</div><div class="line">    <span class="attr">fragmentShader</span>: shader_hatch.fragmentShader</div><div class="line">&#125;);</div><div class="line">material1.uniforms.uDirLightColor.value = dl.color;</div><div class="line">material1.uniforms.uDirLightPos.value = dl.position;</div><div class="line"><span class="comment">//const lineColor1 = 0xff0000;</span></div><div class="line"><span class="comment">//material1.uniforms.uBaseColor.value.setHex(0xff0000);</span></div><div class="line"><span class="comment">//material1.uniforms.uLineColor1.value.setHex(lineColor1);</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY, MESH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.TorusGeometry( <span class="number">3</span>, <span class="number">1</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line">geo.rotateX(<span class="built_in">Math</span>.PI * <span class="number">0.5</span>);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo, material1);</div><div class="line">mesh.position.y = <span class="number">1</span>;</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">300</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">    <span class="keyword">const</span> v = <span class="keyword">new</span> THREE.Vector3();</div><div class="line">    <span class="keyword">const</span> e = <span class="keyword">new</span> THREE.Euler();</div><div class="line">    e.x = <span class="built_in">Math</span>.PI * <span class="number">4</span> * a1;</div><div class="line">    e.z = <span class="built_in">Math</span>.PI * <span class="number">2</span> * a1;</div><div class="line">    v.set(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>).applyEuler(e);</div><div class="line">    dl.position.copy(v);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>The code that is was based on was made for a very old revision of threejs ( r57 ), so many of the changes had to do with having to just do things the way that they are done now. I also did not make use of additional shaders that where used in the example, and made a few more changes that allowed for things like thicker lines. Thus far this material works more or less the way that I would like it to, but I still would like to add at least a few more features to this such as transparency.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>That will be it for now at least when it comes to custom shaders in threejs, not because there is not anything more to write about, but indeed very much the opposite. I have a lot more to look into when it comes to this sort of thing myself as there is a great deal more to learn about when it comes to working with the THREE.ShaderChunk library, as well as <a href="https://www.khronos.org/opengl/wiki/OpenGL_Shading_Language" target="_blank" rel="external">GLSL itself</a>. </p>
<p>This was a kind of just getting started type post though, so maybe there is still only so much more to write about in terms of future edits of this post at least. However I am going to want to write additional blog posts on more examples for custom shaders, the shader chunk object, GLSL, and much more. There is just no way to do justice with this in the form of a single blog post, unless it is a real serious long form content piece that just goes on war and peace style maybe.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2023/01/13/threejs-shader-material/" data-id="cle059sds02gtdwv1w79br190" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2023/01/13/threejs-shader-material/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/01/20/threejs-buffer-geometry-attributes-color/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Material Vertex Color and the buffer geometry attribute used for doing so
        
      </div>
    </a>
  
  
    <a href="/2023/01/05/threejs-buffer-geometry-set-from-points/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Set From Points Buffer Geometry method in threejs</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2023/01/13/threejs-shader-material/index.html';
    this.page.identifier = '1023';
    this.page.title = 'The shader material in threejs and getting started with a little GLSL';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 12.73px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/02/10/threejs-curves-cubicbeziercurve3/">Cubic Bezier Curves in threejs</a>
          </li>
        
          <li>
            <a href="/2023/02/03/threejs-buffer-geometry-morph-attributes/">Morph Attributes of buffer geometry objects</a>
          </li>
        
          <li>
            <a href="/2023/01/27/threejs-examples-house-two/">House Model two threejs project example</a>
          </li>
        
          <li>
            <a href="/2023/01/20/threejs-buffer-geometry-attributes-color/">Material Vertex Color and the buffer geometry attribute used for doing so</a>
          </li>
        
          <li>
            <a href="/2023/01/13/threejs-shader-material/">The shader material in threejs and getting started with a little GLSL</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2023/01/13/threejs-shader-material/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>