<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>Canvas example of a cross hairs game | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2020/07/29/canvas-example-game-crosshairs/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="For this weeks canvas example post I made a quick little cross hairs type game. So far this is a game where I just use the mouse or touch events to move a cross hairs object around the canvas. The gen">
<meta property="og:type" content="article">
<meta property="og:title" content="Canvas example of a cross hairs game">
<meta property="og:url" content="https://dustinpfister.github.io/2020/07/29/canvas-example-game-crosshairs/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="For this weeks canvas example post I made a quick little cross hairs type game. So far this is a game where I just use the mouse or touch events to move a cross hairs object around the canvas. The gen">
<meta property="og:updated_time" content="2020-08-03T21:03:15.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Canvas example of a cross hairs game">
<meta name="twitter:description" content="For this weeks canvas example post I made a quick little cross hairs type game. So far this is a game where I just use the mouse or touch events to move a cross hairs object around the canvas. The gen">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas-Examples</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-canvas-example-game-crosshairs" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/29/canvas-example-game-crosshairs/" class="article-date"> Published:
  <time datetime="2020-07-29T19:44:00.000Z" itemprop="datePublished">2020-07-29</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2020/07/29/canvas-example-game-crosshairs/" class="article-date"> Modified:
  <time datetime="2020-08-03T21:03:15.000Z" itemprop="dateModified">2020-08-03</time>
</a>

    <span class="article-date">V1.18</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Canvas example of a cross hairs game
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>For this weeks <a href="/2020/03/23/canvas-example/">canvas example</a> post I made a quick little cross hairs type game. So far this is a game where I just use the mouse or touch events to move a cross hairs object around the canvas. The general idea here is that the cross hairs object is used to move around but also to fire. So the cross hairs object can be moved from an inner area in the center of the canvas to an outer area outside of this inner area, when that happens the cross hairs object is used to move around a map. The player can also just tap around in the inner area to do damage to cells in the map for now when it just comes to having something to do with this.</p>
<p>The idea beyond just how to go about moving around and attacking, and doing so with just touch events is the main thing I had in mind with this one. So at the time that I started this not much thought went into the other aspects of this that can help turn it into more of an actually game. I think that it might be fun to have a game where you just go around and shoot at stuff below you and just rack up a whole lot of damage on what there is below you. Maybe put some things in the fire back also so that it is a kind of game where it is possible to, you know loose. In any case at the tie of this writing at least the main focus was just making a module that just creates, and updates an object that is used to move around a map.</p>
<p>I made <a href="/2020/01/26/canvas-example-pointer-movement/">another canvas example that is like this one that I called just simply pointer movement</a>. That one was programed a little differently from this one as that was just simply a means to move around a map by clicking and dragging away from the point that was clicked. Here I have a set of circles fixed at the center of the canvas, or any other location that I choose to fix these circle areas to.There is an outer circle area that is used to move around based on the distance from the end of the inner circle rather than the center point. In addition the inner circle area will not result in any movement, but is used as an array where you can shoot at things, but not move. So I guess this kind of interface can be programed a whole bunch of different ways, but it is still more or less the same basic thing.</p>
<a id="more"></a>
<p><div id="canvas-app" style="width:320px;height:240px;margin-left:auto;margin-right:auto;"></div></p>
<script>var utils={};utils.distance=function(x1,y1,x2,y2){return Math.sqrt(Math.pow(x1-x2,2)+Math.pow(y1-y2,2));};utils.getCanvasRelative=function(e){var canvas=e.target,bx=canvas.getBoundingClientRect();return{x:(e.changedTouches?e.changedTouches[0].clientX:e.clientX)-bx.left,y:(e.changedTouches?e.changedTouches[0].clientY:e.clientY)-bx.top,bx:bx};};var crossMod=(function(){var isInInner=function(cross){var ch=cross.crosshairs,center=cross.center;return utils.distance(ch.x,ch.y,center.x,center.y)<cross.radiusInner;};var isInOuter=function(cross){var ch=cross.crosshairs,center=cross.center;return utils.distance(ch.x,ch.y,center.x,center.y)>=cross.radiusInner;};var isOutOfBounds=function(cross){var ch=cross.crosshairs,center=cross.center;return utils.distance(ch.x,ch.y,center.x,center.y)>=cross.radiusOuter;};var moveOffset=function(cross,secs){var ch=cross.crosshairs,center=cross.center,d1=utils.distance(ch.x,ch.y,center.x,center.y),diff=cross.radiusOuter-cross.radiusInner,d2=d1-cross.radiusInner,per=d2/diff;if(d1>cross.radiusInner){cross.offset.x+=Math.cos(ch.heading)*cross.offset.pps*per*secs;cross.offset.y+=Math.sin(ch.heading)*cross.offset.pps*per*secs;}};return{isInInner:isInInner,isInOuter:isInOuter,create:function(opt){opt=opt||{};return{userDown:false,pps:opt.pps||128,radiusInner:opt.radiusInner||(240/4),radiusOuter:opt.radiusOuter||(240/2.125),center:{x:opt.cx||(320/2),y:opt.cy||(240/2)},crosshairs:{x:320/2,y:240/2,heading:0,radius:16},offset:{x:opt.offsetX||0,y:opt.offsetY||0,pps:256}};},update:function(cross,secs){secs=secs||0;var ch=cross.crosshairs,center=cross.center;ch.heading=Math.atan2(center.y-ch.y,center.x-ch.x);if(isInOuter(cross)){if(!cross.userDown){ch.x+=Math.cos(ch.heading)*cross.pps*secs;ch.y+=Math.sin(ch.heading)*cross.pps*secs;}moveOffset(cross,secs);}if(isOutOfBounds(cross)){ch.x=center.x+Math.cos(ch.heading+Math.PI)*cross.radiusOuter;ch.y=center.y+Math.sin(ch.heading+Math.PI)*cross.radiusOuter;}},createEvent:function(cross,eventType){return function(e){e.preventDefault();var pos=utils.getCanvasRelative(e);if(eventType==='start'){cross.userDown=true;cross.crosshairs.x=pos.x;cross.crosshairs.y=pos.y;}if(eventType==='end'){cross.userDown=false;}if(eventType==='move'&&cross.userDown){cross.crosshairs.x=pos.x;cross.crosshairs.y=pos.y;}};}}}());var mapMod=(function(){var get=function(map,x,y){return map.cells[y*map.cellWidth+x];};return{create:function(){var map={cellSize:32,cellWidth:32,cellHeight:16,cells:[],percentKilled:0};var i=0,x,y,len=map.cellWidth*map.cellHeight;while(i<len){map.cells.push({i:i,x:i%map.cellWidth,y:Math.floor(i/map.cellWidth),HP:100,maxHP:100});i+=1;}return map;},clampOffset:function(map,offset){offset.x=offset.x>0?0:offset.x;offset.y=offset.y>0?0:offset.y;offset.x=offset.x<map.cellWidth*map.cellSize* -1?map.cellWidth*map.cellSize* -1:offset.x;offset.y=offset.y<map.cellHeight*map.cellSize* -1?map.cellHeight*map.cellSize* -1:offset.y;},getWithCanvasPointAndOffset:function(map,canvasX,canvasY,offsetX,offsetY){var x=canvasX-160+Math.abs(offsetX),y=canvasY-120+Math.abs(offsetY);return get(map,Math.floor(x/map.cellSize),Math.floor(y/map.cellSize));}}}());var poolMod=(function(){return{create:function(opt){opt=opt||{};opt.count=opt.count||10;var i=0,pool=[];while(i<opt.count){pool.push({active:false,x:0,y:0,radius:8,heading:0,pps:32,lifespan:opt.lifespan||3,spawn:opt.spawn||function(obj,state){obj.active=true;},purge:opt.purge||function(obj,state){},update:opt.update||function(obj,state,secs){obj.x+=obj.pps*secs;obj.lifespan-=secs;}});i+=1;}return pool;},spawn:function(pool,game){var i=pool.length,obj;while(i--){obj=pool[i];if(!obj.active){obj.active=true;obj.spawn.call(obj,obj,game);break;}}},update:function(pool,state,secs){var i=pool.length,obj;while(i--){obj=pool[i];if(obj.active){obj.update(obj,state,secs);obj.lifespan=obj.lifespan<0?0:obj.lifespan;if(obj.lifespan===0){obj.active=false;obj.purge.call(obj,obj,state);}}}}}}());var gameMod=(function(){var shotOptions={count:20,spawn:function(shot,game){var offset=game.cross.offset,ch=game.cross.crosshairs,d;shot.x=game.canvas.width;shot.y=game.canvas.height;shot.heading=Math.atan2(ch.y-shot.y,ch.x-shot.x);d=utils.distance(shot.x,shot.y,ch.x,ch.y);shot.pps=256;shot.lifespan=d/shot.pps;shot.offset=offset;},purge:function(shot,game){var cell=mapMod.getWithCanvasPointAndOffset(game.map,shot.x,shot.y,shot.offset.x,shot.offset.y);if(cell){cell.HP-=5;cell.HP=cell.HP<0?0:cell.HP;game.map.percentKilled=0;game.map.cells.forEach(function(cell){game.map.percentKilled+=cell.HP/cell.maxHP;});game.map.percentKilled/=game.map.cells.length;}},update:function(shot,game,secs){shot.x+=Math.cos(shot.heading)*shot.pps*secs;shot.y+=Math.sin(shot.heading)*shot.pps*secs;shot.lifespan-=secs;}};return{create:function(opt){opt=opt||{};var game={ver:'0.2.0',canvas:canvas,map:mapMod.create(),cross:{},shots:poolMod.create(shotOptions),shotRate:0.125,shotSecs:0,userDown:false};game.cross=crossMod.create({offsetX:game.map.cellWidth*game.map.cellSize/2* -1,offsetY:game.map.cellHeight*game.map.cellSize/2* -1,});game.canvas.addEventListener('mousedown',crossMod.createEvent(game.cross,'start'));game.canvas.addEventListener('mouseup',crossMod.createEvent(game.cross,'end'));game.canvas.addEventListener('mousemove',crossMod.createEvent(game.cross,'move'));game.canvas.addEventListener('touchstart',crossMod.createEvent(game.cross,'start'));game.canvas.addEventListener('touchend',crossMod.createEvent(game.cross,'end'));game.canvas.addEventListener('touchmove',crossMod.createEvent(game.cross,'move'));game.canvas.addEventListener('mousedown',function(e){e.preventDefault();game.userDown=true;});game.canvas.addEventListener('mouseup',function(e){e.preventDefault();game.userDown=false;});game.canvas.addEventListener('touchstart',function(e){e.preventDefault();game.userDown=true;});game.canvas.addEventListener('touchend',function(e){e.preventDefault();game.userDown=false;});return game;},update:function(game,secs){crossMod.update(game.cross,secs);mapMod.clampOffset(game.map,game.cross.offset);poolMod.update(game.shots,game,secs);game.shotSecs+=secs;game.shotSecs=game.shotSecs>=game.shotRate?game.shotRate:game.shotSecs;if(game.shotSecs>=game.shotRate&&game.userDown&&crossMod.isInInner(game.cross)){poolMod.spawn(game.shots,game);game.shotSecs=0;}}}}());var draw=(function(){var drawCrossCircles=function(ctx,cross){ctx.strokeStyle='white';ctx.lineWidth=3;ctx.beginPath();ctx.arc(cross.center.x,cross.center.y,cross.radiusInner,0,Math.PI*2);ctx.stroke();ctx.beginPath();ctx.arc(cross.center.x,cross.center.y,cross.radiusOuter,0,Math.PI*2);ctx.stroke();ctx.beginPath();ctx.arc(cross.crosshairs.x,cross.crosshairs.y,cross.crosshairs.radius,0,Math.PI*2);ctx.stroke();};return{back:function(ctx,canvas){ctx.fillStyle='black';ctx.fillRect(0,0,canvas.width,canvas.height);},cross:function(ctx,cross){var ch=cross.crosshairs;drawCrossCircles(ctx,cross);ctx.strokeStyle='rgba(200,0,0,0.5)';ctx.beginPath();ctx.moveTo(ch.x,ch.y-ch.radius*1.5);ctx.lineTo(ch.x,ch.y+ch.radius*1.5);ctx.stroke();ctx.beginPath();ctx.moveTo(ch.x-ch.radius*1.5,ch.y);ctx.lineTo(ch.x+ch.radius*1.5,ch.y);ctx.stroke();},map:function(ctx,map,cross){ctx.strokeStyle='grey';ctx.lineWidth=3;map.cells.forEach(function(cell){var x=cell.x*map.cellSize+cross.offset.x+(320/2),y=cell.y*map.cellSize+cross.offset.y+(240/2),per=cell.HP/cell.maxHP;ctx.beginPath();ctx.rect(x,y,map.cellSize,map.cellSize);ctx.stroke();ctx.fillStyle='rgba(0,200,0,'+per.toFixed(2)+')';ctx.fill();ctx.closePath();});},shots:function(ctx,game){var shots=game.shots,i=shots.length,shot;while(i--){shot=shots[i];ctx.fillStyle='white';ctx.strokeStyle='black';if(shot.active){ctx.beginPath();ctx.arc(shot.x,shot.y,shot.radius,0,Math.PI*2);ctx.fill();ctx.stroke();}}},info:function(ctx,game){ctx.fillStyle='rgba(0,0,0,0.4)';ctx.fillRect(0,0,game.canvas.width,game.canvas.height);ctx.fillStyle='yellow';ctx.textBaseline='top';ctx.font='10px courier';ctx.fillText('v'+game.ver,10,10);ctx.fillText('pos: '+game.cross.offset.x.toFixed(2)+','+game.cross.offset.y.toFixed(2),10,20);ctx.fillText('percent kiled: '+game.map.percentKilled,10,30);ctx.fillText('shotSecs: '+game.shotSecs,10,40);}}}());var canvas=document.createElement('canvas'),ctx=canvas.getContext('2d'),container=document.getElementById('canvas-app')||document.body;container.appendChild(canvas);canvas.width=320;canvas.height=240;ctx.translate(0.5,0.5);var game=gameMod.create({canvas:canvas});var lt=new Date();var loop=function(){var now=new Date(),t=now-lt,secs=t/1000;requestAnimationFrame(loop);gameMod.update(game,secs);draw.back(ctx,canvas);draw.map(ctx,game.map,game.cross);draw.cross(ctx,game.cross);draw.shots(ctx,game);draw.info(ctx,game);lt=now;};loop();</script>

<h2 id="1-The-utility-module"><a href="#1-The-utility-module" class="headerlink" title="1 - The utility module"></a>1 - The utility module</h2><p>For like with many of these canvas examples this one has a utility library. In this one I am just using the distance formula, and a method that will help me to get a canvas relative position when it comes to working with event handers for pointer events. There always seems a need for this kind of utility library that can be described as a kind of application specific custom tailors lodash of sorts. That is a collection of utility methods that I am actually going to use in one or more of the module that compose the project.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// UTILS</span></div><div class="line"><span class="keyword">var</span> utils = &#123;&#125;;</div><div class="line">utils.distance = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, x2, y2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow(x1 - x2, <span class="number">2</span>) + <span class="built_in">Math</span>.pow(y1 - y2, <span class="number">2</span>));</div><div class="line">&#125;;</div><div class="line">utils.getCanvasRelative = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = e.target,</div><div class="line">    bx = canvas.getBoundingClientRect();</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">x</span>: (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientX : e.clientX) - bx.left,</div><div class="line">        <span class="attr">y</span>: (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientY : e.clientY) - bx.top,</div><div class="line">        <span class="attr">bx</span>: bx</div><div class="line">    &#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>So now that I have the basic utility library out of the way lets move on to the actual modules that make this project diferent from all the others.</p>
<h2 id="2-The-cross-js-file"><a href="#2-The-cross-js-file" class="headerlink" title="2 - The cross.js file"></a>2 - The cross.js file</h2><p>So now for the module that will be used to create and update a state object for a cross hairs state object. This main cross hairs state object contains a bunch of additional objects and properties that contain many points of interest in the canvas matrix. One point of interest is the center point of the cross hairs area, another is the actual cross hairs cursor position, and yet another is an offset point that can be used as a way to navigate a map. </p>
<p>The idea of this module is when the cross hairs point object is within an inner radius that cross hairs object is just used as a way to set the position of where a weapon is going to fire. While the difference between the inner and outer radius is then used as a zone to define angle and rate of movement when it comes to moving around that map. So when the cross hairs object is in the zone between inner and outer radius value that will effect another offset point in the main cross state object. This offset value can then be used as a map offset value when it comes to navigating the map. When it comes to the map module that is another matter that I will be getting to later, but for now in this section I will just be going over the cross hairs module.</p>
<p>SO with that said the module contains a number of private helper methods. There are helper methods that will return true or false if the cross hairs object is in the fire area, or in the movement area. There is also a helper method that has to do with moving the offset object based on the current values of the cross hairs object and a given value that is the number of seconds sense the last frame tick update.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> crossMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> isInInner = <span class="function"><span class="keyword">function</span> (<span class="params">cross</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> ch = cross.crosshairs,</div><div class="line">        center = cross.center;</div><div class="line">        <span class="keyword">return</span> utils.distance(ch.x, ch.y, center.x, center.y) &lt; cross.radiusInner;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> isInOuter = <span class="function"><span class="keyword">function</span> (<span class="params">cross</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> ch = cross.crosshairs,</div><div class="line">        center = cross.center;</div><div class="line">        <span class="keyword">return</span> utils.distance(ch.x, ch.y, center.x, center.y) &gt;= cross.radiusInner;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> isOutOfBounds = <span class="function"><span class="keyword">function</span> (<span class="params">cross</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> ch = cross.crosshairs,</div><div class="line">        center = cross.center;</div><div class="line">        <span class="keyword">return</span> utils.distance(ch.x, ch.y, center.x, center.y) &gt;= cross.radiusOuter;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> moveOffset = <span class="function"><span class="keyword">function</span> (<span class="params">cross, secs</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> ch = cross.crosshairs,</div><div class="line">        center = cross.center,</div><div class="line">        d1 = utils.distance(ch.x, ch.y, center.x, center.y),</div><div class="line">        diff = cross.radiusOuter - cross.radiusInner,</div><div class="line">        d2 = d1 - cross.radiusInner,</div><div class="line">        per = d2 / diff;</div><div class="line">        <span class="keyword">if</span> (d1 &gt; cross.radiusInner) &#123;</div><div class="line">            cross.offset.x += <span class="built_in">Math</span>.cos(ch.heading) * cross.offset.pps * per * secs;</div><div class="line">            cross.offset.y += <span class="built_in">Math</span>.sin(ch.heading) * cross.offset.pps * per * secs;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">isInInner</span>: isInInner,</div><div class="line">        <span class="attr">isInOuter</span>: isInOuter,</div><div class="line">        <span class="attr">create</span>: <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">            opt = opt || &#123;&#125;;</div><div class="line">            <span class="keyword">return</span> &#123;</div><div class="line">                <span class="attr">userDown</span>: <span class="literal">false</span>,</div><div class="line">                <span class="attr">pps</span>: opt.pps || <span class="number">128</span>,</div><div class="line">                <span class="attr">radiusInner</span>: opt.radiusInner || (<span class="number">240</span> / <span class="number">4</span>),</div><div class="line">                <span class="attr">radiusOuter</span>: opt.radiusOuter || (<span class="number">240</span> / <span class="number">2.125</span>),</div><div class="line">                <span class="attr">center</span>: &#123;</div><div class="line">                    <span class="attr">x</span>: opt.cx || (<span class="number">320</span> / <span class="number">2</span>),</div><div class="line">                    <span class="attr">y</span>: opt.cy || (<span class="number">240</span> / <span class="number">2</span>)</div><div class="line">                &#125;,</div><div class="line">                <span class="attr">crosshairs</span>: &#123;</div><div class="line">                    <span class="attr">x</span>: <span class="number">320</span> / <span class="number">2</span>,</div><div class="line">                    <span class="attr">y</span>: <span class="number">240</span> / <span class="number">2</span>,</div><div class="line">                    <span class="attr">heading</span>: <span class="number">0</span>,</div><div class="line">                    <span class="attr">radius</span>: <span class="number">16</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">offset</span>: &#123;</div><div class="line">                    <span class="attr">x</span>: opt.offsetX || <span class="number">0</span>,</div><div class="line">                    <span class="attr">y</span>: opt.offsetY || <span class="number">0</span>,</div><div class="line">                    <span class="attr">pps</span>: <span class="number">256</span></div><div class="line">                &#125;</div><div class="line">            &#125;;</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="attr">update</span>: <span class="function"><span class="keyword">function</span> (<span class="params">cross, secs</span>) </span>&#123;</div><div class="line">            secs = secs || <span class="number">0</span>;</div><div class="line">            <span class="keyword">var</span> ch = cross.crosshairs,</div><div class="line">            center = cross.center;</div><div class="line">            ch.heading = <span class="built_in">Math</span>.atan2(center.y - ch.y, center.x - ch.x);</div><div class="line">            <span class="keyword">if</span> (isInOuter(cross)) &#123;</div><div class="line">                <span class="comment">// move back to innerRdaius if in outer area and userDown is false</span></div><div class="line">                <span class="keyword">if</span> (!cross.userDown) &#123;</div><div class="line">                    ch.x += <span class="built_in">Math</span>.cos(ch.heading) * cross.pps * secs;</div><div class="line">                    ch.y += <span class="built_in">Math</span>.sin(ch.heading) * cross.pps * secs;</div><div class="line">                &#125;</div><div class="line">                <span class="comment">// apply changes to offset</span></div><div class="line">                moveOffset(cross, secs);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// set bounds</span></div><div class="line">            <span class="keyword">if</span> (isOutOfBounds(cross)) &#123;</div><div class="line">                ch.x = center.x + <span class="built_in">Math</span>.cos(ch.heading + <span class="built_in">Math</span>.PI) * cross.radiusOuter;</div><div class="line">                ch.y = center.y + <span class="built_in">Math</span>.sin(ch.heading + <span class="built_in">Math</span>.PI) * cross.radiusOuter;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="attr">createEvent</span>: <span class="function"><span class="keyword">function</span> (<span class="params">cross, eventType</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">                e.preventDefault();</div><div class="line">                <span class="keyword">var</span> pos = utils.getCanvasRelative(e);</div><div class="line">                <span class="keyword">if</span> (eventType === <span class="string">'start'</span>) &#123;</div><div class="line">                    cross.userDown = <span class="literal">true</span>;</div><div class="line">                    cross.crosshairs.x = pos.x;</div><div class="line">                    cross.crosshairs.y = pos.y;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (eventType === <span class="string">'end'</span>) &#123;</div><div class="line">                    cross.userDown = <span class="literal">false</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (eventType === <span class="string">'move'</span> &amp;&amp; cross.userDown) &#123;</div><div class="line">                    cross.crosshairs.x = pos.x;</div><div class="line">                    cross.crosshairs.y = pos.y;</div><div class="line">                &#125;</div><div class="line">            &#125;;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<p>I then have my public API of this module that contains methods for both creating and updating a cross state object. In addition I have a method that can be used as a way to create event handers for a cross object that can be used for both mouse and touch events. this is where by utility method that has to do with getting a canvas relative position comes into play.</p>
<h2 id="3-The-map-js-file"><a href="#3-The-map-js-file" class="headerlink" title="3 - The map.js file"></a>3 - The map.js file</h2><p>So now that I have my cross hairs module I am also going to want to have a map file that will be used to create a map of cells. I can then move around the map with the state of a cross object created with the cross hairs module. I went with having the offset values in the cross object rather than the map object, so I will be using a public method in this map module to get at cells by passing a cross object along with the map and canvas relative position values.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> mapMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> get = <span class="function"><span class="keyword">function</span> (<span class="params">map, x, y</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> map.cells[y * map.cellWidth + x];</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line"> </div><div class="line">        <span class="attr">create</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> map = &#123;</div><div class="line">                <span class="attr">cellSize</span>: <span class="number">32</span>,</div><div class="line">                <span class="attr">cellWidth</span>: <span class="number">32</span>,</div><div class="line">                <span class="attr">cellHeight</span>: <span class="number">16</span>,</div><div class="line">                <span class="attr">cells</span>: [],</div><div class="line">                <span class="attr">percentKilled</span>: <span class="number">0</span></div><div class="line">            &#125;;</div><div class="line">            <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">            x,</div><div class="line">            y,</div><div class="line">            len = map.cellWidth * map.cellHeight;</div><div class="line">            <span class="keyword">while</span> (i &lt; len) &#123;</div><div class="line">                map.cells.push(&#123;</div><div class="line">                    <span class="attr">i</span>: i,</div><div class="line">                    <span class="attr">x</span>: i % map.cellWidth,</div><div class="line">                    <span class="attr">y</span>: <span class="built_in">Math</span>.floor(i / map.cellWidth),</div><div class="line">                    <span class="attr">HP</span>: <span class="number">100</span>,</div><div class="line">                    <span class="attr">maxHP</span>: <span class="number">100</span></div><div class="line">                &#125;);</div><div class="line">                i += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> map;</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="attr">clampOffset</span>: <span class="function"><span class="keyword">function</span> (<span class="params">map, offset</span>) </span>&#123;</div><div class="line">            offset.x = offset.x &gt; <span class="number">0</span> ? <span class="number">0</span> : offset.x;</div><div class="line">            offset.y = offset.y &gt; <span class="number">0</span> ? <span class="number">0</span> : offset.y;</div><div class="line">            offset.x = offset.x &lt; map.cellWidth * map.cellSize * <span class="number">-1</span> ? map.cellWidth * map.cellSize * <span class="number">-1</span> : offset.x;</div><div class="line">            offset.y = offset.y &lt; map.cellHeight * map.cellSize * <span class="number">-1</span> ? map.cellHeight * map.cellSize * <span class="number">-1</span> : offset.y;</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="attr">getWithCanvasPointAndOffset</span>: <span class="function"><span class="keyword">function</span> (<span class="params">map, canvasX, canvasY, offsetX, offsetY</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> x = canvasX - <span class="number">160</span> + <span class="built_in">Math</span>.abs(offsetX),</div><div class="line">            y = canvasY - <span class="number">120</span> + <span class="built_in">Math</span>.abs(offsetY);</div><div class="line">            <span class="keyword">return</span> get(map, <span class="built_in">Math</span>.floor(x / map.cellSize), <span class="built_in">Math</span>.floor(y / map.cellSize));</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="4-A-pool-js-module-for-creating-an-object-pool-to-be-used-for-shots-amd-any-other-future-display-object-pools"><a href="#4-A-pool-js-module-for-creating-an-object-pool-to-be-used-for-shots-amd-any-other-future-display-object-pools" class="headerlink" title="4 - A pool.js module for creating an object pool to be used for shots amd any other future display object pools"></a>4 - A pool.js module for creating an object pool to be used for shots amd any other future display object pools</h2><p>I made a another post in which I touched base on <a href="/2020/07/20/canvas-example-object-pool/">object pools</a>. I decided to include such a module in this project that for starters will be used to create shot objects that will move from the side of the canvas to the target area where an attack was made on the map. In future versions of the canvas example display object pools could be used for all kinds of additional things where a display object would be called for such as explosions, enemies, and power ups.</p>
<p>The module for now just has three public methods, one to create an object pool, one to update an object pool, and another that will call the spawn method of a display object that is inactive if any is available.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> poolMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line"> </div><div class="line">        <span class="attr">create</span>: <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">            opt = opt || &#123;&#125;;</div><div class="line">            opt.count = opt.count || <span class="number">10</span>;</div><div class="line">            <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">            pool = [];</div><div class="line">            <span class="keyword">while</span> (i &lt; opt.count) &#123;</div><div class="line">                pool.push(&#123;</div><div class="line">                    <span class="attr">active</span>: <span class="literal">false</span>,</div><div class="line">                    <span class="attr">x</span>: <span class="number">0</span>,</div><div class="line">                    <span class="attr">y</span>: <span class="number">0</span>,</div><div class="line">                    <span class="attr">radius</span>: <span class="number">8</span>,</div><div class="line">                    <span class="attr">heading</span>: <span class="number">0</span>,</div><div class="line">                    <span class="attr">pps</span>: <span class="number">32</span>,</div><div class="line">                    <span class="attr">lifespan</span>: opt.lifespan || <span class="number">3</span>,</div><div class="line">                    <span class="attr">spawn</span>: opt.spawn || <span class="function"><span class="keyword">function</span> (<span class="params">obj, state</span>) </span>&#123;</div><div class="line">                        obj.active = <span class="literal">true</span>;</div><div class="line">                    &#125;,</div><div class="line">                    <span class="attr">purge</span>: opt.purge || <span class="function"><span class="keyword">function</span> (<span class="params">obj, state</span>) </span>&#123;&#125;,</div><div class="line">                    <span class="attr">update</span>: opt.update || <span class="function"><span class="keyword">function</span> (<span class="params">obj, state, secs</span>) </span>&#123;</div><div class="line">                        obj.x += obj.pps * secs;</div><div class="line">                        obj.lifespan -= secs;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">                i += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> pool;</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="attr">spawn</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pool, game</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> i = pool.length,</div><div class="line">            obj;</div><div class="line">            <span class="keyword">while</span> (i--) &#123;</div><div class="line">                obj = pool[i];</div><div class="line">                <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                    obj.active = <span class="literal">true</span>;</div><div class="line">                    obj.spawn.call(obj, obj, game);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="attr">update</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pool, state, secs</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> i = pool.length,</div><div class="line">            obj;</div><div class="line">            <span class="keyword">while</span> (i--) &#123;</div><div class="line">                obj = pool[i];</div><div class="line">                <span class="keyword">if</span> (obj.active) &#123;</div><div class="line">                    obj.update(obj, state, secs);</div><div class="line">                    obj.lifespan = obj.lifespan &lt; <span class="number">0</span> ? <span class="number">0</span> : obj.lifespan;</div><div class="line">                    <span class="keyword">if</span> (obj.lifespan === <span class="number">0</span>) &#123;</div><div class="line">                        obj.active = <span class="literal">false</span>;</div><div class="line">                        obj.purge.call(obj, obj, state);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<p>As of this writing I am using the pool module to create a pool of display objects for shots that the player can fire by clicking in the inner circle area of the cross object. So I need a way to have a pool of objects that can be reused for the display objects that will represent these shots, and this is for starters what the pool.js module is for.</p>
<h2 id="5-The-game-js-file-for-creating-a-main-game-state-object"><a href="#5-The-game-js-file-for-creating-a-main-game-state-object" class="headerlink" title="5 - The game.js file for creating a main game state object"></a>5 - The game.js file for creating a main game state object</h2><p>So I ending up working out a main game module that will serve as a way to create and set up a main game state module for this canvas example. This module will create a main game state object that will contain an instance of the cross module object, along with a map object, and at least a single object pool for shot objects. This module will also attach a whole bunch of event handers for the canvas element.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gameMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> shotOptions = &#123;</div><div class="line">        <span class="attr">count</span>: <span class="number">20</span>,</div><div class="line">        <span class="comment">// when a shot becomes active</span></div><div class="line">        spawn: <span class="function"><span class="keyword">function</span> (<span class="params">shot, game</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> offset = game.cross.offset,</div><div class="line">            ch = game.cross.crosshairs,</div><div class="line">            d;</div><div class="line">            shot.x = game.canvas.width;</div><div class="line">            shot.y = game.canvas.height;</div><div class="line">            shot.heading = <span class="built_in">Math</span>.atan2(ch.y - shot.y, ch.x - shot.x);</div><div class="line">            d = utils.distance(shot.x, shot.y, ch.x, ch.y);</div><div class="line">            shot.pps = <span class="number">256</span>;</div><div class="line">            shot.lifespan = d / shot.pps;</div><div class="line">            shot.offset = offset;</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// when a shot becomes inactive</span></div><div class="line">        purge: <span class="function"><span class="keyword">function</span> (<span class="params">shot, game</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> cell = mapMod.getWithCanvasPointAndOffset(game.map, shot.x, shot.y, shot.offset.x, shot.offset.y);</div><div class="line">            <span class="keyword">if</span> (cell) &#123;</div><div class="line">                cell.HP -= <span class="number">5</span>;</div><div class="line">                cell.HP = cell.HP &lt; <span class="number">0</span> ? <span class="number">0</span> : cell.HP;</div><div class="line">                <span class="comment">// percent killed</span></div><div class="line">                game.map.percentKilled = <span class="number">0</span>;</div><div class="line">                game.map.cells.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">cell</span>) </span>&#123;</div><div class="line">                    game.map.percentKilled += cell.HP / cell.maxHP;</div><div class="line">                &#125;);</div><div class="line">                game.map.percentKilled /= game.map.cells.length;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// update method for a shot</span></div><div class="line">        update: <span class="function"><span class="keyword">function</span> (<span class="params">shot, game, secs</span>) </span>&#123;</div><div class="line">            shot.x += <span class="built_in">Math</span>.cos(shot.heading) * shot.pps * secs;</div><div class="line">            shot.y += <span class="built_in">Math</span>.sin(shot.heading) * shot.pps * secs;</div><div class="line">            shot.lifespan -= secs;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line"> </div><div class="line">        <span class="attr">create</span>: <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">            opt = opt || &#123;&#125;;</div><div class="line">            <span class="keyword">var</span> game = &#123;</div><div class="line">                <span class="attr">ver</span>: <span class="string">'0.2.0'</span>,</div><div class="line">                <span class="attr">canvas</span>: canvas,</div><div class="line">                <span class="attr">map</span>: mapMod.create(),</div><div class="line">                <span class="attr">cross</span>: &#123;&#125;,</div><div class="line">                <span class="attr">shots</span>: poolMod.create(shotOptions),</div><div class="line">                <span class="attr">shotRate</span>: <span class="number">0.125</span>,</div><div class="line">                <span class="attr">shotSecs</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">userDown</span>: <span class="literal">false</span></div><div class="line">            &#125;;</div><div class="line"> </div><div class="line">            game.cross = crossMod.create(&#123;</div><div class="line">                    <span class="attr">offsetX</span>: game.map.cellWidth * game.map.cellSize / <span class="number">2</span> * <span class="number">-1</span>,</div><div class="line">                    <span class="attr">offsetY</span>: game.map.cellHeight * game.map.cellSize / <span class="number">2</span> * <span class="number">-1</span>,</div><div class="line">                &#125;);</div><div class="line"> </div><div class="line">            game.canvas.addEventListener(<span class="string">'mousedown'</span>, crossMod.createEvent(game.cross, <span class="string">'start'</span>));</div><div class="line">            game.canvas.addEventListener(<span class="string">'mouseup'</span>, crossMod.createEvent(game.cross, <span class="string">'end'</span>));</div><div class="line">            game.canvas.addEventListener(<span class="string">'mousemove'</span>, crossMod.createEvent(game.cross, <span class="string">'move'</span>));</div><div class="line"> </div><div class="line">            game.canvas.addEventListener(<span class="string">'touchstart'</span>, crossMod.createEvent(game.cross, <span class="string">'start'</span>));</div><div class="line">            game.canvas.addEventListener(<span class="string">'touchend'</span>, crossMod.createEvent(game.cross, <span class="string">'end'</span>));</div><div class="line">            game.canvas.addEventListener(<span class="string">'touchmove'</span>, crossMod.createEvent(game.cross, <span class="string">'move'</span>));</div><div class="line"> </div><div class="line">            game.canvas.addEventListener(<span class="string">'mousedown'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">                e.preventDefault();</div><div class="line">                game.userDown = <span class="literal">true</span>;</div><div class="line">            &#125;);</div><div class="line">            game.canvas.addEventListener(<span class="string">'mouseup'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">                e.preventDefault();</div><div class="line">                game.userDown = <span class="literal">false</span>;</div><div class="line">            &#125;);</div><div class="line">            game.canvas.addEventListener(<span class="string">'touchstart'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">                e.preventDefault();</div><div class="line">                game.userDown = <span class="literal">true</span>;</div><div class="line">            &#125;);</div><div class="line">            game.canvas.addEventListener(<span class="string">'touchend'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">                e.preventDefault();</div><div class="line">                game.userDown = <span class="literal">false</span>;</div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">            <span class="keyword">return</span> game;</div><div class="line"> </div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="attr">update</span>: <span class="function"><span class="keyword">function</span> (<span class="params">game, secs</span>) </span>&#123;</div><div class="line">            crossMod.update(game.cross, secs);</div><div class="line">            mapMod.clampOffset(game.map, game.cross.offset);</div><div class="line">            poolMod.update(game.shots, game, secs);</div><div class="line">            game.shotSecs += secs;</div><div class="line">            game.shotSecs = game.shotSecs &gt;= game.shotRate ? game.shotRate : game.shotSecs;</div><div class="line">            <span class="keyword">if</span> (game.shotSecs &gt;= game.shotRate &amp;&amp; game.userDown &amp;&amp; crossMod.isInInner(game.cross)) &#123;</div><div class="line">                poolMod.spawn(game.shots, game);</div><div class="line">                game.shotSecs = <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="4-The-draw-js-file"><a href="#4-The-draw-js-file" class="headerlink" title="4 - The draw.js file"></a>4 - The draw.js file</h2><p>So now that I have mt modules for creating state objects, I will now want a module with methods that are used to draw aspects of these state objects to a canvas element.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> draw = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> drawCrossCircles = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, cross</span>) </span>&#123;</div><div class="line">        ctx.strokeStyle = <span class="string">'white'</span>;</div><div class="line">        ctx.lineWidth = <span class="number">3</span>;</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.arc(cross.center.x, cross.center.y, cross.radiusInner, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">        ctx.stroke();</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.arc(cross.center.x, cross.center.y, cross.radiusOuter, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">        ctx.stroke();</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.arc(cross.crosshairs.x, cross.crosshairs.y, cross.crosshairs.radius, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">        ctx.stroke();</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="comment">// draw background</span></div><div class="line">        back: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas</span>) </span>&#123;</div><div class="line">            ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">            ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// draw cross hairs</span></div><div class="line">        cross: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, cross</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> ch = cross.crosshairs;</div><div class="line">            drawCrossCircles(ctx, cross);</div><div class="line">            ctx.strokeStyle = <span class="string">'rgba(200,0,0,0.5)'</span>;</div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.moveTo(ch.x, ch.y - ch.radius * <span class="number">1.5</span>);</div><div class="line">            ctx.lineTo(ch.x, ch.y + ch.radius * <span class="number">1.5</span>);</div><div class="line">            ctx.stroke();</div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.moveTo(ch.x - ch.radius * <span class="number">1.5</span>, ch.y);</div><div class="line">            ctx.lineTo(ch.x + ch.radius * <span class="number">1.5</span>, ch.y);</div><div class="line">            ctx.stroke();</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// draw map</span></div><div class="line">        map: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, map, cross</span>) </span>&#123;</div><div class="line">            ctx.strokeStyle = <span class="string">'grey'</span>;</div><div class="line">            ctx.lineWidth = <span class="number">3</span>;</div><div class="line">            map.cells.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">cell</span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> x = cell.x * map.cellSize + cross.offset.x + (<span class="number">320</span> / <span class="number">2</span>),</div><div class="line">                y = cell.y * map.cellSize + cross.offset.y + (<span class="number">240</span> / <span class="number">2</span>),</div><div class="line">                per = cell.HP / cell.maxHP;</div><div class="line">                ctx.beginPath();</div><div class="line">                ctx.rect(x, y, map.cellSize, map.cellSize);</div><div class="line">                ctx.stroke();</div><div class="line">                ctx.fillStyle = <span class="string">'rgba(0,200,0,'</span> + per.toFixed(<span class="number">2</span>) + <span class="string">')'</span>;</div><div class="line">                ctx.fill();</div><div class="line">                ctx.closePath();</div><div class="line">            &#125;);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">shots</span>: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, game</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> shots = game.shots,</div><div class="line">            i = shots.length,</div><div class="line">            shot;</div><div class="line">            <span class="keyword">while</span> (i--) &#123;</div><div class="line">                shot = shots[i];</div><div class="line">                ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">                ctx.strokeStyle = <span class="string">'black'</span>;</div><div class="line">                <span class="keyword">if</span> (shot.active) &#123;</div><div class="line">                    ctx.beginPath();</div><div class="line">                    ctx.arc(shot.x, shot.y, shot.radius, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">                    ctx.fill();</div><div class="line">                    ctx.stroke();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// draw info</span></div><div class="line">        info: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, game</span>) </span>&#123;</div><div class="line">            ctx.fillStyle = <span class="string">'rgba(0,0,0,0.4)'</span>;</div><div class="line">            ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, game.canvas.width, game.canvas.height);</div><div class="line">            ctx.fillStyle = <span class="string">'yellow'</span>;</div><div class="line">            ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">            ctx.font = <span class="string">'10px courier'</span>;</div><div class="line">            ctx.fillText(<span class="string">'v'</span> + game.ver, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">            ctx.fillText(<span class="string">'pos: '</span> + game.cross.offset.x.toFixed(<span class="number">2</span>) + <span class="string">','</span> + game.cross.offset.y.toFixed(<span class="number">2</span>), <span class="number">10</span>, <span class="number">20</span>);</div><div class="line">            ctx.fillText(<span class="string">'percent kiled: '</span> + game.map.percentKilled, <span class="number">10</span>, <span class="number">30</span>);</div><div class="line">            ctx.fillText(<span class="string">'shotSecs: '</span> + game.shotSecs, <span class="number">10</span>, <span class="number">40</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="5-Now-for-a-Main-js-file-along-with-a-main-app-loop"><a href="#5-Now-for-a-Main-js-file-along-with-a-main-app-loop" class="headerlink" title="5 - Now for a Main.js file along with a main app loop"></a>5 - Now for a Main.js file along with a main app loop</h2><p>So now I need some additional code to pull everything together here in a main.js file that will be used after everything else is in place to work with. Here I create and inject a canvas element into a hard coded container element that I have in my html. I create instances of a map and cross state objects, and attach a whole bunch of event handers for mouse and touch events using the create event method of the cross module.</p>
<p>I then have an attack method that I will likely work into the map module, or some kind of future module that has to do with a weapons or something to that effect. I do not want to get into to much detail with that because at some point in the future I will just have to re write what I have to say about it when it comes to putting a little more time into this canvas example, because I think this one needs and deserve more work.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>),</div><div class="line">ctx = canvas.getContext(<span class="string">'2d'</span>),</div><div class="line">container = <span class="built_in">document</span>.getElementById(<span class="string">'canvas-app'</span>) || <span class="built_in">document</span>.body;</div><div class="line">container.appendChild(canvas);</div><div class="line">canvas.width = <span class="number">320</span>;</div><div class="line">canvas.height = <span class="number">240</span>;</div><div class="line">ctx.translate(<span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> game = gameMod.create(&#123;</div><div class="line">        <span class="attr">canvas</span>: canvas</div><div class="line">    &#125;);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    t = now - lt,</div><div class="line">    secs = t / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line"> </div><div class="line">    gameMod.update(game, secs);</div><div class="line"> </div><div class="line">    draw.back(ctx, canvas);</div><div class="line">    draw.map(ctx, game.map, game.cross);</div><div class="line">    draw.cross(ctx, game.cross);</div><div class="line">    draw.shots(ctx, game);</div><div class="line">    draw.info(ctx, game);</div><div class="line">    lt = now;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>I then of course have my main app loop where I am using the requestAnimationFrame method, inside the loop method. In this loop method I am updating the state of the cross object and drawing the state of the cross and map objects.</p>
<p>I then have just a little HTML and inline css for the container for the canvas element, or elements at some point in the future if I get into layering with this one.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>canvas example game crosshairs<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"canvas-app"</span> <span class="attr">style</span>=<span class="string">"width:320px;height:240px;margin-left:auto;margin-right:auto;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/utils.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/cross.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/map.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/pool.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/game.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/draw.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>So that is it when this canvas example is up and running I am able to move around and when I click on the map I cause damage to the areas that I click. Nothing to interesting at the point of this writing at least, but I think that this one has some decent potential when it comes to putting a little more time into it. I do have many other canvas examples in a state like this also that need more attention, but I am sure I will come back around to this one at some point.</p>
<h2 id="6-Conclusion"><a href="#6-Conclusion" class="headerlink" title="6 - Conclusion"></a>6 - Conclusion</h2><p>So now I have the basic idea of what I had in mind together at least, now it is just a question of what more I can do to it to make it more interesting. There is making it so that each time the player clicks or touches an area in the inner circle that casues a shot to fire from one side of the canvas or another to the point where such an event happened. So there is adding much more when it comes to weapons and what it is that we are shooting at. In addition there is doing something so that there are units in the map the shoot back at the player also.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2020/07/29/canvas-example-game-crosshairs/" data-id="ckdnrsymt0067icv1cv18wktj" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2020/07/29/canvas-example-game-crosshairs/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/08/01/lodash_isarraylike/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          The lodash is array like method, and array like objects in general
        
      </div>
    </a>
  
  
    <a href="/2020/07/28/vuejs-model/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">The vuejs model directive</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2020/07/29/canvas-example-game-crosshairs/index.html';
    this.page.identifier = '689';
    this.page.title = 'Canvas example of a cross hairs game';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 13px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.5px;">SEO</a> <a href="/tags/angular/" style="font-size: 14px;">angular</a> <a href="/tags/animation/" style="font-size: 12.5px;">animation</a> <a href="/tags/automation/" style="font-size: 12.5px;">automation</a> <a href="/tags/backbone/" style="font-size: 13px;">backbone</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/canvas/" style="font-size: 19px;">canvas</a> <a href="/tags/corejs/" style="font-size: 13.5px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.5px;">ejs</a> <a href="/tags/express/" style="font-size: 17px;">express</a> <a href="/tags/games/" style="font-size: 17.5px;">games</a> <a href="/tags/git/" style="font-size: 12px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15.5px;">hapi</a> <a href="/tags/heroku/" style="font-size: 14px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.5px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.5px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.5px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 13.5px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.5px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.5px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.5px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18px;">phaser</a> <a href="/tags/statistics/" style="font-size: 13px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 16.5px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/08/08/canvas-example-percent-math-log/">Canvas example percent values and Math log</a>
          </li>
        
          <li>
            <a href="/2020/08/03/vuejs-lifecycle-destroyed/">vue destroyed lifecycle hook</a>
          </li>
        
          <li>
            <a href="/2020/08/01/lodash_isarraylike/">The lodash is array like method, and array like objects in general</a>
          </li>
        
          <li>
            <a href="/2020/07/29/canvas-example-game-crosshairs/">Canvas example of a cross hairs game</a>
          </li>
        
          <li>
            <a href="/2020/07/28/vuejs-model/">The vuejs model directive</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas-Examples</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2020/07/29/canvas-example-game-crosshairs/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>