<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>A planet of mine canvas example clone | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2020/04/03/canvas-example-a-planet-of-mine-clone/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This week I wanted to aim for making at least one new canvas example post even if it is just another clone of something, or even just an attempt at a clone of something. I have this idea in my head th">
<meta property="og:type" content="article">
<meta property="og:title" content="A planet of mine canvas example clone">
<meta property="og:url" content="https://dustinpfister.github.io/2020/04/03/canvas-example-a-planet-of-mine-clone/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="This week I wanted to aim for making at least one new canvas example post even if it is just another clone of something, or even just an attempt at a clone of something. I have this idea in my head th">
<meta property="og:updated_time" content="2021-02-14T19:10:23.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A planet of mine canvas example clone">
<meta name="twitter:description" content="This week I wanted to aim for making at least one new canvas example post even if it is just another clone of something, or even just an attempt at a clone of something. I have this idea in my head th">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-canvas-example-a-planet-of-mine-clone" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/03/canvas-example-a-planet-of-mine-clone/" class="article-date"> Published:
  <time datetime="2020-04-03T19:16:00.000Z" itemprop="datePublished">2020-04-03</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2020/04/03/canvas-example-a-planet-of-mine-clone/" class="article-date"> Modified:
  <time datetime="2021-02-14T19:10:23.000Z" itemprop="dateModified">2021-02-14</time>
</a>

    <span class="article-date">V1.32</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      A planet of mine canvas example clone
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>This week I wanted to aim for making at least one new <a href="/2020/03/23/canvas-example/">canvas example</a> post even if it is just another clone of something, or even just an attempt at a clone of something. I have this idea in my head that if I make enough of these I will end up with one or two that I will end up moving forward with into some kind of long term, interesting project that will be worth further investment of time. In the process of doing so I will likely end up with a whole bunch of canvas examples that will never progress beyond a simple prototype state of sorts.</p>
<p>I do not spend that much time playing games these days, but I do have a few installed on my phone and one that I have been playing around with a little is called <a href="https://play.google.com/store/apps/details?id=com.tuesdayquest.myplanet&amp;hl=en_US" target="_blank" rel="external">a planet of mine</a> for android.</p>
<p>The game is a pretty cool concept you have a starting world and two starting workers that can be used to build structures on land tiles of the world. There are many resources that can be gathered, one of which is used to power a rocket ship that can be used to go to another world in a solar system. There is even more to it than that, but that is the basic idea of the game.</p>
<p>I liked the game so much that I though I would start to work on a clone of the game that is not all that different from it. I was not able to clone every aspect of the game, but I did get to a very basic working first prototype of the concept thus far. If I get around to it I might come back to this one at some point in the future as i keep making canvas examples like these in a effort to try to find something that I would not mind working on for a while longer.</p>
<a id="more"></a>
<p><div id="canvas-app"></div></p>
<script src="/js/canvas-examples/a-planet-of-mine-clone/0.1.0/pkg.js"></script>


<h2 id="1-The-state-machine-for-this-clone-of-a-planet-of-mine"><a href="#1-The-state-machine-for-this-clone-of-a-planet-of-mine" class="headerlink" title="1 - The state machine for this clone of a planet of mine"></a>1 - The state machine for this clone of a planet of mine</h2><p>For this canvas example I went with using a basic state machine design that I worked out in a previous <a href="/2020/01/28/canvas-example-state-machine/">post on canvas and state machines</a>. I added a few changes though so this will not just be a copy and past type thing from that project. I do not always bother with adding a state machine asset of some kind with many of these canvas examples, but I have found that this one might need it if I continue working on this one to the point that it would be a done deal.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Machine = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// TOOLS</span></div><div class="line"> </div><div class="line">    <span class="comment">// find out if the given to sets of</span></div><div class="line">    <span class="comment">// box areas overlap or not</span></div><div class="line">    <span class="keyword">var</span> boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, w1, h1, x2, y2, w2, h2</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> !(</div><div class="line">            (y1 + h1) &lt; y2 ||</div><div class="line">            y1 &gt; (y2 + h2) ||</div><div class="line">            (x1 + w1) &lt; x2 ||</div><div class="line">            x1 &gt; (x2 + w2));</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// standard distance formula</span></div><div class="line">    <span class="keyword">var</span> distance = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, x2, y2</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow(x1 - x2, <span class="number">2</span>) + <span class="built_in">Math</span>.pow(y1 - y2, <span class="number">2</span>));</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// PARSE arguments</span></div><div class="line"> </div><div class="line">    <span class="comment">// Parse a container argument</span></div><div class="line">    <span class="keyword">var</span> parseContainer = <span class="function"><span class="keyword">function</span> (<span class="params">container</span>) </span>&#123;</div><div class="line">        <span class="comment">// if object assume element that is to be used as the container</span></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> container === <span class="string">'object'</span> &amp;&amp; container != <span class="literal">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> container;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// if string assume id</span></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> container === <span class="string">'string'</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="built_in">document</span>.getElementById(container);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// if we get this far return document.body</span></div><div class="line">        <span class="keyword">return</span> <span class="built_in">document</span>.body;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// CANVAS</span></div><div class="line"> </div><div class="line">    <span class="comment">// create a canvas for the given state machine</span></div><div class="line">    <span class="keyword">var</span> createCanvas = <span class="function"><span class="keyword">function</span> (<span class="params">sm, w, h</span>) </span>&#123;</div><div class="line">        sm.canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">        sm.ctx = sm.canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">        sm.container.appendChild(sm.canvas);</div><div class="line">        sm.canvas.width = w || <span class="number">320</span>;</div><div class="line">        sm.canvas.height = h || <span class="number">240</span>;</div><div class="line">        <span class="comment">// fill black for starters</span></div><div class="line">        sm.ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">        sm.ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, sm.canvas.width, sm.canvas.height);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// get canvas relative point</span></div><div class="line">    <span class="keyword">var</span> getCanvasRelative = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> canvas = e.target,</div><div class="line">        bx = canvas.getBoundingClientRect();</div><div class="line">        <span class="keyword">var</span> x = (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientX : e.clientX) - bx.left,</div><div class="line">        y = (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientY : e.clientY) - bx.top;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">x</span>: x,</div><div class="line">            <span class="attr">y</span>: y,</div><div class="line">            <span class="attr">bx</span>: bx</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// attach a canvas event</span></div><div class="line">    <span class="keyword">var</span> attachCanvasEvent = <span class="function"><span class="keyword">function</span> (<span class="params">sm, DOMType, smType</span>) </span>&#123;</div><div class="line">        sm.canvas.addEventListener(DOMType, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">var</span> stateObj = sm.states[sm.currentState],</div><div class="line">            pt = &#123;&#125;, <span class="comment">// pointer API</span></div><div class="line">            handler,</div><div class="line">            mode;</div><div class="line">            pt.pos = getCanvasRelative(e);</div><div class="line"> </div><div class="line">            pt.overlap = <span class="function"><span class="keyword">function</span> (<span class="params">x, y, w, h</span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> boundingBox(pt.pos.x, pt.pos.y, <span class="number">1</span>, <span class="number">1</span>, x, y, w, h);</div><div class="line">            &#125;;</div><div class="line"> </div><div class="line">            pt.distance = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> distance(pt.pos.x, pt.pos.y, x, y);</div><div class="line">            &#125;;</div><div class="line"> </div><div class="line">            <span class="comment">// prevent default</span></div><div class="line">            e.preventDefault();</div><div class="line">            <span class="comment">// call top level if there</span></div><div class="line">            <span class="keyword">if</span> (stateObj.userPointer) &#123;</div><div class="line">                handler = stateObj.userPointer[smType];</div><div class="line">                <span class="keyword">if</span> (handler) &#123;</div><div class="line">                    handler(pt, sm, e);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// call for current mode if there</span></div><div class="line">            <span class="keyword">if</span> (stateObj.modes &amp;&amp; sm.currentMode) &#123;</div><div class="line">                mode = stateObj.modes[sm.currentMode];</div><div class="line">                <span class="keyword">if</span> (mode.userPointer) &#123;</div><div class="line">                    handler = mode.userPointer[smType];</div><div class="line">                    <span class="keyword">if</span> (handler) &#123;</div><div class="line">                        handler(pt, sm, e);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// attach canvas events for the given state machine</span></div><div class="line">    <span class="keyword">var</span> attachAllCanvasEvents = <span class="function"><span class="keyword">function</span> (<span class="params">sm</span>) </span>&#123;</div><div class="line">        attachCanvasEvent(sm, <span class="string">'mousedown'</span>, <span class="string">'start'</span>);</div><div class="line">        attachCanvasEvent(sm, <span class="string">'mousemove'</span>, <span class="string">'move'</span>);</div><div class="line">        attachCanvasEvent(sm, <span class="string">'mouseup'</span>, <span class="string">'end'</span>);</div><div class="line">        attachCanvasEvent(sm, <span class="string">'touchstart'</span>, <span class="string">'start'</span>);</div><div class="line">        attachCanvasEvent(sm, <span class="string">'touchmove'</span>, <span class="string">'move'</span>);</div><div class="line">        attachCanvasEvent(sm, <span class="string">'touchend'</span>, <span class="string">'end'</span>);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// create a new state machine</span></div><div class="line">    <span class="keyword">var</span> api = <span class="function"><span class="keyword">function</span> (<span class="params">container, w, h</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="comment">// state machine Object</span></div><div class="line">        <span class="keyword">var</span> sm = &#123;</div><div class="line">            <span class="attr">currentState</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">currentMode</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">game</span>: &#123;&#125;,</div><div class="line">            <span class="attr">solar</span>: &#123;&#125;, <span class="comment">// solar object</span></div><div class="line">            draw: &#123;&#125;,</div><div class="line">            <span class="attr">states</span>: &#123;&#125;,</div><div class="line">            <span class="attr">canvas</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">container</span>: parseContainer(container),</div><div class="line">            <span class="attr">ctx</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">load</span>: <span class="function"><span class="keyword">function</span> (<span class="params">stateObj</span>) </span>&#123;</div><div class="line">                <span class="comment">// just reference the object for now as long as</span></div><div class="line">                <span class="comment">// that works okay</span></div><div class="line">                sm.states[stateObj.name || <span class="string">'game'</span>] = stateObj;</div><div class="line">                <span class="keyword">if</span> (stateObj.bootState) &#123;</div><div class="line">                    sm.currentState = stateObj.name;</div><div class="line">                &#125;</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">start</span>: <span class="function"><span class="keyword">function</span> (<span class="params">stateName</span>) </span>&#123;</div><div class="line">                sm.currentState = stateName || sm.currentState;</div><div class="line">                <span class="keyword">var</span> init = sm.states[sm.currentState].init || <span class="literal">null</span>;</div><div class="line">                <span class="keyword">if</span> (init) &#123;</div><div class="line">                    init(sm);</div><div class="line">                &#125;</div><div class="line">                loop();</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line"> </div><div class="line">        <span class="comment">// create canvas and attach event handlers</span></div><div class="line">        createCanvas(sm, w, h);</div><div class="line">        attachAllCanvasEvents(sm);</div><div class="line"> </div><div class="line">        <span class="comment">// main loop</span></div><div class="line">        <span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            requestAnimationFrame(loop);</div><div class="line">            <span class="keyword">var</span> stateObj = sm.states[sm.currentState] || &#123;&#125;;</div><div class="line"> </div><div class="line">            <span class="comment">// call top level tick</span></div><div class="line">            <span class="keyword">if</span> (stateObj.tick) &#123;</div><div class="line">                stateObj.tick(sm);</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">            <span class="comment">// call mode tick</span></div><div class="line">            <span class="keyword">if</span> (stateObj.modes &amp;&amp; sm.currentMode) &#123;</div><div class="line">                <span class="keyword">var</span> mode = stateObj.modes[sm.currentMode];</div><div class="line">                <span class="keyword">if</span> (mode.tick) &#123;</div><div class="line">                    mode.tick(sm);</div><div class="line">                &#125;;</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> sm;</div><div class="line"> </div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// append tools so they can be used outside of the module if need be</span></div><div class="line">    api.boundingBox = boundingBox;</div><div class="line">    api.distance = distance;</div><div class="line"> </div><div class="line">    <span class="comment">// return the public API</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<p>Now that I have my state machine I can get to work with a main game state object for this project. I will want a module that is used for a world object, and then another that will be for the solar system that will be a collection of world objects and thus will be a top level object.</p>
<h2 id="2-The-world-module"><a href="#2-The-world-module" class="headerlink" title="2 - The world module"></a>2 - The world module</h2><p>There will need to be a module that will contain all the logic that is needed to create, and update a state object for all the properties that have to do with a world. A world will contain a number of land objects, each land object might have one ore more workers on it.</p>
<p>A land Object might have one of several items built on it. the choice of items have to do with extracting resources from the land tile, or producing some kine of renewable resource.</p>
<h3 id="2-1-The-start-of-the-world-module-and-the-item-database"><a href="#2-1-The-start-of-the-world-module-and-the-item-database" class="headerlink" title="2.1 - The start of the world module and the item database"></a>2.1 - The start of the world module and the item database</h3><p>At the top of the module I have a crude item database in the form of an array literal. I am not completely sure how this might evolve as I continue to work on this example now and then, so for now each item just has a description, a max workers property, and some additional values that outline what the item does.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> worldMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> itemDataBase = [</div><div class="line">        <span class="comment">// item objects</span></div><div class="line">        &#123;</div><div class="line">            <span class="attr">i</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">desc</span>: <span class="string">'ship'</span>,</div><div class="line">            <span class="attr">maxWorkers</span>: <span class="number">2</span></div><div class="line">        &#125;, &#123;</div><div class="line">            <span class="attr">i</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">desc</span>: <span class="string">'house'</span>,</div><div class="line">            <span class="attr">maxWorkers</span>: <span class="number">0</span></div><div class="line">        &#125;, &#123;</div><div class="line">            <span class="attr">i</span>: <span class="number">2</span>,</div><div class="line">            <span class="attr">desc</span>: <span class="string">'mine'</span>,</div><div class="line">            <span class="attr">maxWorkers</span>: <span class="number">3</span>,</div><div class="line">            <span class="attr">getSolids</span>: <span class="literal">true</span></div><div class="line">        &#125;, &#123;</div><div class="line">            <span class="attr">i</span>: <span class="number">3</span>,</div><div class="line">            <span class="attr">desc</span>: <span class="string">'farm'</span>,</div><div class="line">            <span class="attr">maxWorkers</span>: <span class="number">1</span></div><div class="line">        &#125;, &#123;</div><div class="line">            <span class="attr">i</span>: <span class="number">4</span>,</div><div class="line">            <span class="attr">desc</span>: <span class="string">'well'</span>,</div><div class="line">            <span class="attr">maxWorkers</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">getLiquids</span>: <span class="literal">true</span></div><div class="line">        &#125;, &#123;</div><div class="line">            <span class="attr">i</span>: <span class="number">5</span>,</div><div class="line">            <span class="attr">desc</span>: <span class="string">'trees'</span>,</div><div class="line">            <span class="attr">maxWorkers</span>: <span class="number">1</span></div><div class="line">        &#125;, &#123;</div><div class="line">            <span class="attr">i</span>: <span class="number">6</span>,</div><div class="line">            <span class="attr">desc</span>: <span class="string">'berries'</span>,</div><div class="line">            <span class="attr">maxWorkers</span>: <span class="number">1</span></div><div class="line">        &#125;</div><div class="line">    ];</div></pre></td></tr></table></figure>
<h3 id="2-2-Create-land-and-worker-objects"><a href="#2-2-Create-land-and-worker-objects" class="headerlink" title="2.2 - Create land and worker objects"></a>2.2 - Create land and worker objects</h3><p>So I have helpers that are used to create a single worker object, and a single land object. The worker object thus far is just values that have to do with the size of the display object that repentants the worker. Beyond that it is more about where the worker is rather than its values, at least so far when it comes to this canvas example.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// create a worker object</span></div><div class="line"><span class="keyword">var</span> createWorkerObject = <span class="function"><span class="keyword">function</span> (<span class="params">parent</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">actionsPerTick</span>: <span class="number">1</span>,</div><div class="line">        <span class="attr">parent</span>: parent,</div><div class="line">        <span class="attr">pos</span>: &#123; <span class="comment">// position relative to canvas</span></div><div class="line">            x: <span class="number">0</span>,</div><div class="line">            <span class="attr">y</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">w</span>: <span class="number">32</span>,</div><div class="line">            <span class="attr">h</span>: <span class="number">32</span></div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// create a land object</span></div><div class="line"><span class="keyword">var</span> createLandObject = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    opt.pos = opt.pos || &#123;&#125;;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">itemIndex</span>: opt.itemIndex === <span class="literal">undefined</span> ? <span class="literal">null</span> : opt.itemIndex,</div><div class="line">        <span class="attr">workers</span>: [],</div><div class="line">        <span class="attr">maxWorkers</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">actionRate</span>: <span class="number">3</span>, <span class="comment">// worker actions per rotation</span></div><div class="line">        pos: &#123;</div><div class="line">            <span class="attr">x</span>: opt.pos.x || <span class="number">0</span>,</div><div class="line">            <span class="attr">y</span>: opt.pos.y || <span class="number">0</span>,</div><div class="line">            <span class="attr">w</span>: opt.pos.w || <span class="number">64</span>,</div><div class="line">            <span class="attr">h</span>: opt.pos.h || <span class="number">128</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">groundType</span>: opt.groundType || <span class="string">'grass'</span>,</div><div class="line">        <span class="attr">solidCount</span>: opt.solidCount || <span class="number">0</span>,</div><div class="line">        <span class="attr">liquidCount</span>: opt.liquidCount || <span class="number">0</span></div><div class="line">    &#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-3-Set-land-item-and-create-worker-helpers"><a href="#2-3-Set-land-item-and-create-worker-helpers" class="headerlink" title="2.3 - Set land item and create worker helpers"></a>2.3 - Set land item and create worker helpers</h3><p>These are methods for setting land tile index, and creating a new worker that is to be pushed to the free workers array.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// set the item index for the given land</span></div><div class="line"><span class="keyword">var</span> setLandItem = <span class="function"><span class="keyword">function</span> (<span class="params">land, itemIndex</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> item = itemDataBase[itemIndex];</div><div class="line">    land.itemIndex = itemIndex;</div><div class="line">    land.maxWorkers = item.maxWorkers;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// create a new worker</span></div><div class="line"><span class="keyword">var</span> createWorker = <span class="function"><span class="keyword">function</span> (<span class="params">world</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> fw = world.freeWorkers,</div><div class="line">    len = fw.workers.length;</div><div class="line">    <span class="keyword">if</span> (len &lt; fw.maxWorkers) &#123;</div><div class="line">        <span class="keyword">var</span> worker = createWorkerObject(fw);</div><div class="line">        worker.pos.x = fw.pos.x + len * (<span class="number">32</span> + <span class="number">1</span>);</div><div class="line">        worker.pos.y = fw.pos.y;</div><div class="line">        fw.workers.push(worker);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-4-Position-Workers"><a href="#2-4-Position-Workers" class="headerlink" title="2.4 - Position Workers"></a>2.4 - Position Workers</h3><p>Position the workers of the given area so that they are stacked relative to the current position of the area.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> positionWorkers = <span class="function"><span class="keyword">function</span> (<span class="params">area</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> dx = <span class="number">0</span>,</div><div class="line">    dy = <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span> (area.groundType === <span class="string">'freearea'</span>) &#123;</div><div class="line">        dx = <span class="number">1</span>;</div><div class="line">        dy = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    area.workers.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">worker, i</span>) </span>&#123;</div><div class="line">        worker.pos.x = area.pos.x + (i * <span class="number">32</span> * dx);</div><div class="line">        worker.pos.y = area.pos.y + (i * <span class="number">32</span> * dy);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-5-The-create-world-land-helper"><a href="#2-5-The-create-world-land-helper" class="headerlink" title="2.5 - The create world land helper"></a>2.5 - The create world land helper</h3><p>This helper method is what is called to create the lands array of the world object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> createWorldLand = <span class="function"><span class="keyword">function</span> (<span class="params">world</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> len = world.landCount || <span class="number">8</span>,</div><div class="line">    lands = [],</div><div class="line">    i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (i &lt; len) &#123;</div><div class="line">        lands.push(createLandObject(&#123;</div><div class="line">                <span class="attr">pos</span>: &#123;</div><div class="line">                    <span class="attr">x</span>: <span class="number">32</span> + i * (<span class="number">64</span> + <span class="number">2</span>),</div><div class="line">                    <span class="attr">y</span>: <span class="number">120</span>,</div><div class="line">                    <span class="attr">w</span>: <span class="number">64</span>,</div><div class="line">                    <span class="attr">h</span>: <span class="number">96</span></div><div class="line">                &#125;,</div><div class="line">                <span class="attr">solidCount</span>: <span class="number">10</span>,</div><div class="line">                <span class="attr">liquidCount</span>: <span class="number">10</span></div><div class="line">            &#125;));</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// start with a ship on land 0 with two workers</span></div><div class="line">    setLandItem(lands[<span class="number">0</span>], <span class="number">0</span>);</div><div class="line">    setLandItem(lands[<span class="number">1</span>], <span class="number">2</span>);</div><div class="line">    setLandItem(lands[<span class="number">2</span>], <span class="number">2</span>);</div><div class="line">    createWorker(world);</div><div class="line">    createWorker(world);</div><div class="line">    createWorker(world);</div><div class="line">    <span class="keyword">return</span> lands;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-6-The-public-API-of-the-World-module"><a href="#2-6-The-public-API-of-the-World-module" class="headerlink" title="2.6 - The public API of the World module"></a>2.6 - The public API of the World module</h3><p>So for the public API of the world module thus far I just have a create method.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line">    return &#123;</div><div class="line">        create: function (solar) &#123;</div><div class="line">            var world = &#123;</div><div class="line">                solar: solar,</div><div class="line">                landCount: 4,</div><div class="line">                lands: [],</div><div class="line">                moveWorker: null,</div><div class="line">                rotationRate: 1,</div><div class="line">                rotationPer: 0,</div><div class="line">                deltaEXP: 100,</div><div class="line">                freeWorkers: &#123;</div><div class="line">                    pos: &#123;</div><div class="line">                        x: 32,</div><div class="line">                        y: 32,</div><div class="line">                        w: 100,</div><div class="line">                        h: 50</div><div class="line">                    &#125;,</div><div class="line">                    groundType: &apos;freearea&apos;,</div><div class="line">                    maxWorkers: 3,</div><div class="line">                    workers: [],</div><div class="line">                &#125;</div><div class="line">            &#125;;</div><div class="line"> </div><div class="line">            // move a worker</div><div class="line">            world.moveWoker = function (worker, newArea) &#123;</div><div class="line">                var i = worker.parent.workers.length;</div><div class="line">                while (i--) &#123;</div><div class="line">                    var w = worker.parent.workers[i];</div><div class="line">                    if (w === worker) &#123;</div><div class="line">                        worker.parent.workers.splice(i, 1);</div><div class="line">                        positionWorkers(worker.parent);</div><div class="line">                        worker.parent = newArea;</div><div class="line">                        newArea.workers.push(worker);</div><div class="line">                        positionWorkers(newArea);</div><div class="line">                        break;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                return true;</div><div class="line">            &#125;;</div><div class="line"> </div><div class="line">            // create worker</div><div class="line">            world.createWorker = function () &#123;</div><div class="line">                createWorker(world);</div><div class="line">            &#125;;</div><div class="line"> </div><div class="line">            world.lands = createWorldLand(world);</div><div class="line"> </div><div class="line">            // what to do for each tick</div><div class="line">            world.onTickEnd = function (solar, ticks) &#123;</div><div class="line">                world.lands.forEach(function (land) &#123;</div><div class="line">                    var item = itemDataBase[land.itemIndex] || &#123;&#125;,</div><div class="line">                    workerCount = land.workers.length;</div><div class="line">                    if (item.getSolids &amp;&amp; workerCount &gt;= 1) &#123;</div><div class="line">                        if (land.solidCount &gt; 0) &#123;</div><div class="line">                            if (land.solidCount &gt;= workerCount) &#123;</div><div class="line">                                land.solidCount -= workerCount;</div><div class="line">                                solar.resources.solid += workerCount;</div><div class="line">                            &#125; else &#123;</div><div class="line">                                solar.resources.solid += land.solidCount;</div><div class="line">                                land.solidCount = 0;</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">            &#125;;</div><div class="line"> </div><div class="line">            // what to do on main solar tick progress</div><div class="line">            world.onTickProgress = function (solar, ticks, tickProgress) &#123;</div><div class="line">                world.rotationPer = (ticks + tickProgress) % world.rotationRate / world.rotationRate;</div><div class="line">                world.rotationPer = world.rotationPer &gt;= 1 ? 1 : world.rotationPer;</div><div class="line">                if (tickProgress &gt;= 1) &#123;</div><div class="line">                    console.log(&apos;yes&apos;);</div><div class="line">                    // add world deltaEXP to main solar.exp</div><div class="line">                    solar.exp += world.deltaEXP;</div><div class="line">                &#125;</div><div class="line">            &#125;;</div><div class="line"> </div><div class="line">            return world;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="3-The-solar-module"><a href="#3-The-solar-module" class="headerlink" title="3 - The solar module"></a>3 - The solar module</h2><p>Although I did not get around to developing this part of the game, here is the current standing solar module. If I get around to it this module will eventually turn into everything tht has to do with a collection of world objects.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> solarMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line"> </div><div class="line">        <span class="attr">create</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">var</span> solar = &#123;</div><div class="line">                <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">                <span class="attr">tickRate</span>: <span class="number">10000</span>,</div><div class="line">                <span class="attr">ticks</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">t</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">tPer</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">currentWorldIndex</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">currentWorld</span>: &#123;&#125;,</div><div class="line">                <span class="attr">exp</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">resources</span>: &#123;</div><div class="line">                    <span class="attr">solid</span>: <span class="number">0</span>,</div><div class="line">                    <span class="attr">liquid</span>: <span class="number">0</span>,</div><div class="line">                    <span class="attr">wood</span>: <span class="number">0</span>,</div><div class="line">                    <span class="attr">raspberries</span>: <span class="number">500</span></div><div class="line">                &#125;</div><div class="line">            &#125;;</div><div class="line"> </div><div class="line">            solar.worlds = [];</div><div class="line">            solar.worlds.push(worldMod.create(solar));</div><div class="line">            solar.currentWorld = solar.worlds[solar.currentWorldIndex];</div><div class="line">            <span class="keyword">return</span> solar;</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="attr">update</span>: <span class="function"><span class="keyword">function</span> (<span class="params">solar</span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">            t = now - solar.lt;</div><div class="line">            solar.t = t;</div><div class="line">            solar.tPer = t / solar.tickRate;</div><div class="line">            solar.tPer = solar.tPer &gt; <span class="number">1</span> ? <span class="number">1</span> : solar.tPer;</div><div class="line"> </div><div class="line">            <span class="comment">// make sure current world, is also currentWorld Index</span></div><div class="line">            solar.currentWorld = solar.worlds[solar.currentWorldIndex];</div><div class="line"> </div><div class="line">            <span class="comment">// for each world</span></div><div class="line">            solar.worlds.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">world</span>) </span>&#123;</div><div class="line">                world.onTickProgress(solar, solar.ticks, solar.tPer);</div><div class="line">                <span class="keyword">if</span> (solar.tPer === <span class="number">1</span>) &#123;</div><div class="line">                    world.onTickEnd(solar, solar.ticks);</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line"> </div><div class="line">            <span class="comment">// if tPer === 1</span></div><div class="line">            <span class="keyword">if</span> (solar.tPer === <span class="number">1</span>) &#123;</div><div class="line">                solar.ticks += <span class="number">1</span>;</div><div class="line">                solar.lt = now;</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ())</div></pre></td></tr></table></figure>
<h2 id="4-The-draw-module"><a href="#4-The-draw-module" class="headerlink" title="4 - The draw module"></a>4 - The draw module</h2><p>Now for the draw module that is used to draw the current state of the solar and current world object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> draw = &#123;&#125;;</div><div class="line"> </div><div class="line">draw.back = <span class="function"><span class="keyword">function</span> (<span class="params">sm</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = sm.canvas,</div><div class="line">    ctx = sm.ctx;</div><div class="line">    ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">draw.tickProgress = <span class="function"><span class="keyword">function</span> (<span class="params">sm</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = sm.canvas,</div><div class="line">    ctx = sm.ctx,</div><div class="line">    solar = sm.solar,</div><div class="line">    world = solar.currentWorld;</div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width * solar.tPer, <span class="number">10</span>);</div><div class="line">    ctx.fillStyle = <span class="string">'green'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">10</span>, canvas.width * world.rotationPer, <span class="number">10</span>);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line">draw.world = <span class="function"><span class="keyword">function</span> (<span class="params">sm</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = sm.canvas,</div><div class="line">    ctx = sm.ctx,</div><div class="line">    solar = sm.solar,</div><div class="line">    i = <span class="number">0</span>,</div><div class="line">    world = solar.currentWorld,</div><div class="line">    land;</div><div class="line">    <span class="comment">// draw freeWokers area</span></div><div class="line">    <span class="keyword">var</span> pos = world.freeWorkers.pos;</div><div class="line">    ctx.fillStyle = <span class="string">'grey'</span>;</div><div class="line">    ctx.fillRect(pos.x, pos.y, pos.w, pos.h);</div><div class="line">    <span class="comment">// draw land</span></div><div class="line">    <span class="keyword">while</span> (i &lt; world.lands.length) &#123;</div><div class="line">        land = world.lands[i];</div><div class="line">        ctx.fillStyle = <span class="string">'green'</span>;</div><div class="line">        ctx.fillRect(land.pos.x, land.pos.y, land.pos.w, land.pos.h);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    world.lands.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">land</span>) </span>&#123;</div><div class="line">        land.workers.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">worker</span>) </span>&#123;</div><div class="line">            ctx.fillStyle = <span class="string">'blue'</span>;</div><div class="line">            ctx.fillRect(worker.pos.x, worker.pos.y, worker.pos.w, worker.pos.h);</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">// draw free workers</span></div><div class="line">    world.freeWorkers.workers.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">worker</span>) </span>&#123;</div><div class="line">        ctx.fillStyle = <span class="string">'red'</span>;</div><div class="line">        ctx.fillRect(worker.pos.x, worker.pos.y, worker.pos.w, worker.pos.h);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">draw.solar = <span class="function"><span class="keyword">function</span> (<span class="params">sm</span>) </span>&#123;&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// debug info for solar object properties</span></div><div class="line">draw.debugSolar = <span class="function"><span class="keyword">function</span> (<span class="params">sm</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = sm.canvas,</div><div class="line">    ctx = sm.ctx,</div><div class="line">    solar = sm.solar,</div><div class="line">    world = sm.currentWorld;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> text = <span class="string">''</span>;</div><div class="line">    <span class="built_in">Object</span>.keys(solar.resources).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">resourceName</span>) </span>&#123;</div><div class="line">        text += resourceName + <span class="string">':'</span> + solar.resources[resourceName] + <span class="string">'; '</span>;</div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.fillText(text, <span class="number">5</span>, <span class="number">15</span>);</div><div class="line">    ctx.fillText(<span class="string">'exp: '</span> + solar.exp, <span class="number">5</span>, <span class="number">30</span>);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// debug info for land</span></div><div class="line">draw.debugLand = <span class="function"><span class="keyword">function</span> (<span class="params">sm</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = sm.canvas,</div><div class="line">    ctx = sm.ctx,</div><div class="line">    solar = sm.solar,</div><div class="line">    world = solar.currentWorld;</div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    world.lands.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">land</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> pos = land.pos;</div><div class="line">        ctx.fillText(<span class="string">'workers: '</span> + land.workers.length + <span class="string">'/'</span> + land.maxWorkers, pos.x, pos.y);</div><div class="line">        ctx.fillText(<span class="string">'solids: '</span> + land.solidCount, pos.x, pos.y + <span class="number">10</span>);</div><div class="line">        ctx.fillText(<span class="string">'liquids: '</span> + land.liquidCount, pos.x, pos.y + <span class="number">20</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="5-The-game-js-state-file-and-index-html"><a href="#5-The-game-js-state-file-and-index-html" class="headerlink" title="5 - The game.js state file and index.html"></a>5 - The game.js state file and index.html</h2><p>So now for the state object for the main game state, and some HTML to pull this all together into a working canvas example.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> sm = Machine(<span class="string">'gamearea'</span>);</div><div class="line"> </div><div class="line">sm.load(&#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'game'</span>,</div><div class="line">    <span class="attr">bootState</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">init</span>: <span class="function"><span class="keyword">function</span> (<span class="params">sm</span>) </span>&#123;</div><div class="line"> </div><div class="line">        sm.solar = solarMod.create();</div><div class="line"> </div><div class="line">    &#125;,</div><div class="line">    <span class="attr">tick</span>: <span class="function"><span class="keyword">function</span> (<span class="params">sm</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">var</span> ctx = sm.ctx;</div><div class="line"> </div><div class="line">        solarMod.update(sm.solar);</div><div class="line"> </div><div class="line">        <span class="comment">// draw background, world, and more</span></div><div class="line">        draw.back(sm);</div><div class="line">        draw.world(sm);</div><div class="line">        draw.tickProgress(sm);</div><div class="line">        draw.debugLand(sm);</div><div class="line">        draw.debugSolar(sm);</div><div class="line"> </div><div class="line">    &#125;,</div><div class="line">    <span class="attr">userPointer</span>: &#123;</div><div class="line">        <span class="attr">start</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pt, sm, e</span>) </span>&#123;</div><div class="line"> </div><div class="line">            <span class="keyword">var</span> world = sm.solar.currentWorld;</div><div class="line"> </div><div class="line">            <span class="comment">// free worker area</span></div><div class="line">            <span class="keyword">var</span> fw = world.freeWorkers;</div><div class="line">            <span class="keyword">if</span> (pt.overlap(fw.pos.x, fw.pos.y, fw.pos.w, fw.pos.h)) &#123;</div><div class="line">                <span class="keyword">var</span> len = fw.workers.length;</div><div class="line">                <span class="keyword">if</span> (len &gt; <span class="number">0</span>) &#123;</div><div class="line">                    <span class="comment">// select free worker?</span></div><div class="line">                    <span class="keyword">var</span> i = len;</div><div class="line">                    <span class="keyword">while</span> (i--) &#123;</div><div class="line">                        <span class="keyword">var</span> worker = fw.workers[i],</div><div class="line">                        pos = worker.pos;</div><div class="line">                        <span class="keyword">if</span> (pt.overlap(pos.x, pos.y, pos.w, pos.h)) &#123;</div><div class="line">                            world.moveWorker = worker;</div><div class="line">                            <span class="keyword">break</span>;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="comment">// create new worker?</span></div><div class="line">                    <span class="comment">//console.log('new worker?');</span></div><div class="line">                    world.createWorker();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">            <span class="comment">// land worker?</span></div><div class="line">            <span class="keyword">var</span> li = world.lands.length;</div><div class="line">            lands: <span class="keyword">while</span> (li--) &#123;</div><div class="line">                <span class="keyword">var</span> land = world.lands[li],</div><div class="line">                wi = land.workers.length;</div><div class="line">                <span class="keyword">while</span> (wi--) &#123;</div><div class="line">                    <span class="keyword">var</span> worker = land.workers[wi],</div><div class="line">                    pos = worker.pos;</div><div class="line">                    <span class="keyword">if</span> (pt.overlap(pos.x, pos.y, pos.w, pos.h)) &#123;</div><div class="line">                        world.moveWorker = worker;</div><div class="line">                        <span class="keyword">break</span> lands;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;,</div><div class="line">        <span class="attr">move</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pt, sm, e</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> world = sm.solar.currentWorld;</div><div class="line"> </div><div class="line">            <span class="keyword">if</span> (world.moveWorker) &#123;</div><div class="line">                world.moveWorker.pos.x = pt.pos.x - <span class="number">16</span>;</div><div class="line">                world.moveWorker.pos.y = pt.pos.y - <span class="number">16</span>;</div><div class="line">            &#125;</div><div class="line"> </div><div class="line">        &#125;,</div><div class="line">        <span class="attr">end</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pt, sm, e</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> world = sm.solar.currentWorld;</div><div class="line"> </div><div class="line">            <span class="keyword">if</span> (world.moveWorker) &#123;</div><div class="line"> </div><div class="line">                world.moveWoker(world.moveWorker, world.moveWorker.parent);</div><div class="line"> </div><div class="line">                <span class="comment">// over land with moveWorker?</span></div><div class="line">                <span class="keyword">var</span> i = world.lands.length;</div><div class="line">                <span class="keyword">while</span> (i--) &#123;</div><div class="line">                    <span class="keyword">var</span> land = world.lands[i],</div><div class="line">                    pos = land.pos;</div><div class="line">                    <span class="keyword">if</span> (pt.overlap(pos.x, pos.y, pos.w, pos.h)) &#123;</div><div class="line">                        <span class="keyword">if</span> (land.workers.length + <span class="number">1</span> &gt; land.maxWorkers) &#123;</div><div class="line">                            <span class="keyword">break</span>;</div><div class="line">                        &#125;</div><div class="line">                        world.moveWoker(world.moveWorker, land);</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line"> </div><div class="line">                <span class="comment">// over freeWorkers</span></div><div class="line">                <span class="keyword">var</span> pos = world.freeWorkers.pos;</div><div class="line">                <span class="keyword">if</span> (pt.overlap(pos.x, pos.y, pos.w, pos.h)) &#123;</div><div class="line">                    <span class="keyword">if</span> (!(world.freeWorkers.length + <span class="number">1</span> &gt; world.freeWorkers.maxWorkers)) &#123;</div><div class="line">                        world.moveWoker(world.moveWorker, world.freeWorkers);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line"> </div><div class="line">            &#125;</div><div class="line"> </div><div class="line">            world.moveWorker = <span class="literal">null</span>;</div><div class="line"> </div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"> </div><div class="line">sm.start();</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>canvas example a planet of mine clone<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">"margin:0px;"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"gamearea"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/state-machine.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/world.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/solar.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lib/draw.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"states/game.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="6-Conclusion"><a href="#6-Conclusion" class="headerlink" title="6 - Conclusion"></a>6 - Conclusion</h2><p>Although at the time of this writing I was able to get the basic idea of the game working there is still much more work that would need to be done in oder to make this more of a true clone of the game. This is also taking the time to do what comes to mind when it comes to making the game more distinct so that it is not just a rip off of the original.</p>
<p>So far I am not happy with how this canvas example came out, it would need a lot more work, and maybe even a top to bottom overhaul in order to get it back on track. I might get around to doing that at some point in the future, but there are so many other ideas for projects, and so many other great ideas that I would like to clone as a starting point.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2020/04/03/canvas-example-a-planet-of-mine-clone/" data-id="clfy54cie00dxq4v1mkogz0o5" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2020/04/03/canvas-example-a-planet-of-mine-clone/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/04/07/nodejs-path-resolve/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Node path resomve method and absolute rather than relative paths
        
      </div>
    </a>
  
  
    <a href="/2020/04/02/js-uint8array/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Uint8arrays in javaScript</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2020/04/03/canvas-example-a-planet-of-mine-clone/index.html';
    this.page.identifier = '641';
    this.page.title = 'A planet of mine canvas example clone';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 12.73px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/03/31/threejs-quaternion-premultiply/">Quaternion premultiply method in threejs</a>
          </li>
        
          <li>
            <a href="/2023/03/24/threejs-quaternion/">Quaternion rotation objects in threejs</a>
          </li>
        
          <li>
            <a href="/2023/03/17/threejs-examples-svg-tools/">SVG tools module threejs example</a>
          </li>
        
          <li>
            <a href="/2023/03/10/threejs-examples-camera-planes/">Camera Planes module threejs example</a>
          </li>
        
          <li>
            <a href="/2023/03/03/threejs-examples-breath-module/">A Breath Module threejs project example</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2020/04/03/canvas-example-a-planet-of-mine-clone/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>