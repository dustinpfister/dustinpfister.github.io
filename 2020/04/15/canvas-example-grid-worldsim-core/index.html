<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>World simulator canvas example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2020/04/15/canvas-example-grid-worldsim-core/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="I want to start making at least a few more canvas examples that are the kind of example that I will be coming back to a few times. In other words the kind of canvas example that might prove to be a bi">
<meta property="og:type" content="article">
<meta property="og:title" content="World simulator canvas example">
<meta property="og:url" content="https://dustinpfister.github.io/2020/04/15/canvas-example-grid-worldsim-core/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="I want to start making at least a few more canvas examples that are the kind of example that I will be coming back to a few times. In other words the kind of canvas example that might prove to be a bi">
<meta property="og:updated_time" content="2020-08-10T15:03:17.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="World simulator canvas example">
<meta name="twitter:description" content="I want to start making at least a few more canvas examples that are the kind of example that I will be coming back to a few times. In other words the kind of canvas example that might prove to be a bi">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas-Examples</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-canvas-example-grid-worldsim-core" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/15/canvas-example-grid-worldsim-core/" class="article-date"> Published:
  <time datetime="2020-04-15T21:18:00.000Z" itemprop="datePublished">2020-04-15</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2020/04/15/canvas-example-grid-worldsim-core/" class="article-date"> Modified:
  <time datetime="2020-08-10T15:03:17.000Z" itemprop="dateModified">2020-08-10</time>
</a>

    <span class="article-date">V1.21</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      World simulator canvas example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>I want to start making at least a few more <a href="/2020/03/23/canvas-example/">canvas examples</a> that are the kind of example that I will be coming back to a few times. In other words the kind of canvas example that might prove to be a bit more that just a center piece to write about in a blog post before moving on to the next thing. That kind of habit is something that I would like to break with at least a few of these canvas examples.</p>
<p>I was happy with how my <a href="/2020/03/26/canvas-example-grid-gradient/">grid gradient canvas example</a> came out as it is was a canvas example that I put a little more time and effort into than usual compared to most of these thus far. The main reason why I liked working on it so much was the plug-in system, this turned out to be something new and interesting for me. However that canvas example was just an eye candy type thing, it would be nice to start another canvas example that is something a bit more than just a nice visual effect of sorts.</p>
<p>So this canvas example will be similar to the grid gradient example, but this time I will be aiming for the start of a world simulator type project, something maybe vaguely similar to the game <a href="https://en.wikipedia.org/wiki/SimEarth" target="_blank" rel="external">sim earth</a>. Such a project is not the kind of project that I am going to complete in just a day or two, and even then I donâ€™t think I could write everything about it in a single post. So this canvas example will be a starting point or core of such a project as it will be a long time until I get something that is really something like sim earth.</p>
<p>So lets start out with just a core world.js file along with some additional dependencies, and just one plug-in file for the core of this project. For now I will just want to get the basics of this worked out before going crazy with plug-ins for it.</p>
<a id="more"></a>
<h2 id="1-utils-js"><a href="#1-utils-js" class="headerlink" title="1 - utils.js"></a>1 - utils.js</h2><p>I have a utils module for this canvas example as is the case for most of these canvas examples. So far for this one I just have the distance formula that I will be using in the world module, as well as maybe some plug-ins in other files so it needs to be parked here.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// UTILS</span></div><div class="line"><span class="keyword">var</span> u = &#123;&#125;;</div><div class="line"> </div><div class="line">u.distance = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, x2, y2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow(x1 - x2, <span class="number">2</span>) + <span class="built_in">Math</span>.pow(y1 - y2, <span class="number">2</span>));</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>As the complexity of the world module and set of plug-ins grows so will this utility module. Basically anything that is used in two or more files should be parked here as a default. Eventually there might be an array of modules like this one, but for the core of this project just one general, generic utility library might work just fine.</p>
<h2 id="2-The-world-js-file"><a href="#2-The-world-js-file" class="headerlink" title="2 The world.js file"></a>2 The world.js file</h2><p>The world.js file is the main module that will create all the cells for the gird that will make up the world. It also contains some internal objects that can be expanded with optional plug-ins via a public load method. So I aim to try to keep the world.js file as slim as possible, pulling much of what I think might need to happen for this project out of the world.js module and into external plug-ins.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> world = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> CELL_VALUES = &#123;</div><div class="line">        <span class="attr">sx</span>: <span class="number">32</span>,</div><div class="line">        <span class="attr">sy</span>: <span class="number">32</span>,</div><div class="line">        <span class="attr">size</span>: <span class="number">32</span></div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// hard coded initObjects</span></div><div class="line">    <span class="comment">// this can be extend via a plug-in</span></div><div class="line">    <span class="keyword">var</span> init = &#123;</div><div class="line">        <span class="attr">defaultValues</span>: &#123;</div><div class="line">            <span class="attr">before</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">                <span class="comment">//console.log('defualt values before hook');</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">forCell</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state, events, cell</span>) </span>&#123;</div><div class="line">                cell.x = cell.i % state.width;</div><div class="line">                cell.y = <span class="built_in">Math</span>.floor(cell.i / state.width);</div><div class="line">                <span class="comment">//console.log('default values forCell: ' + JSON.stringify(cell));</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">after</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">                <span class="comment">//console.log('default values after hook');</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// events and forTick objects</span></div><div class="line">    <span class="keyword">var</span> events = &#123;&#125;;</div><div class="line">    <span class="keyword">var</span> ticks = &#123;&#125;;</div><div class="line">    <span class="comment">// call a hook</span></div><div class="line">    <span class="keyword">var</span> callHook = <span class="function"><span class="keyword">function</span> (<span class="params">state, initObjKey, hookName, cell</span>) </span>&#123;</div><div class="line">        hookName = hookName || <span class="string">'before'</span>;</div><div class="line">        initObjKey = initObjKey || <span class="string">'defaultValues'</span>;</div><div class="line">        <span class="keyword">var</span> initObj = init[initObjKey];</div><div class="line">        <span class="keyword">if</span> (initObj[hookName]) &#123;</div><div class="line">            initObj[hookName](state, events, cell);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// create cells for the world</span></div><div class="line">    <span class="keyword">var</span> createCells = <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">        len = state.width * state.height,</div><div class="line">        cell;</div><div class="line">        <span class="comment">// set up cells with just index prop</span></div><div class="line">        state.cells = [];</div><div class="line">        <span class="keyword">while</span> (i &lt; len) &#123;</div><div class="line">            cell = &#123;&#125;;</div><div class="line">            cell.i = i;</div><div class="line">            state.cells.push(cell);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// call init methods for each initObj</span></div><div class="line">        <span class="built_in">Object</span>.keys(init).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">initObjKey</span>) </span>&#123;</div><div class="line">            callHook(state, initObjKey, <span class="string">'before'</span>);</div><div class="line">            i = <span class="number">0</span>;</div><div class="line">            <span class="keyword">while</span> (i &lt; len) &#123;</div><div class="line">                callHook(state, initObjKey, <span class="string">'forCell'</span>, state.cells[i]);</div><div class="line">                i += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            callHook(state, initObjKey, <span class="string">'after'</span>);</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// the public API</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">CELL_VALUES</span>: CELL_VALUES,</div><div class="line">        <span class="comment">// create a world state object</span></div><div class="line">        create: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> state = &#123;</div><div class="line">                <span class="attr">year</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">                <span class="attr">yearRate</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">cells</span>: [],</div><div class="line">                <span class="attr">width</span>: <span class="number">10</span>,</div><div class="line">                <span class="attr">height</span>: <span class="number">8</span></div><div class="line">            &#125;;</div><div class="line">            createCells(state);</div><div class="line">            <span class="keyword">return</span> state;</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// load plug-in</span></div><div class="line">        load: <span class="function"><span class="keyword">function</span> (<span class="params">plug</span>) </span>&#123;</div><div class="line">            <span class="comment">// just ref it in for now as long as that works</span></div><div class="line">            <span class="keyword">if</span> (plug.init) &#123;</div><div class="line">                init[plug.key] = plug.init;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (plug.events) &#123;</div><div class="line">                <span class="built_in">Object</span>.keys(plug.events).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">eventKey</span>) </span>&#123;</div><div class="line">                    events[eventKey] = plug.events[eventKey];</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (plug.tick) &#123;</div><div class="line">                ticks[plug.key] = plug.tick;</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'plugin: '</span> + plug.key + <span class="string">' loaded.'</span>);</div><div class="line">            <span class="built_in">console</span>.log(init);</div><div class="line">            <span class="built_in">console</span>.log(events);</div><div class="line">            <span class="built_in">console</span>.log(ticks);</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// tick year, and update world state for new year</span></div><div class="line">        update: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">            t = now - state.lt,</div><div class="line">            years = <span class="number">0</span>,</div><div class="line">            secs = t / <span class="number">1000</span>;</div><div class="line">            <span class="keyword">if</span> (secs &gt;= state.yearRate) &#123;</div><div class="line">                years = secs / state.yearRate;</div><div class="line">                state.year += years;</div><div class="line">                state.lt = now;</div><div class="line">                <span class="built_in">Object</span>.keys(ticks).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">plugKey</span>) </span>&#123;</div><div class="line">                    <span class="keyword">var</span> tick = ticks[plugKey];</div><div class="line">                    <span class="keyword">if</span> (tick.before) &#123;</div><div class="line">                        tick.before(state, events, years);</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">if</span> (tick.forCell) &#123;</div><div class="line">                        state.cells.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">cell</span>) </span>&#123;</div><div class="line">                            tick.forCell(state, events, years, cell);</div><div class="line">                        &#125;);</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">if</span> (tick.after) &#123;</div><div class="line">                        tick.after(state, events, years);</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="3-First-land-base-plug-in"><a href="#3-First-land-base-plug-in" class="headerlink" title="3 - First land_base plug-in"></a>3 - First land_base plug-in</h2><p>I have worked out one plug-in thus far for this world simulator that just works out some basic values for a land object that will be appended for each cell in the world grid. This plug-in just creates some land objects for each cell and attaches a fert property that stands for fertility. Very crude, and in time I migt make a more advanced plug-in for this and much more when it comes to everything about land, but for now this plug-in is just to test out the core features of my world.js module.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line">world.load(&#123;</div><div class="line">    <span class="attr">key</span>: <span class="string">'land_base'</span>,</div><div class="line">    <span class="comment">// events to add</span></div><div class="line">    events: &#123;</div><div class="line">        <span class="comment">// name of event</span></div><div class="line">        fertup: &#123;</div><div class="line">            <span class="comment">// what to do right away for the event when it starts</span></div><div class="line">            init: <span class="function"><span class="keyword">function</span> (<span class="params">state, x, y</span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> i = state.cells.length,</div><div class="line">                d,</div><div class="line">                per,</div><div class="line">                cell;</div><div class="line">                <span class="keyword">while</span> (i--) &#123;</div><div class="line">                    cell = state.cells[i];</div><div class="line">                    d = u.distance(cell.x, cell.y, x, y);</div><div class="line">                    per = <span class="number">0</span>;</div><div class="line">                    <span class="keyword">if</span> (d &lt;= <span class="number">3</span>) &#123;</div><div class="line">                        per = (<span class="number">3</span> - d) / <span class="number">3</span>;</div><div class="line">                    &#125;</div><div class="line">                    cell.land.fert += <span class="built_in">Math</span>.floor(<span class="number">10</span> * per);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// what do do when</span></div><div class="line">    init: &#123;</div><div class="line">        <span class="attr">before</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state, events</span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'land_base before hook'</span>);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">forCell</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state, events, cell</span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'land_base forCell hook'</span>);</div><div class="line">            <span class="keyword">var</span> land = cell.land = &#123;&#125;;</div><div class="line">            land.fert = <span class="number">0</span>;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">after</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state, events</span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'land_base after hook'</span>);</div><div class="line">            <span class="comment">// fertup events</span></div><div class="line">            <span class="keyword">var</span> i = <span class="number">6</span>;</div><div class="line">            <span class="keyword">while</span> (i--) &#123;</div><div class="line">                <span class="keyword">var</span> x = <span class="built_in">Math</span>.floor(state.width * <span class="built_in">Math</span>.random()),</div><div class="line">                y = <span class="built_in">Math</span>.floor(state.height * <span class="built_in">Math</span>.random());</div><div class="line">                events.fertup.init(state, x, y);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// cap fert</span></div><div class="line">            state.cells.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">cell</span>) </span>&#123;</div><div class="line">                <span class="keyword">if</span> (cell.land.fert &gt; <span class="number">10</span>) &#123;</div><div class="line">                    cell.land.fert = <span class="number">10</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// what to do for each tick</span></div><div class="line">    tick: &#123;</div><div class="line">        <span class="attr">before</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state, events, years</span>) </span>&#123;&#125;,</div><div class="line">        <span class="attr">forCell</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state, events, years, cell</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (cell.land.fert &gt; <span class="number">5</span>) &#123;</div><div class="line">                cell.land.fert -= <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">after</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;&#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="4-The-draw-module"><a href="#4-The-draw-module" class="headerlink" title="4 - The draw module"></a>4 - The draw module</h2><p>Now for the draw module that contains the methods for drawing the state of the world object. For now this draw module just contains a method for drawing the background, and a method for drawing all the cells in the world object. For the sake of this post I just want to focus on the core of what the module is, so just solid color squares for the cells is fine.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> draw = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="comment">// draw background</span></div><div class="line">        back: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas</span>) </span>&#123;</div><div class="line">            ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">            ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="attr">worldCells</span>: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, state</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> i = state.cells.length,</div><div class="line">            x,</div><div class="line">            y,</div><div class="line">            r,</div><div class="line">            g,</div><div class="line">            b,</div><div class="line">            per,</div><div class="line">            cell;</div><div class="line">            <span class="keyword">while</span> (i--) &#123;</div><div class="line">                cell = state.cells[i];</div><div class="line">                per = <span class="number">1</span> - (cell.land.fert / <span class="number">10</span>);</div><div class="line">                r = <span class="built_in">Math</span>.floor(<span class="number">100</span> + <span class="number">100</span> * per);</div><div class="line">                g = <span class="built_in">Math</span>.floor(<span class="number">75</span> + <span class="number">75</span> * per);</div><div class="line">                b = <span class="built_in">Math</span>.floor(<span class="number">25</span> + <span class="number">25</span> * per);</div><div class="line">                ctx.fillStyle = <span class="string">'rgb('</span> + r + <span class="string">','</span> + g + <span class="string">','</span> + b + <span class="string">',1)'</span>;</div><div class="line">                x = cell.x * world.CELL_VALUES.size + world.CELL_VALUES.sx;</div><div class="line">                y = cell.y * world.CELL_VALUES.size + world.CELL_VALUES.sy;</div><div class="line">                ctx.fillRect(x, y, world.CELL_VALUES.size, world.CELL_VALUES.size);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="5-The-Main-js-and-index-html-files"><a href="#5-The-Main-js-and-index-html-files" class="headerlink" title="5 - The Main.js and index.html files"></a>5 - The Main.js and index.html files</h2><p>Now to pull everything together with some HTML and a little more javaScript to test this all out and see if it works as expected thus far. In this main.js file I am creating a canvas element and injecting it into a container element in the actual hard coded HTML. I use the create method of my world.js module to create an instance of of a world state object. Once I have my world state object I can use my word update method in the body of my main app loop method that is using request animation frame to loop the method. In this main app loop I am also using my draw module methods to render the current state of the world object to the canvas.</p>
<p>In some canvas examples I might put more time and effort into the main.js file, and other aspects of this part of canvas project development. However for the sake of this post this kind of simple, minimal app loop design will work well enough to just test out that my world.js file is working as I want it to. In fact O could even just take a headless approach when it comes to just working out a model, but this is a canvas example post.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>),</div><div class="line">ctx = canvas.getContext(<span class="string">'2d'</span>),</div><div class="line">container = <span class="built_in">document</span>.getElementById(<span class="string">'gamearea'</span>) || <span class="built_in">document</span>.body;</div><div class="line">container.appendChild(canvas);</div><div class="line">canvas.width = <span class="number">640</span>;</div><div class="line">canvas.height = <span class="number">480</span>;</div><div class="line">ctx.translate(<span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> state = world.create();</div><div class="line"> </div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    world.update(state);</div><div class="line">    draw.back(ctx, canvas);</div><div class="line">    draw.worldCells(ctx, state);</div><div class="line"> </div><div class="line">&#125;;</div><div class="line"> </div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>And here is the html that I have worked out thus far for this example.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>canvas example world sim core<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"gamearea"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/utils.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/world.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./plugins/land_base.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/draw.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="6-Conclusion"><a href="#6-Conclusion" class="headerlink" title="6 - Conclusion"></a>6 - Conclusion</h2><p>There is a lot more work to do with this one of course if I choose to put some more time into this one. It looks like I do have the basic idea that I had in mind working at least, but now there is further refining the core of this a bit more as well as writing some additional plug-ins. Still the aim of this post was just to get together the core of what a world simulator type project would be and thus far I guess that is what this is for me at least.</p>
<p>This is on of my canvas example projects that I would like to put more time into, but there are many others that come to mind that might be good candidates.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2020/04/15/canvas-example-grid-worldsim-core/" data-id="ckebqe5ad004znkv1aochkhxt" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2020/04/15/canvas-example-grid-worldsim-core/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/04/17/canvas-example-input-controller/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          An input controller canvas example
        
      </div>
    </a>
  
  
    <a href="/2020/04/13/canvas-example-particles-search-destroy-and-spawn/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Search destroy and spawn canvas example</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2020/04/15/canvas-example-grid-worldsim-core/index.html';
    this.page.identifier = '646';
    this.page.title = 'World simulator canvas example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 13px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.5px;">SEO</a> <a href="/tags/angular/" style="font-size: 14px;">angular</a> <a href="/tags/animation/" style="font-size: 12.5px;">animation</a> <a href="/tags/automation/" style="font-size: 12.5px;">automation</a> <a href="/tags/backbone/" style="font-size: 13px;">backbone</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/canvas/" style="font-size: 19px;">canvas</a> <a href="/tags/corejs/" style="font-size: 13.5px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.5px;">ejs</a> <a href="/tags/express/" style="font-size: 17px;">express</a> <a href="/tags/games/" style="font-size: 17.5px;">games</a> <a href="/tags/git/" style="font-size: 12px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15.5px;">hapi</a> <a href="/tags/heroku/" style="font-size: 14px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.5px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.5px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.5px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 13.5px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.5px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.5px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.5px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18px;">phaser</a> <a href="/tags/statistics/" style="font-size: 13px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 16.5px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/08/26/js-javascript-example-skill-point-system/">Skill Point system</a>
          </li>
        
          <li>
            <a href="/2020/08/17/canvas-example-grid-game-monster-smash/">Monster Smash canvas game example</a>
          </li>
        
          <li>
            <a href="/2020/08/11/js-javascript-example-grid-game-unit-movement/">grid game unit movement javaScript example</a>
          </li>
        
          <li>
            <a href="/2020/08/10/js-javascript-example-zig-zag-arc/">Linear percent values to other zig zag and arc percent values as a javaScript example</a>
          </li>
        
          <li>
            <a href="/2020/08/08/canvas-example-percent-math-log/">Canvas example percent values and Math log</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas-Examples</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2020/04/15/canvas-example-grid-worldsim-core/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>