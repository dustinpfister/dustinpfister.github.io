<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>A Canvas example of a turret defense game | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2020/01/10/canvas-example-turret-defense/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Todays post will be on yet another canvas examples, this time a gun turret defense style game that will be just a turret at the center of the canvas that shoots at enemies coming in from all direction">
<meta property="og:type" content="article">
<meta property="og:title" content="A Canvas example of a turret defense game">
<meta property="og:url" content="https://dustinpfister.github.io/2020/01/10/canvas-example-turret-defense/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="Todays post will be on yet another canvas examples, this time a gun turret defense style game that will be just a turret at the center of the canvas that shoots at enemies coming in from all direction">
<meta property="og:updated_time" content="2020-08-02T17:49:20.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A Canvas example of a turret defense game">
<meta name="twitter:description" content="Todays post will be on yet another canvas examples, this time a gun turret defense style game that will be just a turret at the center of the canvas that shoots at enemies coming in from all direction">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas-Examples</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-canvas-example-turret-defense" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/10/canvas-example-turret-defense/" class="article-date"> Published:
  <time datetime="2020-01-10T23:04:00.000Z" itemprop="datePublished">2020-01-10</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2020/01/10/canvas-example-turret-defense/" class="article-date"> Modified:
  <time datetime="2020-08-02T17:49:20.000Z" itemprop="dateModified">2020-08-02</time>
</a>

    <span class="article-date">V1.22</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      A Canvas example of a turret defense game
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>Todays post will be on yet another <a href="/2020/03/23/canvas-example/">canvas examples</a>, this time a <a href="https://en.wikipedia.org/wiki/Gun_turret" target="_blank" rel="external">gun turret</a> defense style game that will be just a turret at the center of the canvas that shoots at enemies coming in from all directions.</p>
<p>This example will make used of a lot of different methods some of which have to do with many concerns surrounding angles. So it will involve creating a utility module of sorts with methods that can be used for things like finding the distance between two points as well as the angular distance between two angles. Once that module is covered I will then be getting into the main game module, and then finally the module that is used to render the sate of this game to the canvas.</p>
<a id="more"></a>
<h2 id="1-The-utility-module-of-this-canvas-example-of-a-turret-defense-game"><a href="#1-The-utility-module-of-this-canvas-example-of-a-turret-defense-game" class="headerlink" title="1 - The utility module of this canvas example of a turret defense game"></a>1 - The utility module of this canvas example of a turret defense game</h2><p>So to start off with lets take a look the the custom utility module that I made for this canvas example. Here I have many methods for working with angles mostly, but it is still a general utility module of sorts that will be used in the game module that I will be going over in the next section.</p>
<h3 id="1-1-The-mathematical-modulo-method-and-the-start-of-the-module"><a href="#1-1-The-mathematical-modulo-method-and-the-start-of-the-module" class="headerlink" title="1.1 - The mathematical modulo method and the start of the module"></a>1.1 - The mathematical modulo method and the start of the module</h3><p>Here I have the mathematical module method. This is something that I covered in another post way back when it comes to something that is wrong with the built in javaScript module operator and how some might expect modulo to work.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> u = &#123;</div><div class="line">    <span class="attr">defaultAngleScale</span>: <span class="built_in">Math</span>.PI * <span class="number">2</span></div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// mathematical modulo</span></div><div class="line">u.mod = <span class="function"><span class="keyword">function</span> (<span class="params">x, m</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (x % m + m) % m;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="1-2-Normalize-half"><a href="#1-2-Normalize-half" class="headerlink" title="1.2 - Normalize half"></a>1.2 - Normalize half</h3><p>This can be used to normalize and angle to half.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">u.normalizeHalf = <span class="function"><span class="keyword">function</span> (<span class="params">n, scale</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> c = scale || u.defaultAngleScale,</div><div class="line">    h = c / <span class="number">2</span>;</div><div class="line">    <span class="keyword">return</span> u.mod(n + h, c) - h;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="1-3-The-distance-formula"><a href="#1-3-The-distance-formula" class="headerlink" title="1.3 - The distance formula"></a>1.3 - The distance formula</h3><p>I am going to want a method that can be used to find the distance between two points for the sake of collision detection.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// distance</span></div><div class="line">u.distance = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, x2, y2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow(x1 - x2, <span class="number">2</span>) + <span class="built_in">Math</span>.pow(y1 - y2, <span class="number">2</span>));</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="1-4-The-angle-distance-method"><a href="#1-4-The-angle-distance-method" class="headerlink" title="1.4 - The angle distance method"></a>1.4 - The angle distance method</h3><p>This is like the other distance formal only instead of getting the distance between two points, I am getting the distance between two angles.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// the angular distance between two angles</span></div><div class="line">u.angleDistance = <span class="function"><span class="keyword">function</span> (<span class="params">a, b, scale</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> m = scale || u.defaultAngleScale,</div><div class="line">    h = m / <span class="number">2</span>,</div><div class="line">    diff = u.normalizeHalf(a - b);</div><div class="line">    <span class="keyword">if</span> (diff &gt; h) &#123;</div><div class="line">        diff = diff - m;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.abs(diff);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="1-5-Get-an-angle-to-a-point"><a href="#1-5-Get-an-angle-to-a-point" class="headerlink" title="1.5 - Get an angle to a point"></a>1.5 - Get an angle to a point</h3><p>Here I have a method where I am using atan2 to get an angle from one point to another.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// get the angle from one point to another</span></div><div class="line">u.getAngleToPoint = <span class="function"><span class="keyword">function</span> (<span class="params">pt1, pt2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> u.normalizeHalf(<span class="built_in">Math</span>.atan2(pt1.y - pt2.y, pt1.x - pt2.x));</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="1-6-Get-shortest-direction"><a href="#1-6-Get-shortest-direction" class="headerlink" title="1.6 - Get shortest direction"></a>1.6 - Get shortest direction</h3><p>I will also want a method that will return -1, 1, or 0 depending on which way an object needs to rotate to face another object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// get -1, 1, or 0 depending on the the state of two angles</span></div><div class="line">u.shortestAngleDirection = <span class="function"><span class="keyword">function</span> (<span class="params">a1, a2</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> z = a1 - a2,</div><div class="line">    x = u.normalizeHalf(z);</div><div class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">// Left</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (x &gt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>; <span class="comment">// Right</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// if a1 === a2 or any other case</span></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="2-The-game-module"><a href="#2-The-game-module" class="headerlink" title="2 - The game module"></a>2 - The game module</h2><p>Now that I have my utility library together it is time to use them in my game module that will hold all the game business logic for this canvas example of a turret defense type game.</p>
<h3 id="2-1-The-start-of-the-module-and-the-hold-shots-method"><a href="#2-1-The-start-of-the-module-and-the-hold-shots-method" class="headerlink" title="2.1 - The start of the module and the hold shots method"></a>2.1 - The start of the module and the hold shots method</h3><p>I start off the module with an IIFE, and then at the top of the module I have my hold shots helper method.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> td = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// SHOTS</span></div><div class="line"> </div><div class="line">    <span class="comment">// hold shots</span></div><div class="line">    <span class="keyword">var</span> holdShots = <span class="function"><span class="keyword">function</span> (<span class="params">game</span>) </span>&#123;</div><div class="line">        game.shots.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">shot</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (!(shot.sx === shot.x &amp;&amp; shot.sy === shot.y)) &#123;</div><div class="line">                shot.lifeSpanAjust = (<span class="keyword">new</span> <span class="built_in">Date</span>() - shot.shotTime) / <span class="number">1000</span> * <span class="number">-1</span>;</div><div class="line">                shot.sx = shot.x;</div><div class="line">                shot.sy = shot.y;</div><div class="line">            &#125;</div><div class="line">            shot.shotTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<h3 id="2-2-The-spawn-shots-method"><a href="#2-2-The-spawn-shots-method" class="headerlink" title="2.2 - The spawn shots method"></a>2.2 - The spawn shots method</h3><p>So I will want a method that will spawn shots into a shots array. The idea here is to have a method that is called from a main update method that is passed a game object and then a secs value that is the amount of time that has passed from the last frame tick. A shot time property of the game object is steeped with the secs value, and then the shot time is used with a shot delay property to know the number of shots to fire.</p>
<p>If the number of new shots to fire is greater than or equal to one then new shots are spawned into the shots array up to a certain shots max value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// spawn new shots</span></div><div class="line"><span class="keyword">var</span> spawnShots = <span class="function"><span class="keyword">function</span> (<span class="params">game, secs</span>) </span>&#123;</div><div class="line">    game.shotTime += secs;</div><div class="line">    <span class="keyword">var</span> newShots = <span class="built_in">Math</span>.floor(game.shotTime / game.shotDelay);</div><div class="line">    <span class="keyword">if</span> (newShots &gt;= <span class="number">1</span>) &#123;</div><div class="line">        game.shotTime -= newShots * game.shotDelay;</div><div class="line">        <span class="keyword">if</span> (game.shots.length &lt; game.shotsMax) &#123;</div><div class="line">            game.shots.push(&#123;</div><div class="line">                <span class="attr">sx</span>: game.cx,</div><div class="line">                <span class="attr">sy</span>: game.cy,</div><div class="line">                <span class="attr">x</span>: game.cx,</div><div class="line">                <span class="attr">y</span>: game.cy,</div><div class="line">                <span class="attr">heading</span>: game.heading,</div><div class="line">                <span class="attr">dam</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">pps</span>: <span class="number">64</span>,</div><div class="line">                <span class="attr">hit</span>: <span class="literal">false</span>,</div><div class="line">                <span class="attr">lifeSpan</span>: <span class="number">3</span>,</div><div class="line">                <span class="attr">lifeSpanAjust</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">shotTime</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>This is also the method where new shot object are created, a shot object has a starting point and current point, as well as other values such as the current heading of the shot, and the amount of damage it will cause when it hits and enemy. Shots move by a pixel per second rate, and there is also a life span value as well that is used alone with a hit property to know if the shot should be purged or not.</p>
<h3 id="2-3-Purge-shots"><a href="#2-3-Purge-shots" class="headerlink" title="2.3 - Purge shots"></a>2.3 - Purge shots</h3><p>So now that I have a method that is used to spawn new shots, it makes sense to have a method that will purge theme. There are two reason why a shot would be purged, one would be because its lifespan value shots that is has been around for two long, and the other is the hit boolean that means that it hit something.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// purge old shots</span></div><div class="line"><span class="keyword">var</span> purgeShotCheck = <span class="function"><span class="keyword">function</span> (<span class="params">game, i</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    shot = game.shots[i],</div><div class="line">    t = (now - shot.shotTime) / <span class="number">1000</span>;</div><div class="line">    <span class="keyword">if</span> (t &gt;= shot.lifeSpan + shot.lifeSpanAjust || shot.hit) &#123;</div><div class="line">        game.shots.splice(i, <span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-4-Shot-enemy-check"><a href="#2-4-Shot-enemy-check" class="headerlink" title="2.4 - Shot enemy check"></a>2.4 - Shot enemy check</h3><p>This method will check to see if A given shot has hit an enemy in the enemies array of the game object. In the event that a shot has hot an enemy the amount of damage that the shot can cause is subtracted from the enemies hit points value, and the hit property of the shot is set to true. After that the loop is broken for the shot, and nothing else is done, it is up to the purge methods for shots and enemies to remove things from arrays.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// check to see if a shot has hit an enemy</span></div><div class="line"><span class="keyword">var</span> shotEnemyCheck = <span class="function"><span class="keyword">function</span> (<span class="params">game, shot</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i = game.enemies.length;</div><div class="line">    <span class="keyword">while</span> (i--) &#123;</div><div class="line">        <span class="keyword">var</span> enemy = game.enemies[i];</div><div class="line">        <span class="keyword">if</span> (u.distance(shot.x, shot.y, enemy.x, enemy.y) &lt;= enemy.size) &#123;</div><div class="line">            enemy.hp -= shot.dam;</div><div class="line">            <span class="keyword">if</span> (enemy.hp &lt; <span class="number">0</span>) &#123;</div><div class="line">                enemy.hp = <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">            shot.hit = <span class="literal">true</span>;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h3 id="2-5-Update-shots"><a href="#2-5-Update-shots" class="headerlink" title="2.5 - Update shots"></a>2.5 - Update shots</h3><p>So now for methods that update any shots in the game area. The update active shots method loops over all the shots, and moves them by the current heading an pixel per second rate. The shot shot enemy check method is called for the shot, along with the purge shot check method right after.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// loop over all shots, move them, and make a purge check</span></div><div class="line"><span class="keyword">var</span> updateActiveShots = <span class="function"><span class="keyword">function</span> (<span class="params">game</span>) </span>&#123;</div><div class="line">    <span class="comment">// update active shots</span></div><div class="line">    <span class="keyword">var</span> i = game.shots.length,</div><div class="line">    now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    shot;</div><div class="line">    <span class="keyword">while</span> (i--) &#123;</div><div class="line">        shot = game.shots[i];</div><div class="line">        t = (now - shot.shotTime) / <span class="number">1000</span>;</div><div class="line">        shot.x = shot.sx + <span class="built_in">Math</span>.cos(shot.heading) * t * shot.pps;</div><div class="line">        shot.y = shot.sy + <span class="built_in">Math</span>.sin(shot.heading) * t * shot.pps;</div><div class="line">        shotEnemyCheck(game, shot);</div><div class="line">        purgeShotCheck(game, i);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// Main update shots helper</span></div><div class="line"><span class="keyword">var</span> updateTurretShots = <span class="function"><span class="keyword">function</span> (<span class="params">game, secs</span>) </span>&#123;</div><div class="line">    <span class="comment">// if the game is paused</span></div><div class="line">    <span class="keyword">if</span> (game.paused) &#123;</div><div class="line">        holdShots(game);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// the game is not paused</span></div><div class="line">        spawnShots(game, secs)</div><div class="line">        updateActiveShots(game);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-6-Spawn-enemies"><a href="#2-6-Spawn-enemies" class="headerlink" title="2.6 - Spawn enemies"></a>2.6 - Spawn enemies</h3><p>I will need a method for spawning enemies as on top of just shots. For this canvas example I am just spawning shots around the turret at random, and at a set distance. If I where to keep working on this example even more so I would do something different, but this canvas example is all ready getting a little involved, so I am just sticking with something simple for now.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ENEMIES</span></div><div class="line"> </div><div class="line"><span class="comment">// spawn new enemies</span></div><div class="line"><span class="keyword">var</span> spawnEnemies = <span class="function"><span class="keyword">function</span> (<span class="params">game, secs</span>) </span>&#123;</div><div class="line">    <span class="comment">// new enemy count</span></div><div class="line">    <span class="keyword">var</span> nec = <span class="built_in">Math</span>.floor(game.enemyTime / game.enemyDelay);</div><div class="line">    <span class="keyword">if</span> (!game.paused) &#123;</div><div class="line">        game.enemyTime += secs;</div><div class="line">        <span class="keyword">if</span> (nec &gt;= <span class="number">1</span>) &#123;</div><div class="line">            game.enemyTime -= nec * game.enemyDelay;</div><div class="line">            <span class="keyword">if</span> (nec + game.enemies.length &gt; game.enemiesMax) &#123;</div><div class="line">                nec = game.enemiesMax - game.enemies.length;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">var</span> i = nec,</div><div class="line">            r,</div><div class="line">            x,</div><div class="line">            y;</div><div class="line">            <span class="keyword">while</span> (i--) &#123;</div><div class="line">                r = <span class="built_in">Math</span>.random() * (<span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">                x = <span class="built_in">Math</span>.cos(r) * <span class="number">100</span> + game.cx;</div><div class="line">                y = <span class="built_in">Math</span>.sin(r) * <span class="number">100</span> + game.cy;</div><div class="line">                game.enemies.push(&#123;</div><div class="line">                    <span class="attr">x</span>: x,</div><div class="line">                    <span class="attr">y</span>: y,</div><div class="line">                    <span class="attr">hp</span>: <span class="number">1</span>,</div><div class="line">                    <span class="attr">size</span>: <span class="number">10</span></div><div class="line">                &#125;);</div><div class="line">            &#125;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>For now enemies just have a location, hit point value, and size, they do not move or attack.</p>
<h3 id="2-7-Purge-dead-enemies"><a href="#2-7-Purge-dead-enemies" class="headerlink" title="2.7 - Purge dead enemies"></a>2.7 - Purge dead enemies</h3><p>I also worked out a simple method for purging out dead enemies from the enemies array.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> purgeEnemies = <span class="function"><span class="keyword">function</span> (<span class="params">game</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i = game.enemies.length;</div><div class="line">    <span class="keyword">while</span> (i--) &#123;</div><div class="line">        <span class="keyword">var</span> enemy = game.enemies[i];</div><div class="line">        <span class="keyword">if</span> (enemy.hp &lt;= <span class="number">0</span>) &#123;</div><div class="line">            game.enemies.splice(i, <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-8-Set-turret-radians-per-second"><a href="#2-8-Set-turret-radians-per-second" class="headerlink" title="2.8 - Set turret radians per second"></a>2.8 - Set turret radians per second</h3><p>The turret moves one way or another by a radian per second value. This method will set that value depending on the location of the enemy in the enemies array with an index of zero, if there is one or more enemies.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// TURRET</span></div><div class="line"> </div><div class="line"><span class="comment">// set turret Radians Per Second based on enemies array</span></div><div class="line"><span class="keyword">var</span> setTurretRPS = <span class="function"><span class="keyword">function</span> (<span class="params">game</span>) </span>&#123;</div><div class="line">    game.rps = <span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span> (game.enemies.length &gt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="comment">// just target enemy index 0</span></div><div class="line">        <span class="keyword">var</span> target = game.enemies[<span class="number">0</span>],</div><div class="line">        a = u.getAngleToPoint(&#123;</div><div class="line">                <span class="attr">x</span>: game.cx,</div><div class="line">                <span class="attr">y</span>: game.cy</div><div class="line">            &#125;, target),</div><div class="line">        d = u.angleDistance(game.heading, a),</div><div class="line">        p = <span class="number">1</span> - d / <span class="built_in">Math</span>.PI,</div><div class="line">        dir = u.shortestAngleDirection(game.heading, a);</div><div class="line">        game.rps = <span class="number">3</span> * p * dir;</div><div class="line">    &#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-9-The-public-API-and-the-create-game-object-method"><a href="#2-9-The-public-API-and-the-create-game-object-method" class="headerlink" title="2.9 - The public API and the create game object method"></a>2.9 - The public API and the create game object method</h3><p>Now for the public API that is just a collection of methods that make use of all these other internal methods to create and work with a game object for this canvas example. The first method creates a new game object with all the properties of interest that are used for the example.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// PUBLIC API</span></div><div class="line"><span class="comment">// public api</span></div><div class="line"><span class="keyword">var</span> api = &#123;&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// the game object</span></div><div class="line">api.createGameObject = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">cx</span>: canvas.width / <span class="number">2</span>,</div><div class="line">        <span class="attr">cy</span>: canvas.height / <span class="number">2</span>,</div><div class="line">        <span class="attr">heading</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">rps</span>: <span class="number">0</span>, <span class="comment">// radians per second</span></div><div class="line">        lt: <span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="comment">// last time game was updated</span></div><div class="line">        paused: <span class="literal">false</span>,</div><div class="line">        <span class="attr">shots</span>: [],</div><div class="line">        <span class="attr">shotsMax</span>: <span class="number">13</span>,</div><div class="line">        <span class="attr">shotDelay</span>: <span class="number">1</span>,</div><div class="line">        <span class="attr">shotTime</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">enemies</span>: [],</div><div class="line">        <span class="attr">enemiesMax</span>: <span class="number">3</span>,</div><div class="line">        <span class="attr">enemyDelay</span>: <span class="number">1</span>,</div><div class="line">        <span class="attr">enemyTime</span>: <span class="number">0</span></div><div class="line">    &#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-10-The-update-method"><a href="#2-10-The-update-method" class="headerlink" title="2.10 - The update method"></a>2.10 - The update method</h3><p>The next public method is an update method, that will update the state of the game object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">    <span class="comment">// update turret method</span></div><div class="line">    api.update = <span class="function"><span class="keyword">function</span> (<span class="params">game</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - game.lt) / <span class="number">1000</span>;</div><div class="line">        <span class="keyword">if</span> (game.paused) &#123;</div><div class="line">            game.lt = now;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            game.heading += game.rps * secs;</div><div class="line">            game.heading %= <span class="built_in">Math</span>.PI * <span class="number">2</span>;</div><div class="line">            game.lt = now;</div><div class="line">        &#125;</div><div class="line">        setTurretRPS(game);</div><div class="line">        updateTurretShots(game, secs);</div><div class="line">        spawnEnemies(game, secs);</div><div class="line">        purgeEnemies(game);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> api;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="3-The-draw-module"><a href="#3-The-draw-module" class="headerlink" title="3 - The draw module"></a>3 - The draw module</h2><p>So I have everything worked out when it comes to creating, and updating a game state. However this is a canvas example of course, so now onto the draw methods.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> draw = &#123;&#125;;</div><div class="line"> </div><div class="line">draw.background = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas</span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// draw the turret</span></div><div class="line">draw.turret = <span class="function"><span class="keyword">function</span> (<span class="params">turret, ctx, canvas</span>) </span>&#123;</div><div class="line">    ctx.save();</div><div class="line">    ctx.translate(turret.cx, turret.cy);</div><div class="line">    ctx.rotate(turret.heading);</div><div class="line">    ctx.fillStyle = <span class="string">'green'</span>;</div><div class="line">    ctx.fillRect(<span class="number">-8</span>, <span class="number">-8</span>, <span class="number">16</span>, <span class="number">16</span>);</div><div class="line">    ctx.strokeStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.lineWidth = <span class="number">3</span>;</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    ctx.lineTo(<span class="number">16</span>, <span class="number">0</span>);</div><div class="line">    ctx.stroke();</div><div class="line">    ctx.restore();</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">draw.turretShots = <span class="function"><span class="keyword">function</span> (<span class="params">turret, ctx, canvas</span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'blue'</span>;</div><div class="line">    turret.shots.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">shot</span>) </span>&#123;</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.arc(shot.x, shot.y, <span class="number">5</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">        ctx.fill();</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">draw.turretInfo = <span class="function"><span class="keyword">function</span> (<span class="params">turret, ctx, canvas</span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.font = <span class="string">'10px arial'</span>;</div><div class="line">    ctx.fillText(<span class="string">'heading: '</span> + turret.heading.toFixed(<span class="number">2</span>), <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">    ctx.fillText(<span class="string">'shotTime: '</span> + turret.shotTime.toFixed(<span class="number">2</span>), <span class="number">5</span>, <span class="number">15</span>);</div><div class="line">    ctx.fillText(<span class="string">'active shots: '</span> + turret.shots.length, <span class="number">5</span>, <span class="number">25</span>);</div><div class="line">    ctx.fillText(<span class="string">'active enemies: '</span> + turret.enemies.length, <span class="number">5</span>, <span class="number">35</span>);</div><div class="line">    ctx.fillText(<span class="string">'turret RPS: '</span> + turret.rps, <span class="number">5</span>, <span class="number">45</span>);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">draw.enemies = <span class="function"><span class="keyword">function</span> (<span class="params">game, ctx, canvas</span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'red'</span>;</div><div class="line">    game.enemies.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">enemy</span>) </span>&#123;</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.arc(enemy.x, enemy.y, enemy.size, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">        ctx.fill();</div><div class="line">    &#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="4-Main-js-and-index-html"><a href="#4-Main-js-and-index-html" class="headerlink" title="4 - Main.js and index.html"></a>4 - Main.js and index.html</h2><p>Now it is just time to pull everything together with a main.js file, and an index.html file.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'the-canvas'</span>),</div><div class="line">ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas.width = <span class="number">320</span>;</div><div class="line">canvas.height = <span class="number">240</span>;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> game = td.createGameObject();</div><div class="line"> </div><div class="line"><span class="comment">// main app loop</span></div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    td.update(game);</div><div class="line"> </div><div class="line">    draw.background(ctx, canvas);</div><div class="line">    draw.turret(game, ctx, canvas);</div><div class="line">    draw.enemies(game, ctx, canvas);</div><div class="line">    draw.turretInfo(game, ctx, canvas);</div><div class="line">    draw.turretShots(game, ctx, canvas);</div><div class="line">&#125;;</div><div class="line">loop();</div><div class="line"> </div><div class="line"><span class="comment">// focus and blur</span></div><div class="line">canvas.tabIndex = <span class="number">0</span>;</div><div class="line">canvas.addEventListener(<span class="string">'focus'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    game.paused = <span class="literal">false</span>;</div><div class="line">&#125;);</div><div class="line">canvas.addEventListener(<span class="string">'blur'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    game.paused = <span class="literal">true</span>;</div><div class="line">&#125;);</div><div class="line">canvas.focus();</div><div class="line">canvas.blur();</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>canvas example turret defense<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"the-canvas"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"utils.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"game.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"draw.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5 - Conclusion"></a>5 - Conclusion</h2><p>So although I have the basic idea of this canvas example of a turret invasion defense type game working okay, there is much more work I would need to do to get this one to start to feel like an actual game. I am not happy with how this one turned out at least at the time of this writing at least. I think I might need to get around to doing a full redo of the source code from the bottom up actually. After making a lot more canvas examples there are certain things that I think I need to just not do when working out a game module.</p>
<p>In any case working on this was not a total loss, much of what I have together here will still work just find, I just need a little more time to clean up what I did here. The bad news with this one though is that there are many other canvas examples that I have made that I think desire more attention, so I may or may not get back around to this one at some point in the future.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2020/01/10/canvas-example-turret-defense/" data-id="ckglap1ee00hb88v14ak6uno6" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2020/01/10/canvas-example-turret-defense/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/01/13/canvas-example-game-map-idle/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          A Canvas example of an idle game that makes use of a map
        
      </div>
    </a>
  
  
    <a href="/2020/01/08/canvas-example-map-scrolling/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">A Basic canvas map scrolling example</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2020/01/10/canvas-example-turret-defense/index.html';
    this.page.identifier = '590';
    this.page.title = 'A Canvas example of a turret defense game';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.5px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.5px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.5px;">angular</a> <a href="/tags/animation/" style="font-size: 12px;">animation</a> <a href="/tags/automation/" style="font-size: 12px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.5px;">backbone</a> <a href="/tags/blog/" style="font-size: 14.5px;">blog</a> <a href="/tags/canvas/" style="font-size: 19px;">canvas</a> <a href="/tags/corejs/" style="font-size: 13px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.5px;">ejs</a> <a href="/tags/express/" style="font-size: 17px;">express</a> <a href="/tags/games/" style="font-size: 17.5px;">games</a> <a href="/tags/git/" style="font-size: 12.5px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 13.5px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.5px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.5px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 15.5px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.5px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.5px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18px;">phaser</a> <a href="/tags/statistics/" style="font-size: 12.5px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 16.5px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/10/22/nodejs-example-word-count-history/">Word Count History nodejs example</a>
          </li>
        
          <li>
            <a href="/2020/10/21/nodejs-child-process-exec/">The node exec child process method</a>
          </li>
        
          <li>
            <a href="/2020/10/20/linux-aspell/">Linux aspell for spellcheck on the command line</a>
          </li>
        
          <li>
            <a href="/2020/10/17/js-onvisibilitychange/">On visibility change event</a>
          </li>
        
          <li>
            <a href="/2020/10/14/linux-ls/">Linux ls command and listing contents of folders</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas-Examples</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2020/01/10/canvas-example-turret-defense/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>