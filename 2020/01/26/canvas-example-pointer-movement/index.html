<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Pointer map movement logic canvas example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2020/01/26/canvas-example-pointer-movement/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="In this canvas example I will be working out some logic that has to do with moving what could be a map by way of a pointer such as a mouse. So this example will not really be a game, animation, or any">
<meta property="og:type" content="article">
<meta property="og:title" content="Pointer map movement logic canvas example">
<meta property="og:url" content="https://dustinpfister.github.io/2020/01/26/canvas-example-pointer-movement/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="In this canvas example I will be working out some logic that has to do with moving what could be a map by way of a pointer such as a mouse. So this example will not really be a game, animation, or any">
<meta property="og:updated_time" content="2021-03-07T17:54:46.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Pointer map movement logic canvas example">
<meta name="twitter:description" content="In this canvas example I will be working out some logic that has to do with moving what could be a map by way of a pointer such as a mouse. So this example will not really be a game, animation, or any">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-canvas-example-pointer-movement" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/26/canvas-example-pointer-movement/" class="article-date"> Published:
  <time datetime="2020-01-26T21:53:00.000Z" itemprop="datePublished">2020-01-26</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2020/01/26/canvas-example-pointer-movement/" class="article-date"> Modified:
  <time datetime="2021-03-07T17:54:46.000Z" itemprop="dateModified">2021-03-07</time>
</a>

    <span class="article-date">V1.52</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Pointer map movement logic canvas example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>In this <a href="/2020/03/23/canvas-example/">canvas example</a> I will be working out some logic that has to do with moving what could be a map by way of a pointer such as a mouse. So this example will not really be a game, animation, or anything to that effect, but it will be just a simple demo that makes use of a single module that can be used as a user interface type thing. Many canvas examples, mainly games will require some way to pan around a game map of sorts, so some kind of logic such as what I am going over here would need to be used to do so.</p>
<p>I will not be going over how to create a grid or map like state, I have wrote many posts on those subjects before this one. Instead I will just be writing about a module that I put together that just has to do with maintaining the state of an object that would be used to update a map position. So this canvas example will be fairly simple, and striped down, but that is the idea as I am just working out one little thing in this example rather than making a full blown canvas project.</p>
<a id="more"></a>
<p><div id="canvas-app"></div></p>
<script src="/js/canvas-examples/pointer-movement/0.2.0/pkg.js"></script>

<h2 id="1-The-pointer-movement-module-for-the-canvas-example"><a href="#1-The-pointer-movement-module-for-the-canvas-example" class="headerlink" title="1 - The pointer movement module for the canvas example"></a>1 - The pointer movement module for the canvas example</h2><p>In this canvas example I have a point that is treated as a map offset position, and then a pointer movement module state object (pm) that is used to update that map position point. This pm object has properties like angle, and distance that are used to find the direction, and rate of change for each update cycle or frame tick. This object can then be applied to another object such as a map offset position, or any kind of object that I would want to control with this kind of interface.</p>
<p>In addition to the properties of this Pointer Movement state object there will also be a need to have some methods to work with updating the state of the Pointer Movement object, as well as working with other related tasks. Tasks such as updating a Point with the Pointer Movement state, and working out events. I could make this a Class, but I prefer to not bother writing Classes that much these days. Instead I made this module in a way in which there is a method that is called to return a new Pointer Movement state, and then that state is passed to the other public methods.</p>
<p>There are also a few helper methods that are used internally in this module, along with the public methods that are returned and used outside of the module. The private methods are just used in this module as far as this canvas example is concerned, but if I where to continue working on this project chances are they would be pulled into a public module as well. In any case I still like to follow the IIFE pattern in module design when working out my own javaScript modules in native javaScript.</p>
<h3 id="1-1-The-start-of-the-module-the-public-api-and-the-create-new-Pointer-Movement-state-object-method"><a href="#1-1-The-start-of-the-module-the-public-api-and-the-create-new-Pointer-Movement-state-object-method" class="headerlink" title="1.1 - The start of the module, the public api, and the create new Pointer Movement state object method"></a>1.1 - The start of the module, the public api, and the create new Pointer Movement state object method</h3><p>The whole of this module is stored in an IIFE, I will not be getting into detail with that here as I have wrote other posts on this, as well as other kinds of basic javaScript module design. AT the top of the body of the IIFE I have a few helper functions that I use in the update method that I will be getting to later in this section. The helper methods lock to dirs, and apply mode have to do with locking the angle to a set number of points along the circumference of a circle.</p>
<p>For this module there is no main function, so I just created an object literal for the public API. The first method that I made for this public API for the Pointer Movement module is a method that can be used to create a new Pointer Movement state object (pm). When calling the method I can pass a number of options to set values like this min and max distance, and max pixels per second value to use when updating the position of an object with this.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> PM = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">// lock angle to dirs helper</span></div><div class="line">    <span class="keyword">var</span> lockToDirs = <span class="function"><span class="keyword">function</span>(<span class="params">radian, dirCount</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> dir = <span class="built_in">Math</span>.round(radian / utils.TAU * dirCount);</div><div class="line">        <span class="keyword">return</span> utils.mod(utils.TAU / dirCount * dir, utils.TAU);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// apply the current mode to angle</span></div><div class="line">    <span class="keyword">var</span> applyMode = <span class="function"><span class="keyword">function</span>(<span class="params">pm, radian</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(pm.mode.substr(<span class="number">0</span>, <span class="number">3</span>) === <span class="string">'dir'</span>)&#123;</div><div class="line">            <span class="keyword">var</span> dirCount = <span class="built_in">Number</span>(pm.mode.substr(<span class="number">3</span>, pm.mode.length));</div><div class="line">            dirCount = <span class="built_in">String</span>(dirCount) === <span class="string">'NaN'</span> ? <span class="number">360</span> : dirCount;</div><div class="line">            dirCount = dirCount &lt;= <span class="number">0</span> ? <span class="number">360</span> : dirCount;</div><div class="line">            pm.angle = lockToDirs(radian, dirCount);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// PUBLIC API</span></div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// new Pointer Movement State Object</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">ver</span>: <span class="string">'0.2.0'</span>,</div><div class="line">            <span class="attr">secs</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">longDownTime</span>: opt.longDownTime || <span class="number">3</span>,</div><div class="line">            <span class="attr">mode</span>: opt.mode || <span class="string">'dir1440'</span>,</div><div class="line">            <span class="attr">modeIndex</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">modesList</span>: opt.modesList || <span class="string">'dir360,dir8,dir4,dir1440,fine'</span>.split(<span class="string">','</span>),</div><div class="line">            <span class="attr">down</span>: <span class="literal">false</span>,</div><div class="line">            <span class="attr">angle</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">dist</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">distMin</span>: opt.distMin === <span class="literal">undefined</span> ? <span class="number">16</span> : opt.distMin,</div><div class="line">            <span class="attr">distMax</span>: opt.distMax || <span class="number">64</span>,</div><div class="line">            <span class="attr">per</span>:<span class="number">0</span>,</div><div class="line">            <span class="attr">PPS</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">maxPPS</span>: opt.maxPPS === <span class="literal">undefined</span> ? <span class="number">128</span> : opt.maxPPS,</div><div class="line">            <span class="attr">sp</span>: &#123; <span class="comment">// start point</span></div><div class="line">                x: <span class="number">0</span>,</div><div class="line">                <span class="attr">y</span>: <span class="number">0</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">cp</span>: &#123; <span class="comment">// current point</span></div><div class="line">                x: <span class="number">0</span>,</div><div class="line">                <span class="attr">y</span>: <span class="number">0</span></div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<p>The long down time option is used to set the amount of time in sections until a long press is preformed for this UI feature. As of version 0.2.0 this is used to just step the current modes index which in turn will set the current mode in the update method. However in future versions I will likely used this as a way to toggle some kind of additional menu on, or something to that effect.</p>
<p>So then in a project where I would use this module the create public method is the method I would use to create a pm state object. I can then pass that pm state object as an argument when it comes to using the additional methods in this module. Once such method would be the pm update method that will update the state of this object, which should be called in a main update loop method of the project. So why don’t I get to that next.</p>
<h3 id="1-4-Update-a-Pointer-Movement-state"><a href="#1-4-Update-a-Pointer-Movement-state" class="headerlink" title="1.4 - Update a Pointer Movement state"></a>1.4 - Update a Pointer Movement state</h3><p>I then need a method that I can used to update a Pointer Movement state that has a mutated current point. This method is used as a way to update the properties of the Pointer Movement state object, but not to mutate an object that the PM state object will be used to mutate, that is the responsibility of another public method in this module.</p>
<p>The update method should be called in a main app loop of the project that I use this with, when doing so the first argument should be an instance of a pm object created with the create method of this module. The second argument should be a number in seconds that is the amount of time that has passed sense the last call of the main app loop. For an example of this there is the section on the main.js example later in this post.</p>
<p>First off PPS or Pixels Per Second should default to 0, in the event that the distance from the start point to the current point is greater than the dist min option then PPS and the angle will be set. Otherwise the PPS value will remain at 0, and a secs value will be stepped to be used as a way to track the amount of time until a long press or click action is to be preformed.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// update the pm based on startPoint, and currentPoint</span></div><div class="line">api.update = <span class="function"><span class="keyword">function</span> (<span class="params">pm, secs</span>) </span>&#123;</div><div class="line">    pm.dist = <span class="number">0</span>;</div><div class="line">    pm.PPS = <span class="number">0</span>;</div><div class="line">    pm.angle = <span class="number">0</span>;</div><div class="line">    pm.mode = pm.modesList[pm.modeIndex];</div><div class="line">    <span class="comment">// set pm.dist</span></div><div class="line">    pm.dist = utils.distance(pm.sp.x, pm.sp.y, pm.cp.x, pm.cp.y);</div><div class="line">    <span class="comment">// set pps and angle if dist is greater than min and pointer is down</span></div><div class="line">    <span class="keyword">if</span> (pm.down &amp;&amp; pm.dist &gt;= pm.distMin) &#123;</div><div class="line">        pm.secs = <span class="number">0</span>;</div><div class="line">        pm.per = (pm.dist - pm.distMin) / pm.distMax;</div><div class="line">        pm.per = pm.per &gt; <span class="number">1</span> ? <span class="number">1</span> : pm.per;</div><div class="line">        pm.per = pm.per &lt; <span class="number">0</span> ? <span class="number">0</span> : pm.per;</div><div class="line">        pm.PPS = pm.per * pm.maxPPS;</div><div class="line">        <span class="keyword">var</span> radian = utils.mod(<span class="built_in">Math</span>.atan2(pm.cp.y - pm.sp.y, pm.cp.x - pm.sp.x), utils.TAU);</div><div class="line">        <span class="comment">// default to radian for 'fine' mode (or any mode other than dirN)</span></div><div class="line">        pm.angle = radian;</div><div class="line">        applyMode(pm, radian);</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        pm.secs += secs;</div><div class="line">        pm.secs = pm.secs &gt;= pm.longDownTime ? pm.longDownTime: pm.secs;</div><div class="line">        <span class="keyword">if</span>(pm.secs == pm.longDownTime)&#123;</div><div class="line">            pm.modeIndex += <span class="number">1</span>;</div><div class="line">            pm.modeIndex = utils.mod(pm.modeIndex, pm.modesList.length);</div><div class="line">            pm.secs = <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="1-5-Step-a-point-by-the-current-state-of-the-Pointer-Movement-state"><a href="#1-5-Step-a-point-by-the-current-state-of-the-Pointer-Movement-state" class="headerlink" title="1.5 - Step a point by the current state of the Pointer Movement state"></a>1.5 - Step a point by the current state of the Pointer Movement state</h3><p>This method is what I can use to update a point with a Pointer Movement State object. I just pass the Point Movement object as the first argument, and then the point I want to mutate with the method. A third argument can then be used to pass an amount of time that has passed in seconds.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// step a point by the current values of the pm</span></div><div class="line">api.stepPointByPM = <span class="function"><span class="keyword">function</span> (<span class="params">pm, pt, secs</span>) </span>&#123;</div><div class="line">    secs = secs === <span class="literal">undefined</span> ? <span class="number">1</span> : secs;</div><div class="line">    pt.x += <span class="built_in">Math</span>.cos(pm.angle) * pm.PPS * secs;</div><div class="line">    pt.y += <span class="built_in">Math</span>.sin(pm.angle) * pm.PPS * secs;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="1-5-Event-methods-and-the-end-of-the-module"><a href="#1-5-Event-methods-and-the-end-of-the-module" class="headerlink" title="1.5 - Event methods, and the end of the module"></a>1.5 - Event methods, and the end of the module</h3><p>I then worked out some additional methods that can be used when attaching event handers in the main javaScript project that makes used of this module. Each of these public methods will return an event handler that can be attached for events like mouse down, and touch start. When doing so I just need to pass the pm object that I want to create an event handler for. The resulting event handler can then be used with the add event listener method to attach events to the canvas element. For an example of this there is the main.js file near then end of this post.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">    <span class="comment">// when a pointer action starts</span></div><div class="line">    api.onPointerStart = <span class="function"><span class="keyword">function</span> (<span class="params">pm</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> pos = utils.getCanvasRelative(e);</div><div class="line">            pm.down = <span class="literal">true</span>;</div><div class="line">            pm.secs = <span class="number">0</span>;</div><div class="line">            pm.sp = &#123;</div><div class="line">                <span class="attr">x</span>: pos.x,</div><div class="line">                <span class="attr">y</span>: pos.y</div><div class="line">            &#125;;</div><div class="line">            pm.cp = &#123;</div><div class="line">                <span class="attr">x</span>: pos.x,</div><div class="line">                <span class="attr">y</span>: pos.y</div><div class="line">            &#125;;</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// when a pointer action moves</span></div><div class="line">    api.onPointerMove = <span class="function"><span class="keyword">function</span> (<span class="params">pm</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> pos = utils.getCanvasRelative(e);</div><div class="line">            pm.cp = &#123;</div><div class="line">                <span class="attr">x</span>: pos.x,</div><div class="line">                <span class="attr">y</span>: pos.y</div><div class="line">            &#125;;</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// when a pointer actions ends</span></div><div class="line">    api.onPointerEnd = <span class="function"><span class="keyword">function</span> (<span class="params">pm</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> pos = utils.getCanvasRelative(e);</div><div class="line">            pm.down = <span class="literal">false</span>;</div><div class="line">            pm.secs = <span class="number">0</span>;</div><div class="line">            pm.sp = &#123;</div><div class="line">                <span class="attr">x</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">y</span>: <span class="number">0</span></div><div class="line">            &#125;;</div><div class="line">            pm.cp = &#123;</div><div class="line">                <span class="attr">x</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">y</span>: <span class="number">0</span></div><div class="line">            &#125;;</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return the public API</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="2-The-draw-module"><a href="#2-The-draw-module" class="headerlink" title="2 - The draw module"></a>2 - The draw module</h2><p>So now that I have my Pointer Movement module worked out I will want to produce some draw methods that can be used to draw the current state of this Pointer Movement object, as well as other things that have to do with this canvas example. For the most part there is just drawing the current state of the pm object instance that is most impotent, however in this example I am also going to be packing in just a few more methods that have to do with drawing the state of other elements of this example outside of the pm object. In a real project the Pm object would be just one little thing about the project that has to do with how to go about navigating a game map. However in this example the game map is just a map offset point and that is all. Still I will want o draw some gird lines at least as a way to show that this is in fact working the way I want it to.</p>
<h3 id="2-1-The-start-of-the-module-and-a-draw-background-method"><a href="#2-1-The-start-of-the-module-and-a-draw-background-method" class="headerlink" title="2.1 - The start of the module, and a draw background method"></a>2.1 - The start of the module, and a draw background method</h3><p>This draw javaScript file is just an object literal with a bunch of draw methods attached that need to have a drawing context passed as the first argument. The first draw method that I worked out is to just draw a plain black background when passed the drawing context and canvas.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> draw = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">// public api</span></div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// draw background</span></div><div class="line">    api.background = <span class="function"><span class="keyword">function</span> (<span class="params">pm, ctx, canvas, style</span>) </span>&#123;</div><div class="line">        ctx.fillStyle = style || <span class="string">'black'</span>;</div><div class="line">        ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<h3 id="2-2-Just-draw-some-grid-lines-draw-method"><a href="#2-2-Just-draw-some-grid-lines-draw-method" class="headerlink" title="2.2 - Just draw some grid lines draw method"></a>2.2 - Just draw some grid lines draw method</h3><p>I then want a draw method that just draws some grid lines on the canvas. In a real project I would have draw methods that render the current state of a map module. However getting into that would be a whole other post. For now I just need a draw method where I pass a point that is being mutated by my Point Movement state that is used to draw grid lines.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// draw point grid lines</span></div><div class="line">api.PTGridlines = <span class="function"><span class="keyword">function</span> (<span class="params">pt, ctx, canvas, cellSize</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> cellX = <span class="number">-1</span>,</div><div class="line">    cellY = <span class="number">-1</span>,</div><div class="line">    x,</div><div class="line">    y;</div><div class="line">    cellSize = cellSize === <span class="literal">undefined</span> ? <span class="number">256</span>: cellSize;</div><div class="line">    ctx.strokeStyle = <span class="string">'#282828'</span>;</div><div class="line">    ctx.lineWidth = <span class="number">3</span>;</div><div class="line">    <span class="keyword">while</span> (cellX &lt; <span class="built_in">Math</span>.ceil(canvas.width / cellSize) + <span class="number">1</span> ) &#123;</div><div class="line">        x = cellX * cellSize - pt.x % cellSize;</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.moveTo(x, <span class="number">0</span>);</div><div class="line">        ctx.lineTo(x, canvas.height);</div><div class="line">        ctx.stroke();</div><div class="line">        cellX += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">while</span> (cellY &lt; <span class="built_in">Math</span>.ceil(canvas.height / cellSize) + <span class="number">1</span> ) &#123;</div><div class="line">        y = cellY * cellSize - pt.y % cellSize;</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.moveTo(<span class="number">0</span>, y);</div><div class="line">        ctx.lineTo(canvas.width, y);</div><div class="line">        ctx.stroke();</div><div class="line">        cellY += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-3-Draw-the-navigation-circle-for-the-Pointer-Movement-state"><a href="#2-3-Draw-the-navigation-circle-for-the-Pointer-Movement-state" class="headerlink" title="2.3 - Draw the navigation circle for the Pointer Movement state"></a>2.3 - Draw the navigation circle for the Pointer Movement state</h3><p>This draw method helps to give a visual idea of what is going on with the Pointer Movement state. The draw nav method itself is fairly small but makes use of a few helper methods for drawing various parts of the interface. I broken things down into the base circle that is drawn, then a line that is drawn as well as another circle that is drawn on the line to show the current setting for speed as well as another helper to draw some basic into for the nav circle.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// draw a main pm circle</span></div><div class="line"><span class="keyword">var</span> draw_pm_circle = <span class="function"><span class="keyword">function</span>(<span class="params">pm, ctx, per</span>)</span>&#123;</div><div class="line">        per = per === <span class="literal">undefined</span> ? <span class="number">1</span> : per;</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.arc(pm.sp.x, pm.sp.y, (pm.distMax / <span class="number">2</span>) * per, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">        ctx.stroke();</div><div class="line">        ctx.fill();</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw pm direction line</span></div><div class="line"><span class="keyword">var</span> draw_pm_dir_line = <span class="function"><span class="keyword">function</span>(<span class="params">pm, ctx</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> x = <span class="built_in">Math</span>.cos(pm.angle) * pm.distMax + pm.sp.x,</div><div class="line">        y = <span class="built_in">Math</span>.sin(pm.angle) * pm.distMax + pm.sp.y;</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.moveTo(pm.sp.x, pm.sp.y);</div><div class="line">        ctx.lineTo(x, y);</div><div class="line">        ctx.stroke();</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw PPS circle</span></div><div class="line"><span class="keyword">var</span> draw_pm_pps_circle = <span class="function"><span class="keyword">function</span>(<span class="params">pm, ctx</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> per = pm.PPS / pm.maxPPS,</div><div class="line">        x = <span class="built_in">Math</span>.cos(pm.angle) * pm.distMax * per + pm.sp.x;</div><div class="line">        y = <span class="built_in">Math</span>.sin(pm.angle) * pm.distMax * per + pm.sp.y;</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.arc(x, y, <span class="number">10</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">        ctx.stroke();</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw pm info</span></div><div class="line"><span class="keyword">var</span> draw_pm_info = <span class="function"><span class="keyword">function</span>(<span class="params">pm, ctx</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> x = pm.sp.x + pm.distMax * <span class="number">0.6</span>,</div><div class="line">    y = pm.sp.y + <span class="number">10</span>;</div><div class="line">    ctx.fillStyle = <span class="string">'lime'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">    ctx.font = <span class="string">'10px arial'</span>;</div><div class="line">    ctx.fillText(<span class="string">'mode: '</span> + pm.mode, x, y);</div><div class="line">    ctx.fillText(<span class="string">'PPS: '</span> + <span class="built_in">Math</span>.round(pm.PPS) + <span class="string">' / '</span> + pm.maxPPS + <span class="string">' ('</span>+<span class="built_in">Math</span>.round(pm.per*<span class="number">100</span>)+<span class="string">'%)'</span>, x, y + <span class="number">12</span>);</div><div class="line">    ctx.fillText(<span class="string">'A: '</span> + utils.radianToScale(pm.angle).toFixed(<span class="number">2</span>), x, y + <span class="number">24</span>);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw a navigation circle when moving the map</span></div><div class="line">api.navCircle = <span class="function"><span class="keyword">function</span> (<span class="params">pm, ctx, canvas</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (pm.down) &#123;</div><div class="line">        ctx.strokeStyle = <span class="string">'white'</span>;</div><div class="line">        ctx.lineWidth = <span class="number">3</span>;</div><div class="line">        <span class="keyword">if</span>(pm.PPS &gt; <span class="number">0</span>)&#123;</div><div class="line">            ctx.fillStyle = <span class="string">'rgba(0,255,0,0.4)'</span>;</div><div class="line">            draw_pm_circle(pm, ctx, <span class="number">1</span>);</div><div class="line">            draw_pm_dir_line(pm, ctx);</div><div class="line">            draw_pm_pps_circle(pm, ctx);</div><div class="line">            draw_pm_info(pm, ctx);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="comment">// else waiting for the long down</span></div><div class="line">            <span class="keyword">var</span> per = pm.secs / pm.longDownTime;</div><div class="line">            ctx.globalAlpha = per;</div><div class="line">            <span class="keyword">if</span>(per &gt;= <span class="number">0.25</span>)&#123;</div><div class="line">                ctx.fillStyle = <span class="string">'rgba(0,255,255,0.1)'</span>;</div><div class="line">                draw_pm_circle(pm, ctx, <span class="number">1</span>);</div><div class="line">                ctx.fillStyle = <span class="string">'rgba(0,255,255,0.4)'</span>;</div><div class="line">                draw_pm_circle(pm, ctx, (per - <span class="number">0.25</span>) / <span class="number">0.75</span>);</div><div class="line">                draw_pm_info(pm, ctx);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        ctx.globalAlpha = <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-4-Draw-debug-info"><a href="#2-4-Draw-debug-info" class="headerlink" title="2.4 - Draw debug info"></a>2.4 - Draw debug info</h3><p>Another method that I use to just see the current state of some values of interest as I would on this canvas example is my draw debug into method. For now it is more or less just the map offset position that is the only value of interest outside of the pm object that I would like to keep an eye on. There is also the grid lines that should give some visual clue that my pm object is working the way that I want it to though.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">    <span class="comment">// draw debug info</span></div><div class="line">    api.debugInfo = <span class="function"><span class="keyword">function</span> (<span class="params">pm, pt, ctx, canvas</span>) </span>&#123;</div><div class="line">        ctx.fillStyle = <span class="string">'lime'</span>;</div><div class="line">        ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">        ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">        ctx.font = <span class="string">'20px arial'</span>;</div><div class="line">        ctx.fillText(<span class="string">'pos: '</span> + <span class="built_in">Math</span>.floor(pt.x) + <span class="string">', '</span> + <span class="built_in">Math</span>.floor(pt.y), <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// draw version number</span></div><div class="line">    api.ver = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, pm</span>) </span>&#123;</div><div class="line">        ctx.fillStyle = <span class="string">'lime'</span>;</div><div class="line">        ctx.font = <span class="string">'10px courier'</span>;</div><div class="line">        ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">        ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">        ctx.fillText(<span class="string">'v'</span> + pm.ver, <span class="number">5</span>, canvas.height - <span class="number">15</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// retrun the public api</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<p>I also have a simple draw ver method that will just draw the current version number of the pm object. This is something that I like to do with all of my canvas examples now so I know what the deal is when it comes to editing this post and all my other posts on canvas.</p>
<p>At the end of the draw module I then return the public api so the public methods can then be used in the main app loop of the example, or any state machine method that I might use this in when it comes to other canvas examples.</p>
<h2 id="3-The-utils-library"><a href="#3-The-utils-library" class="headerlink" title="3 - The utils library"></a>3 - The utils library</h2><p>As I work on my canvas examples I have found that I should have a place to park methods that I will be using in more than one place within a project, and also that I might take with me to other canvas examples. I do not have a standard library for all my canvas examples but what I have been doing is having a utils lib that will change a little from one example to another.</p>
<p>For this example I am using my usual distance  formula in the pm module to get the distance between the start point and the current point in the canvas. I am also using the mathematical modulo method for the angle from the start point to the current point. I then have another function here that helps me with formating a radian to degrees when it comes to drawing info for the pm object.</p>
<p>I also have my create canvas method that I am making a single standard method for all canvas examples, this helps me to create and return a canvas element that has all the standard properties set just the way that I like it. I also have my typical get canvas relative method that helps me to get a point relative to the canvas rather than then window object of a web browser. This get canvas relative method is also fairly standard for all canvas examples that make use of pointer events with a mouse or touch screen.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> utils = &#123;&#125;;</div><div class="line"><span class="comment">// TAU CONST</span></div><div class="line">utils.TAU = <span class="built_in">Math</span>.PI * <span class="number">2</span>;</div><div class="line"><span class="comment">// distance</span></div><div class="line">utils.distance = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, x2, y2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow(x1 - x2, <span class="number">2</span>) + <span class="built_in">Math</span>.pow(y1 - y2, <span class="number">2</span>));</div><div class="line">&#125;;</div><div class="line"><span class="comment">// mathematical modulo</span></div><div class="line">utils.mod = <span class="function"><span class="keyword">function</span> (<span class="params">x, m</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (x % m + m) % m;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// radian to scale helper</span></div><div class="line">utils.radianToScale = <span class="function"><span class="keyword">function</span>(<span class="params">radian, scale</span>)</span>&#123;</div><div class="line">    scale = scale === <span class="literal">undefined</span> ? <span class="number">360</span> : scale;</div><div class="line">    <span class="keyword">return</span> radian / (<span class="built_in">Math</span>.PI * <span class="number">2</span>) * scale;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// create a canvas</span></div><div class="line">utils.createCanvas = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    opt.container = opt.container || <span class="built_in">document</span>.getElementById(<span class="string">'canvas-app'</span>) || <span class="built_in">document</span>.body;</div><div class="line">    opt.canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">    opt.ctx = opt.canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    <span class="comment">// assign the 'canvas_example' className</span></div><div class="line">    opt.canvas.className = <span class="string">'canvas_example'</span>;</div><div class="line">    <span class="comment">// set native width</span></div><div class="line">    opt.canvas.width = opt.width === <span class="literal">undefined</span> ? <span class="number">320</span> : opt.width;</div><div class="line">    opt.canvas.height = opt.height === <span class="literal">undefined</span> ? <span class="number">240</span> : opt.height;</div><div class="line">    <span class="comment">// translate by 0.5, 0.5</span></div><div class="line">    opt.ctx.translate(<span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line">    <span class="comment">// disable default action for onselectstart</span></div><div class="line">    opt.canvas.onselectstart = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</div><div class="line">    opt.canvas.style.imageRendering = <span class="string">'pixelated'</span>;</div><div class="line">    opt.ctx.imageSmoothingEnabled = <span class="literal">false</span>;</div><div class="line">    <span class="comment">// append canvas to container</span></div><div class="line">    opt.container.appendChild(opt.canvas);</div><div class="line">    <span class="keyword">return</span> opt;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// get canvas relative point</span></div><div class="line">utils.getCanvasRelative = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = e.target,</div><div class="line">    bx = canvas.getBoundingClientRect(),</div><div class="line">    pos = &#123;</div><div class="line">        <span class="attr">x</span>: (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientX : e.clientX) - bx.left,</div><div class="line">        <span class="attr">y</span>: (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientY : e.clientY) - bx.top,</div><div class="line">        <span class="attr">bx</span>: bx</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// ajust for native canvas matrix size</span></div><div class="line">    pos.x = <span class="built_in">Math</span>.floor((pos.x / canvas.scrollWidth) * canvas.width);</div><div class="line">    pos.y = <span class="built_in">Math</span>.floor((pos.y / canvas.scrollHeight) * canvas.height);</div><div class="line">    <span class="comment">// prevent default</span></div><div class="line">    e.preventDefault();</div><div class="line">    <span class="keyword">return</span> pos;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="4-The-Main-js-and-index-html-files-and-getting-the-project-up-and-running"><a href="#4-The-Main-js-and-index-html-files-and-getting-the-project-up-and-running" class="headerlink" title="4 - The Main.js, and index.html files and getting the project up and running"></a>4 - The Main.js, and index.html files and getting the project up and running</h2><p>Now to wrap everything together with a main.js file and some html. In this example I am using the Pointer Movement module to create an object that I will be using with the other public methods of the Pointer Movement module. For now it is just an example that will use the PM object to move a point that is then used to draw grid lines in a way that shows that there is movement. In a real project that make use of this I would be working with a real map module of some kind, but that would pull attention away from what I am just focusing on in this post here.</p>
<h3 id="4-1-main-js"><a href="#4-1-main-js" class="headerlink" title="4.1 - main.js"></a>4.1 - main.js</h3><p>Here I have the main.js file where I create and append a canvas element that will be used for this canvas example. I then create a new Pointer Movement state, and a point that will be used for what would be a map offset value. I then have a main app loop where I am calling my methods that are used to update the Pointer Movement state, and the point that is used for drawing grid lines. I then also have some event handers work out as well.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// create a canvas</span></div><div class="line"><span class="keyword">var</span> canvasObj = utils.createCanvas(&#123; <span class="attr">width</span>: <span class="number">640</span>, <span class="attr">height</span>: <span class="number">480</span>&#125;),</div><div class="line">canvas = canvasObj.canvas,</div><div class="line">ctx = canvasObj.ctx;</div><div class="line"><span class="comment">// create a pm object</span></div><div class="line"><span class="keyword">var</span> pm = PM.create(&#123;</div><div class="line">        <span class="attr">modesList</span>:<span class="string">'dir32,dir16,dir12,dir8,dir4,dir360,dir1440,fine'</span>.split(<span class="string">','</span>),</div><div class="line">        <span class="attr">longDownTime</span>: <span class="number">2</span>,</div><div class="line">        <span class="attr">distMin</span>: <span class="number">32</span>,</div><div class="line">        <span class="attr">distMax</span>: <span class="number">128</span>,</div><div class="line">        <span class="attr">maxPPS</span>: <span class="number">512</span></div><div class="line">    &#125;);</div><div class="line"><span class="comment">// a point</span></div><div class="line"><span class="keyword">var</span> pt = &#123;</div><div class="line">    <span class="attr">x</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">y</span>: <span class="number">0</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">var</span> lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    t = now - lt,</div><div class="line">    secs = t / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    PM.update(pm, secs);</div><div class="line"> </div><div class="line">    PM.stepPointByPM(pm, pt, secs);</div><div class="line"> </div><div class="line">    draw.background(pm, ctx, canvas, <span class="string">'black'</span>);</div><div class="line">    draw.PTGridlines(pt, ctx, canvas, <span class="number">128</span>);</div><div class="line">    draw.navCircle(pm, ctx, canvas);</div><div class="line">    draw.debugInfo(pm, pt, ctx, canvas);</div><div class="line">    draw.ver(ctx, pm);</div><div class="line">    lt = now;</div><div class="line">&#125;;</div><div class="line">loop();</div><div class="line"> </div><div class="line">canvas.addEventListener(<span class="string">'mousedown'</span>, PM.onPointerStart(pm) );</div><div class="line">canvas.addEventListener(<span class="string">'mousemove'</span>, PM.onPointerMove(pm) );</div><div class="line">canvas.addEventListener(<span class="string">'mouseup'</span>, PM.onPointerEnd(pm) );</div><div class="line">canvas.addEventListener(<span class="string">'touchstart'</span>, PM.onPointerStart(pm) );</div><div class="line">canvas.addEventListener(<span class="string">'touchmove'</span>, PM.onPointerMove(pm) );</div><div class="line">canvas.addEventListener(<span class="string">'touchend'</span>, PM.onPointerEnd(pm) );</div><div class="line"><span class="comment">// mouse out and touch cancel will also fire an end pointer event</span></div><div class="line">canvas.addEventListener(<span class="string">'mouseout'</span>, PM.onPointerEnd(pm) );</div><div class="line">canvas.addEventListener(<span class="string">'touchcancel'</span>, PM.onPointerEnd(pm) );</div></pre></td></tr></table></figure>
<h3 id="4-2-index-html"><a href="#4-2-index-html" class="headerlink" title="4.2 - index.html"></a>4.2 - index.html</h3><p>I then have an html file that pulls all of this together. In the body of the html or wherever I place this I am going to want to have a single div with an id of canvas app. This is what is used by my create canvas utility method as a mount point for the canvas element that is creates. I then just need to link to all the javaScript files if I am going to use the project this way. WHen it comes to builds they need to be built in the order in which the script tags are to make sure that I do not run into errors.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;title&gt;canvas example pointer movement&lt;/title&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;div id="canvas-app" style="width:320px;height:240px;margin-left:auto;margin-right:auto;"&gt;&lt;/div&gt;</div><div class="line">        &lt;script src="./lib/utils.js"&gt;&lt;/script&gt;</div><div class="line">        &lt;script src="./lib/pm.js"&gt;&lt;/script&gt;</div><div class="line">        &lt;script src="./lib/draw.js"&gt;&lt;/script&gt;</div><div class="line">        &lt;script src="./main.js"&gt;&lt;/script&gt;</div><div class="line">    &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5 - Conclusion"></a>5 - Conclusion</h2><p>When this canvas Example is up and running I have grid lines drawn to the canvas. When I click and hold on the canvas the navigation circle shows up, at which point as I move the mouse pointer the state changes and so to does the state of the point object. The gird lines move in a way that is consistent with what I would expect.</p>
<p>So this is just a basic way of going about moving around a map that is consistent with how many games work where you click and drag from a center point and then the vector that is created as a result of movement from that point is used to create delta values that update x and y.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2020/01/26/canvas-example-pointer-movement/" data-id="cl7vyxdck00mp0gv1wapj1sx7" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2020/01/26/canvas-example-pointer-movement/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/01/27/js-array-from/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          The Array from static method and other ways of creating an array from something else
        
      </div>
    </a>
  
  
    <a href="/2020/01/22/js-math-max-min/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Math max and min methods in javaScript</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2020/01/26/canvas-example-pointer-movement/index.html';
    this.page.identifier = '596';
    this.page.title = 'Pointer map movement logic canvas example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.5px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.5px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.5px;">angular</a> <a href="/tags/animation/" style="font-size: 12px;">animation</a> <a href="/tags/automation/" style="font-size: 12px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.5px;">backbone</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.5px;">canvas</a> <a href="/tags/corejs/" style="font-size: 13px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.5px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.5px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.5px;">express</a> <a href="/tags/games/" style="font-size: 17px;">games</a> <a href="/tags/git/" style="font-size: 13px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 12px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.5px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.5px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.5px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.5px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.5px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.5px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.5px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.5px;">python</a> <a href="/tags/statistics/" style="font-size: 14px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/09/09/threejs-examples-wrap-module/">threejs wrap module example for wrapping rather than clamping values</a>
          </li>
        
          <li>
            <a href="/2022/09/02/threejs-vector3-wrap/">Wrapping a vector3 instance in threejs</a>
          </li>
        
          <li>
            <a href="/2022/08/26/threejs-examples-many-object-tweening/">Tweening many objects at once threejs example</a>
          </li>
        
          <li>
            <a href="/2022/08/19/electronjs-example-user-data-file/">User Data File Electronjs application example</a>
          </li>
        
          <li>
            <a href="/2022/08/12/threejs-cylinder-geometry/">Cylinder Geometry threejs example</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2020/01/26/canvas-example-pointer-movement/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>