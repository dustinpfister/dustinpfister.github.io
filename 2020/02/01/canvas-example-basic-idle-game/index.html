<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Basic idle game canvas example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2020/02/01/canvas-example-basic-idle-game/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="There is a lot that I like about idle or incremental games as there is the artistic side of game development, and then there is the business side of things. When it comes to the artistic side maybe ga">
<meta property="og:type" content="article">
<meta property="og:title" content="Basic idle game canvas example">
<meta property="og:url" content="https://dustinpfister.github.io/2020/02/01/canvas-example-basic-idle-game/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="There is a lot that I like about idle or incremental games as there is the artistic side of game development, and then there is the business side of things. When it comes to the artistic side maybe ga">
<meta property="og:updated_time" content="2020-08-05T18:08:42.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Basic idle game canvas example">
<meta name="twitter:description" content="There is a lot that I like about idle or incremental games as there is the artistic side of game development, and then there is the business side of things. When it comes to the artistic side maybe ga">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas-Examples</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-canvas-example-basic-idle-game" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/01/canvas-example-basic-idle-game/" class="article-date"> Published:
  <time datetime="2020-02-02T01:36:00.000Z" itemprop="datePublished">2020-02-01</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2020/02/01/canvas-example-basic-idle-game/" class="article-date"> Modified:
  <time datetime="2020-08-05T18:08:42.000Z" itemprop="dateModified">2020-08-05</time>
</a>

    <span class="article-date">V1.3</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Basic idle game canvas example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>There is a lot that I like about <a href="https://en.wikipedia.org/wiki/Incremental_game" target="_blank" rel="external">idle or incremental games</a> as there is the artistic side of game development, and then there is the business side of things. When it comes to the artistic side maybe game development is about some kind of expression, making some kind of statement, or just simply having fun. However with the artistic side of game development aside there is also the business side of the endeavor, and when it comes to the business side all that really matters is if a game can make you money or not. Sp then when it comes to the business side of game development a game does not have to be some kind of ground breaking statement, emotional expression, or anything profound, it just needs to make money.</p>
<p>When it comes to the business side of game development I have found that a game does not only not need to be some kind of emotional expression, or some grand original idea that no one has really tough of before, no not at all in fact it does not even need to be fun or interesting actually oddly enough. With the business side of game development a game just needs to be addictive, people need to just start playing it and get hooked. So I thought I would make another <a href="/2020/03/23/canvas-example/">canvas example</a> post that is a basic idle game. Nothing fancy with this one, just a bland, unbranded idle game starting point that is noting to write home about, but might still prove to be slightly addictive.</p>
<p>This canvas example makes use of a custom trailered utility library that has a method that creates a button layout, which is one way that I go about making menus in a canvas project. I <a href="/2020/02/03/canvas-example-button-layout/">wrote a post in which I get into this button layout method</a> in detail, but will be covering it here also just not in detail. </p>
<p>The game module has an upgrade system that I worked out that is worth writing a thing or two about so I will be getting into that a little here also. In any case this post should serve as a good starting point for making a basic idle game with the canvas element and javaScript so lets get to it.</p>
<a id="more"></a>
<p><div id="canvas-app" style="width:320px;height:240px;margin-left:auto;margin-right:auto;"></div></p>
<script>var u={};u.getCanvasRelative=function(e){var canvas=e.target,bx=canvas.getBoundingClientRect();var x=(e.changedTouches?e.changedTouches[0].clientX:e.clientX)-bx.left,y=(e.changedTouches?e.changedTouches[0].clientY:e.clientY)-bx.top;return{x:x,y:y,bx:bx};};u.boundingBox=function(x1,y1,w1,h1,x2,y2,w2,h2){return!((y1+h1)<(y2)||y1>(y2+h2)||(x1+w1)<x2||x1>(x2+w2));};u.mkButtonLayout=function(opt){var blObj={};opt=opt||{};blObj.buttons=opt.buttons||[];blObj.attachTo=opt.attachTo||window;blObj.handler=function(e){var pos=u.getCanvasRelative(e),i=opt.buttons.length,b;e.preventDefault();while(i--){b=opt.buttons[i];if(u.boundingBox(pos.x,pos.y,1,1,b.x,b.y,b.w,b.h)){if(b.onAction){b.onAction.call({opt:opt,pos:pos,button:b,e:e},pos,opt,b,e);}break;}}};blObj.attachTo.addEventListener('click',blObj.handler);return blObj;};var game=(function(){var upgradeData=[{dispName:'Manual Gather',cost:{base:10,pow:1.09,inc:5},effect:function(state,level){state.gatherRate.manual=1+level+Math.floor(Math.pow(1.05,level)-1);}},{dispName:'Auto Gather',cost:{base:1000,pow:1.25,inc:250},effect:function(state,level,us){state.autoGatherActive=false;if(level>=1){state.autoGatherActive=true;state.gatherRate.auto=level+Math.floor(Math.pow(1.025,level)-1);;}}}];var makeUS=function(ud){return{dispName:ud.dispName,ud:ud,level:0,cost:Object.assign({current:ud.cost},ud.cost)};};var getUSCostBreakdown=function(us){return{base:us.cost.base,inc:us.cost.inc*us.level,pow:Math.floor(Math.pow(us.cost.pow,us.level))};};var setUSCurrentCost=function(us,level){var bd;level=level||0;us.level=level;var bd=getUSCostBreakdown(us);us.cost.current=bd.base+bd.inc+bd.pow;};var applyUSEffectToState=function(us,state,ud){ud.effect(state,us.level,us);};var setUpgradeLevel=function(us,state,level){setUSCurrentCost(us,level);applyUSEffectToState(us,state,us.ud);};var applyAllUSFromState=function(state,upgradeData){state.US.forEach(function(us,i){setUpgradeLevel(us,state,us.level);});};var createNewState=function(upgradeData){return{ver:'0.0.0',money:0,tickRate:3000,lastTick:new Date(),autoGatherActive:false,gatherRate:{manual:1,auto:0},US:upgradeData.map(function(ud){return makeUS(ud);})};};return{getState:function(){var state=createNewState(upgradeData);applyAllUSFromState(state,upgradeData);return state;},buyUpgrade:function(state,usi){usi=typeof usi==='number'?state.US[usi]:usi;if(state.money>=usi.cost.current){state.money-=usi.cost.current;setUpgradeLevel(usi,state,usi.level+=1);}},manualGather:function(state){state.money+=state.gatherRate.manual;},update:function(state){var now=new Date(),t=now-state.lastTick,ticks=t/state.tickRate;if(state.autoGatherActive){if(ticks>=1){state.money+=state.gatherRate.auto*ticks;state.lastTick=now;}}else{state.lastTick=now;}}};}());var draw={};draw.background=function(ctx,canvas){ctx.fillStyle='black';ctx.fillRect(0,0,canvas.width,canvas.height);};draw.stateStatusInfo=function(ctx,state){ctx.fillStyle='white';ctx.textBaseline='top';ctx.textAlign='left';ctx.fillText('money: '+state.money.toFixed(2)+', manual: '+state.gatherRate.manual+', auto: '+state.gatherRate.auto,10,20);ctx.fillText('v'+state.ver,10,10);};draw.tickProgressBar=function(ctx,canvas,state){var t=new Date()-state.lastTick,per=t/state.tickRate;if(state.autoGatherActive){ctx.fillStyle='grey';ctx.fillRect(0,canvas.height-10,canvas.width,10);ctx.fillStyle='blue';ctx.fillRect(0,canvas.height-10,canvas.width*per,10);}};draw.debugUpgrades=function(ctx,state){ctx.fillStyle='white';ctx.textBaseline='top';ctx.textAlign='left';state.US.forEach(function(uc,i){ctx.fillText('upgrade: '+uc.dispName+', level: '+uc.level,10,30+10*i);});};draw.buttonLayout=function(ctx,blObj){var i=blObj.buttons.length,b;while(i--){b=blObj.buttons[i];ctx.fillStyle='red';ctx.fillRect(b.x,b.y,b.w,b.h);ctx.fillStyle='white';ctx.textBaseline='middle';ctx.textAlign='center';ctx.fillText(b.label||'',b.x+b.w/2,b.y+b.h/2);}};var canvas=document.createElement('canvas'),ctx=canvas.getContext('2d'),container=document.getElementById('canvas-app')||document.body;container.appendChild(canvas);canvas.width=320;canvas.height=240;var state=game.getState();var buttons=state.US.map(function(us,i){return{x:170,y:40+32*i,w:128,h:32,label:us.dispName+' ('+us.cost.current+') ',onAction:function(pos,opt,b,e){game.buyUpgrade(state,us);b.label=us.dispName+' ('+us.cost.current+') ';}};});buttons.push({x:16,y:100,w:64,h:32,label:'Gather',onAction:function(pos,opt,e){game.manualGather(state);}});var blOptions={attachTo:canvas,buttons:buttons};var blObj=u.mkButtonLayout(blOptions);var loop=function(){requestAnimationFrame(loop);draw.background(ctx,canvas);draw.tickProgressBar(ctx,canvas,state);draw.stateStatusInfo(ctx,state);draw.buttonLayout(ctx,blObj);draw.debugUpgrades(ctx,state);game.update(state);};loop();</script>

<h2 id="1-The-utils-lib-for-the-basic-idle-game-canvas-example"><a href="#1-The-utils-lib-for-the-basic-idle-game-canvas-example" class="headerlink" title="1 - The utils lib for the basic idle game canvas example"></a>1 - The utils lib for the basic idle game canvas example</h2><p>So in this section I will be gong over the utility library that I worked out for this canvas example of a basic idle game. Considering the nature of the game the user interface of the game will just consist of a static button layout in the canvas element. This button layout will be composed of buttons that preform a manual gather action, as well as upgrades and will be a box like area in the canvas. So  with that said I will need some methods for collision detection, and working with mouse and or touch events in addition to a method that can be used to create this button layout to be used as the games interface.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> u = &#123;&#125;;</div><div class="line"> </div><div class="line">u.getCanvasRelative = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = e.target,</div><div class="line">    bx = canvas.getBoundingClientRect();</div><div class="line">    <span class="keyword">var</span> x = (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientX : e.clientX) - bx.left,</div><div class="line">    y = (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientY : e.clientY) - bx.top;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">x</span>: x,</div><div class="line">        <span class="attr">y</span>: y,</div><div class="line">        <span class="attr">bx</span>: bx</div><div class="line">    &#125;;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">u.boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, w1, h1, x2, y2, w2, h2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> !(</div><div class="line">        (y1 + h1) &lt; (y2) ||</div><div class="line">        y1 &gt; (y2 + h2) ||</div><div class="line">        (x1 + w1) &lt; x2 ||</div><div class="line">        x1 &gt; (x2 + w2));</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">u.mkButtonLayout = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> blObj = &#123;&#125;;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    blObj.buttons = opt.buttons || [];</div><div class="line">    blObj.attachTo = opt.attachTo || <span class="built_in">window</span>;</div><div class="line">    blObj.handler = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> pos = u.getCanvasRelative(e),</div><div class="line">        i = opt.buttons.length,</div><div class="line">        b;</div><div class="line">        e.preventDefault();</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            b = opt.buttons[i];</div><div class="line">            <span class="keyword">if</span> (u.boundingBox(pos.x, pos.y, <span class="number">1</span>, <span class="number">1</span>, b.x, b.y, b.w, b.h)) &#123;</div><div class="line">                <span class="keyword">if</span> (b.onAction) &#123;</div><div class="line">                    b.onAction.call(&#123;</div><div class="line">                        <span class="attr">opt</span>: opt,</div><div class="line">                        <span class="attr">pos</span>: pos,</div><div class="line">                        <span class="attr">button</span>: b,</div><div class="line">                        <span class="attr">e</span>: e</div><div class="line">                    &#125;, pos, opt, b, e);</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    blObj.attachTo.addEventListener(<span class="string">'click'</span>, blObj.handler);</div><div class="line">    <span class="keyword">return</span> blObj;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>Now that I have a utility module I can get to the game state module, and then the code that draws a state object created with that module to the canvas.</p>
<h2 id="2-The-game-module"><a href="#2-The-game-module" class="headerlink" title="2 - The game module"></a>2 - The game module</h2><p>Now to get into the actual game module of this basic idle game canvas example. This module is used to create and update a state object, but not to render that state object to the canvas. This way I am pulling logic that has to do with state away from logic that renders that state to the canvas.</p>
<h3 id="2-1-The-start-of-the-game-module-and-the-upgrade-data-array"><a href="#2-1-The-start-of-the-game-module-and-the-upgrade-data-array" class="headerlink" title="2.1 - The start of the game module and the upgrade data array"></a>2.1 - The start of the game module and the upgrade data array</h3><p>The module follows an IIFE pattern and at the very top of the self executing function expression I have an upgrade data array. This array contains an object for each upgrade that I would like to have for the idle game. For now there is just an upgrade for the rate at which money is gathered manually, and for the rate at which it is gathered automatically. I do after all want to try to keep this canvas example basic.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> game = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// UPGRADES</span></div><div class="line"> </div><div class="line">    <span class="comment">// upgrade data array</span></div><div class="line">    <span class="keyword">var</span> upgradeData = [&#123;</div><div class="line">            <span class="attr">dispName</span>: <span class="string">'Manual Gather'</span>,</div><div class="line">            <span class="attr">cost</span>: &#123;</div><div class="line">                <span class="attr">base</span>: <span class="number">10</span>,</div><div class="line">                <span class="attr">pow</span>: <span class="number">1.09</span>,</div><div class="line">                <span class="attr">inc</span>: <span class="number">5</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">effect</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state, level</span>) </span>&#123;</div><div class="line">                state.gatherRate.manual = <span class="number">1</span> + level + <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.pow(<span class="number">1.05</span>, level) - <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;, &#123;</div><div class="line">            <span class="attr">dispName</span>: <span class="string">'Auto Gather'</span>,</div><div class="line">            <span class="attr">cost</span>: &#123;</div><div class="line">                <span class="attr">base</span>: <span class="number">1000</span>,</div><div class="line">                <span class="attr">pow</span>: <span class="number">1.25</span>,</div><div class="line">                <span class="attr">inc</span>: <span class="number">250</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">effect</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state, level, us</span>) </span>&#123;</div><div class="line">                state.autoGatherActive = <span class="literal">false</span>;</div><div class="line">                <span class="keyword">if</span> (level &gt;= <span class="number">1</span>) &#123;</div><div class="line">                    state.autoGatherActive = <span class="literal">true</span>;</div><div class="line">                    state.gatherRate.auto = level + <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.pow(<span class="number">1.025</span>, level) - <span class="number">1</span>);;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    ];</div></pre></td></tr></table></figure>
<h3 id="2-2-A-Make-upgrade-state-object"><a href="#2-2-A-Make-upgrade-state-object" class="headerlink" title="2.2 - A Make upgrade state object"></a>2.2 - A Make upgrade state object</h3><p>So the upgrade data array is an array of hard coded values for each upgrate, but it is not a current state object of sorts. I am going to need another object that is the current state of an upgrade, such as the current level, and values that have to do with the current cost of the next upgrade.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// make a new upgradeState object from an upgradeData object</span></div><div class="line"><span class="keyword">var</span> makeUS = <span class="function"><span class="keyword">function</span> (<span class="params">ud</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">dispName</span>: ud.dispName,</div><div class="line">        <span class="attr">ud</span>: ud,</div><div class="line">        <span class="attr">level</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">cost</span>: <span class="built_in">Object</span>.assign(&#123;</div><div class="line">            <span class="attr">current</span>: ud.cost</div><div class="line">        &#125;, ud.cost)</div><div class="line">    &#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-3-Set-the-cost-of-an-upgrade-state-object"><a href="#2-3-Set-the-cost-of-an-upgrade-state-object" class="headerlink" title="2.3 - Set the cost of an upgrade state object"></a>2.3 - Set the cost of an upgrade state object</h3><p>So I worked out some methods that are used to set the current cost of an upgrade. One method is used to get an object that is a breakdown of the base cost along with values for an incremental and power based value. The other method is used to set the current cost of an upgrade based on these values.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// get the breakdown for base, inc, and pow that sets current cost</span></div><div class="line"><span class="keyword">var</span> getUSCostBreakdown = <span class="function"><span class="keyword">function</span> (<span class="params">us</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">base</span>: us.cost.base,</div><div class="line">        <span class="attr">inc</span>: us.cost.inc * us.level,</div><div class="line">        <span class="attr">pow</span>: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.pow(us.cost.pow, us.level))</div><div class="line">    &#125;;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// set the given upgrade state to the given level</span></div><div class="line"><span class="keyword">var</span> setUSCurrentCost = <span class="function"><span class="keyword">function</span> (<span class="params">us, level</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> bd;</div><div class="line">    level = level || <span class="number">0</span>;</div><div class="line">    us.level = level;</div><div class="line">    <span class="keyword">var</span> bd = getUSCostBreakdown(us);</div><div class="line">    us.cost.current = bd.base + bd.inc + bd.pow;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-4-Set-the-current-upgrade-level"><a href="#2-4-Set-the-current-upgrade-level" class="headerlink" title="2.4 - Set the current upgrade level"></a>2.4 - Set the current upgrade level</h3><p>I have some methods for setting the level of an upgrade state object. There is setting the effect of an upgrade state object, setting the upgrade level, and applying for all.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// apply the effect of an upgrade</span></div><div class="line"><span class="keyword">var</span> applyUSEffectToState = <span class="function"><span class="keyword">function</span> (<span class="params">us, state, ud</span>) </span>&#123;</div><div class="line">    ud.effect(state, us.level, us);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// set the upgrade level</span></div><div class="line"><span class="keyword">var</span> setUpgradeLevel = <span class="function"><span class="keyword">function</span> (<span class="params">us, state, level</span>) </span>&#123;</div><div class="line">    setUSCurrentCost(us, level);</div><div class="line">    applyUSEffectToState(us, state, us.ud);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// apply all the current states of a state</span></div><div class="line"><span class="keyword">var</span> applyAllUSFromState = <span class="function"><span class="keyword">function</span> (<span class="params">state, upgradeData</span>) </span>&#123;</div><div class="line">    state.US.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">us, i</span>) </span>&#123;</div><div class="line">        setUpgradeLevel(us, state, us.level);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>Not happy with how this is, so in any future updates that may or may not happen with this project I am sure I will re work this one at that point. I might even go so far as to pull all of this logic into its one javaScript module also, as there is a great deal to manage when it comes to an upgrades system actually.</p>
<h3 id="2-5-Create-a-new-state-object-helper"><a href="#2-5-Create-a-new-state-object-helper" class="headerlink" title="2.5 - Create a new state object helper"></a>2.5 - Create a new state object helper</h3><p>I have just one method that is used to create a new game state object as it currently stands.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// GAME STATE OBJECT CREATE</span></div><div class="line"> </div><div class="line"><span class="comment">// create and return a new game save state with the given upgradeData</span></div><div class="line"><span class="keyword">var</span> createNewState = <span class="function"><span class="keyword">function</span> (<span class="params">upgradeData</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">money</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">tickRate</span>: <span class="number">3000</span>,</div><div class="line">        <span class="attr">lastTick</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        <span class="attr">autoGatherActive</span>: <span class="literal">false</span>,</div><div class="line">        <span class="attr">gatherRate</span>: &#123;</div><div class="line">            <span class="attr">manual</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">auto</span>: <span class="number">0</span></div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// just set zero for each upgrade</span></div><div class="line">        US: upgradeData.map(<span class="function"><span class="keyword">function</span> (<span class="params">ud</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> makeUS(ud);</div><div class="line">        &#125;)</div><div class="line">    &#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-6-The-public-API-of-the-game-module"><a href="#2-6-The-public-API-of-the-game-module" class="headerlink" title="2.6 - The public API of the game module"></a>2.6 - The public API of the game module</h3><p>Now that I have the private helper methods out of the way it is now time to get to the public api that is returned at the bottom of the IIFE.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line"> </div><div class="line">        <span class="comment">// return the state object to use</span></div><div class="line">        getState: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> state = createNewState(upgradeData);</div><div class="line">            applyAllUSFromState(state, upgradeData);</div><div class="line">            <span class="keyword">return</span> state;</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// buy the nest upgrade for the given upgrade</span></div><div class="line">        buyUpgrade: <span class="function"><span class="keyword">function</span> (<span class="params">state, usi</span>) </span>&#123;</div><div class="line"> </div><div class="line">            usi = <span class="keyword">typeof</span> usi === <span class="string">'number'</span> ? state.US[usi] : usi;</div><div class="line"> </div><div class="line">            <span class="keyword">if</span> (state.money &gt;= usi.cost.current) &#123;</div><div class="line">                state.money -= usi.cost.current;</div><div class="line">                setUpgradeLevel(usi, state, usi.level += <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// a manual gather action has happened to the given state</span></div><div class="line">        manualGather: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">            state.money += state.gatherRate.manual;</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// I would like to update the given state</span></div><div class="line">        update: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">            t = now - state.lastTick,</div><div class="line">            ticks = t / state.tickRate;</div><div class="line">            <span class="keyword">if</span> (state.autoGatherActive) &#123;</div><div class="line">                <span class="keyword">if</span> (ticks &gt;= <span class="number">1</span>) &#123;</div><div class="line">                    state.money += state.gatherRate.auto * ticks;</div><div class="line">                    state.lastTick = now;</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                state.lastTick = now;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="3-The-Draw-module-for-drawing-the-button-layout-and-other-features"><a href="#3-The-Draw-module-for-drawing-the-button-layout-and-other-features" class="headerlink" title="3 - The Draw module for drawing the button layout and other features."></a>3 - The Draw module for drawing the button layout and other features.</h2><p>Now for the draw module of this canvas example that is used to draw the current state of the button layout, as well as many other features thus far with this project.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> draw = &#123;&#125;;</div><div class="line"> </div><div class="line">draw.background = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas</span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">draw.stateStatusInfo = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, state</span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">    ctx.fillText(<span class="string">'money: '</span> + state.money.toFixed(<span class="number">2</span>) +</div><div class="line">        <span class="string">', manual: '</span> + state.gatherRate.manual +</div><div class="line">        <span class="string">', auto: '</span> + state.gatherRate.auto, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">draw.tickProgressBar = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas, state</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> t = <span class="keyword">new</span> <span class="built_in">Date</span>() - state.lastTick,</div><div class="line">    per = t / state.tickRate;</div><div class="line">    <span class="keyword">if</span> (state.autoGatherActive) &#123;</div><div class="line">        ctx.fillStyle = <span class="string">'grey'</span>;</div><div class="line">        ctx.fillRect(<span class="number">0</span>, canvas.height - <span class="number">10</span>, canvas.width, <span class="number">10</span>);</div><div class="line">        ctx.fillStyle = <span class="string">'blue'</span>;</div><div class="line">        ctx.fillRect(<span class="number">0</span>, canvas.height - <span class="number">10</span>, canvas.width * per, <span class="number">10</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">draw.debugUpgrades = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, state</span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">    state.US.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">uc, i</span>) </span>&#123;</div><div class="line">        ctx.fillText(<span class="string">'upgrade: '</span> + uc.dispName + <span class="string">', level: '</span> + uc.level, <span class="number">10</span>, <span class="number">20</span> + <span class="number">10</span> * i);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">draw.buttonLayout = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, blObj</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i = blObj.buttons.length,</div><div class="line">    b;</div><div class="line">    <span class="keyword">while</span> (i--) &#123;</div><div class="line">        b = blObj.buttons[i];</div><div class="line">        ctx.fillStyle = <span class="string">'red'</span>;</div><div class="line">        ctx.fillRect(b.x, b.y, b.w, b.h);</div><div class="line">        ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">        ctx.textBaseline = <span class="string">'middle'</span>;</div><div class="line">        ctx.textAlign = <span class="string">'center'</span>;</div><div class="line">        ctx.fillText(b.label || <span class="string">''</span>, b.x + b.w / <span class="number">2</span>, b.y + b.h / <span class="number">2</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="4-The-main-js-file-and-html"><a href="#4-The-main-js-file-and-html" class="headerlink" title="4 - The main.js file and html"></a>4 - The main.js file and html</h2><p>So now that I have my utility library, game module, and draw module it is time to tie everything together with a main.js file and a single HTML file. In the main.js file I create a canvas element and inject it into the html.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// create and append canvas element, and get 2d context</span></div><div class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>),</div><div class="line">ctx = canvas.getContext(<span class="string">'2d'</span>),</div><div class="line">container = <span class="built_in">document</span>.getElementById(<span class="string">'gamearea'</span>) || <span class="built_in">document</span>.body;</div><div class="line">container.appendChild(canvas);</div><div class="line">canvas.width = <span class="number">320</span>;</div><div class="line">canvas.height = <span class="number">240</span>;</div><div class="line"> </div><div class="line"><span class="comment">// create state</span></div><div class="line"><span class="keyword">var</span> state = game.getState();</div><div class="line"> </div><div class="line"><span class="comment">// create button layout</span></div><div class="line"><span class="keyword">var</span> buttons = state.US.map(<span class="function"><span class="keyword">function</span> (<span class="params">us, i</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">x</span>: <span class="number">170</span>,</div><div class="line">            <span class="attr">y</span>: <span class="number">40</span> + <span class="number">32</span> * i,</div><div class="line">            <span class="attr">w</span>: <span class="number">128</span>,</div><div class="line">            <span class="attr">h</span>: <span class="number">32</span>,</div><div class="line">            <span class="attr">label</span>: us.dispName + <span class="string">' ('</span> + us.cost.current + <span class="string">') '</span>,</div><div class="line">            <span class="attr">onAction</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pos, opt, b, e</span>) </span>&#123;</div><div class="line">                game.buyUpgrade(state, us);</div><div class="line">                b.label = us.dispName + <span class="string">' ('</span> + us.cost.current + <span class="string">') '</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;);</div><div class="line"> </div><div class="line"><span class="comment">// push manual gather button</span></div><div class="line">buttons.push(&#123;</div><div class="line">    <span class="attr">x</span>: <span class="number">16</span>,</div><div class="line">    <span class="attr">y</span>: <span class="number">100</span>,</div><div class="line">    <span class="attr">w</span>: <span class="number">64</span>,</div><div class="line">    <span class="attr">h</span>: <span class="number">32</span>,</div><div class="line">    <span class="attr">label</span>: <span class="string">'Gather'</span>,</div><div class="line">    <span class="attr">onAction</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pos, opt, e</span>) </span>&#123;</div><div class="line">        game.manualGather(state);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> blOptions = &#123;</div><div class="line">    <span class="attr">attachTo</span>: canvas,</div><div class="line">    <span class="attr">buttons</span>: buttons</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> blObj = u.mkButtonLayout(blOptions);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    draw.background(ctx, canvas);</div><div class="line">    draw.tickProgressBar(ctx, canvas, state);</div><div class="line">    draw.stateStatusInfo(ctx, state);</div><div class="line">    draw.buttonLayout(ctx, blObj);</div><div class="line">    draw.debugUpgrades(ctx, state);</div><div class="line">    game.update(state);</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>canvas example basic idle game<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"gamearea"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"utils.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"game.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"draw.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5 - Conclusion"></a>5 - Conclusion</h2><p>Well I set out to make a basic Idle game and this is more or less what it is. The only question  now is where to go from here when it comes to making this a more interesting project even if it is left very basic and unbranded.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2020/02/01/canvas-example-basic-idle-game/" data-id="ckinkr06400dpoov12ydt9t60" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2020/02/01/canvas-example-basic-idle-game/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/02/02/lodash_frompairs/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          lodash from pairs method and vanilla javaScript options
        
      </div>
    </a>
  
  
    <a href="/2020/01/31/nodejs-path-parse/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Node path parse method and the compoents of a path</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2020/02/01/canvas-example-basic-idle-game/index.html';
    this.page.identifier = '602';
    this.page.title = 'Basic idle game canvas example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.63px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.53px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.68px;">angular</a> <a href="/tags/animation/" style="font-size: 12.11px;">animation</a> <a href="/tags/automation/" style="font-size: 12.11px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.63px;">backbone</a> <a href="/tags/blog/" style="font-size: 14.74px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.95px;">canvas</a> <a href="/tags/corejs/" style="font-size: 13.16px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11.05px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.58px;">ejs</a> <a href="/tags/express/" style="font-size: 16.84px;">express</a> <a href="/tags/games/" style="font-size: 17.37px;">games</a> <a href="/tags/git/" style="font-size: 13.16px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15.26px;">hapi</a> <a href="/tags/heroku/" style="font-size: 13.68px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.21px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.53px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.58px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 16.32px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.42px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.21px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.47px;">node.js</a> <a href="/tags/phaser/" style="font-size: 17.89px;">phaser</a> <a href="/tags/statistics/" style="font-size: 12.63px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 16.32px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 15.79px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/12/11/canvas-example-hyper-casual-space-shooter/">Hyper Casual Space Shooter canvas example</a>
          </li>
        
          <li>
            <a href="/2020/12/10/linux-bash-script-parameters-positional/">Positional Parameters in Linux Bash scripts</a>
          </li>
        
          <li>
            <a href="/2020/12/09/linux-bash-script-parameters-named/">Named parameters in Linux Bash scripts</a>
          </li>
        
          <li>
            <a href="/2020/12/08/linux-bash-script-parameters-special/">Special parameters in Linux Bash scripts</a>
          </li>
        
          <li>
            <a href="/2020/12/07/linux-bash-script-arrays/">Arrays in Linux Bash scripts</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas-Examples</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2020/02/01/canvas-example-basic-idle-game/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>