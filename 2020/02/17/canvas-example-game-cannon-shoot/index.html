<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Cannon shoot canvas example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2020/02/17/canvas-example-game-cannon-shoot/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This will be a post on a cannon shoot type game that will be the subject of yet another one of my canvas example posts. The idea here is to just keep making one canvas example after another until I ma">
<meta property="og:type" content="article">
<meta property="og:title" content="Cannon shoot canvas example">
<meta property="og:url" content="https://dustinpfister.github.io/2020/02/17/canvas-example-game-cannon-shoot/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="This will be a post on a cannon shoot type game that will be the subject of yet another one of my canvas example posts. The idea here is to just keep making one canvas example after another until I ma">
<meta property="og:updated_time" content="2020-12-05T18:01:14.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cannon shoot canvas example">
<meta name="twitter:description" content="This will be a post on a cannon shoot type game that will be the subject of yet another one of my canvas example posts. The idea here is to just keep making one canvas example after another until I ma">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas-Examples</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-canvas-example-game-cannon-shoot" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/17/canvas-example-game-cannon-shoot/" class="article-date"> Published:
  <time datetime="2020-02-17T20:26:00.000Z" itemprop="datePublished">2020-02-17</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2020/02/17/canvas-example-game-cannon-shoot/" class="article-date"> Modified:
  <time datetime="2020-12-05T18:01:14.000Z" itemprop="dateModified">2020-12-05</time>
</a>

    <span class="article-date">V1.21</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Cannon shoot canvas example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>This will be a post on a cannon shoot type game that will be the subject of yet another one of my <a href="/2020/03/23/canvas-example/">canvas example</a> posts. The idea here is to just keep making one canvas example after another until I manage to make one or two that might prove to be worth a higher investment of time if people show an interest in one. There are many games like this on the open Internet such as <a href="https://www.youtube.com/watch?v=BtXSxeVDYD4" target="_blank" rel="external">kitten cannon</a> where the basic mechanics are than the player sets an angle and initial power value and then that is used to determine how far the object will go in a game map.</p>
<p>Anyway so this kind of game is just one of many different types of games that come to mind, and I figured that I should make at least one cannon shoot type game for this series of posts. Keep in mind that I rushed with this one, and there is much about it that I am not happy with, at least at the time of this writing anyway. I have a lot of these examples and thus far there are a few others that I would say have higher priority when it comes to improving the quality of the example.</p>
<p>Still I do have the basic idea of this kind of game working for what it is worth. There is just having a display object shoot off from a starting location and the initial heading and power can be set by a simple user interface. There is much more that could be added in terms of additional features beyond that, but I think the code could use some major clean up first.</p>
<a id="more"></a>
<p><div id="canvas-app" style="width:320px;height:240px;margin-left:auto;margin-right:auto;"></div></p>
<script src="/js/canvas-examples/game-cannon-shoot/0.0.0/pkg.js"></script>


<h2 id="1-The-Utils-module-of-this-canvas-example"><a href="#1-The-Utils-module-of-this-canvas-example" class="headerlink" title="1 - The Utils module of this canvas example"></a>1 - The Utils module of this canvas example</h2><p>To start off with in this section I will be going over the custom utility library that I worked out for this canvas example. This module contains a custom tailor set of copy and past usual suspects for these kinds of projects. Considering the nature of the project, I am going to want methods like the distance formula and some methods that have to do with angles. I also want some additional methods that I will be using in the game module, but also potential outside of it as well if I where to continue working on this example.</p>
<h3 id="1-1-The-start-of-the-module-and-the-get-canvas-relative-method"><a href="#1-1-The-start-of-the-module-and-the-get-canvas-relative-method" class="headerlink" title="1.1 - The start of the module, and the get canvas relative method."></a>1.1 - The start of the module, and the get canvas relative method.</h3><p>I went with just an object literal pattern rather than an IIFE for the utils module. This will more or less work out okay with this module as all of the methods here are public.</p>
<p>The first method I added to my utils module is a method that is a usual copy and past suspect that has to do with getting a canvas relative position when a canvas is clicked or touched. This is of course something that I am going to want to do one way or another when to comes to any kind of canvas project that works with input from a user in  the from of mouse or touch events.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// UTILS</span></div><div class="line"><span class="keyword">var</span> utils = &#123;&#125;;</div><div class="line"> </div><div class="line">utils.getCanvasRelative = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = e.target,</div><div class="line">    bx = canvas.getBoundingClientRect();</div><div class="line">    <span class="keyword">var</span> x = (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientX : e.clientX) - bx.left,</div><div class="line">    y = (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientY : e.clientY) - bx.top;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">x</span>: x,</div><div class="line">        <span class="attr">y</span>: y,</div><div class="line">        <span class="attr">bx</span>: bx</div><div class="line">    &#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="1-2-Bounding-box-collision-detection"><a href="#1-2-Bounding-box-collision-detection" class="headerlink" title="1.2 - Bounding box collision detection"></a>1.2 - Bounding box collision detection</h3><p>This project is going to involve at least maybe one or two areas in the canvas that will act as a fire button of sorts. I could just use the distance formula if it is a circle like area, but I desired to make bounding box part of the utility library so I will use that for the fire button at least if not elsewhere.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">utils.boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, w1, h1, x2, y2, w2, h2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> !(</div><div class="line">        (y1 + h1) &lt; (y2) ||</div><div class="line">        y1 &gt; (y2 + h2) ||</div><div class="line">        (x1 + w1) &lt; x2 ||</div><div class="line">        x1 &gt; (x2 + w2));</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="1-3-The-Distance-formal"><a href="#1-3-The-Distance-formal" class="headerlink" title="1.3 - The Distance formal"></a>1.3 - The Distance formal</h3><p>I added the distance formula as part of the module. This is what I will be using to just find the distance between two points. This can be used with a little additional code to set the initial power of the cannon and therefor the shot by comparing the distance from a certain point to a certain max length.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">utils.distance = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, x2, y2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow(x1 - x2, <span class="number">2</span>) + <span class="built_in">Math</span>.pow(y1 - y2, <span class="number">2</span>));</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="1-4-Mathematical-modulo-and-angle-methods"><a href="#1-4-Mathematical-modulo-and-angle-methods" class="headerlink" title="1.4 - Mathematical modulo and angle methods"></a>1.4 - Mathematical modulo and angle methods</h3><p>I also have a few methods that have to do with <a href="/2017/09/02/js-whats-wrong-with-modulo/">mathematical modulo</a> and working with angles. The modulo method is just another way of getting a remainder that compared to what is used in the core javaScript syntax. The other methods here have to do with normalizing angles and angular distance that are from a project called <a href="https://github.com/infusion/Angles.js/blob/master/angles.js" target="_blank" rel="external">angles.js</a>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Math mod and angle methods from</span></div><div class="line"><span class="comment">// https://github.com/infusion/Angles.js/blob/master/angles.js</span></div><div class="line">utils.mod = <span class="function"><span class="keyword">function</span> <span class="title">mod</span>(<span class="params">x, m</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (x % m + m) % m;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">utils.angleNormalizeHalf = <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> c = <span class="built_in">Math</span>.PI * <span class="number">2</span>;</div><div class="line">    <span class="keyword">var</span> h = c / <span class="number">2</span>;</div><div class="line">    <span class="keyword">return</span> utils.mod(n + h, c) - h;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">utils.angleMinDistance = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> m = <span class="built_in">Math</span>.PI * <span class="number">2</span>;</div><div class="line">    <span class="keyword">var</span> h = m / <span class="number">2</span>;</div><div class="line">    <span class="keyword">var</span> diff = utils.angleNormalizeHalf(a - b);</div><div class="line">    <span class="keyword">if</span> (diff &gt; h) &#123;</div><div class="line">        diff = diff - m;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.abs(diff);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="2-The-Game-module-for-this-cannon-shoot-canvas-example"><a href="#2-The-Game-module-for-this-cannon-shoot-canvas-example" class="headerlink" title="2 - The Game module for this cannon shoot canvas example"></a>2 - The Game module for this cannon shoot canvas example</h2><p>Now that I got the utility module out of the way it is not time to go over the game module for this cannon shoot canvas game example. This module is what I will be using in my main JavaScript file to create a game state, update it, as well as attaching some event handers to mutate state that way.</p>
<p>In addition to methods and a state object it is also worth mentioning that there is more than one mode for this game module. That is that I made a state machine of sorts as part of this module where there three modes, and there are update methods and or event handlers for each o them. There is the aim mode where the player can set the heading and power level of the cannon. Then there is the fired mode where the shot is currently in motion, and finally there is the over mode that the game state will be in when the shot hits the ground.</p>
<h3 id="2-1-The-start-of-the-module-and-create-new-state-method"><a href="#2-1-The-start-of-the-module-and-create-new-state-method" class="headerlink" title="2.1 - The start of the module and create new state method"></a>2.1 - The start of the module and create new state method</h3><p>So I start off the module with an IIFE, and at the top of the function expression there is my create new state method. This methods creates and returns a new game state that can then be passed to other public methods of this module that are used to mutate and update that state, by way of user input and update methods.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// GAME</span></div><div class="line"><span class="keyword">var</span> game = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> createNewState = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> state = &#123;</div><div class="line">            <span class="attr">canvas</span>: canvas,</div><div class="line">            <span class="attr">ctx</span>: ctx = canvas.getContext(<span class="string">'2d'</span>),</div><div class="line">            <span class="attr">mode</span>: <span class="string">'aim'</span>, <span class="comment">// 'aim', 'fired, and 'over' modes</span></div><div class="line">            userDown: <span class="literal">false</span>,</div><div class="line">            <span class="attr">lastTick</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">            <span class="attr">time</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">offset</span>: &#123;</div><div class="line">                <span class="attr">x</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">y</span>: <span class="number">0</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">shot</span>: &#123;</div><div class="line">                <span class="attr">x</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">y</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">pps</span>: <span class="number">64</span>, <span class="comment">// pixels per second</span></div><div class="line">                power: <span class="number">1</span>,</div><div class="line">                <span class="attr">plps</span>: <span class="number">1</span> / <span class="number">10</span>, <span class="comment">// power loss per second</span></div><div class="line">                startHeading: <span class="number">0</span>,</div><div class="line">                <span class="attr">heading</span>: <span class="number">0</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">cannon</span>: &#123;</div><div class="line">                <span class="attr">heading</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">power</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">sx</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">sy</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">len</span>: <span class="number">100</span></div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">        setCannon(state, <span class="number">-1</span>, <span class="number">1</span>);</div><div class="line">        <span class="keyword">return</span> state;</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<h3 id="2-2-Set-cannon-and-set-shot-method"><a href="#2-2-Set-cannon-and-set-shot-method" class="headerlink" title="2.2 - Set cannon and set shot method."></a>2.2 - Set cannon and set shot method.</h3><p>These methods are used to set the values of the cannon object, and shot object of a game state object created with the create new state method. The set cannon method just sets the given heading in radians and power level between 0 and 1. However it also sets the current sx and sy position based on the current heading that was just set. This position and other values are then what is used to set the starting position, heading, and power of the shot object when fired.</p>
<p>I then have a set shot method that will set the heading and pixels per second based n the start heading and power of the shot. The start heading as you might expect is set</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> setCannon = <span class="function"><span class="keyword">function</span> (<span class="params">state, heading, power</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> cannon = state.cannon;</div><div class="line">    cannon.heading = heading;</div><div class="line">    cannon.power = power;</div><div class="line">    cannon.sx = <span class="built_in">Math</span>.cos(cannon.heading) * cannon.len,</div><div class="line">    cannon.sy = <span class="built_in">Math</span>.sin(cannon.heading) * cannon.len + state.canvas.height;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// set the shot heading and pps based on power and startHeading</span></div><div class="line"><span class="keyword">var</span> setShot = <span class="function"><span class="keyword">function</span> (<span class="params">shot</span>) </span>&#123;</div><div class="line">    shot.heading = shot.startHeading + shot.angleDistanceToGround * (<span class="number">1</span> - shot.power);</div><div class="line">    shot.pps = <span class="number">128</span> + <span class="built_in">Math</span>.floor(<span class="number">256</span> * shot.power);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-3-Fire-shot-method"><a href="#2-3-Fire-shot-method" class="headerlink" title="2.3 - Fire shot method"></a>2.3 - Fire shot method</h3><p>This is the helper method that will be called to set up a shot, and switch to fired mode.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// fire the shot</span></div><div class="line"><span class="keyword">var</span> fireShot = <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> sh = state.shot,</div><div class="line">    canvas = state.canvas,</div><div class="line">    ca = state.cannon;</div><div class="line"> </div><div class="line">    sh.startHeading = ca.heading;</div><div class="line">    sh.angleDistanceToGround = utils.angleMinDistance(sh.startHeading, <span class="built_in">Math</span>.PI / <span class="number">2</span>);</div><div class="line">    sh.x = canvas.width / <span class="number">2</span>,</div><div class="line">    sh.y = canvas.height / <span class="number">2</span>,</div><div class="line">    state.offset.x = ca.sx;</div><div class="line">    state.offset.y = ca.sy;</div><div class="line">    sh.power = ca.power;</div><div class="line">    setShot(sh);</div><div class="line">    state.lastTick = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    state.mode = <span class="string">'fired'</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-4-Events-attachment-and-user-action-methods-for-each-mode-that-uses-one"><a href="#2-4-Events-attachment-and-user-action-methods-for-each-mode-that-uses-one" class="headerlink" title="2.4 -  Events attachment and user action methods for each mode that uses one"></a>2.4 -  Events attachment and user action methods for each mode that uses one</h3><p>So here I have my user action method that when called will return an event hander that can then be passed to add event listener in the main.js file. When calling the user action method a state object can be passed as the first argument that will be used inside the body of the event handler thanks to <a href="/2019/02/22/js-javascript-closure/">closure</a>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Events</span></div><div class="line"><span class="keyword">var</span> eventTypeMaps = &#123;</div><div class="line">    <span class="attr">mousedown</span>: <span class="string">'start'</span>,</div><div class="line">    <span class="attr">mousemove</span>: <span class="string">'move'</span>,</div><div class="line">    <span class="attr">mouseup</span>: <span class="string">'end'</span>,</div><div class="line">    <span class="attr">touchstart</span>: <span class="string">'start'</span>,</div><div class="line">    <span class="attr">touchmove</span>: <span class="string">'move'</span>,</div><div class="line">    <span class="attr">touchend</span>: <span class="string">'end'</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> userAction = <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> pos = utils.getCanvasRelative(e),</div><div class="line">        myType = eventTypeMaps[e.type];</div><div class="line">        <span class="keyword">if</span> (myType === <span class="string">'start'</span>) &#123;</div><div class="line">            state.userDown = <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (myType === <span class="string">'end'</span>) &#123;</div><div class="line">            state.userDown = <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> userActionMode = userAction[state.mode] || &#123;&#125;,</div><div class="line">        modeAction = userActionMode[myType];</div><div class="line">        <span class="keyword">if</span> (modeAction) &#123;</div><div class="line">            modeAction(pos, state, e);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">userAction.aim = &#123;</div><div class="line">    <span class="attr">start</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pos, state, e</span>) </span>&#123;&#125;,</div><div class="line">    <span class="attr">move</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pos, state, e</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> cannon = state.cannon,</div><div class="line">        canvas = state.canvas;</div><div class="line">        <span class="keyword">if</span> (state.userDown) &#123;</div><div class="line">            <span class="keyword">var</span> d = utils.distance(pos.x, pos.y, <span class="number">0</span>, canvas.height);</div><div class="line">            <span class="keyword">var</span> power = d / cannon.len;</div><div class="line">            power = power &gt; <span class="number">1</span> ? <span class="number">1</span> : power;</div><div class="line">            setCannon(state,</div><div class="line">                <span class="built_in">Math</span>.atan2(canvas.height - pos.y, pos.x) * <span class="number">-1</span>,</div><div class="line">                <span class="number">0.75</span> + <span class="number">0.25</span> * power);</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">end</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pos, state, e</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> cannon = state.cannon;</div><div class="line">        <span class="keyword">var</span> overFire = utils.boundingBox(pos.x, pos.y, <span class="number">1</span>, <span class="number">1</span>, canvas.width - <span class="number">64</span>, canvas.height - <span class="number">64</span>, <span class="number">64</span>, <span class="number">64</span>);</div><div class="line">        <span class="keyword">if</span> (overFire) &#123;</div><div class="line">            fireShot(state);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">userAction.over = &#123;</div><div class="line">    <span class="attr">end</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pos, state, e</span>) </span>&#123;</div><div class="line">        setCannon(state, <span class="number">-1</span>, <span class="number">1</span>);</div><div class="line">        state.offset.x = <span class="number">0</span>;</div><div class="line">        state.offset.y = <span class="number">0</span>;</div><div class="line">        state.mode = <span class="string">'aim'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-5-The-main-update-method-mode-update-methods-and-the-public-API"><a href="#2-5-The-main-update-method-mode-update-methods-and-the-public-API" class="headerlink" title="2.5 - The main update method, mode update methods, and the public API."></a>2.5 - The main update method, mode update methods, and the public API.</h3><p>So I have my user action method that can be used to attach event handers for mouse and touch events that are used to mutate the state object by way of user interaction. Now I need a similar kind of structure to do the same by way of a repeating update loop.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">    <span class="keyword">var</span> update = <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">        state.time = now - state.lastTick;</div><div class="line">        state.lastTick = now;</div><div class="line">        <span class="keyword">var</span> modeUpdate = update[state.mode] || <span class="literal">false</span>;</div><div class="line">        <span class="keyword">if</span> (modeUpdate) &#123;</div><div class="line">            modeUpdate(state);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    update.fired = <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> secs = state.time / <span class="number">1000</span>,</div><div class="line">        canvas = state.canvas;</div><div class="line">        state.offset.x += <span class="built_in">Math</span>.cos(state.shot.heading) * state.shot.pps * secs;</div><div class="line">        state.offset.y += <span class="built_in">Math</span>.sin(state.shot.heading) * state.shot.pps * secs;</div><div class="line"> </div><div class="line">        <span class="keyword">if</span> (state.offset.y &gt; canvas.height) &#123;</div><div class="line">            state.offset.y = canvas.height;</div><div class="line">            state.mode = <span class="string">'over'</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            state.shot.power -= state.shot.plps * secs;</div><div class="line">            state.shot.power = state.shot.power &lt; <span class="number">0.025</span> ? <span class="number">0</span> : state.shot.power;</div><div class="line">        &#125;</div><div class="line">        setShot(state.shot);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">update</span>: update,</div><div class="line">        <span class="attr">createNewState</span>: createNewState,</div><div class="line">        <span class="attr">userAction</span>: userAction</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="3-The-Draw-Module"><a href="#3-The-Draw-Module" class="headerlink" title="3 - The Draw Module"></a>3 - The Draw Module</h2><p>Now that I have a utility library and a module that has my game logic I now want another module that has methods that can be used to draw to the canvas with the current state of a state object created and mutated by the game module. I find that it is important to separate this from the game logic as a way to separate concerns and reduce the complexity of the game module.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> draw = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// draw Cell Lines</span></div><div class="line">    <span class="keyword">var</span> drawCellLines = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">var</span> ci = <span class="number">0</span>,</div><div class="line">        w = opt.w || <span class="number">8</span>,</div><div class="line">        h = opt.h || <span class="number">8</span>,</div><div class="line">        cellSize = opt.cellSize || <span class="number">32</span>,</div><div class="line">        cLen = w * h;</div><div class="line">        offset = opt.offset || &#123;&#125;;</div><div class="line">        offset.x = offset.x === <span class="literal">undefined</span> ? <span class="number">0</span> : offset.x;</div><div class="line">        offset.y = offset.y === <span class="literal">undefined</span> ? <span class="number">0</span> : offset.y;</div><div class="line">        ctx.strokeStyle = opt.style || <span class="string">'lime'</span>;</div><div class="line">        <span class="keyword">while</span> (ci &lt; cLen) &#123;</div><div class="line">            <span class="keyword">var</span> x = ci % w,</div><div class="line">            y = <span class="built_in">Math</span>.floor(ci / w);</div><div class="line">            ctx.strokeRect(</div><div class="line">                x * cellSize + offset.x,</div><div class="line">                y * cellSize + offset.y,</div><div class="line">                cellSize, cellSize);</div><div class="line">            ci += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> drawShot = <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> ctx = state.ctx;</div><div class="line">        ctx.strokeStyle = <span class="string">'lime'</span>;</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.arc(state.shot.x, state.shot.y, <span class="number">5</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">        ctx.stroke();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> modes = &#123;</div><div class="line">        <span class="attr">aim</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> ctx = state.ctx,</div><div class="line">            canvas = state.canvas,</div><div class="line">            cannon = state.cannon;</div><div class="line">            <span class="comment">// crude cannon line</span></div><div class="line">            ctx.strokeStyle = <span class="string">'lime'</span>;</div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.moveTo(<span class="number">0</span>, canvas.height);</div><div class="line">            ctx.lineTo(cannon.sx, cannon.sy);</div><div class="line">            ctx.stroke();</div><div class="line">            <span class="comment">// fire button</span></div><div class="line">            ctx.fillStyle = <span class="string">'red'</span>;</div><div class="line">            ctx.fillRect(canvas.width - <span class="number">64</span>, canvas.height - <span class="number">64</span>, <span class="number">64</span>, <span class="number">64</span>);</div><div class="line">            ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">            ctx.font = <span class="string">'20px arial'</span>;</div><div class="line">            ctx.textBaseline = <span class="string">'middle'</span>;</div><div class="line">            ctx.textAlign = <span class="string">'center'</span>;</div><div class="line">            ctx.fillText(<span class="string">'FIRE!'</span>, canvas.width - <span class="number">32</span>, canvas.height - <span class="number">32</span>);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">fired</span>: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">            drawShot(state);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">over</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            drawShot(state);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line"> </div><div class="line">        <span class="comment">// draw background</span></div><div class="line">        background: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> ctx = state.ctx,</div><div class="line">            canvas = state.canvas;</div><div class="line">            ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">            ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// draw by way of the current mode</span></div><div class="line">        currentMode: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">            modes[state.mode](state);</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// draw grid lines</span></div><div class="line">        gridLines: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> ctx = state.ctx;</div><div class="line">            <span class="keyword">var</span> xPer = state.offset.x % <span class="number">32</span> / <span class="number">32</span>,</div><div class="line">            yPer = state.offset.y % <span class="number">32</span> / <span class="number">32</span>;</div><div class="line">            drawCellLines(ctx, &#123;</div><div class="line">                <span class="attr">w</span>: <span class="number">12</span>,</div><div class="line">                <span class="attr">h</span>: <span class="number">10</span>,</div><div class="line">                <span class="attr">style</span>: <span class="string">'grey'</span>,</div><div class="line">                <span class="attr">offset</span>: &#123;</div><div class="line">                    <span class="attr">x</span>: <span class="number">-32</span> * xPer - <span class="number">32</span>,</div><div class="line">                    <span class="attr">y</span>: <span class="number">-32</span> * yPer - <span class="number">32</span></div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// draw debug info</span></div><div class="line">        debug: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> ctx = state.ctx;</div><div class="line">            ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">            ctx.font = <span class="string">'10px arial'</span>;</div><div class="line">            ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">            ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">            ctx.fillText(<span class="string">'mode: '</span> + state.mode, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">            ctx.fillText(<span class="string">'map offset:  '</span> + <span class="built_in">Math</span>.floor(state.offset.x) + <span class="string">','</span> +</div><div class="line">                <span class="built_in">Math</span>.floor(state.offset.y), <span class="number">10</span>, <span class="number">20</span>);</div><div class="line">            ctx.fillText(<span class="string">'cannon power: '</span> + state.cannon.power, <span class="number">10</span>, <span class="number">30</span>);</div><div class="line">        &#125;,</div><div class="line"> </div><div class="line">        <span class="comment">// draw ground</span></div><div class="line">        ground: <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> canvas = state.canvas,</div><div class="line">            yAjust = <span class="number">0</span>;</div><div class="line">            <span class="keyword">if</span> (state.offset.y &gt; <span class="number">-5</span>) &#123;</div><div class="line">                ctx.fillStyle = <span class="string">'green'</span>;</div><div class="line">                yAjust = state.offset.y &gt; <span class="number">0</span> ? state.offset.y / canvas.height : <span class="number">0</span>;</div><div class="line">                ctx.fillRect(<span class="number">0</span>, canvas.height - <span class="number">5</span> - (canvas.height / <span class="number">2</span>) * yAjust, canvas.width, <span class="number">150</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="4-Main"><a href="#4-Main" class="headerlink" title="4 - Main"></a>4 - Main</h2><p>And now for the main.js file that is used to tie everything together.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// MAIN</span></div><div class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>),</div><div class="line">ctx = canvas.getContext(<span class="string">'2d'</span>),</div><div class="line">container = <span class="built_in">document</span>.getElementById(<span class="string">'gamearea'</span>) || <span class="built_in">document</span>.body;</div><div class="line">container.appendChild(canvas);</div><div class="line">canvas.width = <span class="number">320</span>;</div><div class="line">canvas.height = <span class="number">240</span>;</div><div class="line">ctx.translate(<span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> state = game.createNewState(&#123;</div><div class="line">        <span class="attr">canvas</span>: canvas</div><div class="line">    &#125;);</div><div class="line"> </div><div class="line"><span class="comment">// MAIN APP LOOP</span></div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    game.update(state);</div><div class="line">    draw.background(state);</div><div class="line">    draw.gridLines(state);</div><div class="line">    draw.ground(state);</div><div class="line">    draw.currentMode(state);</div><div class="line">    draw.debug(state);</div><div class="line">&#125;;</div><div class="line">loop();</div><div class="line">canvas.addEventListener(<span class="string">'mousedown'</span>, game.userAction(state));</div><div class="line">canvas.addEventListener(<span class="string">'mousemove'</span>, game.userAction(state));</div><div class="line">canvas.addEventListener(<span class="string">'mouseup'</span>, game.userAction(state));</div><div class="line">canvas.addEventListener(<span class="string">'touchstart'</span>, game.userAction(state));</div><div class="line">canvas.addEventListener(<span class="string">'touchmove'</span>, game.userAction(state));</div><div class="line">canvas.addEventListener(<span class="string">'touchend'</span>, game.userAction(state));</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2020/02/17/canvas-example-game-cannon-shoot/" data-id="ckinkr07f00edoov1kv7t3t7s" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2020/02/17/canvas-example-game-cannon-shoot/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/02/18/vuejs-example-list/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          basic vue list example
        
      </div>
    </a>
  
  
    <a href="/2020/02/14/vuejs-example-calculator/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">vue calculator an example of vuejs and javaScript</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2020/02/17/canvas-example-game-cannon-shoot/index.html';
    this.page.identifier = '614';
    this.page.title = 'Cannon shoot canvas example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.63px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.53px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.68px;">angular</a> <a href="/tags/animation/" style="font-size: 12.11px;">animation</a> <a href="/tags/automation/" style="font-size: 12.11px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.63px;">backbone</a> <a href="/tags/blog/" style="font-size: 14.74px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.95px;">canvas</a> <a href="/tags/corejs/" style="font-size: 13.16px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11.05px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.58px;">ejs</a> <a href="/tags/express/" style="font-size: 16.84px;">express</a> <a href="/tags/games/" style="font-size: 17.37px;">games</a> <a href="/tags/git/" style="font-size: 13.16px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15.26px;">hapi</a> <a href="/tags/heroku/" style="font-size: 13.68px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.21px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.53px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.58px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 16.32px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.42px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.21px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.47px;">node.js</a> <a href="/tags/phaser/" style="font-size: 17.89px;">phaser</a> <a href="/tags/statistics/" style="font-size: 12.63px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 16.32px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 15.79px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/12/11/canvas-example-hyper-casual-space-shooter/">Hyper Casual Space Shooter canvas example</a>
          </li>
        
          <li>
            <a href="/2020/12/10/linux-bash-script-parameters-positional/">Positional Parameters in Linux Bash scripts</a>
          </li>
        
          <li>
            <a href="/2020/12/09/linux-bash-script-parameters-named/">Named parameters in Linux Bash scripts</a>
          </li>
        
          <li>
            <a href="/2020/12/08/linux-bash-script-parameters-special/">Special parameters in Linux Bash scripts</a>
          </li>
        
          <li>
            <a href="/2020/12/07/linux-bash-script-arrays/">Arrays in Linux Bash scripts</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas-Examples</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2020/02/17/canvas-example-game-cannon-shoot/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>