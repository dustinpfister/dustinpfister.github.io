<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Canvas examples on animation basics and beyond | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2020/09/19/canvas-example-hyper-casual-to-the-black/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Time to take a new project with my canvas examples series of posts and focus on making quick hyper casual style games. So this post will be on an simple idea for a project that I am just going to call">
<meta property="og:type" content="article">
<meta property="og:title" content="Canvas examples on animation basics and beyond">
<meta property="og:url" content="https://dustinpfister.github.io/2020/09/19/canvas-example-hyper-casual-to-the-black/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="Time to take a new project with my canvas examples series of posts and focus on making quick hyper casual style games. So this post will be on an simple idea for a project that I am just going to call">
<meta property="og:updated_time" content="2021-02-27T21:33:18.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Canvas examples on animation basics and beyond">
<meta name="twitter:description" content="Time to take a new project with my canvas examples series of posts and focus on making quick hyper casual style games. So this post will be on an simple idea for a project that I am just going to call">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas-Examples</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-canvas-example-hyper-casual-to-the-black" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/19/canvas-example-hyper-casual-to-the-black/" class="article-date"> Published:
  <time datetime="2020-09-19T18:01:00.000Z" itemprop="datePublished">2020-09-19</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2020/09/19/canvas-example-hyper-casual-to-the-black/" class="article-date"> Modified:
  <time datetime="2021-02-27T21:33:18.000Z" itemprop="dateModified">2021-02-27</time>
</a>

    <span class="article-date">V1.1</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Canvas examples on animation basics and beyond
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>Time to take a new project with my <a href="/2020/03/23/canvas-example/">canvas examples</a> series of posts and focus on making quick hyper casual style games. So this post will be on an simple idea for a project that I am just going to call <em>into the black</em>. The basic idea is to just have a display object that is moving threw space and the game is just about seeing how far one can get until they get board and move on to something else.</p>
<p>It seems like it is a good idea to do something to find out how long it will take for a player to play threw one of my idle games. I say this because when I play one of my own games, or write some code to automate that process it seems that I sometimes end up playing threw the game way to fast. I would want to have games designed in a way in which people would keep coming back rather than just play threw the game and then  stop playing. So an idea for this project came to mind where I just divide a distance by a distance per second rate to get the amount of time it will take to go that distance. I can then do things to increase the speed and wherefore reduce the amount of time it will take to move that distance.</p>
<a id="more"></a>
<p><div id="canvas-app" style="width:320px;height:240px;margin-left:auto;margin-right:auto;"></div></p>
<script>var utils={};utils.mod=function mod(x,m){return(x%m+m)%m;};utils.boundingBox=function(x1,y1,w1,h1,x2,y2,w2,h2){return!((y1+h1)<y2||y1>(y2+h2)||(x1+w1)<x2||x1>(x2+w2));};var poolMod=(function(){var api={};var getInactive=function(pool){var i=pool.objects.length,obj;while(i--){obj=pool.objects[i];if(!obj.active){return obj;}} return false;};api.create=function(opt){opt=opt||{};opt.count=opt.count||10;var i=0,pool={objects:[],data:opt.data||{},spawn:opt.spawn||function(obj,pool,state,opt){},purge:opt.purge||function(obj,pool,state){},update:opt.update||function(obj,pool,state,secs){}};while(i<opt.count){pool.objects.push({active:false,i:i,x:opt.x===undefined?0:opt.x,y:opt.y===undefined?0:opt.y,w:opt.w===undefined?32:opt.w,h:opt.h===undefined?32:opt.h,heading:opt.heading===undefined?0:opt.heading,pps:opt.pps===undefined?32:opt.pps,lifespan:opt.lifespan||3,data:{}});i+=1;} return pool;};api.spawn=function(pool,state,opt){var obj=getInactive(pool);state=state||{};opt=opt||{};if(obj){if(!obj.active){obj.active=true;pool.spawn.call(pool,obj,pool,state,opt);return obj;}} return false;};api.update=function(pool,secs,state){var i=pool.objects.length,obj;state=state||{};while(i--){obj=pool.objects[i];if(obj.active){pool.update.call(pool,obj,pool,state,secs);obj.lifespan-=secs;obj.lifespan=obj.lifespan<0?0:obj.lifespan;if(obj.lifespan===0){obj.active=false;pool.purge.call(pool,obj,pool,state);}}}};api.setActiveStateForAll=function(pool,bool){bool=bool===undefined?false:bool;var i=pool.objects.length,obj;while(i--){obj=pool.objects[i];obj.active=bool;}};api.moveByPPS=function(obj,secs){obj.x+=Math.cos(obj.heading)*obj.pps*secs;obj.y+=Math.sin(obj.heading)*obj.pps*secs;};api.checkBounds=function(obj,canvas){if(obj.x>=canvas.width||obj.x<obj.w* -1||obj.y>canvas.height||obj.y<obj.h* -1){return false;} return true;};api.boundingBox=function(a,b){return utils.boundingBox(a.x,a.y,a.w,a.h,b.x,b.y,b.w,b.h);};return api;} ());var gameMod=(function(){var hardCode={maxDistance:Number.MAX_SAFE_INTEGER,ppsArray:[32,64,128,256,512,1024,2048,4096]};var powerUpOptions={count:5,w:16,h:16,spawn:function(pu,pool,game,opt){var ps=game.playerShip;pu.x=utils.mod(ps.x+ps.w+1+Math.floor((canvas.width-ps.w-pu.w-2)*Math.random()),canvas.width);pu.y=pu.h* -1;pu.heading=Math.PI*0.5;pu.pps=64;pu.lifespan=1;},purge:function(pu,pool,game){},update:function(pu,pool,game,secs){poolMod.moveByPPS(pu,secs);pu.lifespan=1;if(pu.y>=game.canvas.height){pu.lifespan=0;} if(poolMod.boundingBox(pu,game.playerShip)){if(game.powerUps.stack.length<6){game.powerUps.stack.push({secs:0,maxSecs:10,ppsIndex:1});console.log('power up');console.log(game.powerUps.stack);} pu.lifespan=0;}}};var api={};var centerShip=function(game){var ship=game.playerShip;ship.x=game.canvas.width/2-ship.w/2;};api.create=function(opt){opt=opt||{};var game={canvas:opt.canvas||{width:320,height:240},ppsIndex:opt.ppsIndex===undefined?0:opt.ppsIndex,pps:hardCode.ppsArray[opt.ppsIndex===undefined?0:opt.ppsIndex],distance:0,gamePer:0,startTime:opt.startTime||new Date(),target:{distance:opt.targetDistance===undefined?hardCode.maxDistance:targetDistance,timeUnit:opt.targetTimeUnit===undefined?'years':opt.targetTimeUnit,ETA:0},input:{right:false,left:false},playerShip:{x:0,y:0,w:32,h:32},powerUps:{pool:poolMod.create(powerUpOptions),stack:[],secs:0,spawnRate:3},distObj:opt.distObj||{}};console.log(game.powerUps);centerShip(game);return game;};var secsToX=function(secs,x){x=x===undefined?'days':x;if(x==='minutes'){return secs/60;} if(x==='hours'){return secs/60/60;} if(x==='days'){return secs/60/60/24;} if(x==='years'){return secs/60/60/24/365.25;} return secs;};var setDistance=function(game,now){var storedSecs=0,storedDist=0;Object.keys(game.distObj).forEach(function(pps){var secs=game.distObj[pps];storedSecs+=secs;storedDist+=Number(pps)*secs;});var secs=(now-game.startTime)/1000-storedSecs,deltaDist=game.pps*secs;var current=game.distObj[game.pps];game.distObj[game.pps]=current===undefined?secs:current+secs;game.distance=storedDist+deltaDist;};var timeToDistance=function(game,distance){if(game.distance<distance){var secs=(distance-game.distance)/game.pps;return secs;} return 0;};api.update=function(game,secs,now){game.pps=hardCode.ppsArray[game.ppsIndex];setDistance(game,now);game.distance=game.distance>hardCode.maxDistance?hardCode.maxDistance:game.distance;game.gamePer=game.distance/hardCode.maxDistance;var secsToTarget=timeToDistance(game,game.target.distance);game.target.ETA=secsToX(secsToTarget,game.target.timeUnit);var xPPS=0;xPPS=game.input.right?xPPS+32:xPPS;xPPS=game.input.left?xPPS-32:xPPS;game.playerShip.x+=xPPS*secs;game.playerShip.x=game.playerShip.x<0?0:game.playerShip.x;game.playerShip.x=game.playerShip.x>game.canvas.width-game.playerShip.w?game.canvas.width-game.playerShip.w:game.playerShip.x;game.playerShip.y=game.canvas.height-64;var pow=game.powerUps;pow.secs+=secs;if(pow.secs>=pow.spawnRate){poolMod.spawn(pow.pool,game,{});pow.secs%=pow.spawnRate;} poolMod.update(pow.pool,secs,game);var i=pow.stack.length,stackItem;game.ppsIndex=0;while(i--){stackItem=pow.stack[i];stackItem.secs+=secs;if(stackItem.secs>=stackItem.maxSecs){pow.stack.splice(i,1);}else{game.ppsIndex+=1;}}};return api;} ());var draw=(function(){var setBasicText=function(ctx){ctx.textBaseline='top';ctx.textAlign='left';ctx.font='10px arial';ctx.fillStyle='white';};var backgroundSolid=function(ctx,game,canvas){var c=Math.round(128-game.gamePer*128);ctx.fillStyle='rgba(0,'+c+','+c+',1)';ctx.fillRect(0,0,canvas.width,canvas.height);};var backgroundGrid=function(ctx,game,canvas){ctx.lineWidth=3;ctx.strokeStyle='#5a5a5a';var cellW=Math.floor(canvas.width/32)+2,cellH=Math.floor(canvas.height/32)+2;var x,y,i=0,len=cellW*cellH,dy=game.distance%256/256*32;while(i<len){x=i%cellW;y=Math.floor(i/cellW);ctx.beginPath();ctx.rect(-32+x*32,-32+dy+y*32,32,32);ctx.stroke();i+=1;}};var objectMethods={box:function(ctx,obj,game){ctx.fillStyle='green';ctx.fillRect(obj.x,obj.y,obj.w,obj.h);}};var drawObject=function(ctx,obj,game,method){method=method||'box';objectMethods[method](ctx,obj,game);};return{back:function(ctx,game,canvas){backgroundSolid(ctx,game,canvas);backgroundGrid(ctx,game,canvas);},textETA:function(ctx,game,x,y){var text='Target ETA: '+Number(game.target.ETA).toFixed(2)+' '+game.target.timeUnit;setBasicText(ctx);ctx.fillText(text,x,y);},textPPS:function(ctx,game,x,y){var text='PPS: '+game.pps;setBasicText(ctx);ctx.fillText(text,x,y);},textDistance:function(ctx,game,x,y){var text='Distance: '+Math.floor(game.distance);setBasicText(ctx);ctx.fillText(text,x,y);},playerShip:function(ctx,game){drawObject(ctx,game.playerShip,game,'box');},ver:function(ctx,state,x,y){var text='v'+state.ver;setBasicText(ctx);ctx.fillText(text,x,y);},pool:function(ctx,pool){var i=pool.objects.length,obj;ctx.fillStyle='white';ctx.strokeStyle='black';ctx.lineWidth=3;while(i--){obj=pool.objects[i];if(obj.active){ctx.save();ctx.fillStyle=obj.data.fill||'white';ctx.globalAlpha=obj.data.alpha||1;ctx.beginPath();ctx.rect(obj.x,obj.y,obj.w,obj.h);ctx.fill();ctx.stroke();ctx.restore();if(obj.data.hp){var per=obj.data.hp.current/obj.data.hp.max;ctx.fillStyle='lime';ctx.fillRect(obj.x-16,obj.y,32*per,4);}}}}}} ());var canvas=document.createElement('canvas'),ctx=canvas.getContext('2d'),container=document.getElementById('canvas-app')||document.body;container.appendChild(canvas);canvas.width=320;canvas.height=240;ctx.translate(0.5,0.5);var state={ver:'0.2.0',lt:new Date(),pointerDown:false,pointerPos:{},game:gameMod.create({canvas:canvas,startTime:new Date(),distObj:{},ppsIndex:0,distance:0,targetTimeUnit:'years'})};var loop=function(){var now=new Date(),t=now-state.lt,secs=t/1000;requestAnimationFrame(loop);gameMod.update(state.game,secs,now);draw.back(ctx,state.game,canvas);draw.playerShip(ctx,state.game);draw.textDistance(ctx,state.game,10,10);draw.textPPS(ctx,state.game,10,20);draw.textETA(ctx,state.game,10,30);draw.pool(ctx,state.game.powerUps.pool);draw.ver(ctx,state,2,canvas.height-12);state.lt=now;};loop();var getCanvasRelative=function(e){var canvas=e.target,bx=canvas.getBoundingClientRect();var x=(e.changedTouches?e.changedTouches[0].clientX:e.clientX)-bx.left,y=(e.changedTouches?e.changedTouches[0].clientY:e.clientY)-bx.top;return{x:x,y:y,bx:bx};};var setInputs=function(pos){if(pos.x<canvas.width/2){state.game.input.left=true;state.game.input.right=false;}else{state.game.input.left=false;state.game.input.right=true;}};var onPointerStart=function(e){var pos=state.pointerPos=getCanvasRelative(e);state.pointerDown=true;setInputs(pos);};var onPointerMove=function(e){var pos=state.pointerPos=getCanvasRelative(e);if(state.pointerDown){setInputs(pos);}};var onPointerStop=function(e){state.pointerDown=false;state.game.input.left=false;state.game.input.right=false;};canvas.addEventListener('mousedown',onPointerStart);canvas.addEventListener('mousemove',onPointerMove);canvas.addEventListener('mouseup',onPointerStop);</script>

<h2 id="1-The-utils-module-for-to-the-black"><a href="#1-The-utils-module-for-to-the-black" class="headerlink" title="1 - The utils module for to the black"></a>1 - The utils module for to the black</h2><p>For the utils module in this canvas example I have a <a href="/2017/09/02/js-whats-wrong-with-modulo/">mathematical modulo method</a>, and a bounding box method for collesion detection. This is also a module where I will park any and all methods that I might use in more than one module, or that I might copy over to another canvas example.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> utils = &#123;&#125;;</div><div class="line"> </div><div class="line">utils.mod = <span class="function"><span class="keyword">function</span> <span class="title">mod</span>(<span class="params">x, m</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (x % m + m) % m;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">utils.boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, w1, h1, x2, y2, w2, h2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> !(</div><div class="line">        (y1 + h1) &lt; y2 ||</div><div class="line">        y1 &gt; (y2 + h2) ||</div><div class="line">        (x1 + w1) &lt; x2 ||</div><div class="line">        x1 &gt; (x2 + w2));</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="2-object-pools-for-power-ups-and-anything-else-that-might-come-up"><a href="#2-object-pools-for-power-ups-and-anything-else-that-might-come-up" class="headerlink" title="2 - object pools for power ups and anything else that might come up."></a>2 - object pools for power ups and anything else that might come up.</h2><p>I made another <a href="/2020/07/20/canvas-example-object-pool/">canvas example a while back in which I worked out a simple object pool</a> library. Here I just copied and pasted that module in as a part of what I will be using for this project.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> poolMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// Public API</span></div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// get next inactive object in the given pool</span></div><div class="line">    <span class="keyword">var</span> getInactive = <span class="function"><span class="keyword">function</span> (<span class="params">pool</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a new pool</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.count = opt.count || <span class="number">10</span>;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">        pool = &#123;</div><div class="line">            <span class="attr">objects</span>: [],</div><div class="line">            <span class="attr">data</span>: opt.data || &#123;&#125;,</div><div class="line">            <span class="attr">spawn</span>: opt.spawn || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state, opt</span>) </span>&#123;&#125;,</div><div class="line">            <span class="attr">purge</span>: opt.purge || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state</span>) </span>&#123;&#125;,</div><div class="line">            <span class="attr">update</span>: opt.update || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state, secs</span>) </span>&#123;&#125;</div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">while</span> (i &lt; opt.count) &#123;</div><div class="line">            pool.objects.push(&#123;</div><div class="line">                <span class="attr">active</span>: <span class="literal">false</span>,</div><div class="line">                <span class="attr">i</span>: i,</div><div class="line">                <span class="attr">x</span>: opt.x === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.x,</div><div class="line">                <span class="attr">y</span>: opt.y === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.y,</div><div class="line">                <span class="attr">w</span>: opt.w === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.w,</div><div class="line">                <span class="attr">h</span>: opt.h === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.h,</div><div class="line">                <span class="attr">heading</span>: opt.heading === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.heading,</div><div class="line">                <span class="attr">pps</span>: opt.pps === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.pps,</div><div class="line">                <span class="attr">lifespan</span>: opt.lifespan || <span class="number">3</span>,</div><div class="line">                <span class="attr">data</span>: &#123;&#125;</div><div class="line">            &#125;);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> pool;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// spawn the next inactive object in the given pool</span></div><div class="line">    api.spawn = <span class="function"><span class="keyword">function</span> (<span class="params">pool, state, opt</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> obj = getInactive(pool);</div><div class="line">        state = state || &#123;&#125;;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">if</span> (obj) &#123;</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                obj.active = <span class="literal">true</span>;</div><div class="line">                pool.spawn.call(pool, obj, pool, state, opt);</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update a pool object by a secs value</span></div><div class="line">    api.update = <span class="function"><span class="keyword">function</span> (<span class="params">pool, secs, state</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        state = state || &#123;&#125;; <span class="comment">// your projects state object</span></div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            <span class="keyword">if</span> (obj.active) &#123;</div><div class="line">                pool.update.call(pool, obj, pool, state, secs);</div><div class="line">                obj.lifespan -= secs;</div><div class="line">                obj.lifespan = obj.lifespan &lt; <span class="number">0</span> ? <span class="number">0</span> : obj.lifespan;</div><div class="line">                <span class="keyword">if</span> (obj.lifespan === <span class="number">0</span>) &#123;</div><div class="line">                    obj.active = <span class="literal">false</span>;</div><div class="line">                    pool.purge.call(pool, obj, pool, state);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set all to inActive or active state</span></div><div class="line">    api.setActiveStateForAll = <span class="function"><span class="keyword">function</span> (<span class="params">pool, bool</span>) </span>&#123;</div><div class="line">        bool = bool === <span class="literal">undefined</span> ? <span class="literal">false</span> : bool;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            obj.active = bool;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// move the given object by its current heading and pps</span></div><div class="line">    api.moveByPPS = <span class="function"><span class="keyword">function</span> (<span class="params">obj, secs</span>) </span>&#123;</div><div class="line">        obj.x += <span class="built_in">Math</span>.cos(obj.heading) * obj.pps * secs;</div><div class="line">        obj.y += <span class="built_in">Math</span>.sin(obj.heading) * obj.pps * secs;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// check bounds for the given display object and canvas and return true if the object</span></div><div class="line">    <span class="comment">// is out of bounds and false if it is not.</span></div><div class="line">    api.checkBounds = <span class="function"><span class="keyword">function</span> (<span class="params">obj, canvas</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (obj.x &gt;= canvas.width || obj.x &lt; obj.w * <span class="number">-1</span> || obj.y &gt; canvas.height || obj.y &lt; obj.h * <span class="number">-1</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// bounding box</span></div><div class="line">    api.boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> utils.boundingBox(a.x, a.y, a.w, a.h, b.x, b.y, b.w, b.h);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return public method</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="3-The-game-js-file"><a href="#3-The-game-js-file" class="headerlink" title="3 - The game.js file"></a>3 - The game.js file</h2><p>The game module of this example returns a public API with the usual create and update methods that are used to both create and update a game state model for this as is the case with many other canvas examples of mine thus far.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gameMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> hardCode = &#123;</div><div class="line">        <span class="attr">maxDistance</span>: <span class="built_in">Number</span>.MAX_SAFE_INTEGER, <span class="comment">//1000000000000,</span></div><div class="line">        ppsArray: [<span class="number">32</span>, <span class="number">64</span>, <span class="number">128</span>, <span class="number">256</span>, <span class="number">512</span>, <span class="number">1024</span>, <span class="number">2048</span>, <span class="number">4096</span>]</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> powerUpOptions = &#123;</div><div class="line">        <span class="attr">count</span>: <span class="number">5</span>,</div><div class="line">        <span class="attr">w</span>: <span class="number">16</span>,</div><div class="line">        <span class="attr">h</span>: <span class="number">16</span>,</div><div class="line">        <span class="attr">spawn</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pu, pool, game, opt</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> ps = game.playerShip;</div><div class="line">            pu.x = utils.mod(ps.x + ps.w + <span class="number">1</span> + <span class="built_in">Math</span>.floor((canvas.width - ps.w - pu.w - <span class="number">2</span>) * <span class="built_in">Math</span>.random()), canvas.width);</div><div class="line">            pu.y = pu.h * <span class="number">-1</span>;</div><div class="line">            pu.heading = <span class="built_in">Math</span>.PI * <span class="number">0.5</span>;</div><div class="line">            pu.pps = <span class="number">64</span>;</div><div class="line">            pu.lifespan = <span class="number">1</span>;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">purge</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pu, pool, game</span>) </span>&#123;&#125;,</div><div class="line">        <span class="attr">update</span>: <span class="function"><span class="keyword">function</span> (<span class="params">pu, pool, game, secs</span>) </span>&#123;</div><div class="line">            poolMod.moveByPPS(pu, secs);</div><div class="line">            pu.lifespan = <span class="number">1</span>;</div><div class="line">            <span class="comment">// if power up reaches other side of canvas</span></div><div class="line">            <span class="keyword">if</span> (pu.y &gt;= game.canvas.height) &#123;</div><div class="line">                pu.lifespan = <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// hits player object</span></div><div class="line">            <span class="keyword">if</span> (poolMod.boundingBox(pu, game.playerShip)) &#123;</div><div class="line">                <span class="keyword">if</span> (game.powerUps.stack.length &lt; <span class="number">6</span>) &#123;</div><div class="line">                    game.powerUps.stack.push(&#123;</div><div class="line">                        <span class="attr">secs</span>: <span class="number">0</span>,</div><div class="line">                        <span class="attr">maxSecs</span>: <span class="number">10</span>,</div><div class="line">                        <span class="attr">ppsIndex</span>: <span class="number">1</span></div><div class="line">                    &#125;);</div><div class="line">                    <span class="built_in">console</span>.log(<span class="string">'power up'</span>);</div><div class="line">                    <span class="built_in">console</span>.log(game.powerUps.stack);</div><div class="line">                &#125;</div><div class="line">                pu.lifespan = <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> centerShip = <span class="function"><span class="keyword">function</span> (<span class="params">game</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> ship = game.playerShip;</div><div class="line">        ship.x = game.canvas.width / <span class="number">2</span> - ship.w / <span class="number">2</span>;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    api.create = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">var</span> game = &#123;</div><div class="line">            <span class="attr">canvas</span>: opt.canvas || &#123;</div><div class="line">                <span class="attr">width</span>: <span class="number">320</span>,</div><div class="line">                <span class="attr">height</span>: <span class="number">240</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">ppsIndex</span>: opt.ppsIndex === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.ppsIndex,</div><div class="line">            <span class="attr">pps</span>: hardCode.ppsArray[opt.ppsIndex === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.ppsIndex], <span class="comment">//opt.pps || hardCode.ppsArray[0],</span></div><div class="line">            distance: <span class="number">0</span>, <span class="comment">//opt.distance === undefined ? 0 : opt.distance,</span></div><div class="line">            gamePer: <span class="number">0</span>,</div><div class="line">            <span class="attr">startTime</span>: opt.startTime || <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">            <span class="attr">target</span>: &#123;</div><div class="line">                <span class="attr">distance</span>: opt.targetDistance === <span class="literal">undefined</span> ? hardCode.maxDistance : targetDistance,</div><div class="line">                <span class="attr">timeUnit</span>: opt.targetTimeUnit === <span class="literal">undefined</span> ? <span class="string">'years'</span> : opt.targetTimeUnit,</div><div class="line">                <span class="attr">ETA</span>: <span class="number">0</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">input</span>: &#123;</div><div class="line">                <span class="attr">right</span>: <span class="literal">false</span>,</div><div class="line">                <span class="attr">left</span>: <span class="literal">false</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">playerShip</span>: &#123;</div><div class="line">                <span class="attr">x</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">y</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">w</span>: <span class="number">32</span>,</div><div class="line">                <span class="attr">h</span>: <span class="number">32</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">powerUps</span>: &#123;</div><div class="line">                <span class="attr">pool</span>: poolMod.create(powerUpOptions),</div><div class="line">                <span class="attr">stack</span>: [],</div><div class="line">                <span class="attr">secs</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">spawnRate</span>: <span class="number">3</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">distObj</span>: opt.distObj || &#123;&#125;</div><div class="line">        &#125;;</div><div class="line">        <span class="built_in">console</span>.log(game.powerUps);</div><div class="line">        centerShip(game);</div><div class="line">        <span class="keyword">return</span> game;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> secsToX = <span class="function"><span class="keyword">function</span> (<span class="params">secs, x</span>) </span>&#123;</div><div class="line">        x = x === <span class="literal">undefined</span> ? <span class="string">'days'</span> : x;</div><div class="line">        <span class="keyword">if</span> (x === <span class="string">'minutes'</span>) &#123;</div><div class="line">            <span class="keyword">return</span> secs / <span class="number">60</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (x === <span class="string">'hours'</span>) &#123;</div><div class="line">            <span class="keyword">return</span> secs / <span class="number">60</span> / <span class="number">60</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (x === <span class="string">'days'</span>) &#123;</div><div class="line">            <span class="keyword">return</span> secs / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (x === <span class="string">'years'</span>) &#123;</div><div class="line">            <span class="keyword">return</span> secs / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span> / <span class="number">365.25</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> secs;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// set state distance based on startTime</span></div><div class="line">    <span class="comment">// and distObj of PPS and time key pairs</span></div><div class="line">    <span class="keyword">var</span> setDistance = <span class="function"><span class="keyword">function</span> (<span class="params">game, now</span>) </span>&#123;</div><div class="line">        <span class="comment">// before I credit I first need to know the amount of time</span></div><div class="line">        <span class="comment">// and distance thus far</span></div><div class="line">        <span class="keyword">var</span> storedSecs = <span class="number">0</span>,</div><div class="line">        storedDist = <span class="number">0</span>;</div><div class="line">        <span class="built_in">Object</span>.keys(game.distObj).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">pps</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> secs = game.distObj[pps];</div><div class="line">            storedSecs += secs;</div><div class="line">            storedDist += <span class="built_in">Number</span>(pps) * secs;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// now I can subtract storedSecs from secs and</span></div><div class="line">        <span class="comment">// use that to set Delta distance for current PPS</span></div><div class="line">        <span class="keyword">var</span> secs = (now - game.startTime) / <span class="number">1000</span> - storedSecs,</div><div class="line">        deltaDist = game.pps * secs;</div><div class="line">        <span class="comment">// update distObj for current PPS</span></div><div class="line">        <span class="keyword">var</span> current = game.distObj[game.pps];</div><div class="line">        game.distObj[game.pps] = current === <span class="literal">undefined</span> ? secs : current + secs;</div><div class="line">        <span class="comment">// now I can set distance</span></div><div class="line">        game.distance = storedDist + deltaDist;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> timeToDistance = <span class="function"><span class="keyword">function</span> (<span class="params">game, distance</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (game.distance &lt; distance) &#123;</div><div class="line">            <span class="keyword">var</span> secs = (distance - game.distance) / game.pps;</div><div class="line">            <span class="keyword">return</span> secs;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    api.update = <span class="function"><span class="keyword">function</span> (<span class="params">game, secs, now</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="comment">// speed</span></div><div class="line">        game.pps = hardCode.ppsArray[game.ppsIndex];</div><div class="line"> </div><div class="line">        <span class="comment">// distance</span></div><div class="line">        <span class="comment">//game.distance = game.distance + game.pps * secs;</span></div><div class="line">        setDistance(game, now);</div><div class="line">        game.distance = game.distance &gt; hardCode.maxDistance ? hardCode.maxDistance : game.distance;</div><div class="line">        game.gamePer = game.distance / hardCode.maxDistance;</div><div class="line"> </div><div class="line">        <span class="comment">// target</span></div><div class="line">        <span class="keyword">var</span> secsToTarget = timeToDistance(game, game.target.distance);</div><div class="line">        game.target.ETA = secsToX(secsToTarget, game.target.timeUnit);</div><div class="line"> </div><div class="line">        <span class="comment">// player display object</span></div><div class="line">        <span class="keyword">var</span> xPPS = <span class="number">0</span>;</div><div class="line">        xPPS = game.input.right ? xPPS + <span class="number">32</span> : xPPS;</div><div class="line">        xPPS = game.input.left ? xPPS - <span class="number">32</span> : xPPS;</div><div class="line">        <span class="comment">//game.playerShip.x = game.canvas.width / 2 - 16;</span></div><div class="line">        game.playerShip.x += xPPS * secs;</div><div class="line">        game.playerShip.x = game.playerShip.x &lt; <span class="number">0</span> ? <span class="number">0</span> : game.playerShip.x;</div><div class="line">        game.playerShip.x = game.playerShip.x &gt; game.canvas.width - game.playerShip.w ? game.canvas.width - game.playerShip.w : game.playerShip.x;</div><div class="line">        game.playerShip.y = game.canvas.height - <span class="number">64</span>;</div><div class="line"> </div><div class="line">        <span class="comment">// power ups</span></div><div class="line">        <span class="keyword">var</span> pow = game.powerUps;</div><div class="line">        <span class="comment">// spawn</span></div><div class="line">        pow.secs += secs;</div><div class="line">        <span class="keyword">if</span> (pow.secs &gt;= pow.spawnRate) &#123;</div><div class="line">            poolMod.spawn(pow.pool, game, &#123;&#125;);</div><div class="line">            pow.secs %= pow.spawnRate;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// update</span></div><div class="line">        poolMod.update(pow.pool, secs, game);</div><div class="line">        <span class="comment">// update stack</span></div><div class="line">        <span class="keyword">var</span> i = pow.stack.length,</div><div class="line">        stackItem;</div><div class="line">        game.ppsIndex = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            stackItem = pow.stack[i];</div><div class="line">            stackItem.secs += secs;</div><div class="line">            <span class="keyword">if</span> (stackItem.secs &gt;= stackItem.maxSecs) &#123;</div><div class="line">                pow.stack.splice(i, <span class="number">1</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                game.ppsIndex += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="4-The-draw-js-file"><a href="#4-The-draw-js-file" class="headerlink" title="4 - The draw.js file"></a>4 - The draw.js file</h2><p>Now that I have the game module worked out I will now want a draw module where I place all my code that will draw the state of a game object to a canvas element.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> draw = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> setBasicText = <span class="function"><span class="keyword">function</span> (<span class="params">ctx</span>) </span>&#123;</div><div class="line">        ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">        ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">        ctx.font = <span class="string">'10px arial'</span>;</div><div class="line">        ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// background helpers</span></div><div class="line">    <span class="keyword">var</span> backgroundSolid = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, game, canvas</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> c = <span class="built_in">Math</span>.round(<span class="number">128</span> - game.gamePer * <span class="number">128</span>);</div><div class="line">        ctx.fillStyle = <span class="string">'rgba(0,'</span> + c + <span class="string">','</span> + c + <span class="string">',1)'</span>;</div><div class="line">        ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> backgroundGrid = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, game, canvas</span>) </span>&#123;</div><div class="line">        ctx.lineWidth = <span class="number">3</span>;</div><div class="line">        ctx.strokeStyle = <span class="string">'#5a5a5a'</span>;</div><div class="line">        <span class="keyword">var</span> cellW = <span class="built_in">Math</span>.floor(canvas.width / <span class="number">32</span>) + <span class="number">2</span>,</div><div class="line">        cellH = <span class="built_in">Math</span>.floor(canvas.height / <span class="number">32</span>) + <span class="number">2</span>;</div><div class="line">        <span class="keyword">var</span> x,</div><div class="line">        y,</div><div class="line">        i = <span class="number">0</span>,</div><div class="line">        len = cellW * cellH,</div><div class="line">        dy = game.distance % <span class="number">256</span> / <span class="number">256</span> * <span class="number">32</span>;</div><div class="line">        <span class="keyword">while</span> (i &lt; len) &#123;</div><div class="line">            x = i % cellW;</div><div class="line">            y = <span class="built_in">Math</span>.floor(i / cellW);</div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.rect(<span class="number">-32</span> + x * <span class="number">32</span>, <span class="number">-32</span> + dy + y * <span class="number">32</span>, <span class="number">32</span>, <span class="number">32</span>);</div><div class="line">            ctx.stroke();</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> objectMethods = &#123;</div><div class="line">        <span class="attr">box</span>: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, obj, game</span>) </span>&#123;</div><div class="line">            ctx.fillStyle = <span class="string">'green'</span>;</div><div class="line">            ctx.fillRect(obj.x, obj.y, obj.w, obj.h);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> drawObject = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, obj, game, method</span>) </span>&#123;</div><div class="line">        method = method || <span class="string">'box'</span>;</div><div class="line">        objectMethods[method](ctx, obj, game);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="comment">// draw background</span></div><div class="line">        back: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, game, canvas</span>) </span>&#123;</div><div class="line">            backgroundSolid(ctx, game, canvas);</div><div class="line">            backgroundGrid(ctx, game, canvas);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">textETA</span>: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, game, x, y</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> text = <span class="string">'Target ETA: '</span> + <span class="built_in">Number</span>(game.target.ETA).toFixed(<span class="number">2</span>) + <span class="string">' '</span> + game.target.timeUnit;</div><div class="line">            setBasicText(ctx);</div><div class="line">            ctx.fillText(text, x, y);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">textPPS</span>: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, game, x, y</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> text = <span class="string">'PPS: '</span> + game.pps;</div><div class="line">            setBasicText(ctx);</div><div class="line">            ctx.fillText(text, x, y);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">textDistance</span>: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, game, x, y</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> text = <span class="string">'Distance: '</span> + <span class="built_in">Math</span>.floor(game.distance);</div><div class="line">            setBasicText(ctx);</div><div class="line">            ctx.fillText(text, x, y);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">playerShip</span>: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, game</span>) </span>&#123;</div><div class="line">            drawObject(ctx, game.playerShip, game, <span class="string">'box'</span>);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">ver</span>: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, state, x, y</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> text = <span class="string">'v'</span> + state.ver;</div><div class="line">            setBasicText(ctx);</div><div class="line">            ctx.fillText(text, x, y);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">pool</span>: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, pool</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">            obj;</div><div class="line">            ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">            ctx.strokeStyle = <span class="string">'black'</span>;</div><div class="line">            ctx.lineWidth = <span class="number">3</span>;</div><div class="line">            <span class="keyword">while</span> (i--) &#123;</div><div class="line">                obj = pool.objects[i];</div><div class="line">                <span class="keyword">if</span> (obj.active) &#123;</div><div class="line">                    ctx.save();</div><div class="line">                    ctx.fillStyle = obj.data.fill || <span class="string">'white'</span>;</div><div class="line">                    ctx.globalAlpha = obj.data.alpha || <span class="number">1</span>;</div><div class="line">                    <span class="comment">//ctx.translate(obj.x, obj.y);</span></div><div class="line">                    <span class="comment">//ctx.rotate(obj.heading);</span></div><div class="line">                    ctx.beginPath();</div><div class="line">                    <span class="comment">//ctx.rect(obj.w / 2 * -1, obj.h / 2 * -1, obj.w, obj.h);</span></div><div class="line">                    ctx.rect(obj.x, obj.y, obj.w, obj.h);</div><div class="line">                    ctx.fill();</div><div class="line">                    ctx.stroke();</div><div class="line">                    ctx.restore();</div><div class="line">                    <span class="keyword">if</span> (obj.data.hp) &#123;</div><div class="line">                        <span class="keyword">var</span> per = obj.data.hp.current / obj.data.hp.max;</div><div class="line">                        ctx.fillStyle = <span class="string">'lime'</span>;</div><div class="line">                        ctx.fillRect(obj.x - <span class="number">16</span>, obj.y, <span class="number">32</span> * per, <span class="number">4</span>);</div><div class="line">                        <span class="comment">//ctx.fillText(obj.data.hp.current, obj.x, obj.y);</span></div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="5-The-main-js-file"><a href="#5-The-main-js-file" class="headerlink" title="5 - The main.js file"></a>5 - The main.js file</h2><p>Now I just want to make use of everything I put together in a main.js file.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// create canvas</span></div><div class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>),</div><div class="line">ctx = canvas.getContext(<span class="string">'2d'</span>),</div><div class="line">container = <span class="built_in">document</span>.getElementById(<span class="string">'canvas-app'</span>) || <span class="built_in">document</span>.body;</div><div class="line">container.appendChild(canvas);</div><div class="line">canvas.width = <span class="number">320</span>;</div><div class="line">canvas.height = <span class="number">240</span>;</div><div class="line">ctx.translate(<span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line"><span class="comment">// main state object</span></div><div class="line"><span class="keyword">var</span> state = &#123;</div><div class="line">    <span class="attr">ver</span>: <span class="string">'0.2.0'</span>,</div><div class="line">    <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    <span class="attr">pointerDown</span>: <span class="literal">false</span>,</div><div class="line">    <span class="attr">pointerPos</span>: &#123;&#125;,</div><div class="line">    <span class="attr">game</span>: gameMod.create(&#123;</div><div class="line">        <span class="attr">canvas</span>: canvas,</div><div class="line">        <span class="attr">startTime</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="comment">// new Date(1983, 4, 6, 10, 5),</span></div><div class="line">        distObj: &#123;</div><div class="line">            <span class="comment">//32: 900000000,</span></div><div class="line">            <span class="comment">//64: 100000000</span></div><div class="line">        &#125;,</div><div class="line">        <span class="comment">//pps: 128,</span></div><div class="line">        ppsIndex: <span class="number">0</span>, <span class="comment">//6,</span></div><div class="line">        distance: <span class="number">0</span>,</div><div class="line">        <span class="attr">targetTimeUnit</span>: <span class="string">'years'</span></div><div class="line">    &#125;)</div><div class="line">&#125;;</div><div class="line"><span class="comment">// main app loop</span></div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    t = now - state.lt,</div><div class="line">    secs = t / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    gameMod.update(state.game, secs, now);</div><div class="line">    draw.back(ctx, state.game, canvas);</div><div class="line">    draw.playerShip(ctx, state.game);</div><div class="line">    draw.textDistance(ctx, state.game, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    draw.textPPS(ctx, state.game, <span class="number">10</span>, <span class="number">20</span>);</div><div class="line">    draw.textETA(ctx, state.game, <span class="number">10</span>, <span class="number">30</span>);</div><div class="line">    draw.pool(ctx, state.game.powerUps.pool);</div><div class="line">    draw.ver(ctx, state, <span class="number">2</span>, canvas.height - <span class="number">12</span>);</div><div class="line">    state.lt = now;</div><div class="line">&#125;;</div><div class="line">loop();</div><div class="line"><span class="comment">// events</span></div><div class="line"><span class="keyword">var</span> getCanvasRelative = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = e.target,</div><div class="line">    bx = canvas.getBoundingClientRect();</div><div class="line">    <span class="keyword">var</span> x = (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientX : e.clientX) - bx.left,</div><div class="line">    y = (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientY : e.clientY) - bx.top;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">x</span>: x,</div><div class="line">        <span class="attr">y</span>: y,</div><div class="line">        <span class="attr">bx</span>: bx</div><div class="line">    &#125;;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> setInputs = <span class="function"><span class="keyword">function</span> (<span class="params">pos</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (pos.x &lt; canvas.width / <span class="number">2</span>) &#123;</div><div class="line">        state.game.input.left = <span class="literal">true</span>;</div><div class="line">        state.game.input.right = <span class="literal">false</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        state.game.input.left = <span class="literal">false</span>;</div><div class="line">        state.game.input.right = <span class="literal">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> onPointerStart = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> pos = state.pointerPos = getCanvasRelative(e);</div><div class="line">    state.pointerDown = <span class="literal">true</span>;</div><div class="line">    setInputs(pos);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> onPointerMove = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> pos = state.pointerPos = getCanvasRelative(e);</div><div class="line">    <span class="keyword">if</span> (state.pointerDown) &#123;</div><div class="line">        setInputs(pos);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> onPointerStop = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    state.pointerDown = <span class="literal">false</span>;</div><div class="line">    state.game.input.left = <span class="literal">false</span>;</div><div class="line">    state.game.input.right = <span class="literal">false</span>;</div><div class="line">&#125;;</div><div class="line">canvas.addEventListener(<span class="string">'mousedown'</span>, onPointerStart);</div><div class="line">canvas.addEventListener(<span class="string">'mousemove'</span>, onPointerMove);</div><div class="line">canvas.addEventListener(<span class="string">'mouseup'</span>, onPointerStop);</div></pre></td></tr></table></figure>
<h2 id="6-conclusion"><a href="#6-conclusion" class="headerlink" title="6 - conclusion"></a>6 - conclusion</h2><p>I was able to get the basic idea in mind that i had working with this one fairly quickly, but there would still be a great deal more work to do in order to get this to start to feel like an actual game of some kind. I just wanted a project centered around estimating the amount of tie it would take for an object to move a given distance, and to make that distance a very large number. I did not have much in mind beyond that other than to just have a project where I am working out some code that has to do with topic that seems to come to mind whenever i start working on idle game prototypes.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2020/09/19/canvas-example-hyper-casual-to-the-black/" data-id="ckq9vbouz005sfsv1jlics1o6" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2020/09/19/canvas-example-hyper-casual-to-the-black/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/09/21/js-getting-started-file-protocol/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          The File Protocol and getting started with javaScript
        
      </div>
    </a>
  
  
    <a href="/2020/09/18/git-credentials/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Git credentials</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2020/09/19/canvas-example-hyper-casual-to-the-black/index.html';
    this.page.identifier = '708';
    this.page.title = 'Canvas examples on animation basics and beyond';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.38px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.48px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.33px;">angular</a> <a href="/tags/animation/" style="font-size: 11.9px;">animation</a> <a href="/tags/automation/" style="font-size: 11.9px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.38px;">backbone</a> <a href="/tags/blog/" style="font-size: 14.76px;">blog</a> <a href="/tags/canvas/" style="font-size: 19.05px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.86px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.95px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.43px;">ejs</a> <a href="/tags/express/" style="font-size: 16.19px;">express</a> <a href="/tags/games/" style="font-size: 17.14px;">games</a> <a href="/tags/git/" style="font-size: 12.86px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 14.76px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.9px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.29px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.48px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.43px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 16.67px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.1px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.29px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.52px;">node.js</a> <a href="/tags/phaser/" style="font-size: 17.62px;">phaser</a> <a href="/tags/python/" style="font-size: 15.24px;">python</a> <a href="/tags/statistics/" style="font-size: 13.81px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 18.57px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 15.71px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/23/threejs-normal-material/">The normal material in threejs</a>
          </li>
        
          <li>
            <a href="/2021/06/22/threejs-emissive-map/">Emissive maps in threejs</a>
          </li>
        
          <li>
            <a href="/2021/06/21/threejs-texture-loader/">The texture loader in threejs</a>
          </li>
        
          <li>
            <a href="/2021/06/18/threejs-vector3-apply-euler/">Apply Euler angles to a Vector3 in threejs</a>
          </li>
        
          <li>
            <a href="/2021/06/17/threejs-vector3-apply-axis-angle/">Vector3 apply axis method</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas-Examples</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2020/09/19/canvas-example-hyper-casual-to-the-black/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>