<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>A Canvas Example that is a basic Space Shooter game | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2019/08/21/canvas-example-space-shooter/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="So this post might be the first of several canvas examples, this one will be on a space shooter game. This is a project that I threw together in just a few hours, so it is not really a complete game a">
<meta property="og:type" content="article">
<meta property="og:title" content="A Canvas Example that is a basic Space Shooter game">
<meta property="og:url" content="https://dustinpfister.github.io/2019/08/21/canvas-example-space-shooter/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="So this post might be the first of several canvas examples, this one will be on a space shooter game. This is a project that I threw together in just a few hours, so it is not really a complete game a">
<meta property="og:updated_time" content="2019-08-24T01:05:45.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A Canvas Example that is a basic Space Shooter game">
<meta name="twitter:description" content="So this post might be the first of several canvas examples, this one will be on a space shooter game. This is a project that I threw together in just a few hours, so it is not really a complete game a">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-canvas-example-space-shooter" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/08/21/canvas-example-space-shooter/" class="article-date"> Published:
  <time datetime="2019-08-21T23:41:00.000Z" itemprop="datePublished">2019-08-21</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2019/08/21/canvas-example-space-shooter/" class="article-date"> Modified:
  <time datetime="2019-08-24T01:05:45.000Z" itemprop="dateModified">2019-08-23</time>
</a>

    <span class="article-date">V1.18</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      A Canvas Example that is a basic Space Shooter game
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>So this post might be the first of several <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial" target="_blank" rel="external">canvas examples</a>, this one will be on a space shooter game. This is a project that I threw together in just a few hours, so it is not really a complete game at the time of this writing at least. Still I have some fun with this one, and I might get around to putting more time into this one at some point.</p>
<a id="more"></a>
<h2 id="1-The-Space-Shooter-Canvas-Example"><a href="#1-The-Space-Shooter-Canvas-Example" class="headerlink" title="1 - The Space Shooter Canvas Example"></a>1 - The Space Shooter Canvas Example</h2><p>This canvas example consists of several javaScript files and a single html file. The project seems to work just fine via the file protocol, and does not depend on any external assets in terms of images, or scene data. This project is an example of the canvas element in action as well as many other subjects that come up when developing a canvas game with client side javaScript. Many such projects involve the use of a framework such as phaser ce to help save time, but in this post I ma doing everything with native javaScript.</p>
<h2 id="2-The-html-file"><a href="#2-The-html-file" class="headerlink" title="2 - The html file"></a>2 - The html file</h2><p>To start off with here is the html file that I have for the canvas example. For this one I am using a hard coded canvas element rather than creating and injecting a canvas element with javaScript. I am also lining to all the extremal javaScript files that I have worked out when it comes to handling display objects, a state machine, events rendering and a main app loop.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>canvas example space shooter<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"the-canvas"</span> <span class="attr">width</span>=<span class="string">"320"</span> <span class="attr">height</span>=<span class="string">"240"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"disp.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"states.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"events.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"render.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>So now that is out of the way lets get to the actual javaScript.</p>
<h2 id="2-The-Display-Object-Classes"><a href="#2-The-Display-Object-Classes" class="headerlink" title="2 - The Display Object Classes"></a>2 - The Display Object Classes</h2><p>The first javaScript file disp.js is a file that I worked out for display objects that will be used in the canvas example. A display object is a sprite or graphic that represents some kind of object that is used in the game. In this canvas example display objects are things like this player ship, enemy ships, and shots that are being fired. This file is also an example of prototype based inheritance in javaScript. There is a Base Display object that contains properties and methods that are common for all display objects in the canvas example, and then other classes that extend that base class for Ships and Shots.</p>
<h3 id="2-1-The-Base-Disp-Class"><a href="#2-1-The-Base-Disp-Class" class="headerlink" title="2.1 - The Base Disp Class"></a>2.1 - The Base Disp Class</h3><p>So the file starts off with the Base Display Object class here I define a constructor function that will be used for all Display Objects in the canvas example. This of course has properties like x and y but also a heading in radians, and a value that reflects the current pixels per second rate of movement. So in this canvas example all display objects have these properties they have a 2d position in the canvas as well as a heading and speed in pixels per second.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// DISP BASE CLASS</span></div><div class="line"><span class="keyword">var</span> Disp = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    <span class="keyword">this</span>.x = opt.x === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.x;</div><div class="line">    <span class="keyword">this</span>.y = opt.y === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.y;</div><div class="line">    <span class="keyword">this</span>.w = opt.w === <span class="literal">undefined</span> ? <span class="number">16</span> : opt.w;</div><div class="line">    <span class="keyword">this</span>.h = opt.h === <span class="literal">undefined</span> ? <span class="number">16</span> : opt.h;</div><div class="line">    <span class="keyword">this</span>.heading = opt.heading === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.heading;</div><div class="line">    <span class="keyword">this</span>.pps = opt.pps === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.pps;</div><div class="line">    <span class="comment">// canvas</span></div><div class="line">    <span class="keyword">this</span>.canvas = opt.canvas || <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">    <span class="keyword">this</span>.ctx = <span class="keyword">this</span>.canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// update method</span></div><div class="line">Disp.prototype.update = <span class="function"><span class="keyword">function</span> (<span class="params">t</span>) </span>&#123;</div><div class="line">    t = t === <span class="literal">undefined</span> ? <span class="number">0</span> : t;</div><div class="line">    <span class="keyword">this</span>.moveObj(t);</div><div class="line">    <span class="keyword">this</span>.applyBounds(<span class="keyword">this</span>, <span class="keyword">this</span>.canvas);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// Base draw to a canvas method</span></div><div class="line">Disp.prototype.draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> ctx = <span class="keyword">this</span>.ctx,</div><div class="line">    hw = <span class="keyword">this</span>.w / <span class="number">2</span>,</div><div class="line">    hh = <span class="keyword">this</span>.h / <span class="number">2</span>;</div><div class="line">    ctx.save();</div><div class="line">    ctx.translate(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</div><div class="line">    ctx.rotate(<span class="keyword">this</span>.heading);</div><div class="line">    ctx.strokeRect(-hw, -hh, <span class="keyword">this</span>.w, <span class="keyword">this</span>.h);</div><div class="line">    ctx.restore();</div><div class="line">&#125;;</div><div class="line"><span class="comment">// apply canvas bounds</span></div><div class="line">Disp.prototype.applyBounds = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="keyword">this</span>.canvas;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.x &lt; -<span class="keyword">this</span>.w) &#123;</div><div class="line">        <span class="keyword">this</span>.x = canvas.width + <span class="keyword">this</span>.w - <span class="built_in">Math</span>.abs(<span class="keyword">this</span>.x) % (canvas.width + <span class="keyword">this</span>.w);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.x &gt; canvas.width + <span class="keyword">this</span>.w) &#123;</div><div class="line">        <span class="keyword">this</span>.x = <span class="keyword">this</span>.x % (canvas.width + <span class="keyword">this</span>.w);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.y &lt; -<span class="keyword">this</span>.h) &#123;</div><div class="line">        <span class="keyword">this</span>.y = canvas.height + <span class="keyword">this</span>.h - <span class="built_in">Math</span>.abs(<span class="keyword">this</span>.y) % (canvas.height + <span class="keyword">this</span>.h);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.y &gt; canvas.height + <span class="keyword">this</span>.h) &#123;</div><div class="line">        <span class="keyword">this</span>.y = <span class="keyword">this</span>.y % (canvas.height + <span class="keyword">this</span>.h);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// Move Disp Object by current heading and PPS</span></div><div class="line">Disp.prototype.moveObj = <span class="function"><span class="keyword">function</span> (<span class="params">t</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> s = t / <span class="number">1000</span>;</div><div class="line">    <span class="keyword">var</span> delta = <span class="keyword">this</span>.pps * s;</div><div class="line">    <span class="keyword">this</span>.x += <span class="built_in">Math</span>.cos(<span class="keyword">this</span>.heading) * delta;</div><div class="line">    <span class="keyword">this</span>.y += <span class="built_in">Math</span>.sin(<span class="keyword">this</span>.heading) * delta;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// distance</span></div><div class="line">Disp.prototype.distance = <span class="function"><span class="keyword">function</span> (<span class="params">disp2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow(<span class="keyword">this</span>.x - disp2.x, <span class="number">2</span>) + <span class="built_in">Math</span>.pow(<span class="keyword">this</span>.y - disp2.y, <span class="number">2</span>));</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>The methods here have to do with just moving a display object in a uniform way.</p>
<h3 id="2-2-The-Shot-Class"><a href="#2-2-The-Shot-Class" class="headerlink" title="2.2 - The Shot Class"></a>2.2 - The Shot Class</h3><p>The Shot class is one of two classes that I have that extend the functionality of the Disp Class. A Shot Class is used with A Ship Class.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// SHOT CLASS</span></div><div class="line"><span class="keyword">var</span> Shot = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    <span class="comment">// use Disp Base Constructor first</span></div><div class="line">    <span class="built_in">Object</span>.assign(<span class="keyword">this</span>, <span class="keyword">new</span> Disp(opt));</div><div class="line">    <span class="comment">// set Shot properties</span></div><div class="line">    <span class="keyword">this</span>.life = opt.life || <span class="number">1000</span>;</div><div class="line">    <span class="keyword">this</span>.damage = opt.damage === <span class="literal">undefined</span> ? <span class="number">1</span> : opt.damage;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// inherit from Disp</span></div><div class="line">Shot.prototype = <span class="keyword">new</span> Disp();</div></pre></td></tr></table></figure>
<h3 id="2-3-The-Ship-Class"><a href="#2-3-The-Ship-Class" class="headerlink" title="2.3 - The Ship Class"></a>2.3 - The Ship Class</h3><p>Here I have the Ship Class that is used for both the Player Ship as well as enemies.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// SHIP CLASS</span></div><div class="line"><span class="keyword">var</span> Ship = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    <span class="comment">// use Disp Base Constructor first</span></div><div class="line">    <span class="built_in">Object</span>.assign(<span class="keyword">this</span>, <span class="keyword">new</span> Disp(opt));</div><div class="line">    <span class="comment">// Ship props</span></div><div class="line">    <span class="keyword">this</span>.shotMax = opt.shotMax === <span class="literal">undefined</span> ? <span class="number">5</span> : opt.shotMax; ;</div><div class="line">    <span class="keyword">this</span>.shotLife = opt.shotLife === <span class="literal">undefined</span> ? <span class="number">1500</span> : opt.shotLife;</div><div class="line">    <span class="keyword">this</span>.shotDelay = opt.shotDelay === <span class="literal">undefined</span> ? <span class="number">350</span> : opt.shotDelay;</div><div class="line">    <span class="keyword">this</span>.shotPPS = opt.shotPPS === <span class="literal">undefined</span> ? <span class="number">128</span> : opt.shotPPS;</div><div class="line">    <span class="keyword">this</span>.shotDamage = opt.shotDamage === <span class="literal">undefined</span> ? <span class="number">1</span> : opt.shotDamage;</div><div class="line">    <span class="keyword">this</span>.maxHP = opt.maxHP === <span class="literal">undefined</span> ? <span class="number">10</span> : opt.maxHP;</div><div class="line">    <span class="comment">// internals</span></div><div class="line">    <span class="keyword">this</span>.shots = [];</div><div class="line">    <span class="keyword">this</span>.shotTime = <span class="number">0</span>;</div><div class="line">    <span class="keyword">this</span>.HP = <span class="keyword">this</span>.maxHP;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// inherit from Disp</span></div><div class="line">Ship.prototype = <span class="keyword">new</span> Disp();</div><div class="line"><span class="comment">// ship update</span></div><div class="line">Ship.prototype.update = <span class="function"><span class="keyword">function</span> (<span class="params">t, shipPool</span>) </span>&#123;</div><div class="line">    <span class="comment">// apply Disp update first</span></div><div class="line">    <span class="comment">//console.log(this.x,this.y);</span></div><div class="line">    Disp.prototype.update.call(<span class="keyword">this</span>, t);</div><div class="line">    <span class="comment">//console.log(this.x,this.y);</span></div><div class="line"></div><div class="line">    <span class="comment">// update shots</span></div><div class="line">    <span class="keyword">this</span>.updateShots(t, shipPool);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// What happens when a Ship is hit</span></div><div class="line">Ship.prototype.hit = <span class="function"><span class="keyword">function</span> (<span class="params">shot</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.HP -= shot.damage;</div><div class="line">    <span class="keyword">this</span>.HP = <span class="keyword">this</span>.HP &lt; <span class="number">0</span> ? <span class="number">0</span> : <span class="keyword">this</span>.HP;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// update shots</span></div><div class="line">Ship.prototype.updateShots = <span class="function"><span class="keyword">function</span> (<span class="params">t, shipPool</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> s = t / <span class="number">1000</span>,</div><div class="line">    ship = <span class="keyword">this</span>;</div><div class="line">    <span class="keyword">this</span>.shotTime += t;</div><div class="line">    <span class="comment">// create new shots</span></div><div class="line">    <span class="keyword">var</span> newShots = <span class="keyword">this</span>.shotTime / <span class="keyword">this</span>.shotDelay;</div><div class="line">    <span class="keyword">if</span> (newShots &gt;= <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">this</span>.shotTime = <span class="keyword">this</span>.shotTime % <span class="keyword">this</span>.shotDelay;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.shots.length &lt; <span class="keyword">this</span>.shotMax) &#123;</div><div class="line">            <span class="keyword">this</span>.shots.push(<span class="keyword">new</span> Shot(&#123;</div><div class="line">                    <span class="attr">canvas</span>: <span class="keyword">this</span>.canvas,</div><div class="line">                    <span class="attr">x</span>: <span class="keyword">this</span>.x,</div><div class="line">                    <span class="attr">y</span>: <span class="keyword">this</span>.y,</div><div class="line">                    <span class="attr">heading</span>: <span class="keyword">this</span>.heading,</div><div class="line">                    <span class="attr">pps</span>: <span class="keyword">this</span>.shotPPS,</div><div class="line">                    <span class="attr">life</span>: <span class="keyword">this</span>.shotLife,</div><div class="line">                    <span class="attr">damage</span>: <span class="number">1</span></div><div class="line">                &#125;));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// update shots</span></div><div class="line">    <span class="keyword">this</span>.shots.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">shot</span>) </span>&#123;</div><div class="line">        shot.moveObj(t);</div><div class="line">        shot.life -= t;</div><div class="line">        shot.applyBounds();</div><div class="line">        <span class="keyword">if</span> (shipPool) &#123;</div><div class="line">            shipPool.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">ship</span>) </span>&#123;</div><div class="line">                <span class="keyword">if</span> (ship.distance(shot) &lt;= ship.w) &#123;</div><div class="line">                    ship.hit(shot);</div><div class="line">                    shot.life = <span class="number">0</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">// purge old shots</span></div><div class="line">    <span class="keyword">var</span> i = <span class="keyword">this</span>.shots.length;</div><div class="line">    <span class="keyword">while</span> (i--) &#123;</div><div class="line">        <span class="keyword">var</span> shot = <span class="keyword">this</span>.shots[i];</div><div class="line">        <span class="keyword">if</span> (shot.life &lt;= <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.shots.splice(i, <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw The Ship to a canvas context</span></div><div class="line">Ship.prototype.draw = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, shipStyle, shotStyle</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> hw = <span class="keyword">this</span>.w / <span class="number">2</span>,</div><div class="line">    hh = <span class="keyword">this</span>.h / <span class="number">2</span>;</div><div class="line">    <span class="comment">// draw ship</span></div><div class="line">    ctx.save();</div><div class="line">    ctx.translate(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</div><div class="line">    ctx.rotate(<span class="keyword">this</span>.heading);</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo(<span class="number">16</span>, <span class="number">0</span>);</div><div class="line">    ctx.lineTo(<span class="number">-8</span>, <span class="number">8</span>);</div><div class="line">    ctx.lineTo(<span class="number">-8</span>, <span class="number">-8</span>);</div><div class="line">    ctx.closePath();</div><div class="line">    ctx.strokeStyle = shipStyle || <span class="string">'white'</span>;</div><div class="line">    ctx.stroke();</div><div class="line">    ctx.restore();</div><div class="line">    <span class="comment">// draw shots</span></div><div class="line">    ctx.fillStyle = shotStyle || <span class="string">'white'</span>;</div><div class="line">    <span class="keyword">this</span>.shots.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">shot</span>) </span>&#123;</div><div class="line">        ctx.fillRect(shot.x - <span class="number">2</span>, shot.y - <span class="number">2</span>, <span class="number">4</span>, <span class="number">4</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="3-The-State-Machine"><a href="#3-The-State-Machine" class="headerlink" title="3 - The State Machine"></a>3 - The State Machine</h2><p>Here I have the state machine file stats.js. A state machine is a way to break an application such as this space shooter game into separate states for the main game for example. In this canvas example there is a main game state, as well as an initialization state, and a game over state. I did not put an awful lot of time into this canvas example, but if I where to continue working on this there would be a title state, as well as several other states and more.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> States = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> lt = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    canvas = <span class="built_in">document</span>.getElementById(<span class="string">'the-canvas'</span>),</div><div class="line">    ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">// make enemies</span></div><div class="line">    <span class="keyword">var</span> makeEnemies = <span class="function"><span class="keyword">function</span> (<span class="params">level, canvas</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> e,</div><div class="line">        enemies = [];</div><div class="line">        <span class="comment">// cap things past level 30</span></div><div class="line">        <span class="keyword">var</span> cap = level / <span class="number">30</span>;</div><div class="line">        cap = cap &gt; <span class="number">1</span> ? <span class="number">1</span> : cap;</div><div class="line">        <span class="keyword">var</span> count = level;</div><div class="line">        <span class="keyword">while</span> (count--) &#123;</div><div class="line">            e = <span class="keyword">new</span> Ship(&#123;</div><div class="line">                    <span class="attr">canvas</span>: canvas,</div><div class="line">                    <span class="attr">x</span>: <span class="built_in">Math</span>.floor(canvas.width * <span class="built_in">Math</span>.random()),</div><div class="line">                    <span class="attr">y</span>: <span class="built_in">Math</span>.floor(canvas.height * <span class="built_in">Math</span>.random()),</div><div class="line">                    <span class="attr">pps</span>: <span class="number">16</span> + <span class="built_in">Math</span>.floor(<span class="number">64</span> * cap),</div><div class="line">                    <span class="attr">shotPPS</span>: <span class="number">64</span> + <span class="built_in">Math</span>.floor(<span class="number">128</span> * cap),</div><div class="line">                    <span class="attr">shotLife</span>: <span class="number">5000</span>,</div><div class="line">                    <span class="attr">heading</span>: <span class="built_in">Math</span>.PI * <span class="number">2</span> * <span class="built_in">Math</span>.random(),</div><div class="line">                    <span class="attr">shotDelay</span>: <span class="number">3000</span> - <span class="built_in">Math</span>.floor(<span class="number">2500</span> * cap),</div><div class="line">                    <span class="attr">maxHP</span>: <span class="number">1</span> + <span class="built_in">Math</span>.floor(<span class="number">15</span> * cap)</div><div class="line">                &#125;);</div><div class="line">            enemies.push(e);</div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">return</span> enemies;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// purge</span></div><div class="line">    <span class="keyword">var</span> purgeEnemies = <span class="function"><span class="keyword">function</span> (<span class="params">enemies</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = enemies.length;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            <span class="keyword">var</span> enemy = enemies[i];</div><div class="line">            <span class="keyword">if</span> (enemy.HP === <span class="number">0</span>) &#123;</div><div class="line">                enemies.splice(i, <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// setup a level</span></div><div class="line">    <span class="keyword">var</span> setupLevel = <span class="function"><span class="keyword">function</span> (<span class="params">api</span>) </span>&#123;</div><div class="line">        <span class="comment">//api.eCount = api.level;</span></div><div class="line">        api.disp.enemies = makeEnemies(api.level, api.canvas);</div><div class="line">        <span class="keyword">var</span> ship = api.disp.ship;</div><div class="line">        ship.x = canvas.width / <span class="number">2</span>;</div><div class="line">        ship.y = canvas.width / <span class="number">2</span>;</div><div class="line">        api.win = <span class="literal">false</span>;</div><div class="line">        api.reset = <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// PUBLIC API</span></div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">canvas</span>: canvas,</div><div class="line">        <span class="attr">ctx</span>: ctx,</div><div class="line">        <span class="attr">win</span>: <span class="literal">false</span>,</div><div class="line">        <span class="attr">reset</span>: <span class="literal">false</span>,</div><div class="line">        <span class="comment">//eCount: 1,</span></div><div class="line">        level: <span class="number">1</span>,</div><div class="line">        <span class="attr">disp</span>: &#123;&#125;, <span class="comment">// display Objects to be used with the renderer</span></div><div class="line">        current: <span class="string">'init'</span>, <span class="comment">// current state</span></div><div class="line">        <span class="comment">// Initialize the Game State</span></div><div class="line">        init: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// player ship</span></div><div class="line">            <span class="keyword">this</span>.disp.ship = <span class="keyword">new</span> Ship(&#123;</div><div class="line">                    <span class="attr">canvas</span>: canvas,</div><div class="line">                    <span class="attr">x</span>: <span class="number">0</span>,</div><div class="line">                    <span class="attr">y</span>: <span class="number">0</span>,</div><div class="line">                    <span class="attr">pps</span>: <span class="number">32</span>,</div><div class="line">                    <span class="attr">heading</span>: <span class="built_in">Math</span>.PI / <span class="number">180</span> * <span class="number">0</span></div><div class="line">                &#125;);</div><div class="line">            <span class="comment">//this.eCount = 1;</span></div><div class="line">            <span class="keyword">this</span>.level = <span class="number">1</span>;</div><div class="line">            setupLevel(<span class="keyword">this</span>);</div><div class="line">            <span class="keyword">this</span>.current = <span class="string">'game'</span>;</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// Main Game State</span></div><div class="line">        game: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">            t = now - lt,</div><div class="line">            ship = <span class="keyword">this</span>.disp.ship,</div><div class="line">            enemies = <span class="keyword">this</span>.disp.enemies;</div><div class="line">            ship.update(t, enemies);</div><div class="line">            enemies.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">enemy</span>) </span>&#123;</div><div class="line">                enemy.update(t, [ship]);</div><div class="line">            &#125;);</div><div class="line">            purgeEnemies(enemies);</div><div class="line">            <span class="keyword">if</span> (enemies.length === <span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">this</span>.win = <span class="literal">true</span>;</div><div class="line">                <span class="keyword">this</span>.current = <span class="string">'gameOver'</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (ship.HP === <span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">this</span>.current = <span class="string">'gameOver'</span>;</div><div class="line">            &#125;</div><div class="line">            lt = now;</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// game over state</span></div><div class="line">        gameOver: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.reset) &#123;</div><div class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.win) &#123;</div><div class="line">                    <span class="keyword">this</span>.level += <span class="number">1</span>;</div><div class="line">                    setupLevel(<span class="keyword">this</span>);</div><div class="line">                    <span class="keyword">this</span>.current = <span class="string">'game'</span>;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">this</span>.current = <span class="string">'init'</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// tick method to be called in the main app loop</span></div><div class="line">        tick: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>[<span class="keyword">this</span>.current]();</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="4-Events"><a href="#4-Events" class="headerlink" title="4 - Events"></a>4 - Events</h2><p>In the events.js file I worked out a few event handlers for moving the player ship and continuing when the game is over. Nothing major for this canvas example just a crude yet functional solution for this.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// EVENTS</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = States.canvas</div><div class="line">        <span class="comment">// move ship handler that will work with mouse</span></div><div class="line">        <span class="comment">// and touch events</span></div><div class="line">        <span class="keyword">var</span> moveShip = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> bx = e.target.getBoundingClientRect(),</div><div class="line">        x = <span class="number">0</span>,</div><div class="line">        y = <span class="number">0</span>,</div><div class="line">        cx,</div><div class="line">        cy;</div><div class="line">        <span class="keyword">if</span> (e.touches) &#123;</div><div class="line">            x = e.touches[<span class="number">0</span>].clientX - bx.left;</div><div class="line">            y = e.touches[<span class="number">0</span>].clientY - bx.top;</div><div class="line">            <span class="built_in">console</span>.log(e.touches);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            x = e.clientX - bx.left;</div><div class="line">            y = e.clientY - bx.top;</div><div class="line">        &#125;</div><div class="line">        cx = canvas.width / <span class="number">2</span>,</div><div class="line">        cy = canvas.height / <span class="number">2</span>;</div><div class="line">        States.disp.ship.heading = <span class="built_in">Math</span>.PI + <span class="built_in">Math</span>.atan2(cy - y, cx - x);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// start game check</span></div><div class="line">    <span class="keyword">var</span> startGame = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (States.current === <span class="string">'gameOver'</span>) &#123;</div><div class="line">            States.reset = <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// Attach events</span></div><div class="line">    canvas.addEventListener(<span class="string">'mousemove'</span>, moveShip);</div><div class="line">    canvas.addEventListener(<span class="string">'touchmove'</span>, moveShip);</div><div class="line">    canvas.addEventListener(<span class="string">'mousedown'</span>, startGame);</div><div class="line">    canvas.addEventListener(<span class="string">'touchstart'</span>, startGame);</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure></p>
<h2 id="5-Renderer"><a href="#5-Renderer" class="headerlink" title="5 - Renderer"></a>5 - Renderer</h2><p>So then there is also the renderer.js file. Here I have the code that will draw to the canvas. There is are draw methods the correspond to some of the states in the state machine.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="keyword">var</span> draw = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = States.canvas,</div><div class="line">    ctx = States.ctx;</div><div class="line">    <span class="comment">// clear screen</span></div><div class="line">    <span class="keyword">var</span> cls = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">        ctx.strokeStyle = <span class="string">'white'</span>;</div><div class="line">        ctx.lineWidth = <span class="number">3</span>;</div><div class="line">        <span class="comment">// clear</span></div><div class="line">        ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> states = &#123;</div><div class="line">        <span class="attr">none</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</div><div class="line">        <span class="attr">game</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// draw player</span></div><div class="line">            States.disp.ship.draw(ctx, <span class="string">'blue'</span>, <span class="string">'blue'</span>);</div><div class="line">            <span class="comment">// draw enemies</span></div><div class="line">            States.disp.enemies.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">enemy</span>) </span>&#123;</div><div class="line">                enemy.draw(ctx, <span class="string">'red'</span>, <span class="string">'red'</span>);</div><div class="line">            &#125;);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">gameOver</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">            <span class="keyword">if</span> (States.win) &#123;</div><div class="line">                ctx.fillText(<span class="string">'Victory'</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                ctx.fillText(<span class="string">'Game Over'</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        cls();</div><div class="line">        <span class="keyword">var</span> drawState = states[States.current] || states[<span class="string">'none'</span>];</div><div class="line">        drawState();</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="6-Main-app-loop"><a href="#6-Main-app-loop" class="headerlink" title="6 - Main app loop"></a>6 - Main app loop</h2><p>Then there is the main app loop. Here I am using requestAnimatuonFrame to create the loop, and call the States tick method and the draw method each frame.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Main APP loop</span></div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    States.tick();</div><div class="line">    draw();</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="7-Conclusion"><a href="#7-Conclusion" class="headerlink" title="7 - Conclusion"></a>7 - Conclusion</h2><p>This canvas example is still pretty basic, If I get around to it I might put a little more time and effort into it. I often create projects like this where I get to the point where it is just starting to feel like a finished product, but stop and move on to the next thing. I would like to break that cycle some time, but only with something that is worth the investment.</p>
<p>A better user interface would be nice, and some animations, transitions and sound would be a nice touch. Still this was a good exercise for me, when it comes to working out how to structure a canvas example that is something not so basic. I think I will like to make a few more posts like this one, and put a great deal more effort into canvas examples that are worth more time and energy.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2019/08/21/canvas-example-space-shooter/" data-id="cjzoui3xp000008v1y741l2w5" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2019/08/21/canvas-example-space-shooter/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/08/27/js-path-find/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Path finding with javaScript
        
      </div>
    </a>
  
  
    <a href="/2019/08/20/js-web-storage/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Web Storage api in client side javaScript</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2019/08/21/canvas-example-space-shooter/index.html';
    this.page.identifier = '527';
    this.page.title = 'A Canvas Example that is a basic Space Shooter game';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.11px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.53px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.68px;">angular</a> <a href="/tags/animation/" style="font-size: 12.63px;">animation</a> <a href="/tags/automation/" style="font-size: 12.63px;">automation</a> <a href="/tags/backbone/" style="font-size: 13.16px;">backbone</a> <a href="/tags/blog/" style="font-size: 14.74px;">blog</a> <a href="/tags/canvas/" style="font-size: 16.84px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.63px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11.05px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.58px;">ejs</a> <a href="/tags/express/" style="font-size: 17.37px;">express</a> <a href="/tags/games/" style="font-size: 17.89px;">games</a> <a href="/tags/git/" style="font-size: 11.58px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15.26px;">hapi</a> <a href="/tags/heroku/" style="font-size: 13.68px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.21px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.53px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.58px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 12.63px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.42px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.21px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.47px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.95px;">phaser</a> <a href="/tags/statistics/" style="font-size: 12.11px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 16.32px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 15.79px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/09/19/nodejs-ansi-escape-codes/">Using ANSI escape codes in nodejs</a>
          </li>
        
          <li>
            <a href="/2019/09/18/js-promise-resolve-reject/">Promise resolve and reject methods for just creating a resolve or rejected promise</a>
          </li>
        
          <li>
            <a href="/2019/09/17/lodash_words/">Get an array of words from a string using Lodash or native javaScript AKA Lexical Analysis Tokenization</a>
          </li>
        
          <li>
            <a href="/2019/09/11/nodejs-command-line/">node command line options and command use examples</a>
          </li>
        
          <li>
            <a href="/2019/09/10/nodejs-semver/">node semver version standard and npm package</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2019/08/21/canvas-example-space-shooter/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>