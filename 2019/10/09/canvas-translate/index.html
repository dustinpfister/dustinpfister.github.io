<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>The canvas translate method | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2019/10/09/canvas-translate/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="The canvas translate method can be used to add a translation transformation the the current canvas matrix. This is so that when something is drawn to a certain point within the canvas using the canvas">
<meta property="og:type" content="article">
<meta property="og:title" content="The canvas translate method">
<meta property="og:url" content="https://dustinpfister.github.io/2019/10/09/canvas-translate/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="The canvas translate method can be used to add a translation transformation the the current canvas matrix. This is so that when something is drawn to a certain point within the canvas using the canvas">
<meta property="og:updated_time" content="2019-11-10T18:31:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="The canvas translate method">
<meta name="twitter:description" content="The canvas translate method can be used to add a translation transformation the the current canvas matrix. This is so that when something is drawn to a certain point within the canvas using the canvas">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-canvas-translate" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/09/canvas-translate/" class="article-date"> Published:
  <time datetime="2019-10-09T23:43:00.000Z" itemprop="datePublished">2019-10-09</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2019/10/09/canvas-translate/" class="article-date"> Modified:
  <time datetime="2019-11-10T18:31:57.000Z" itemprop="dateModified">2019-11-10</time>
</a>

    <span class="article-date">V1.26</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      The canvas translate method
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/translate" target="_blank" rel="external">canvas translate</a> method can be used to add a translation transformation the the current canvas matrix. This is so that when something is drawn to a certain point within the canvas using the canvas drawing methods it is actually drawn relative to the translated point, rather that the usual top left corner of the canvas.</p>
<a id="more"></a>
<h2 id="1-Canvas-translate-basic-example"><a href="#1-Canvas-translate-basic-example" class="headerlink" title="1 - Canvas translate basic example"></a>1 - Canvas translate basic example</h2><p>For a very basic example of the canvas translate method I just put together this simple little example where I am just translating the canvas so that a rectangle at 0,0 is actually rendered at 16,16. In the HTML I just have a canvas element, and then a script tag that links to an external javaScript file where I have the basic canvas translate example.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>canvas translate<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"the-canvas"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"basic.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>In the javaScript of the example I just grab a reference to the canvas element, and then a reference to the 2d drawing context. Once I have a reference to the 2d drawing context I can use the canvas translate method to translate the canvas matrix by a given delta x and delta y value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// get the canvas, context and set size</span></div><div class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'the-canvas'</span>),</div><div class="line">ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas.width = <span class="number">320</span>;</div><div class="line">canvas.height = <span class="number">240</span>;</div><div class="line"> </div><div class="line"><span class="comment">// drawing rect at 0,0 in the canvas</span></div><div class="line">ctx.fillStyle = <span class="string">'blue'</span>;</div><div class="line">ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">32</span>,<span class="number">32</span>);</div><div class="line"> </div><div class="line"><span class="comment">// translating canvas to 16,16</span></div><div class="line">ctx.translate(<span class="number">16</span>,<span class="number">16</span>);</div><div class="line">ctx.fillStyle = <span class="string">'red'</span>;</div><div class="line">ctx.globalAlpha = <span class="number">0.5</span>;</div><div class="line"><span class="comment">// now drawing a rect at 0,0 is actually at 16,16</span></div><div class="line">ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">32</span>,<span class="number">32</span>);</div></pre></td></tr></table></figure>
<h2 id="2-A-normalized-chart-data-canvas-translate-example"><a href="#2-A-normalized-chart-data-canvas-translate-example" class="headerlink" title="2 - A normalized chart data canvas translate example"></a>2 - A normalized chart data canvas translate example</h2><p>In this section I will be going over a far more advanced example that has to do with normalized points, and using the canvas translate method to translate the canvas matrix when it comes to drawing those normalized points to the canvas. This example involves creating an object that contains a small amount of data about how well a websites blog post is preforming in terms of search impressions, clicks, and a click threw rate.</p>
<p>This example is an exercise of <a href="/2017/08/29/canvas-separation-of-concerns-model-and-view/">separating the concerns of data and view</a>. The reason why is that the data object contains raw data as well as data that is formatted for viewing, but is not an actual view. This data object is septate from the javaScript that actually renders that data to the canvas.</p>
<p>In this canvas example I am also making normalized points where each point of interest is centered around a relative origin. It is then up to the developer how to go about scaling up the set of 2d points. One way would be to apply an offset to each point, and another would be to use the canvas translate method.</p>
<h3 id="2-1-The-data-object-with-noramlized-points"><a href="#2-1-The-data-object-with-noramlized-points" class="headerlink" title="2.1 - The data object with noramlized points"></a>2.1 - The data object with noramlized points</h3><p>So lets start out with the data object. Here I used a self executing function expression to wrap up everything that has to do with the data object into a closure. Inside this closure I created and returned a public api that contains the raw data, as well as normalized and scaled data. This normalized and scaled data is what I will be using when writing my view that will make use of the canvas translate method along with many other aspects of the canvas 2d drawing api.</p>
<p>The public api for the data object contains two methods of interest including a normalize method, and a scale method. The normalize method will create and array of points where each point has a value between negative one and positive one. So in other words all points are at a minimal scale of sorts that can then be scaled up by some kind of multiplier. This is of course where the scale method comes into play.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// data objects</span></div><div class="line"><span class="keyword">var</span> data = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> api = &#123;</div><div class="line">        <span class="attr">stats</span>: [],</div><div class="line">        <span class="attr">chartWidth</span>: <span class="number">160</span>,</div><div class="line">        <span class="attr">chartHeight</span>: <span class="number">120</span>,</div><div class="line">        <span class="attr">points</span>: [],</div><div class="line">        <span class="comment">// normalize points</span></div><div class="line">        normalize: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> api.points = api.stats.map(<span class="function"><span class="keyword">function</span> (<span class="params">statObj</span>) </span>&#123;</div><div class="line">                    <span class="keyword">var</span> max = <span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, statObj.values),</div><div class="line">                    deltaX = api.chartWidth / (stats[<span class="number">0</span>].values.length - <span class="number">1</span>);</div><div class="line">                    <span class="keyword">return</span> statObj.values.map(<span class="function"><span class="keyword">function</span> (<span class="params">val, i</span>) </span>&#123;</div><div class="line">                        <span class="keyword">return</span> &#123;</div><div class="line">                            <span class="attr">x</span>: (deltaX * i - api.chartWidth / <span class="number">2</span>) / api.chartWidth,</div><div class="line">                            <span class="attr">y</span>: ((<span class="number">1</span> - val / max) * api.chartHeight - api.chartHeight / <span class="number">2</span>) / api.chartHeight</div><div class="line">                        &#125;</div><div class="line">                    &#125;);</div><div class="line">                &#125;);</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// set scale of points by normalizing, and then scaling</span></div><div class="line">        scale: <span class="function"><span class="keyword">function</span> (<span class="params">scaleW, scaleH</span>) </span>&#123;</div><div class="line">            api.chartWidth = scaleW || api.chartWidth;</div><div class="line">            api.chartHeight = scaleH || api.chartHeight;</div><div class="line">            api.normalize();</div><div class="line">            <span class="keyword">return</span> api.points = api.points.map(<span class="function"><span class="keyword">function</span> (<span class="params">statPoints</span>) </span>&#123;</div><div class="line">                    <span class="keyword">return</span> statPoints.map(<span class="function"><span class="keyword">function</span> (<span class="params">pt</span>) </span>&#123;</div><div class="line">                        pt.x = pt.x * api.chartWidth;</div><div class="line">                        pt.y = pt.y * api.chartHeight;</div><div class="line">                        <span class="keyword">return</span> pt;</div><div class="line">                    &#125;);</div><div class="line">                &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// hard coded stats</span></div><div class="line">    <span class="keyword">var</span> stats = [&#123;</div><div class="line">            <span class="attr">lable</span>: <span class="string">'impressions'</span>,</div><div class="line">            <span class="attr">color</span>: <span class="string">'cyan'</span>,</div><div class="line">            <span class="attr">values</span>: [<span class="number">125</span>, <span class="number">397</span>, <span class="number">487</span>, <span class="number">463</span>, <span class="number">472</span>, <span class="number">321</span>, <span class="number">94</span>]</div><div class="line">        &#125;, &#123;</div><div class="line">            <span class="attr">lable</span>: <span class="string">'clicks'</span>,</div><div class="line">            <span class="attr">color</span>: <span class="string">'blue'</span>,</div><div class="line">            <span class="attr">values</span>: [<span class="number">9</span>, <span class="number">33</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">29</span>, <span class="number">13</span>, <span class="number">7</span>]</div><div class="line">        &#125;</div><div class="line">    ];</div><div class="line">    <span class="comment">// creating a ctr stat object</span></div><div class="line">    stats.push((<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> &#123;</div><div class="line">                <span class="attr">lable</span>: <span class="string">'CTR'</span>,</div><div class="line">                <span class="attr">color</span>: <span class="string">'green'</span>,</div><div class="line">                <span class="attr">values</span>: stats[<span class="number">0</span>].values.map(<span class="function"><span class="keyword">function</span> (<span class="params">imp, index</span>) </span>&#123;</div><div class="line">                    <span class="keyword">return</span> imp / stats[<span class="number">1</span>].values[index];</div><div class="line">                &#125;)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">            ()));</div><div class="line">    <span class="comment">// set stats and update points for first time</span></div><div class="line">    api.stats = stats;</div><div class="line">    api.normalize();</div><div class="line">    api.scale();</div><div class="line">    <span class="comment">// return the api</span></div><div class="line">    <span class="keyword">return</span> api</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<p>The data object contains are coded data, but if I where to continue working on this and make it some kind of long term project I would change this into some kind of constructor that can be fed new raw data of course. The central theme of this example has to do with the concept of normalizing points in a 2d plain, as this is what is most relevant to the over all theme of this post on the canvas translate method.</p>
<h3 id="2-2-canvas-translate-and-the-Draw-Graph-method"><a href="#2-2-canvas-translate-and-the-Draw-Graph-method" class="headerlink" title="2.2 - canvas translate and the Draw Graph method"></a>2.2 - canvas translate and the Draw Graph method</h3><p>Now here is the main draw graph method that uses the canvas translate method to translate the canvas to any point in the area of the canvas element. Once one canvas is translated to a given point in interest I then call additional methods that will draw the current state of the points that have been normalized and scaled.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">// main draw method that uses canvas translate</span></div><div class="line"><span class="keyword">var</span> drawGraph = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, data, x, y</span>) </span>&#123;</div><div class="line">    ctx.save();</div><div class="line">    <span class="comment">// translate to the center of the canvas</span></div><div class="line">    ctx.translate(x, y);</div><div class="line">    <span class="comment">// draw stat object points</span></div><div class="line">    drawStatObjects(ctx, data);</div><div class="line">    <span class="comment">// draw base lines</span></div><div class="line">    drawBaseLines(ctx, data);</div><div class="line">    ctx.restore();</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>Here I ams also using the canvas save and restore methods as well so if I want to call this method more than once it will not keep changing the state of the canvas matrix each time the method is called.</p>
<h3 id="2-3-The-draw-stat-objects-draw-method"><a href="#2-3-The-draw-stat-objects-draw-method" class="headerlink" title="2.3 - The draw stat objects draw method"></a>2.3 - The draw stat objects draw method</h3><p>Here I have the draw method that can be used to draw the charts normalized and scaled points to the canvas. This is of course what I am calling in the draw graph method outline above, the reason why I did this is to help make things more fine grain when t comes to drawing something like this.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// draw a stat objects normalized chart value points</span></div><div class="line"><span class="keyword">var</span> drawStatObjects = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, data</span>) </span>&#123;</div><div class="line">    ctx.lineWidth = <span class="number">3</span>;</div><div class="line">    data.points.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">statPoints, statIndex</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> statObj = data.stats[statIndex];</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.strokeStyle = statObj.color || <span class="string">'red'</span>;</div><div class="line">        statPoints.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">pt, pointIndex</span>) </span>&#123;</div><div class="line">            ctx.lineTo(pt.x, pt.y);</div><div class="line">        &#125;);</div><div class="line">        ctx.stroke();</div><div class="line">    &#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-4-The-draw-base-lines-method"><a href="#2-4-The-draw-base-lines-method" class="headerlink" title="2.4 - The draw base lines method"></a>2.4 - The draw base lines method</h3><p>Here I have another draw method that is used to draw the base lines of the chart based on values in the data object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// draw normalized base lines of chart</span></div><div class="line"><span class="keyword">var</span> drawBaseLines = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, data</span>) </span>&#123;</div><div class="line">    ctx.strokeStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.moveTo(-data.chartWidth / <span class="number">2</span>, -data.chartHeight / <span class="number">2</span>);</div><div class="line">    ctx.lineTo(-data.chartWidth / <span class="number">2</span>, data.chartHeight / <span class="number">2</span>);</div><div class="line">    ctx.lineTo(data.chartWidth / <span class="number">2</span>, data.chartHeight / <span class="number">2</span>);</div><div class="line">    ctx.stroke();</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-5-Pull-it-all-together"><a href="#2-5-Pull-it-all-together" class="headerlink" title="2.5 - Pull it all together"></a>2.5 - Pull it all together</h3><p>So now that everything is worked out nice and need it is time to play around with things with some additional javaScript that composes the actual state of the canvas project.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// draw background</span></div><div class="line"><span class="keyword">var</span> drawBackground = <span class="function"><span class="keyword">function</span> (<span class="params">ctx</span>) </span>&#123;</div><div class="line">    <span class="comment">// black background</span></div><div class="line">    ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// Lets use it</span></div><div class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'the-canvas'</span>),</div><div class="line">ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas.width = <span class="number">320</span>;</div><div class="line">canvas.height = <span class="number">240</span>;</div><div class="line"> </div><div class="line">drawBackground(ctx);</div><div class="line"> </div><div class="line"><span class="comment">// draw Graph at default</span></div><div class="line">drawGraph(ctx, data, canvas.width / <span class="number">2</span>, canvas.height / <span class="number">2</span>);</div><div class="line"> </div><div class="line"><span class="comment">// using scale method to make a smaller version of the graph</span></div><div class="line">data.scale(<span class="number">50</span>,<span class="number">50</span>);</div><div class="line">drawGraph(ctx, data, <span class="number">30</span>, <span class="number">30</span>);</div></pre></td></tr></table></figure>
<p>In the data object I called the scale method for the first time that sets everything to a default state of sorts. I can the use the scale method to change the size of the chart. The thing to note here about normalizing points is that everything is centered around a single point, and from there it can be scaled up, this works well in relationship with the canvas translate method that can be used to change the location of where that center point of interest is.</p>
<h2 id="3-Using-canvas-translate-rotate-save-and-restore"><a href="#3-Using-canvas-translate-rotate-save-and-restore" class="headerlink" title="3 - Using canvas translate, rotate, save, and restore."></a>3 - Using canvas translate, rotate, save, and restore.</h2><p>So now for an example that uses the canvas translate method along with the canvas rotate method, and save and restore to rotate a box with the center of the box centered at the center of the canvas. The <a href="/2019/08/14/canvas-save/">save and restore methods</a> can be used to save and then later restore the current state of the drawing context. So if I use the canvas translate method to change the translation of the matrix, I can use save first to store the previous status of the context. Once I am done translating, rotating, and so forth I can then use the restore method to put things back the way they where.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'the-canvas'</span>),</div><div class="line">ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas.width = <span class="number">320</span>;</div><div class="line">canvas.height = <span class="number">240</span>;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> bx = &#123;</div><div class="line">    <span class="attr">a</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">cx</span>: canvas.width / <span class="number">2</span>,</div><div class="line">    <span class="attr">cy</span>: canvas.height / <span class="number">2</span>,</div><div class="line">    <span class="attr">w</span>: <span class="number">64</span>,</div><div class="line">    <span class="attr">h</span>: <span class="number">64</span>,</div><div class="line">    <span class="attr">section</span>: <span class="number">0</span>,</div><div class="line">    <span class="attr">update</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.a = <span class="built_in">Math</span>.PI * <span class="number">2</span> / <span class="number">360</span> * <span class="keyword">this</span>.section;</div><div class="line">        <span class="keyword">this</span>.section += <span class="number">1</span>;</div><div class="line">        <span class="keyword">this</span>.section %= <span class="number">360</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// draw method using canvas translate, save, restore, and rotate</span></div><div class="line"><span class="keyword">var</span> draw = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">    ctx.save();</div><div class="line">    ctx.translate(bx.cx, bx.cy);</div><div class="line">    ctx.rotate(bx.a);</div><div class="line">    ctx.fillStyle = <span class="string">'blue'</span>;</div><div class="line">    ctx.fillRect(-bx.w / <span class="number">2</span>, -bx.h / <span class="number">2</span>, bx.w, bx.h);</div><div class="line">    ctx.restore();</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    draw();</div><div class="line">    bx.update();</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2019/10/09/canvas-translate/" data-id="ck1pm5ehe0001xwv12vnb0d13" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2019/10/09/canvas-translate/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/10/10/canvas-example-animation-basics/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Canvas examples on animation basics and beyond
        
      </div>
    </a>
  
  
    <a href="/2019/10/08/canvas-clip/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">The canvas clip method</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2019/10/09/canvas-translate/index.html';
    this.page.identifier = '543';
    this.page.title = 'The canvas translate method';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.11px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.53px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.68px;">angular</a> <a href="/tags/animation/" style="font-size: 12.63px;">animation</a> <a href="/tags/automation/" style="font-size: 12.63px;">automation</a> <a href="/tags/backbone/" style="font-size: 13.16px;">backbone</a> <a href="/tags/blog/" style="font-size: 14.74px;">blog</a> <a href="/tags/canvas/" style="font-size: 17.37px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.63px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11.05px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.58px;">ejs</a> <a href="/tags/express/" style="font-size: 16.84px;">express</a> <a href="/tags/games/" style="font-size: 17.89px;">games</a> <a href="/tags/git/" style="font-size: 11.58px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15.26px;">hapi</a> <a href="/tags/heroku/" style="font-size: 13.68px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.21px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.53px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.58px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 12.63px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.42px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.21px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.47px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.95px;">phaser</a> <a href="/tags/statistics/" style="font-size: 12.11px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 16.32px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 15.79px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/11/15/vuejs-canvas/">Vue canvas topics including getting started scaling and more</a>
          </li>
        
          <li>
            <a href="/2019/11/14/vuejs-on/">Vue on directive</a>
          </li>
        
          <li>
            <a href="/2019/11/13/vuejs-get/">Creating a vue get method via plug-ins</a>
          </li>
        
          <li>
            <a href="/2019/11/12/vuejs-force-update/">vue force update method to make the view render when it will not</a>
          </li>
        
          <li>
            <a href="/2019/11/11/vuejs-lifecycle-updated/">vue updated lifecycle hook</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2019/10/09/canvas-translate/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>