<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>A grid defense game canvas example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2019/11/27/canvas-example-grid-defense/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Time for another canvas example post to help me keep on track with the reasons why I started getting into javaScript to begin with, which is doing things that are fun, or at least interesting with can">
<meta property="og:type" content="article">
<meta property="og:title" content="A grid defense game canvas example">
<meta property="og:url" content="https://dustinpfister.github.io/2019/11/27/canvas-example-grid-defense/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="Time for another canvas example post to help me keep on track with the reasons why I started getting into javaScript to begin with, which is doing things that are fun, or at least interesting with can">
<meta property="og:updated_time" content="2021-03-05T20:40:35.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A grid defense game canvas example">
<meta name="twitter:description" content="Time for another canvas example post to help me keep on track with the reasons why I started getting into javaScript to begin with, which is doing things that are fun, or at least interesting with can">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas-Examples</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-canvas-example-grid-defense" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/27/canvas-example-grid-defense/" class="article-date"> Published:
  <time datetime="2019-11-27T19:07:00.000Z" itemprop="datePublished">2019-11-27</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2019/11/27/canvas-example-grid-defense/" class="article-date"> Modified:
  <time datetime="2021-03-05T20:40:35.000Z" itemprop="dateModified">2021-03-05</time>
</a>

    <span class="article-date">V1.28</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/canvas/">canvas</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      A grid defense game canvas example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>Time for another <a href="/2020/03/23/canvas-example/">canvas example</a> post to help me keep on track with the reasons why I started getting into javaScript to begin with, which is doing things that are fun, or at least interesting with canvas and javaScript. In goes without saying that canvas can be used in the creation and maintenance of more practical projects, but that is not what this example will be for sure. This canvas example will be of a very simple defense game that involves the use of a grid like the one I worked out in my other <a href="/2019/11/07/canvas-example-grid/">canvas example</a> post on grids. It will also make used of an additional class that builds on top of a Grid class.</p>
<p>This will not be a tower defense game, or any such game that will involve path detection, as it will be the kind of simple defense game that involves units just moving from one side of the screen to another. Even with this style of game I will be keeping things as simple as possible to make it so this post does not go on forever.</p>
<p>There is of course diving into the more complex ideas that I have for canvas examples, but many of them are the kind of projects that might end up taking months or even years to develop. This idea is not one of those at all, and these kinds of projects are not necessary inferior to the more involved ideas for projects. The first step is to get the basic idea working, and then it is more about what I need to do to set it apart from all the other games that are like it.</p>
<a id="more"></a>
<p><div id="canvas-app"></div></p>
<script src="/js/canvas-examples/grid-defense/0.0.0/pkg.js"></script>

<h2 id="1-A-grid-js-module-to-use-with-the-grid-defense-canvas-example"><a href="#1-A-grid-js-module-to-use-with-the-grid-defense-canvas-example" class="headerlink" title="1 - A grid.js module to use with the grid defense canvas example"></a>1 - A grid.js module to use with the grid defense canvas example</h2><p>Here Is the grid.js file for starters, this will be used as a base class that will then be extended into another class that will server as a game board of sorts for the canvas example. This file just outlines the base constructor of the Grid class, as well as a few prototype methods that have to do with creating grid cells, and getting grid cells.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// GRID</span></div><div class="line"><span class="keyword">var</span> Grid = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    <span class="keyword">this</span>.xOffset = opt.xOffset === <span class="literal">undefined</span> ? <span class="number">5</span> : opt.xOffset;</div><div class="line">    <span class="keyword">this</span>.yOffset = opt.yOffset === <span class="literal">undefined</span> ? <span class="number">5</span> : opt.yOffset;</div><div class="line">    <span class="keyword">this</span>.cellSize = opt.cellSize === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.cellSize;</div><div class="line">    <span class="keyword">this</span>.cellWidth = opt.cellWidth || <span class="number">7</span>;</div><div class="line">    <span class="keyword">this</span>.cellHeight = opt.cellHeight || <span class="number">6</span>;</div><div class="line">    <span class="keyword">this</span>.cells = [];</div><div class="line">    <span class="comment">// set cells for the grid</span></div><div class="line">    <span class="keyword">this</span>.setCells(opt.forCell);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// return a cell by index or x y cell position</span></div><div class="line">Grid.prototype.getCell = <span class="function"><span class="keyword">function</span> (<span class="params">ix, y</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> cell;</div><div class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">1</span>) &#123;</div><div class="line">        cell = <span class="keyword">this</span>.cells[ix];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">2</span> &amp;&amp; ix &gt;= <span class="number">0</span> &amp;&amp; ix &lt; <span class="keyword">this</span>.cellWidth) &#123;</div><div class="line">        cell = <span class="keyword">this</span>.cells[y * <span class="keyword">this</span>.cellWidth + ix];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> cell ? cell : <span class="literal">false</span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// return the cell at the given canvas relative x and y pixel position</span></div><div class="line"><span class="comment">// or false if out of range</span></div><div class="line">Grid.prototype.getCellFromPoint = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> insideX = x &gt;= <span class="keyword">this</span>.xOffset &amp;&amp; x &lt;= <span class="keyword">this</span>.xOffset + <span class="keyword">this</span>.cellSize * <span class="keyword">this</span>.cellWidth,</div><div class="line">    insideY = y &gt;= <span class="keyword">this</span>.yOffset &amp;&amp; y &lt;= <span class="keyword">this</span>.yOffset + <span class="keyword">this</span>.cellSize * <span class="keyword">this</span>.cellHeight;</div><div class="line">    <span class="keyword">if</span> (insideX &amp;&amp; insideY) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getCell(</div><div class="line">            <span class="built_in">Math</span>.floor((x - <span class="keyword">this</span>.xOffset) / <span class="keyword">this</span>.cellSize),</div><div class="line">            <span class="built_in">Math</span>.floor((y - <span class="keyword">this</span>.yOffset) / <span class="keyword">this</span>.cellSize));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// set cell objects for each cell in the grid</span></div><div class="line">Grid.prototype.setCells = <span class="function"><span class="keyword">function</span> (<span class="params">forCell</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.cells = [];</div><div class="line">    <span class="keyword">var</span> ci = <span class="number">0</span>,</div><div class="line">    cellObj,</div><div class="line">    cLen = <span class="keyword">this</span>.cellWidth * <span class="keyword">this</span>.cellHeight;</div><div class="line">    forCell = forCell || <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">    <span class="keyword">while</span> (ci &lt; cLen) &#123;</div><div class="line">        cellObj = &#123;</div><div class="line">            <span class="attr">i</span>: ci,</div><div class="line">            <span class="attr">y</span>: <span class="built_in">Math</span>.floor(ci / <span class="keyword">this</span>.cellWidth),</div><div class="line">            <span class="attr">x</span>: ci % <span class="keyword">this</span>.cellWidth</div><div class="line">        &#125;;</div><div class="line">        forCell(cellObj);</div><div class="line">        <span class="keyword">this</span>.cells.push(cellObj);</div><div class="line">        ci += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>I went for two get cell methods one that accepts cell index values, and the other that accepts canvas relative pixel values. So for this project that is all there is for the base grid class. This style of defense game is not going to be tower defense, enemies are just going to move from one side to the other so there is no need for path detection of anything to that effect.</p>
<h2 id="2-Grid-unit-module"><a href="#2-Grid-unit-module" class="headerlink" title="2 - Grid unit module"></a>2 - Grid unit module</h2><p>So now for a more advanced class that extends the grid class, and an enemy class. The Unit Grid class extends the base Grid class that I went over in the previous section, and on top of that adds some additional methods that have to do with spawning and updating enemies.</p>
<p>The spawn method when called will place a new enemy in a cell that is all the way to the right side of the grid. If there number of enemies is at or above a set limit in the Unit Grid class instance the enemy will not spawn.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ENEMY OBJECT CLASS</span></div><div class="line"><span class="keyword">var</span> Enemy = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.board = opt.board || <span class="keyword">new</span> UnitGrid();</div><div class="line">    <span class="keyword">this</span>.cell = opt.cell || &#123;&#125;;</div><div class="line">    <span class="keyword">this</span>.ticksPerMove = <span class="number">8</span>;</div><div class="line">    <span class="keyword">this</span>.ticks = <span class="number">0</span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// update and enemy</span></div><div class="line">Enemy.prototype.update = <span class="function"><span class="keyword">function</span> (<span class="params">ticks</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.ticks += ticks;</div><div class="line">    <span class="comment">// move to next</span></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.ticks &gt;= <span class="keyword">this</span>.ticksPerMove) &#123;</div><div class="line">        <span class="keyword">var</span> target = <span class="keyword">this</span>.board.getCell(<span class="built_in">Math</span>.floor(<span class="keyword">this</span>.cell.x - <span class="number">1</span>), <span class="keyword">this</span>.cell.y);</div><div class="line">        <span class="keyword">if</span> (target) &#123;</div><div class="line">            <span class="keyword">if</span> (!target.enemy) &#123;</div><div class="line">                <span class="keyword">this</span>.cell.enemy = <span class="literal">false</span>;</div><div class="line">                target.enemy = <span class="keyword">this</span>;</div><div class="line">                <span class="keyword">this</span>.cell = target;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">this</span>.board.hits += <span class="number">1</span>;</div><div class="line">            <span class="keyword">this</span>.cell.enemy = <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.ticks = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// UNIT GRID CLASS</span></div><div class="line"><span class="keyword">var</span> UnitGrid = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    <span class="comment">// same base properties</span></div><div class="line">    <span class="built_in">Object</span>.assign(<span class="keyword">this</span>, <span class="keyword">new</span> Grid(opt));</div><div class="line">    <span class="keyword">this</span>.maxEnemies = opt.maxEnemies || <span class="number">5</span>;</div><div class="line">    <span class="keyword">this</span>.tickRate = opt.tickRate === <span class="literal">undefined</span> ? <span class="number">1000</span> / <span class="number">4</span> : opt.tickRate;</div><div class="line">    <span class="keyword">this</span>.enemyCount = <span class="number">0</span>;</div><div class="line">    <span class="keyword">this</span>.lastTick = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">this</span>.hits = <span class="number">0</span>; <span class="comment">// times hit by an enemy</span></div><div class="line">    <span class="keyword">this</span>.kills = <span class="number">0</span>; <span class="comment">// number of kills of enemies</span></div><div class="line">&#125;;</div><div class="line">UnitGrid.prototype = <span class="built_in">Object</span>.create(<span class="keyword">new</span> Grid());</div><div class="line"><span class="comment">// spawn a new enemy</span></div><div class="line">UnitGrid.prototype.spawn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.enemyCount &lt; <span class="keyword">this</span>.maxEnemies) &#123;</div><div class="line">        <span class="keyword">var</span> y = <span class="number">0</span>,</div><div class="line">        len = <span class="keyword">this</span>.cellHeight,</div><div class="line">        options = [],</div><div class="line">        cell;</div><div class="line">        <span class="keyword">while</span> (y &lt; len) &#123;</div><div class="line">            cell = <span class="keyword">this</span>.getCell(<span class="keyword">this</span>.cellWidth - <span class="number">1</span>, y);</div><div class="line">            <span class="keyword">if</span> (!cell.enemy) &#123;</div><div class="line">                options.push(cell);</div><div class="line">            &#125;</div><div class="line">            y += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (options.length &gt; <span class="number">0</span>) &#123;</div><div class="line">            cell = options[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * options.length)];</div><div class="line">            cell.enemy = <span class="keyword">new</span> Enemy(&#123;</div><div class="line">                    <span class="attr">board</span>: <span class="keyword">this</span>,</div><div class="line">                    <span class="attr">cell</span>: cell</div><div class="line">                &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// update board</span></div><div class="line">UnitGrid.prototype.update = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">    now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    t = now - <span class="keyword">this</span>.lastTick,</div><div class="line">    ticks = t / <span class="keyword">this</span>.tickRate,</div><div class="line">    len = <span class="keyword">this</span>.cells.length,</div><div class="line">    cell;</div><div class="line">    <span class="comment">// update cells if ticks &gt;= 1</span></div><div class="line">    <span class="keyword">if</span> (ticks &gt;= <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">this</span>.enemyCount = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (i &lt; len) &#123;</div><div class="line">            cell = <span class="keyword">this</span>.cells[i];</div><div class="line">            <span class="keyword">if</span> (cell.enemy) &#123;</div><div class="line">                <span class="keyword">this</span>.enemyCount += <span class="number">1</span>;</div><div class="line">                cell.enemy.update(ticks);</div><div class="line">            &#125;</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.spawn();</div><div class="line">        <span class="keyword">this</span>.lastTick = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>The update method will loop over all cells in the gird, and for now the only thing there is to update are enemies. So the update method just spawns new enemies, and updates any enemies on the board before hand.</p>
<h2 id="3-The-draw-module"><a href="#3-The-draw-module" class="headerlink" title="3 - The draw module"></a>3 - The draw module</h2><p>Now to work out some draw methods for the game board, and to display some other basic info. I have a draw method that will just blank the screen, and then a draw method that will draw the grid lines, as well as the current enemies. I also have a draw method that will print some values of interest so far with the canvas example.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// draw Cell Lines</span></div><div class="line"><span class="keyword">var</span> draw = &#123;</div><div class="line">    <span class="attr">gridLineStyle</span>: <span class="string">'white'</span>,</div><div class="line">    <span class="attr">enemyFillStyle</span>: <span class="string">'red'</span>,</div><div class="line">    <span class="attr">textFill</span>: <span class="string">'yellow'</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">// clear the canvas</span></div><div class="line">draw.cls = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas</span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'blue'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw grid lines and enemies</span></div><div class="line">draw.gridCellLines = <span class="function"><span class="keyword">function</span> (<span class="params">grid, ctx</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> ci = <span class="number">0</span>,</div><div class="line">    x,</div><div class="line">    y,</div><div class="line">    cell,</div><div class="line">    cLen = grid.cells.length;</div><div class="line">    <span class="keyword">while</span> (ci &lt; cLen) &#123;</div><div class="line">        cell = grid.cells[ci];</div><div class="line">        x = cell.x * grid.cellSize + grid.xOffset + <span class="number">0.5</span>;</div><div class="line">        y = cell.y * grid.cellSize + grid.yOffset + <span class="number">0.5</span>;</div><div class="line">        ctx.strokeStyle = draw.gridLineStyle;</div><div class="line">        ctx.strokeRect(x, y, grid.cellSize, grid.cellSize);</div><div class="line">        <span class="keyword">if</span> (cell.enemy) &#123;</div><div class="line">            ctx.fillStyle = draw.enemyFillStyle;</div><div class="line">            ctx.fillRect(x, y, grid.cellSize, grid.cellSize);</div><div class="line">        &#125;</div><div class="line">        ci += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw display</span></div><div class="line">draw.disp = <span class="function"><span class="keyword">function</span> (<span class="params">state, ctx</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> grid = state.grid;</div><div class="line">    ctx.fillStyle = draw.textFill;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.font = <span class="string">'10px arial'</span>;</div><div class="line">    ctx.fillText(<span class="string">'hits: '</span> + grid.hits + <span class="string">'; kills: '</span> + grid.kills, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw version number</span></div><div class="line">draw.ver = <span class="function"><span class="keyword">function</span> (<span class="params">state, ctx</span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.font = <span class="string">'10px arial'</span>;</div><div class="line">    ctx.fillText(<span class="string">'v'</span> + state.ver, <span class="number">5</span>, state.canvas.height - <span class="number">15</span>);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="6-The-utils-lib"><a href="#6-The-utils-lib" class="headerlink" title="6 - The utils lib"></a>6 - The utils lib</h2><p>Like many of my other canvas examples I add a general utility library. This is a custom set of functions for each canvas example that will change a little from one example to another. However often there is a few functions that will show up across just about all canvas examples also.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> utils = &#123;&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// create a canvas element</span></div><div class="line">utils.createCanvas = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    opt.container = opt.container || <span class="built_in">document</span>.getElementById(<span class="string">'canvas-app'</span>) || <span class="built_in">document</span>.body;</div><div class="line">    opt.canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">    opt.ctx = opt.canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    <span class="comment">// assign the 'canvas_example' className</span></div><div class="line">    opt.canvas.className = <span class="string">'canvas_example'</span>;</div><div class="line">    <span class="comment">// set native width</span></div><div class="line">    opt.canvas.width = opt.width === <span class="literal">undefined</span> ? <span class="number">320</span> : opt.width;</div><div class="line">    opt.canvas.height = opt.height === <span class="literal">undefined</span> ? <span class="number">240</span> : opt.height;</div><div class="line">    <span class="comment">// translate by 0.5, 0.5</span></div><div class="line">    opt.ctx.translate(<span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line">    <span class="comment">// disable default action for onselectstart</span></div><div class="line">    opt.canvas.onselectstart = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</div><div class="line">    opt.canvas.style.imageRendering = <span class="string">'pixelated'</span>;</div><div class="line">    opt.ctx.imageSmoothingEnabled = <span class="literal">false</span>;</div><div class="line">    <span class="comment">// append canvas to container</span></div><div class="line">    opt.container.appendChild(opt.canvas);</div><div class="line">    <span class="keyword">return</span> opt;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">utils.getCanvasRelative = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = e.target,</div><div class="line">    bx = canvas.getBoundingClientRect(),</div><div class="line">    pos = &#123;</div><div class="line">        <span class="attr">x</span>: (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientX : e.clientX) - bx.left,</div><div class="line">        <span class="attr">y</span>: (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientY : e.clientY) - bx.top,</div><div class="line">        <span class="attr">bx</span>: bx</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// ajust for native canvas matrix size</span></div><div class="line">    pos.x = <span class="built_in">Math</span>.floor((pos.x / canvas.scrollWidth) * canvas.width);</div><div class="line">    pos.y = <span class="built_in">Math</span>.floor((pos.y / canvas.scrollHeight) * canvas.height);</div><div class="line">    <span class="comment">// prevent default</span></div><div class="line">    e.preventDefault();</div><div class="line">    <span class="keyword">return</span> pos;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="5-Main"><a href="#5-Main" class="headerlink" title="5 - Main"></a>5 - Main</h2><p>Now that I have my grid class, and drawing methods together I can now tie everything together with a main app loop, and other code that sets things up for the first time. For now I do not have a main game state module for this example, in time if I put some more time into this project that might change at some point in the future. So in the main.js file here I just have an object literal that is functioning as the start of a game state object of sorts.</p>
<p>Here in the main.js file I create a canvas element with the create canvas utils method, that will create the canvas element and append it to a container element that I have in my html. I also get a reference to the drawing context, and attach and event to the canvas element also that will be used to find out if I clicked an enemy or not. In addition to this I also of course have the main app loop method, inside of which I am updating the grid, and rendering the state of that grid to the canvas element with my draw methods.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// SETUP CANVAS</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvasObj = utils.createCanvas();</div><div class="line">    <span class="keyword">var</span> canvas = canvasObj.canvas;</div><div class="line">    <span class="keyword">var</span> ctx = canvasObj.ctx;</div><div class="line">    <span class="keyword">var</span> state = &#123;</div><div class="line">        <span class="attr">ver</span>: <span class="string">'0.0.0'</span>,</div><div class="line">        <span class="attr">canvas</span>: canvas,</div><div class="line">        <span class="attr">ctx</span>: ctx,</div><div class="line">        <span class="attr">grid</span>: <span class="keyword">new</span> UnitGrid(&#123;</div><div class="line">            <span class="attr">xOffset</span>: <span class="number">15</span>,</div><div class="line">            <span class="attr">yOffset</span>: <span class="number">25</span>,</div><div class="line">            <span class="attr">cellSize</span>: <span class="number">32</span>,</div><div class="line">            <span class="attr">cellWidth</span>: <span class="number">9</span></div><div class="line">        &#125;)</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// single event handler</span></div><div class="line">    canvas.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> pos = utils.getCanvasRelative(e);</div><div class="line">        <span class="keyword">var</span> cell = state.grid.getCellFromPoint(pos.x, pos.y);</div><div class="line">        <span class="keyword">if</span> (cell.enemy) &#123;</div><div class="line">            state.grid.kills += <span class="number">1</span>;</div><div class="line">            cell.enemy = <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">// app loop</span></div><div class="line">    <span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="comment">// update</span></div><div class="line">        state.grid.update();</div><div class="line">        <span class="comment">// draw</span></div><div class="line">        draw.cls(ctx, canvas);</div><div class="line">        draw.gridCellLines(state.grid, ctx);</div><div class="line">        draw.disp(state, ctx);</div><div class="line">        draw.ver(state, ctx);</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<p>Now to tie everything that I wend over with just a little html.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>canvas example grid defense<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"canvas-app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/utils.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/grid.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/grid_unit.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./lib/draw.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>When this canvas example is up, running and working as expected the result is a very basic defense game of sorts. Display objects move from one side of the canvas to the other, and when I click on one it gets destroyed. So far it is not all that much fun or interesting, but oddly enough there are many such games like this that are fun and interesting that just have a little more going on then just this.</p>
<h2 id="6-Conclusion"><a href="#6-Conclusion" class="headerlink" title="6 - Conclusion"></a>6 - Conclusion</h2><p>So for now this canvas example of a basic defense game works okay, but there is much more to be done before this really starts to feel like a game. For example I would want to have it so the player can build some defense structures rather than just having it so the player clicks on the incoming enemy objects. I would also want to add some kind of in game money system for this also. Then of course there is a whole lot more work to do when it comes to skinning the display objects and so forth. Still for one of my canvas example posts I do aim to keep things simple, and the basic idea that I had in mind is there.</p>
<p>The way that I went about starting this example is not at all how I would go about making a project like this now. These days I seem to be more interesting in avoiding the use of a Class as a way to create a Grid as well as a collection of objects in the grid. If I where to start over I would make an object pool modules that would be used to create a pool of objects for enemies. However if I do continue working on this example I think that I will just do some refactoring with what I have so far rather than start over.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2019/11/27/canvas-example-grid-defense/" data-id="ckyhkbjx4005dukv153meydbd" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2019/11/27/canvas-example-grid-defense/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/12/01/canvas-hit-region/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hit region and html 5 canvas elements
        
      </div>
    </a>
  
  
    <a href="/2019/11/26/canvas-example-pop-the-lock/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Pop The Lock Canvas Example Game Clone</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2019/11/27/canvas-example-grid-defense/index.html';
    this.page.identifier = '572';
    this.page.title = 'A grid defense game canvas example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.38px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.48px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.33px;">angular</a> <a href="/tags/animation/" style="font-size: 11.9px;">animation</a> <a href="/tags/automation/" style="font-size: 11.9px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.38px;">backbone</a> <a href="/tags/blog/" style="font-size: 14.76px;">blog</a> <a href="/tags/canvas/" style="font-size: 19.05px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.86px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.95px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.43px;">ejs</a> <a href="/tags/express/" style="font-size: 16.19px;">express</a> <a href="/tags/games/" style="font-size: 16.67px;">games</a> <a href="/tags/git/" style="font-size: 12.86px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 14.76px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.9px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.29px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.48px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.43px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.14px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.1px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.29px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.52px;">node.js</a> <a href="/tags/phaser/" style="font-size: 17.62px;">phaser</a> <a href="/tags/python/" style="font-size: 15.24px;">python</a> <a href="/tags/statistics/" style="font-size: 13.81px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 18.57px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 15.71px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/01/14/lodash_collection/">lodash collection methods, and working with collection in general with javaScript</a>
          </li>
        
          <li>
            <a href="/2022/01/10/js-javascript-example-digital-art-unsteady-stars/">Unsteady Stars Digital Art javaScript example</a>
          </li>
        
          <li>
            <a href="/2022/01/07/lodash_tap/">Tap off of a chain in lodash with the lodash tap method</a>
          </li>
        
          <li>
            <a href="/2022/01/03/blog-post-plan-for-2022/">The 2022 blog plan</a>
          </li>
        
          <li>
            <a href="/2021/12/31/js-javascript-example-digital-art-reduce-pool/">Pool reduction digital art javaScript example</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas-Examples</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2019/11/27/canvas-example-grid-defense/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>