<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Moving a camera in threejs over time | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2019/12/17/threejs-camera-move/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Every now and then I like to play around with threejs a little, and when doing so I have found that one thing that is fun is working out expressions for handling the movement of a camera in a scene su">
<meta property="og:type" content="article">
<meta property="og:title" content="Moving a camera in threejs over time">
<meta property="og:url" content="https://dustinpfister.github.io/2019/12/17/threejs-camera-move/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="Every now and then I like to play around with threejs a little, and when doing so I have found that one thing that is fun is working out expressions for handling the movement of a camera in a scene su">
<meta property="og:updated_time" content="2023-01-16T20:36:26.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Moving a camera in threejs over time">
<meta name="twitter:description" content="Every now and then I like to play around with threejs a little, and when doing so I have found that one thing that is fun is working out expressions for handling the movement of a camera in a scene su">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-camera-move" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/12/17/threejs-camera-move/" class="article-date"> Published:
  <time datetime="2019-12-18T00:57:00.000Z" itemprop="datePublished">2019-12-17</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2019/12/17/threejs-camera-move/" class="article-date"> Modified:
  <time datetime="2023-01-16T20:36:26.000Z" itemprop="dateModified">2023-01-16</time>
</a>

    <span class="article-date">V1.69</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Moving a camera in threejs over time
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>Every now and then I like to play around with <a href="https://threejs.org/" target="_blank" rel="external">threejs</a> a little, and when doing so I have found that one thing that is fun is working out expressions for handling the movement of a <a href="/2018/04/06/threejs-camera/">camera</a> in a scene such as the <a href="/2018/04/07/threejs-camera-perspective/">perspective camera</a>. There are all kinds of ways to go about moving a camera such as having the position of the camera move around an object in a circular pattern while having the camera look at an object in the center over time in an animation loop.</p>
<p>Then there is also having the position and rotation of a camera be subject to event handlers that are attached for pointer events. In other words to control the camera with a mouse, and or keyboard which is nice when I am working on a project and I would like to see how things look from all kinds of different perspectives. There are some official controls that are in the threejs Github repository for this sort of thing in the form of <a href="https://threejs.org/docs/#examples/en/controls/OrbitControls" target="_blank" rel="external">orbit controls</a>, and <a href="https://threejs.org/docs/#examples/en/controls/FlyControls" target="_blank" rel="external">fly controls</a> for example. However there is also of course making ones own custom controls for a project which is often a required part of working out an over all user interface for some kind of real time project.</p>
<p>So in this post I will be writing about some threejs examples that have to do with using the position and rotation properties of an instance of a camera along with some javaScript expressions as a way to move a camera around in a scene. What I work out here for a camera will also apply to just about anything in threejs that inherits from the <a href="https://threejs.org/docs/#api/en/core/Object3D" target="_blank" rel="external">Object3d</a> class as well. So much of this is just ways of moving and rotating objects in general actually, but still I will be keeping the emphasis on cameras alone for the most part here.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/ovlzYRxivjE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="Moving-a-camera-in-three-js-and-what-to-know-first"><a href="#Moving-a-camera-in-three-js-and-what-to-know-first" class="headerlink" title="Moving a camera in three.js and what to know first"></a>Moving a camera in three.js and what to know first</h2><p>This is a post on how to move a camera in three.js a front end javaScript library that has to do with 3d modeling. This is not a <a href="/2018/04/04/threejs-getting-started/">getting started post on three.js</a>, or <a href="/2018/11/27/js-getting-started/">javaScript in general</a> so I assume that you have at least some background on this to get started with, otherwise you might have a hard time gaining something of value from reading this content.</p>
<h3 id="You-should-really-look-into-the-Object3d-class-when-it-comes-to-movement-of-objects-in-general-in-three-js"><a href="#You-should-really-look-into-the-Object3d-class-when-it-comes-to-movement-of-objects-in-general-in-three-js" class="headerlink" title="You should really look into the Object3d class when it comes to movement of objects in general in three.js"></a>You should really look into the Object3d class when it comes to movement of objects in general in three.js</h3><p>A camera in threejs inherits from a base class in threejs called <a href="/2018/04/23/threejs-object3d/">Object3d</a>, which is also the case with many other objects that will be part of a scene such as Mesh, Group objects, and many helper objects. So my learning how to work with the Object3d class you in turn learn how to work with everything to which is built on top of Object3d which includes cameras.</p>
<p>The main property of interest with the Object3d class in the <a href="/2022/04/04/threejs-object3d-position/">position property</a> which is an instance of a class known as <a href="/2018/04/15/threejs-vector3/">Vector3</a>, which in turn is another class of interest that applies to many things in three.js when it comes to positions of things. The set method of an instance of this Vector3 class is one way to set the position of a camera when it comes to the position property. However there is also changing the orientation of the camera when doing so, for this there is the rotation property that is also part of the Object3d class. This rotation property is an instance of the <a href="https://threejs.org/docs/#api/en/math/Euler" target="_blank" rel="external">Euler Class</a> which is like Vector3, only we are taking angles rather than a matrix position. There is working with this instance of THREE.Euler directly, or there is making use of a method like the <a href="/2021/05/13/threejs-object3d-lookat/">Object3d.lookAt</a> method.</p>
<p>All of these classes are worth looking into in depth in order to really know how to move things around, not just cameras but many objects in general.</p>
<h3 id="You-might-want-to-check-out-the-Orbit-Controls-and-other-official-controls-as-a-way-to-move-a-camera-by-way-of-user-input"><a href="#You-might-want-to-check-out-the-Orbit-Controls-and-other-official-controls-as-a-way-to-move-a-camera-by-way-of-user-input" class="headerlink" title="You might want to check out the Orbit Controls, and other official controls as a way to move a camera by way of user input"></a>You might want to check out the Orbit Controls, and other official controls as a way to move a camera by way of user input</h3><p>When it comes to moving a camera the first thing you might want to figure out is if you just want to move about in the scene using the mouse. I often use the Orbit Controls that are in the examples folder of the Three.js repository for many of my examples as a way to be able to have the basic typical movement right away. There are also a number of other options when it comes to official controls use in the official three.js examples, as well as many other useful libraries to work with in the examples folder.</p>
<p>However when it comes to moving a camera by way of some kind of application loop, or working out custom controls that will work a little differently from that of the orbit controls. Then it would make sense t start working out some examples like the ones in this post here. Still of you think that the official orbit controls will work okay, and you just want to move on to other things you might want to check out my post on <a href="/2018/04/13/threejs-orbit-controls/">orbit controls</a>.</p>
<h3 id="The-source-code-that-I-am-writing-about-in-this-post-is-on-Github"><a href="#The-source-code-that-I-am-writing-about-in-this-post-is-on-Github" class="headerlink" title="The source code that I am writing about in this post is on Github"></a>The source code that I am writing about in this post is on Github</h3><p>The source code examples that I am writing about here can be found in my <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-camera-move" target="_blank" rel="external">test threejs github repository</a>. This is a also a location in which I park the source code for my <a href="/categories/three-js/">many other blog posts on threejs</a> beyond just this one.</p>
<h3 id="Version-Numbers-matter-with-threejs"><a href="#Version-Numbers-matter-with-threejs" class="headerlink" title="Version Numbers matter with threejs"></a>Version Numbers matter with threejs</h3><p>When I first wrote this post I was using r111 of threejs, and the last time I edited this post I was using r146. Threejs is a fast moving project when it comes to development, so at some point in the future these threejs examples might break because of this. I do get around to fixing up my code every once in a while, but there will often be large gaps of time between major edits. So be sure to always check the version number of threejs when working with these examples, or any threejs examples on the open web for that matter.</p>
<h2 id="1-A-Basic-camera-movement-example-with-an-animation-loop-function"><a href="#1-A-Basic-camera-movement-example-with-an-animation-loop-function" class="headerlink" title="1 - A Basic camera movement example with an animation loop function"></a>1 - A Basic camera movement example with an animation loop function</h2><p>In this section I will be starting out with some basic threejs examples that has to do with moving a camera by way of an animation loop. So nothing major or fancy here, just a kind of hello world when it comes to moving a camera around in a threejs project along with some other tipical things that come up when doing so. If this sort of thing is new to you in general with front end javaScript you might want to start out looking into the <a href="/2018/03/13/js-request-animation-frame/">request animation frame</a> method in client side javaScrit alone.</p>
<h3 id="1-1-World-relative-position-of-camera"><a href="#1-1-World-relative-position-of-camera" class="headerlink" title="1.1 - World relative position of camera"></a>1.1 - World relative position of camera</h3><p>I started out this example like that of any other threejs example when it comes to the usual set of objects. What I mean by that is having a scene object, camera, and renderer set up. After that I just created a single mesh object that I will be leaving at the default origin location.</p>
<p>I then have the main app loop in which I will be moving the camera over time, and this is where things can get at least a little involved when it comes to moving a camera this way. There are many ways of making this kind of animation update loop, some of which are a lot less complex than what I am doing here. However I have found that there are at least a few key features that one should always have in this kind of loop in order to have something that is in better shape for production.<br>The first and foremost thing that comes to mind is to not update the scene each time the loop function is called, rather a date should be used to find out how many seconds have based sense the last update and use that as a means to update the scene or not. This way the client running the threejs program is not getting slammed and I can adjust how low I want to fps to be for updating the scene. However fps values will result in using less CPU overhead, but at the cost of choppy rather than smooth motion.</p>
<p>On top of having a main FPS update value I can also have a septate FPS value for how to go about updating the frame rate of the animation. This way I can update the scene at a very low frame rate, but still update the position of the camera at a higher frame rate.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">20</span>, <span class="number">20</span>));</div><div class="line">camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// APP LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">frame = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> fps_update = <span class="number">20</span>,   <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">fps_movement = <span class="number">30</span>,       <span class="comment">// fps rate to move camera</span></div><div class="line">frameMax = <span class="number">300</span>;</div><div class="line"><span class="comment">// update function</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> per = frame / frameMax;</div><div class="line">    <span class="keyword">const</span> bias = (<span class="number">1</span> - <span class="built_in">Math</span>.abs(per - <span class="number">0.5</span>) / <span class="number">0.5</span>);</div><div class="line">    camera.position.set(<span class="number">3</span> * bias, <span class="number">1</span> + <span class="number">2</span> * bias, <span class="number">10</span>);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop function</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps_update)&#123;</div><div class="line">        <span class="comment">// MOVING THE CAMERA IN THE LOOP</span></div><div class="line">        update(secs);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        frame += fps_movement * secs;</div><div class="line">        frame %= frameMax;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>When this example is up and running the end result is having the camera at a location away from a mesh, and the camera is still looking in the direction of the mesh. In most cases I will not just want to set the position of the camera but also adjust the rotation of the camera as well one way or another, however that will be something I will be getting into more so inn the nest example here. Over time the camera moves, and I am not doing anything to change the rotation of the camera over time so the camera does not stay fixed on the mesh.</p>
<h3 id="1-2-The-look-at-method"><a href="#1-2-The-look-at-method" class="headerlink" title="1.2 - The look at method"></a>1.2 - The look at method</h3><p>There is more to moving the camera that just moving the position of the camera in world space, there is also setting the rotation of the camera that can also be tough of as a kind of movement as well. There is learning how to work out all kinds of ways to manual setting the state of the Euler instance of the rotation property of a camera, but maybe the easiest way to go about setting the rotation of a camera would be to make use of the look at method of the object3d class.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">20</span>, <span class="number">20</span>));</div><div class="line">camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// APP LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SETTING CAMERA POSITION ONCE HERE</span></div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">frame = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> fps_update = <span class="number">20</span>,   <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">fps_movement = <span class="number">30</span>,       <span class="comment">// fps rate to move camera</span></div><div class="line">frameMax = <span class="number">300</span>;</div><div class="line"><span class="comment">// update function</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> per = frame / frameMax;</div><div class="line">    <span class="keyword">const</span> bias = (<span class="number">1</span> - <span class="built_in">Math</span>.abs(per - <span class="number">0.5</span>) / <span class="number">0.5</span>);</div><div class="line">    <span class="comment">// CALLING THE LOOKAT METHOD OF THE CAMERA</span></div><div class="line">    camera.lookAt(mesh.position);</div><div class="line">    <span class="comment">// MOVEING THE MESH OBJECT BUT NOT THE CAMERA</span></div><div class="line">    mesh.position.x = <span class="number">-5</span> + <span class="number">10</span> * bias</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop function</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps_update)&#123;</div><div class="line">        <span class="comment">// MOVING THE CAMERA IN THE LOOP</span></div><div class="line">        update(secs);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        frame += fps_movement * secs;</div><div class="line">        frame %= frameMax;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h3 id="1-3-Using-the-Vector3-lerp-method-along-with-other-Vector3-class-methods"><a href="#1-3-Using-the-Vector3-lerp-method-along-with-other-Vector3-class-methods" class="headerlink" title="1.3 - Using the Vector3 lerp method along with other Vector3 class methods"></a>1.3 - Using the Vector3 lerp method along with other Vector3 class methods</h3><p>A very useful method in the Vector3 object not just for moving a camera around, but objects in general, as well as points in space in general is the <a href="/2022/05/17/threejs-vector3-lerp/">lerp method of the vector3 class</a>. This is a method of vector3 in which I can call the method, then pass another vector3 object that I want to move to along with another argument that is an alpha value between 0 and 1. This alpha value will then set the value of the vector3 obect that I call the lerp method off of between the two vector3 objects based on the given alpha value.</p>
<p>This lerp method will mutate the vector3 object in place, so if I am in a situation in which I have two source vector3 objects that I do not want to mutate I can do something like call the copy method off of the vector3 object that is the position of the camera, and then pass the vector3 object that is the start point to the copy method. This will then copy the state of the start vector3 to the start point without mutating the start point, after that I can then call the lerp method, pass the end point that I want, and then the alpha value that I want to use to lerp between the start and end point.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">20</span>, <span class="number">20</span>));</div><div class="line">camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">scene.add(mesh1);</div><div class="line"><span class="keyword">const</span> mesh2 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">3</span>, <span class="number">20</span>, <span class="number">20</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">mesh2.position.set(<span class="number">-5</span>, <span class="number">1</span>, <span class="number">5</span>);</div><div class="line">scene.add(mesh2);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// APP LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">frame = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> fps_update = <span class="number">20</span>,   <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">fps_movement = <span class="number">30</span>,       <span class="comment">// fps rate to move camera</span></div><div class="line">frameMax = <span class="number">300</span>;</div><div class="line"><span class="comment">// START AND END VECTOR3 OBJECTS</span></div><div class="line"><span class="keyword">const</span> vpos_start = <span class="keyword">new</span> THREE.Vector3(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> vpos_end = <span class="keyword">new</span> THREE.Vector3(<span class="number">1</span>, <span class="number">0</span>, <span class="number">-4</span>);</div><div class="line"><span class="comment">// update function</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="comment">// alpha values</span></div><div class="line">    <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">    <span class="keyword">const</span> a2 = (<span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1) / <span class="number">0.5</span>);</div><div class="line">    <span class="comment">// MOVE CAMERA BY WAY OF THE VECTOR3 LERP METHOD</span></div><div class="line">    camera.position.copy(vpos_start).lerp(vpos_end, a2);</div><div class="line">    <span class="comment">// USING VECTOR3 LERP TO HELP CREATE A LOOK AT POINT OVER TIME ALSO</span></div><div class="line">    camera.lookAt( mesh1.position.clone().lerp(mesh2.position, a2) )</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop function</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps_update)&#123;</div><div class="line">        <span class="comment">// MOVING THE CAMERA IN THE LOOP</span></div><div class="line">        update(secs);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        frame += fps_movement * secs;</div><div class="line">        frame %= frameMax;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h3 id="1-4-Using-Curves-to-get-Vector3-objects-along-a-curve-and-using-that-to-set-the-position-of-the-camera"><a href="#1-4-Using-Curves-to-get-Vector3-objects-along-a-curve-and-using-that-to-set-the-position-of-the-camera" class="headerlink" title="1.4 - Using Curves to get Vector3 objects along a curve, and using that to set the position of the camera"></a>1.4 - Using Curves to get Vector3 objects along a curve, and using that to set the position of the camera</h3><p>One great tool for setting the position of a camera would be to look into using <a href="/2022/06/17/threejs-curve/">curves</a>. The base class of curves has a get point method that allows for me to pass an alpha value and get a vector3 object that is at a corresponding point along the curve. The resulting vector3 object can then be used as a way to get the position of a camera. The same thing could also be done as a way to set the point for the camera to look at as well on top of that as well of course.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">20</span>, <span class="number">20</span>));</div><div class="line">camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">scene.add(mesh1);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CURVE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> v1 = <span class="keyword">new</span> THREE.Vector3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> v2 = <span class="keyword">new</span> THREE.Vector3(<span class="number">-5</span>, <span class="number">0</span>, <span class="number">-5</span>);</div><div class="line"><span class="keyword">const</span> vControl = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> curve_pos = <span class="keyword">new</span> THREE.QuadraticBezierCurve3( v1, vControl, v2);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// APP LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">frame = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> fps_update = <span class="number">20</span>,   <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">fps_movement = <span class="number">30</span>,       <span class="comment">// fps rate to move camera</span></div><div class="line">frameMax = <span class="number">300</span>;</div><div class="line"><span class="comment">// update function</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="comment">// alpha values</span></div><div class="line">    <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">    <span class="keyword">const</span> a2 = (<span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1) / <span class="number">0.5</span>);</div><div class="line">    <span class="comment">// USING THE getPoint METHOD OF THE CURVE CLASS TO</span></div><div class="line">    <span class="comment">// GET A Vector3 OBJECT ALONG A CURVE THAT CAN THEN BE USED TO</span></div><div class="line">    <span class="comment">// SET THE POSITION OF THE CAMERA</span></div><div class="line">    camera.position.copy( curve_pos.getPoint(a2) );</div><div class="line">    camera.lookAt(mesh1.position)</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop function</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps_update)&#123;</div><div class="line">        <span class="comment">// MOVING THE CAMERA IN THE LOOP</span></div><div class="line">        update(secs);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        frame += fps_movement * secs;</div><div class="line">        frame %= frameMax;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="2-Object-relative-position"><a href="#2-Object-relative-position" class="headerlink" title="2 - Object relative position"></a>2 - Object relative position</h2><p>So far I have covered some simple examples that have to do with just changing th rotation and the position of the camera. However when  it comes to setting the position of the camera I am doing so in terms of world space, or maybe a kind of relative space but relative to that is the scene object rather than a child of the scene object such as the one mesh object that I have in these examples thus far.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">20</span>, <span class="number">20</span>));</div><div class="line">camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// APP LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">fps_update = <span class="number">20</span>,</div><div class="line">fps_movement = <span class="number">30</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">frameMax = <span class="number">300</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">const</span> update = <span class="function">(<span class="params">secs</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> per = frame / frameMax,</div><div class="line">    bias = (<span class="number">1</span> - <span class="built_in">Math</span>.abs(per - <span class="number">0.5</span>) / <span class="number">0.5</span>);</div><div class="line">    <span class="comment">// MOVEING THE MESH OBJECT</span></div><div class="line">    mesh.position.x = <span class="number">-5</span> + <span class="number">10</span> * bias</div><div class="line">    <span class="comment">// SETTING POSITION OF THE CAMERA RELATIVE TO THE POSITION OF THE MESH</span></div><div class="line">    camera.position.copy(mesh.position).add( <span class="keyword">new</span> THREE.Vector3(<span class="number">3</span>, <span class="number">3</span> - <span class="number">6</span> * bias, <span class="number">3</span>) );</div><div class="line">    <span class="comment">// CALLING THE LOOKAT METHOD OF THE CAMERA</span></div><div class="line">    camera.lookAt(mesh.position);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps_update)&#123;</div><div class="line">        update(secs);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        frame += fps_movement * secs;</div><div class="line">        frame %= frameMax;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="3-Using-the-curve-module"><a href="#3-Using-the-curve-module" class="headerlink" title="3 - Using the curve module"></a>3 - Using the curve module</h2><p>I have made a <a href="/2022/11/18/threejs-examples-curves-module/">threejs project example cented around the idea of using curves</a> to create paths that will be used to move objects. These objects can be mesh objects, but with the theme of this post in mind it can also be used to move a camera around a scene as well. What is great about this module is that I can not only use it to create a path in which to move a camera along, I can also use it to get the kind of value that I would use to get a point along the curve as well on top of that.</p>
<h3 id="The-curve-js-modue-R1"><a href="#The-curve-js-modue-R1" class="headerlink" title="The curve.js modue ( R1 )"></a>The curve.js modue ( R1 )</h3><p>This is R1 of the curve module that I have made for my set of threejs project examples, many of which have to do with modules like this one rather than a full complete project of some kind. There is a whole lot to write about when it comes to the state of this module. However for the most part all I care around for the set of demos that I will be using here is the QB Curve Path method and also the get alpha function method. These are what I will be using to create a curve path for a camera to follow, and also how to create an alpha value to pass when calling the get point method of the curve. The return value of the get point method will be a vector3 object to which I can then copy to the Vector3 of the position property of the camera.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// curve.js - r1 - from threejs-examples-curves-module</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">api</span>)</span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// DEFAULTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// Deafult Alpha Control Points ( ac_points )</span></div><div class="line">    <span class="keyword">const</span> DEFAULT_AC_POINTS = [<span class="number">0.00</span>,<span class="number">0.5</span>,  <span class="number">1.00</span>,<span class="number">0.5</span>, <span class="number">0.0</span>];</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// for path data helper used by QBCurvePath and QBV3Array</span></div><div class="line">    <span class="keyword">const</span> forPathData = <span class="function">(<span class="params">data, collection, forCurve</span>) =&gt;</span> &#123;</div><div class="line">        collection = collection || <span class="keyword">new</span> THREE.CurvePath();</div><div class="line">        forCurve = forCurve || <span class="function"><span class="keyword">function</span>(<span class="params">a, curve, curvePath, data</span>)</span>&#123;</div><div class="line">            curvePath.add(curve);</div><div class="line">        &#125;;</div><div class="line">        data.forEach( <span class="function">(<span class="params"> a </span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">const</span> curve = api.QBDelta.apply(<span class="literal">null</span>, a.slice(<span class="number">0</span>, a.length - <span class="number">1</span>));</div><div class="line">            forCurve(a, curve, collection, data);</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> collection;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create an alpha curve helper function</span></div><div class="line">    <span class="keyword">const</span> createAlphaCurve2 = <span class="function">(<span class="params">ac_points</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>, len = ac_points.length;</div><div class="line">        <span class="keyword">const</span> data = [];</div><div class="line">        <span class="keyword">while</span>(i &lt; len - <span class="number">2</span>)&#123;</div><div class="line">            <span class="keyword">const</span> s = ac_points[i];</div><div class="line">            <span class="keyword">const</span> s2 = ac_points[i + <span class="number">1</span>]</div><div class="line">            <span class="keyword">const</span> e = ac_points[i + <span class="number">2</span>];</div><div class="line">            data.push([ <span class="number">0</span>, s, <span class="number">0</span>,   <span class="number">0</span>, e, <span class="number">0</span>,   <span class="number">0</span>, s2, <span class="number">0</span> ]);</div><div class="line">            i += <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> api.QBCurvePath(data);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create debug points</span></div><div class="line">    <span class="keyword">const</span> createDebugPoints = <span class="function">(<span class="params">v3Array, opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.size = opt.size === <span class="literal">undefined</span> ? <span class="number">0.25</span> : opt.size;</div><div class="line">        opt.color = opt.color || <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> THREE.Points(</div><div class="line">            <span class="keyword">new</span> THREE.BufferGeometry().setFromPoints(v3Array),</div><div class="line">            <span class="keyword">new</span> THREE.PointsMaterial(&#123; <span class="attr">size</span>: opt.size, <span class="attr">color</span>: opt.color&#125;)</div><div class="line">        );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// alpha function collection</span></div><div class="line">    <span class="keyword">const</span> ALPHA_FUNCTIONS = &#123;&#125;;</div><div class="line">    <span class="comment">// first curve alpha function that just uses the Curve.getPoint method</span></div><div class="line">    <span class="comment">// and then uses the y axis as the alpha values</span></div><div class="line">    ALPHA_FUNCTIONS.curve1 = <span class="function">(<span class="params"> opt </span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> cp = createAlphaCurve2(opt.ac_points);</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">givenAlpha</span>)</span>&#123;</div><div class="line">            <span class="keyword">let</span> a = cp.getPoint(givenAlpha).y;</div><div class="line">            <span class="keyword">return</span> a;</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// second curve alpha function ( defualt for R1 ) will get a curve object from the array of curves</span></div><div class="line">    <span class="comment">// then figure an alpha value to given when calling the Curve.getPoint method of a child curve object</span></div><div class="line">    <span class="comment">// of the curve path created with the createAlphaCurve helper</span></div><div class="line">    ALPHA_FUNCTIONS.curve2 = <span class="function">(<span class="params"> opt </span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> cp = createAlphaCurve2(opt.ac_points);</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">alpha</span>)</span>&#123;</div><div class="line">            alpha = alpha === <span class="number">1</span> ? <span class="number">0.9999999999</span> : alpha;</div><div class="line">            <span class="keyword">const</span> cLen = cp.curves.length;</div><div class="line">            <span class="keyword">const</span> curveIndex = <span class="built_in">Math</span>.floor( cLen * alpha);</div><div class="line">            <span class="keyword">const</span> cc = cp.curves[ curveIndex];</div><div class="line">            <span class="keyword">const</span> a_cc = alpha %  ( <span class="number">1</span> / cLen ) * ( cLen );</div><div class="line">            <span class="keyword">const</span> v3 = cc.getPoint( a_cc );</div><div class="line">            <span class="keyword">let</span> a = v3.y;</div><div class="line">            <span class="keyword">return</span> a;</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// plain old linear get alpha function</span></div><div class="line">    ALPHA_FUNCTIONS.linear = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        <span class="comment">// the given alpha value should all ready be linear</span></div><div class="line">        <span class="comment">// as long as that is true this option should work by just echoing that back</span></div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">alpha</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> alpha;</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// plain old bias get alpha function</span></div><div class="line">    ALPHA_FUNCTIONS.bias = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">alpha</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - alpha ) / <span class="number">0.5</span>;</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// sin bias get alpha function</span></div><div class="line">    ALPHA_FUNCTIONS.sinBias = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">alpha</span>)</span>&#123;</div><div class="line">            <span class="keyword">const</span> b = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - alpha ) / <span class="number">0.5</span>;</div><div class="line">            <span class="keyword">return</span> <span class="built_in">Math</span>.sin( <span class="built_in">Math</span>.PI * <span class="number">0.5</span> * b );</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// smooth step</span></div><div class="line">    ALPHA_FUNCTIONS.smooth = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">alpha</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> THREE.MathUtils.smoothstep(alpha, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// using the mapLinear method of the THREE.MathUtils object</span></div><div class="line">    ALPHA_FUNCTIONS.mapLinear = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> startAlpha = opt.ac_points[<span class="number">0</span>] === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.ac_points[<span class="number">0</span>];</div><div class="line">        <span class="keyword">const</span> endAlpha = opt.ac_points[<span class="number">1</span>] === <span class="literal">undefined</span> ? <span class="number">1</span> : opt.ac_points[<span class="number">1</span>];</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">alpha</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> THREE.MathUtils.mapLinear(alpha, <span class="number">0</span>, <span class="number">1</span>, startAlpha, endAlpha);</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RETURN CURVE</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// just a short hand for THREE.QuadraticBezierCurve3</span></div><div class="line">    api.QBC3 = <span class="function"><span class="keyword">function</span>(<span class="params">x1, y1, z1, x2, y2, z2, x3, y3, z3</span>)</span>&#123;</div><div class="line">        <span class="keyword">let</span> vs = x1;</div><div class="line">        <span class="keyword">let</span> ve = y1;</div><div class="line">        <span class="keyword">let</span> vc = z1;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="number">9</span>)&#123;</div><div class="line">            vs = <span class="keyword">new</span> THREE.Vector3(x1, y1, z1);</div><div class="line">            ve = <span class="keyword">new</span> THREE.Vector3(x2, y2, z2);</div><div class="line">            vc = <span class="keyword">new</span> THREE.Vector3(x3, y3, z3);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> THREE.QuadraticBezierCurve3( vs, vc, ve );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// QBDelta helper using QBC3</span></div><div class="line">    <span class="comment">// this works by giving deltas from the point that is half way between</span></div><div class="line">    <span class="comment">// the two start and end points rather than a direct control point for x3, y3, and x3</span></div><div class="line">    api.QBDelta = <span class="function"><span class="keyword">function</span>(<span class="params">x1, y1, z1, x2, y2, z2, x3, y3, z3</span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> vs = <span class="keyword">new</span> THREE.Vector3(x1, y1, z1);</div><div class="line">        <span class="keyword">const</span> ve = <span class="keyword">new</span> THREE.Vector3(x2, y2, z2);</div><div class="line">        <span class="comment">// deltas</span></div><div class="line">        <span class="keyword">const</span> vDelta = <span class="keyword">new</span> THREE.Vector3(x3, y3, z3);</div><div class="line">        <span class="keyword">const</span> vc = vs.clone().lerp(ve, <span class="number">0.5</span>).add(vDelta);</div><div class="line">        <span class="keyword">const</span> curve = api.QBC3(vs, ve, vc);</div><div class="line">        <span class="keyword">return</span> curve;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return a path curve by just calling the for path data helper with default options</span></div><div class="line">    api.QBCurvePath = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> forPathData(data);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RETURN V3ARRAY</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// QBV3Array</span></div><div class="line">    api.QBV3Array = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> v3Array = [];</div><div class="line">        forPathData(data, v3Array, <span class="function"><span class="keyword">function</span>(<span class="params">a, curve, v3Array</span>)</span>&#123;</div><div class="line">            v3Array.push( curve.getPoints( a[<span class="number">9</span>]) );</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> v3Array.flat();</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// Glavin Points are random points used for camera pos</span></div><div class="line">    api.GlavinPoints2 = <span class="function">(<span class="params">count, origin, VULR, A1, A2 </span>) =&gt;</span> &#123;</div><div class="line">        count = count === <span class="literal">undefined</span> ? <span class="number">50</span> : count;</div><div class="line">        origin = origin === <span class="literal">undefined</span> ? <span class="keyword">new</span> THREE.Vector3() : origin;</div><div class="line">        VULR = VULR === <span class="literal">undefined</span> ? <span class="keyword">new</span> THREE.Vector2(<span class="number">0</span>, <span class="number">1</span>) : VULR; <span class="comment">// Max and min unit vector length</span></div><div class="line">        A1 = A1 === <span class="literal">undefined</span> ? <span class="keyword">new</span> THREE.Vector2(<span class="number">0</span>, <span class="number">360</span>) : A1;</div><div class="line">        A2 = A2 === <span class="literal">undefined</span> ? <span class="keyword">new</span> THREE.Vector2(<span class="number">-90</span>, <span class="number">90</span>) : A2;</div><div class="line">        <span class="keyword">const</span> v3Array = [];</div><div class="line">        <span class="keyword">let</span> i  = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(i &lt; count)&#123;</div><div class="line">            <span class="comment">// random euler</span></div><div class="line">            <span class="keyword">const</span> e = <span class="keyword">new</span> THREE.Euler();</div><div class="line">            e.x = <span class="built_in">Math</span>.PI / <span class="number">180</span> * ( A1.x + ( A1.y - A1.x ) * THREE.MathUtils.seededRandom() );</div><div class="line">            e.y = <span class="built_in">Math</span>.PI / <span class="number">180</span> * ( A2.x + ( A2.y - A2.x ) * THREE.MathUtils.seededRandom() );</div><div class="line">            <span class="comment">// random unit length</span></div><div class="line">            <span class="keyword">const</span> ul = VULR.x + ( VULR.y - VULR.x ) * THREE.MathUtils.seededRandom();</div><div class="line">            <span class="comment">// v3 is a random dir and unit length from origin</span></div><div class="line">            <span class="keyword">const</span> v = origin.clone().add( <span class="keyword">new</span> THREE.Vector3( <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>).applyEuler(e).multiplyScalar(ul) )</div><div class="line">            v3Array.push(v);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> v3Array;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// ALPHA FUNCTIONS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    api.getAlphaFunction = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.type = opt.type || <span class="string">'curve2'</span>;</div><div class="line">        opt.clamp = opt.clamp === <span class="literal">undefined</span> ? <span class="literal">true</span> : opt.clamp;</div><div class="line">        opt.ac_points = opt.ac_points || DEFAULT_AC_POINTS;</div><div class="line">        <span class="comment">// the main get alpha method</span></div><div class="line">        <span class="keyword">const</span> main_alpha_func = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>)</span>&#123;</div><div class="line">            <span class="comment">// create the alpha function to use, defaults to NOOP</span></div><div class="line">            <span class="keyword">let</span> alphaFunc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line">            <span class="comment">// if type of opt.type is a string, assume this is a key for a built in type</span></div><div class="line">            <span class="keyword">if</span>(<span class="keyword">typeof</span> opt.type === <span class="string">'string'</span>)&#123;</div><div class="line">                alphaFunc = ALPHA_FUNCTIONS[ opt.type ](main_alpha_func.opt);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// if type is a function, assume that this is a custom get alpha method to use</span></div><div class="line">            <span class="keyword">if</span>(<span class="keyword">typeof</span> opt.type === <span class="string">'function'</span>)&#123;</div><div class="line">                alphaFunc = opt.type(main_alpha_func.opt);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// the alpha value defualts to 0</span></div><div class="line">            <span class="keyword">let</span> a1 = <span class="number">0</span>;</div><div class="line">            <span class="comment">// 1 arg : a is an alpha value</span></div><div class="line">            <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="number">1</span>)&#123;</div><div class="line">                a1 = alphaFunc(a);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// 2 arg : a is an alpha value, and b is a count</span></div><div class="line">            <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="number">2</span>)&#123;</div><div class="line">                a1 = alphaFunc(a * b % <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(<span class="built_in">arguments</span>.length &gt; <span class="number">2</span>)&#123;</div><div class="line">            <span class="comment">// 3+ arg : a is a numerator, b is a denomanator, and c is a count</span></div><div class="line">               a1 = alphaFunc(a / b * c % <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// clamp?</span></div><div class="line">            <span class="keyword">if</span>(opt.clamp)&#123;</div><div class="line">                a1 = THREE.MathUtils.clamp(a1, <span class="number">0</span>, <span class="number">0.9999999999</span>);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> a1;</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// making the opt object a pubic property of the main alpha function</span></div><div class="line">        main_alpha_func.opt = opt;</div><div class="line">        <span class="comment">// return the main alpha function that will be called in the project that uses this</span></div><div class="line">        <span class="keyword">return</span> main_alpha_func;</div><div class="line">    &#125;;</div><div class="line">    api.getAlpha = <span class="function">(<span class="params">type, a, b, c, opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.type = type;</div><div class="line">        <span class="keyword">const</span> alphaFunc = api.getAlphaFunction(opt);</div><div class="line">        <span class="keyword">if</span>(c === <span class="literal">undefined</span>)&#123;</div><div class="line">            b = b === <span class="literal">undefined</span> ? <span class="number">1</span> : b;</div><div class="line">            <span class="keyword">return</span> alphaFunc(a, b);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> alphaFunc(a, b, c);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// DEBUG HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// debug points</span></div><div class="line">    api.debugPointsArray = <span class="function">(<span class="params"> arrays, opt </span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> v3Array = arrays.flat();</div><div class="line">        <span class="keyword">return</span> createDebugPoints(v3Array, opt);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// debug points for a curve</span></div><div class="line">    api.debugPointsCurve = <span class="function">(<span class="params"> curve, opt </span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.count = opt.count === <span class="literal">undefined</span> ? <span class="number">100</span> : opt.count;</div><div class="line">        opt.getAlpha = opt.getAlpha || <span class="function"><span class="keyword">function</span>(<span class="params">alpha</span>)</span>&#123; <span class="keyword">return</span> alpha; &#125;;</div><div class="line">        <span class="keyword">const</span> v3Array = [];</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(i &lt; opt.count)&#123;</div><div class="line">            v3Array.push( curve.getPoint( opt.getAlpha(i / opt.count ) ) );</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> createDebugPoints(v3Array, opt);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// debug and alpha function</span></div><div class="line">    api.debugAlphaFunction = <span class="function">(<span class="params">alphaFunc, opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.count = opt.count === <span class="literal">undefined</span> ? <span class="number">100</span> : opt.count;</div><div class="line">        opt.sx = opt.sx === <span class="literal">undefined</span> ? <span class="number">-5</span> : opt.sx;</div><div class="line">        opt.sz = opt.sz === <span class="literal">undefined</span> ? <span class="number">5</span> : opt.sz;</div><div class="line">        opt.w = opt.w === <span class="literal">undefined</span> ? <span class="number">10</span> : opt.w;</div><div class="line">        opt.h = opt.h === <span class="literal">undefined</span> ? <span class="number">-10</span> : opt.h;</div><div class="line">        <span class="keyword">const</span> v3Array = [];</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(i &lt; opt.count)&#123;</div><div class="line">            <span class="keyword">const</span> a1 = i / opt.count;</div><div class="line">            <span class="keyword">const</span> x = opt.sx + a1 * opt.w;</div><div class="line">            <span class="keyword">const</span> z = opt.sz + alphaFunc(a1) * opt.h;</div><div class="line">            v3Array.push( <span class="keyword">new</span> THREE.Vector3( x, <span class="number">0</span> , z) );</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> createDebugPoints(v3Array, opt);</div><div class="line">    &#125;;</div><div class="line">&#125;(<span class="keyword">this</span>[<span class="string">'curveMod'</span>] = &#123;&#125; ));</div></pre></td></tr></table></figure>
<h3 id="3-1-Using-the-curve-module-to-move-a-camera-along-a-curve"><a href="#3-1-Using-the-curve-module-to-move-a-camera-along-a-curve" class="headerlink" title="3.1 - Using the curve module to move a camera along a curve"></a>3.1 - Using the curve module to move a camera along a curve</h3><p>Here I am then using the curve module to create a path in space for which the camera will move along. I am also using the get alpha method to create a get alpha function. It is then the alpha value that will be returned by this get alpha function that will be passed to the get point method of the curve I created.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>));</div><div class="line">camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">scene.add(mesh1);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CURVE TO MOVE CAMERA ALONG</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> curve_campos = curveMod.QBCurvePath([ [<span class="number">5</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">-5</span>, <span class="number">-2</span>, <span class="number">-4</span>,    <span class="number">0</span>, <span class="number">-5</span>, <span class="number">10</span>,      <span class="number">100</span>] ]);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GET ALPHA FUNCTION USING curve2</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> get_alpha_curve2 = curveMod.getAlphaFunction(&#123;</div><div class="line">    <span class="attr">type</span>: <span class="string">'curve2'</span>,</div><div class="line">    <span class="attr">ac_points</span>: [<span class="number">0</span>, <span class="number">-0.2</span>, <span class="number">0.35</span>, <span class="number">0.2</span>, <span class="number">0.55</span>, <span class="number">-0.5</span>, <span class="number">1</span>]</div><div class="line">&#125;)</div><div class="line">scene.add( curveMod.debugAlphaFunction(get_alpha_curve2) )</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// APP LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">frame = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> fps_update = <span class="number">20</span>,   <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">fps_movement = <span class="number">30</span>,       <span class="comment">// fps rate to move camera</span></div><div class="line">frameMax = <span class="number">300</span>;</div><div class="line"><span class="comment">// update function</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">     <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">     <span class="keyword">const</span> a2 = get_alpha_curve2(a1);</div><div class="line">     <span class="comment">// using a curve created with curves.js, and also a </span></div><div class="line">     <span class="comment">// get alpha function created with curves.js</span></div><div class="line">     camera.position.copy( curve_campos.getPoint(a2) );</div><div class="line">     camera.lookAt(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop function</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps_update)&#123;</div><div class="line">        <span class="comment">// MOVING THE CAMERA IN THE LOOP</span></div><div class="line">        update(secs);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        frame += fps_movement * secs;</div><div class="line">        frame %= frameMax;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="4-Updating-things-by-way-of-sequences"><a href="#4-Updating-things-by-way-of-sequences" class="headerlink" title="4 - Updating things by way of sequences"></a>4 - Updating things by way of sequences</h2><p>One thing that I have found that I like to do when making video type projects using threejs is to have some kind of system that can be used to break things down into many parts, or sequences if you prefer. This way I have have some kind of setup where I define an array of objects and each object can be given an update method. Each update method of each object would have access to a main sequence object with values that have to do with the progress of the over all video, but also values that have to do with the progress of the current part, or sequence.</p>
<h3 id="The-sequences-hooks-js-file-R2"><a href="#The-sequences-hooks-js-file-R2" class="headerlink" title="The sequences-hooks.js file ( R2 )"></a>The sequences-hooks.js file ( R2 )</h3><p>Here I have a javaScript file that I am using to define a system for this sort of thing when it comes to sequences. I have <a href="/2022/05/12/threejs-examples-sequence-hooks/">made a whole other threejs project</a> centered around this kind of thing. In fact this is R2 of that very project that I am writing about here.</p>
<p>On top of having update methods for each sequence object, I will also want to be able to define hook functions that will be called before and after the call of the current update method in the objects array. This way I can use the before objects hook to update the state of a mesh object that will change over the whole span of the video, or set defaults for things. The after objects hook would be a good place to do anything that I would want to always do with the camera or an object for every frame and override anything that might happen before.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* seq-hooks.js - r2 - from threejs-examples-sequence-hooks</span></div><div class="line"> *        * Made 'OTHER' publuc methods private helper</div><div class="line"> *        * using this['seqHooks'] = &#123;&#125; in place of returning public api</div><div class="line"> *        * using let and const</div><div class="line"> *        * V3Paths</div><div class="line"> */</div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">api</span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SET PART FRAME FUNCTIONS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> partFrameFunctions = &#123;</div><div class="line">        <span class="comment">// expressions used in r0</span></div><div class="line">        r0: <span class="function"><span class="keyword">function</span>(<span class="params">seq, per2, obj</span>)</span>&#123;</div><div class="line">            seq.partFrameMax = <span class="built_in">Math</span>.floor( (per2 - obj.per) * seq.frameMax );</div><div class="line">            seq.partFrame = seq.frame - <span class="built_in">Math</span>.floor( seq.frameMax * obj.per );</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">r0cap</span>: <span class="function"><span class="keyword">function</span>(<span class="params">seq, per2, obj</span>)</span>&#123;</div><div class="line">            partFrameFunctions[<span class="string">'r0'</span>](seq, per2, obj);</div><div class="line">            seq.partFrame = seq.partFrame &gt;= seq.partFrameMax ? seq.partFrameMax - <span class="number">1</span> : seq.partFrame;</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// new expression for r1</span></div><div class="line">        r1: <span class="function"><span class="keyword">function</span>(<span class="params">seq, per2, obj</span>)</span>&#123;</div><div class="line">            seq.partFrameMax = <span class="built_in">Math</span>.round( (per2 - obj.per) * seq.frameMax );</div><div class="line">            seq.partFrame = <span class="built_in">Math</span>.floor(seq.frame - seq.frameMax * obj.per);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// no operation</span></div><div class="line">    <span class="keyword">const</span> noop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line">    <span class="comment">// internal get per method</span></div><div class="line">    <span class="keyword">const</span> getPer = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> a / b;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// internal get bias method</span></div><div class="line">    <span class="keyword">const</span> getBias = <span class="function"><span class="keyword">function</span>(<span class="params">per</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span> - <span class="built_in">Math</span>.abs( <span class="number">0.5</span> - per ) / <span class="number">0.5</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get total secs value helper</span></div><div class="line">    <span class="keyword">const</span> getTotalSecs = <span class="function"><span class="keyword">function</span>(<span class="params">seq</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> seq.objects.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">acc, obj</span>)</span>&#123; <span class="keyword">return</span> acc + (obj.secs || <span class="number">0</span>) &#125;, <span class="number">0</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get sin bias helper</span></div><div class="line">    <span class="keyword">const</span> getSinBias = <span class="function"><span class="keyword">function</span>(<span class="params">per</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> b = getBias(per);</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.sin( <span class="built_in">Math</span>.PI * <span class="number">0.5</span> * b );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create and return a getPer method to be used as seq.getPer</span></div><div class="line">    <span class="keyword">const</span> createGetPerMethod = <span class="function"><span class="keyword">function</span>(<span class="params">seq</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">count, objectPer</span>)</span>&#123;</div><div class="line">            <span class="comment">// by default return current 1 count per value for the current sequence object</span></div><div class="line">            count = count === <span class="literal">undefined</span> ? <span class="number">1</span> : count;</div><div class="line">            objectPer = objectPer === <span class="literal">undefined</span> ? <span class="literal">true</span>: objectPer;</div><div class="line">            <span class="comment">// if I want a objectPer value</span></div><div class="line">            <span class="keyword">let</span> a = seq.partFrame, b = seq.partFrameMax;</div><div class="line">            <span class="comment">// not object per</span></div><div class="line">            <span class="keyword">if</span>(!objectPer)&#123;</div><div class="line">                a = seq.frame; </div><div class="line">                b = seq.frameMax;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// base p value</span></div><div class="line">            <span class="keyword">let</span> p = getPer(a, b);</div><div class="line">            <span class="comment">// return base p value effected by count</span></div><div class="line">            <span class="keyword">return</span> p * count % <span class="number">1</span>;</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a get bias method to be used for sm.getBias</span></div><div class="line">    <span class="keyword">const</span> createGetBiasMethod = <span class="function"><span class="keyword">function</span>(<span class="params">seq</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">count, objectPer</span>)</span>&#123;</div><div class="line">            <span class="keyword">const</span> per = seq.getPer(count, objectPer);</div><div class="line">            <span class="keyword">return</span> getBias(per);</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a get bias method to be used for sm.getBias</span></div><div class="line">    <span class="keyword">const</span> createGetSinBiasMethod = <span class="function"><span class="keyword">function</span>(<span class="params">seq</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">count, objectPer</span>)</span>&#123;</div><div class="line">            <span class="keyword">const</span> per = seq.getPer(count, objectPer);</div><div class="line">            <span class="keyword">return</span> getSinBias(per);</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// just get an array of per values based on sec values for each object, and DO NOT MUTATE the seq object</span></div><div class="line">    <span class="keyword">const</span> getPerValues = <span class="function"><span class="keyword">function</span>(<span class="params">seq</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> secsTotal = getTotalSecs(seq);</div><div class="line">        <span class="keyword">const</span> perValues = [];</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>, len = seq.objects.length;</div><div class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">            <span class="keyword">const</span> per = perValues[i - <span class="number">1</span>];</div><div class="line">            <span class="keyword">if</span>( per === <span class="literal">undefined</span> )&#123;</div><div class="line">                perValues.push(<span class="number">0</span>);</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                <span class="keyword">const</span> perDelta = seq.objects[i - <span class="number">1</span>].secs / secsTotal;</div><div class="line">                perValues.push( <span class="built_in">parseFloat</span>( ( per + perDelta ).toFixed(<span class="number">4</span>) ) );</div><div class="line">            &#125;</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> perValues;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get a target frames value</span></div><div class="line">    <span class="keyword">const</span> getTargetFrames = <span class="function"><span class="keyword">function</span>(<span class="params">seq, fps</span>)</span>&#123;</div><div class="line">        fps = fps === <span class="literal">undefined</span> ? <span class="number">30</span> : fps;</div><div class="line">        <span class="keyword">const</span> secsTotal = getTotalSecs(seq);</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(secsTotal * fps);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set per values</span></div><div class="line">    <span class="keyword">const</span> setPerValues = <span class="function"><span class="keyword">function</span>(<span class="params">seq, fps</span>)</span>&#123;</div><div class="line">        <span class="comment">// set seq.totalSecs</span></div><div class="line">        seq.totalSecs = getTotalSecs(seq);</div><div class="line">        <span class="comment">// set per values</span></div><div class="line">        getPerValues(seq).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">per, i</span>)</span>&#123;</div><div class="line">            seq.objects[i].per = per;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// set frameMax</span></div><div class="line">        seq.frameMax = getTargetFrames(seq, fps);</div><div class="line">        <span class="keyword">return</span> seq;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// CREATE - create and return a new seq object</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// Parse a v3Paths object, filling in any blanks, anc convert forms other than v3array to v3array</span></div><div class="line">    <span class="keyword">const</span> parseV3PathsObject = <span class="function">(<span class="params">seq, v3Paths</span>) =&gt;</span> &#123;</div><div class="line">        <span class="comment">// check each path object given</span></div><div class="line">        v3Paths.forEach( <span class="function">(<span class="params">pathObj</span>) =&gt;</span> &#123;</div><div class="line">            <span class="comment">// must have a key, array, and lerp bool</span></div><div class="line">            pathObj.key = pathObj.key || <span class="string">'unnamed_'</span> + <span class="built_in">Object</span>.keys(seq.v3Paths.paths).length;</div><div class="line">            pathObj.array = pathObj.array || [];</div><div class="line">            pathObj.lerp = pathObj.lerp === <span class="literal">undefined</span> ? <span class="literal">false</span> : pathObj.lerp; </div><div class="line">            <span class="comment">// IF NUMBER ARRAY, convert to vector3 array</span></div><div class="line">            <span class="keyword">if</span>(<span class="keyword">typeof</span> pathObj.array[<span class="number">0</span>] === <span class="string">'number'</span>)&#123;</div><div class="line">                <span class="keyword">let</span> v3Array = [];</div><div class="line">                <span class="keyword">let</span> i = <span class="number">0</span>, len = pathObj.array.length;</div><div class="line">                <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">                    v3Array.push(<span class="keyword">new</span> THREE.Vector3(</div><div class="line">                        pathObj.array[i],</div><div class="line">                        pathObj.array[i + <span class="number">1</span>],</div><div class="line">                        pathObj.array[i + <span class="number">2</span>]</div><div class="line">                    ))</div><div class="line">                    i += <span class="number">3</span>;</div><div class="line">                &#125;</div><div class="line">                pathObj.array = v3Array;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create new seq object method</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.setPerValues = opt.setPerValues === <span class="literal">undefined</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</div><div class="line">        <span class="keyword">const</span> seq = &#123;&#125;;</div><div class="line">        seq.objectIndex = <span class="number">0</span>;  <span class="comment">// index of current sequence object in seq.objects</span></div><div class="line">        seq.per = <span class="number">0</span>;          <span class="comment">// main per and bias values</span></div><div class="line">        seq.bias = <span class="number">0</span>;</div><div class="line">        seq.frame = <span class="number">0</span>;        <span class="comment">// frame and frameMax for the full video</span></div><div class="line">        seq.frameMax = <span class="number">100</span>;</div><div class="line">        seq.partFrameMax = <span class="number">0</span>; <span class="comment">// partFrame and partFrame max are set by the Part Frame Function ( seq.pff )</span></div><div class="line">        seq.partFrame = <span class="number">0</span>;</div><div class="line">        seq.pff = opt.pff || <span class="string">'r1'</span>;</div><div class="line">        <span class="comment">// parse hooks</span></div><div class="line">        seq.beforeObjects = opt.beforeObjects || noop;</div><div class="line">        seq.afterObjects = opt.afterObjects || noop;</div><div class="line">        <span class="comment">// setup sequence objects</span></div><div class="line">        seq.objects = ( opt.objects || [] ).map(<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">            obj.per = obj.per === <span class="literal">undefined</span> ? <span class="number">0</span> : obj.per;</div><div class="line">            obj.secs = obj.secs === <span class="literal">undefined</span> ? <span class="number">0</span> : obj.secs;</div><div class="line">            obj.data = obj.data || &#123;&#125;;</div><div class="line">            obj.update = obj.update || noop;</div><div class="line">            obj.v3Paths = obj.v3Paths || [];</div><div class="line">            <span class="comment">// parse v3Paths into Vector3 objects if numbers are given</span></div><div class="line">            parseV3PathsObject(seq, obj.v3Paths);</div><div class="line">            <span class="keyword">return</span> obj;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// set per values is part of the create process</span></div><div class="line">        <span class="keyword">if</span>(opt.setPerValues)&#123;</div><div class="line">            setPerValues(seq, opt.fps === <span class="literal">undefined</span> ? <span class="number">30</span>: opt.fps);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// create get per method for this object</span></div><div class="line">        seq.getPer = createGetPerMethod(seq);</div><div class="line">        seq.getBias = createGetBiasMethod(seq);</div><div class="line">        seq.getSinBias = createGetSinBiasMethod(seq);</div><div class="line">        <span class="comment">// MAIN seq.v3Paths object</span></div><div class="line">        seq.v3Paths = &#123;</div><div class="line">            <span class="attr">main</span>: opt.v3Paths || [],</div><div class="line">            <span class="attr">paths</span>: &#123;&#125;</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// get pos helper</span></div><div class="line">        seq.getPos = <span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> seq.v3Paths.paths[key];</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// copy pos helper</span></div><div class="line">        seq.copyPos = <span class="function">(<span class="params">key, target</span>) =&gt;</span> &#123;</div><div class="line">            target = target || &#123;&#125;;</div><div class="line">            <span class="keyword">const</span> v3 = seq.v3Paths.paths[key];</div><div class="line">            <span class="comment">// if target is object3d assume copy to position</span></div><div class="line">            <span class="keyword">if</span>(target.isObject3D)&#123;</div><div class="line">                target.position.copy(v3);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// if instance of Vector3 assume copy to that</span></div><div class="line">            <span class="keyword">if</span>(target <span class="keyword">instanceof</span> THREE.Vector3)&#123;</div><div class="line">                target.copy(v3)</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> v3;</div><div class="line">        &#125;;</div><div class="line">        parseV3PathsObject(seq, seq.v3Paths.main );</div><div class="line">        <span class="comment">// CALL SET FRAME FOR FIRST TIME</span></div><div class="line">        api.setFrame(seq, seq.frame, seq.frameMax);</div><div class="line">        <span class="keyword">return</span> seq;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SET FRAME</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// set v3 paths for an object ( main seq object or a seq.objects object )</span></div><div class="line">    <span class="keyword">const</span> setV3PathsForObject = <span class="function">(<span class="params">seq, mainObj</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> obj = mainObj ? seq : seq.objects[seq.objectIndex];</div><div class="line">        <span class="keyword">const</span> per = mainObj ? seq.per : seq.partPer;</div><div class="line">        <span class="keyword">const</span> v3Paths = mainObj ? seq.v3Paths.main : obj.v3Paths;</div><div class="line">        <span class="keyword">const</span> maxFrame = mainObj ? seq.frameMax: seq.partFrameMax;</div><div class="line">        <span class="keyword">if</span>(v3Paths)&#123;</div><div class="line">            <span class="keyword">let</span> i = <span class="number">0</span>, len = v3Paths.length;</div><div class="line">             <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">                 <span class="keyword">const</span> pathObj = v3Paths[i];</div><div class="line">                 <span class="keyword">const</span> array = pathObj.array;</div><div class="line">                 <span class="keyword">const</span> cv = <span class="keyword">new</span> THREE.Vector3(); <span class="comment">// current vector</span></div><div class="line">                 <span class="keyword">const</span> len = array.length - <span class="number">1</span>;</div><div class="line">                 <span class="keyword">let</span> vi1 = <span class="built_in">Math</span>.floor( len * per );</div><div class="line">                 <span class="keyword">let</span> vi2 = vi1 + <span class="number">1</span>;</div><div class="line">                 vi2 = vi2 &gt; len ? len : vi2;</div><div class="line">                 <span class="comment">// if lerp mode is true I will want to have a Vector3 that</span></div><div class="line">                 <span class="comment">// is between two as there is not one on a frame by frame basic</span></div><div class="line">                 <span class="keyword">if</span>(pathObj.lerp &amp;&amp; array.length &lt; maxFrame)&#123;</div><div class="line">                     <span class="keyword">const</span> alpha =  len * per % <span class="number">1</span>;</div><div class="line">                     cv.copy( array[ vi1 ] ).lerp( array[ vi2 ], alpha );</div><div class="line">                 &#125;<span class="keyword">else</span>&#123;</div><div class="line">                     <span class="comment">// if not lerp mode just copy a vector3 from</span></div><div class="line">                     <span class="comment">// the array is it is equal to or greater than</span></div><div class="line">                     <span class="comment">// the count of frames</span></div><div class="line">                     <span class="keyword">let</span> vi1 = <span class="built_in">Math</span>.floor( array.length * per );</div><div class="line">                     vi1 = vi1 &gt; len ? len : vi1;</div><div class="line">                     cv.copy( array[ vi1 ] );</div><div class="line">                 &#125;</div><div class="line">                 <span class="comment">// key in to seq.v3Paths</span></div><div class="line">                 seq.v3Paths.paths[ pathObj.key ] = cv;</div><div class="line">                 i += <span class="number">1</span>;</div><div class="line">             &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set v3 paths for main seq and current object in seq.objects</span></div><div class="line">    <span class="keyword">const</span> setV3Paths = <span class="function">(<span class="params">seq</span>) =&gt;</span> &#123;</div><div class="line">        seq.v3Paths.paths = []; <span class="comment">// clear paths to empty array</span></div><div class="line">        setV3PathsForObject(seq, <span class="literal">true</span>);</div><div class="line">        setV3PathsForObject(seq, <span class="literal">false</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update the given seq object by way of a frame, and maxFrame value</span></div><div class="line">    api.setFrame = <span class="function"><span class="keyword">function</span>(<span class="params">seq, frame, frameMax</span>)</span>&#123;</div><div class="line">        seq.frame = frame === <span class="literal">undefined</span> ? <span class="number">0</span> : frame;</div><div class="line">        seq.frameMax = frameMax === <span class="literal">undefined</span> ? <span class="number">100</span> : frameMax;</div><div class="line">        <span class="comment">// just making sure frame value is vaild</span></div><div class="line">        seq.frame = seq.frame % frameMax;</div><div class="line">        <span class="comment">// set main per and bias values</span></div><div class="line">        seq.per = getPer(seq.frame, seq.frameMax);</div><div class="line">        seq.bias = getBias(seq.per);</div><div class="line">        <span class="comment">// update object index</span></div><div class="line">        seq.objectIndex = <span class="number">0</span>;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>, len = seq.objects.length;</div><div class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">            <span class="keyword">const</span> obj = seq.objects[i];</div><div class="line">            <span class="keyword">let</span> per2 = <span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span>(seq.objects[i + <span class="number">1</span>] != <span class="literal">undefined</span>)&#123;</div><div class="line">                per2 = seq.objects[i + <span class="number">1</span>].per;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// if this is the current object update object </span></div><div class="line">            <span class="comment">// index as well as other relevant values</span></div><div class="line">            <span class="keyword">if</span>(seq.per &gt;= obj.per &amp;&amp; seq.per &lt; per2)&#123;</div><div class="line">                seq.objectIndex = i;</div><div class="line">                <span class="comment">// fix for #0 still allows for using old methid for setting partFrame values if needed</span></div><div class="line">                <span class="comment">// while also allowing for addtional custom fix if needed by setting seq.pff to a function</span></div><div class="line">                <span class="comment">// see partFrameFunctions above for examples</span></div><div class="line">                <span class="keyword">if</span>(<span class="keyword">typeof</span> seq.pff === <span class="string">'function'</span>)&#123;</div><div class="line">                    seq.pff(seq, per2, obj);</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    partFrameFunctions[seq.pff](seq, per2, obj);</div><div class="line">                &#125;</div><div class="line">                <span class="comment">// set partPer and partBias</span></div><div class="line">                seq.partPer = getPer(seq.partFrame, seq.partFrameMax);</div><div class="line">                seq.partBias = getBias(seq.partPer);</div><div class="line">                seq.partSinBias = getSinBias(seq.partPer);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// V3 PATHS</span></div><div class="line">        setV3Paths(seq);</div><div class="line">        <span class="comment">// call before hook</span></div><div class="line">        seq.beforeObjects(seq);</div><div class="line">        <span class="comment">// call update for current object</span></div><div class="line">        <span class="keyword">const</span> obj = seq.objects[seq.objectIndex];</div><div class="line">        <span class="keyword">if</span>(obj)&#123;</div><div class="line">            seq.obj = obj;</div><div class="line">            obj.update(seq, seq.partPer, seq.partBias, seq.partSinBias, obj);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// call after objects hook</span></div><div class="line">        seq.afterObjects(seq);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// PUBLIC GET PER AND BIAS METHODS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    api.getPer = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, count</span>)</span>&#123;</div><div class="line">        a = a === <span class="literal">undefined</span> ? <span class="number">0</span> : a;</div><div class="line">        b = b === <span class="literal">undefined</span> ? <span class="number">1</span> : b;</div><div class="line">        count = count === <span class="literal">undefined</span> ? <span class="number">1</span> : count;</div><div class="line">        <span class="keyword">const</span> per = a / b;</div><div class="line">        <span class="keyword">return</span> per * count % <span class="number">1</span>;</div><div class="line">    &#125;;</div><div class="line">    api.getBias = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, count</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> per = api.getPer(a, b, count);</div><div class="line">        <span class="keyword">return</span> getBias(per);</div><div class="line">    &#125;;</div><div class="line">    api.getSinBias = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, count</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> per = api.getPer(a, b, count);</div><div class="line">        <span class="keyword">return</span> getSinBias(per);</div><div class="line">    &#125;;</div><div class="line">&#125;( <span class="keyword">this</span>[<span class="string">'seqHooks'</span>] = &#123;&#125; ));</div></pre></td></tr></table></figure>
<h3 id="4-1-Getting-started-example-of-the-the-sequences-hooks-module-to-set-camera-position"><a href="#4-1-Getting-started-example-of-the-the-sequences-hooks-module-to-set-camera-position" class="headerlink" title="4.1 - Getting started example of the the sequences hooks module to set camera position"></a>4.1 - Getting started example of the the sequences hooks module to set camera position</h3><p>I then just want to have some additional code that I can then use to demo this sequence module as a way to just test out the core features first for camera movement. With that said I can use the before objects hook of this project to define what I want to happen over the while span of a video project. For this demo I am just moving a mesh object of a sphere around in a circle. I can then use the after objects method to make sure that the camera will always look at the first mesh object. I should take care when doing this in the after hooks method as this will override any look at method, or rotation calls over that I might make in the before objects hook, or the current sequence object update method.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">20</span>, <span class="number">20</span>));</div><div class="line">camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">scene.add(mesh);</div><div class="line"><span class="keyword">const</span> mesh2 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.5</span>, <span class="number">30</span>, <span class="number">30</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">scene.add(mesh2);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SEQUENCE HOOKS OBJECT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> seq = seqHooks.create(&#123;</div><div class="line">    <span class="attr">fps</span>: <span class="number">30</span>,</div><div class="line">    <span class="attr">frameMax</span>: <span class="number">90</span>,</div><div class="line">    <span class="comment">// before calling current sequence object</span></div><div class="line">    <span class="comment">// move mesh2 around in a circle</span></div><div class="line">    beforeObjects: <span class="function"><span class="keyword">function</span>(<span class="params">seq</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> r = <span class="built_in">Math</span>.PI * <span class="number">2</span> * seq.per;</div><div class="line">        <span class="keyword">const</span> x = <span class="built_in">Math</span>.cos(r) * <span class="number">4</span>;</div><div class="line">        <span class="keyword">const</span> z = <span class="built_in">Math</span>.sin(r) * <span class="number">4</span>;</div><div class="line">        mesh2.position.set(x, <span class="number">0</span>, z);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">afterObjects</span>: <span class="function"><span class="keyword">function</span>(<span class="params">seq</span>)</span>&#123;</div><div class="line">        <span class="comment">// camera always looks at the mesh object</span></div><div class="line">        camera.lookAt(mesh.position);</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// using objects to define what will change with camera position over time</span></div><div class="line">    objects: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">secs</span>: <span class="number">5</span>,</div><div class="line">            <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params">seq, partPer, partBias</span>)</span>&#123;</div><div class="line">                camera.position.set(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">secs</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params">seq, partPer, partBias</span>)</span>&#123;</div><div class="line">               camera.position.set(<span class="number">10</span> - <span class="number">20</span> * partPer, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">secs</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params">seq, partPer, partBias</span>)</span>&#123;</div><div class="line">                camera.position.set(<span class="number">-10</span>, <span class="number">10</span> - <span class="number">7</span> * partPer, <span class="number">10</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">secs</span>: <span class="number">5</span>,</div><div class="line">            <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params">seq, partPer, partBias</span>)</span>&#123;</div><div class="line">                camera.position.set(<span class="number">-10</span>, <span class="number">3</span>, <span class="number">10</span>);</div><div class="line">                <span class="keyword">const</span> x = <span class="number">10</span> * partBias;</div><div class="line">                camera.lookAt(mesh.position.clone().add(<span class="keyword">new</span> THREE.Vector3(x, <span class="number">0</span>, <span class="number">0</span>)));</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">secs</span>: <span class="number">10</span>,</div><div class="line">            <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params">seq, partPer, partBias</span>)</span>&#123;</div><div class="line">                camera.position.set(<span class="number">-10</span>, <span class="number">3</span> - <span class="number">10</span> * partPer, <span class="number">10</span> - <span class="number">30</span> * partPer);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// APP LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">fps_update = <span class="number">10</span>,</div><div class="line">fps_movement = <span class="number">30</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps_update)&#123;</div><div class="line">        seqHooks.setFrame(seq, seq.frame, seq.frameMax )</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        seq.frame += fps_movement * secs;</div><div class="line">        seq.frame %= seq.frameMax;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="5-Camera-movement-helper-example-that-moves-the-camera-via-javaScript-code"><a href="#5-Camera-movement-helper-example-that-moves-the-camera-via-javaScript-code" class="headerlink" title="5 - Camera movement helper example that moves the camera via javaScript code"></a>5 - Camera movement helper example that moves the camera via javaScript code</h2><p>For this example I am making a more advanced version of my basic animation loop example that has to do with moving a camera. This time I have a move camera helper that takes a camera as an argument along with an update index number in the range of 0 to 1, and a function that will be used to create the values that will be used to change the camera position and orientation. So now the idea is more or less the same as the first animation loop example, but now I am creating additional code that has to do with creating a camera, with values attached to the <a href="/2021/02/16/threejs-userdata/">userData object</a> of the camera. If you are not aware of the user data object of a camera or any object in threejs that is based off of the object3d class, the user data object is just simply an object where I can pack values that have to do with my own custom system for an object such as a camera.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">20</span>, <span class="number">20</span>));</div><div class="line">camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> getBias = <span class="function"><span class="keyword">function</span>(<span class="params">per</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span> - <span class="built_in">Math</span>.abs(per - <span class="number">0.5</span>) / <span class="number">0.5</span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// create camera helper</span></div><div class="line"><span class="keyword">const</span> createCamera = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    <span class="keyword">const</span> width = <span class="number">640</span>, height = <span class="number">480</span>,</div><div class="line">    fieldOfView = <span class="number">40</span>, aspectRatio = width / height,</div><div class="line">    near = <span class="number">0.1</span>, far = <span class="number">1000</span>,</div><div class="line">    camera = <span class="keyword">new</span> THREE.PerspectiveCamera(fieldOfView, aspectRatio, near, far);</div><div class="line">    camera.userData.subject = <span class="keyword">new</span> THREE.Vector3();</div><div class="line">    <span class="keyword">return</span> camera;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> camMoveMethod = &#123;&#125;;</div><div class="line"><span class="comment">// follow subject1 method</span></div><div class="line">camMoveMethod.followSubject1 = <span class="function"><span class="keyword">function</span>(<span class="params">camera, per</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> bias = getBias(per);</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">position</span>: <span class="keyword">new</span> THREE.Vector3(<span class="number">-8</span>, <span class="number">5</span>, <span class="number">-8</span> + <span class="number">16</span> * bias), </div><div class="line">        <span class="attr">lookAt</span>: camera.userData.subject</div><div class="line">    &#125;;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// follow subject2 method</span></div><div class="line">camMoveMethod.followSubject2 = <span class="function"><span class="keyword">function</span>(<span class="params">camera, per</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> rad = <span class="built_in">Math</span>.PI * <span class="number">2</span> * per,</div><div class="line">    x = <span class="built_in">Math</span>.cos(rad) * <span class="number">6</span>,</div><div class="line">    y = <span class="number">-4</span> + <span class="number">8</span> * getBias(per),</div><div class="line">    z = <span class="built_in">Math</span>.sin(rad) * <span class="number">6</span>;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">position</span>: <span class="keyword">new</span> THREE.Vector3(x, y, z), </div><div class="line">        <span class="attr">lookAt</span>: camera.userData.subject</div><div class="line">    &#125;;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// move camera update helper</span></div><div class="line"><span class="keyword">const</span> moveCamera = <span class="function"><span class="keyword">function</span> (<span class="params">camera, per, moveFunc</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> camState = moveFunc(camera, per);</div><div class="line">    <span class="comment">// set the position and lookAt values with the</span></div><div class="line">    <span class="comment">// data in the returned camState object</span></div><div class="line">    camera.position.copy(camState.position)</div><div class="line">    camera.lookAt(camState.lookAt);</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">mesh.position.set(<span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.userData.subject = mesh.position;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">methodSecs = <span class="number">0</span>,</div><div class="line">methodIndex = <span class="number">0</span>,</div><div class="line">methodName = <span class="string">''</span>,</div><div class="line">fps_update = <span class="number">30</span>,   <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">fps_movement = <span class="number">60</span>, <span class="comment">// fps rate to move camera</span></div><div class="line">frame = <span class="number">0</span>,</div><div class="line">frameMax = <span class="number">600</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>,</div><div class="line">    per = <span class="built_in">Math</span>.round(frame) / frameMax,</div><div class="line">    bias = getBias(per);</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps_update)&#123;</div><div class="line">        methodSecs += secs;</div><div class="line">        <span class="keyword">if</span>(methodSecs &gt;= <span class="number">5</span>)&#123;</div><div class="line">            methodSecs = <span class="number">0</span>;</div><div class="line">            methodIndex += <span class="number">1</span>;</div><div class="line">            methodIndex %= <span class="built_in">Object</span>.keys(camMoveMethod).length;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// calling camera update method</span></div><div class="line">        methodName = <span class="built_in">Object</span>.keys(camMoveMethod)[methodIndex];</div><div class="line">        moveCamera(camera, per, camMoveMethod[methodName]);</div><div class="line">        <span class="comment">// moving mesh</span></div><div class="line">        mesh.position.x = <span class="number">-2</span> + <span class="number">4</span> * bias;</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        frame += fps_movement * secs;</div><div class="line">        frame %= frameMax;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>So moving a camera is more or less the same as moving anything else in three.js that inherits from the Object3d class by making use of the position and rotation properties of the object, and cameras are no exception. So then I could get into making all kinds of examples that have to do with different ways to change the values of the position and rotation of a camera over time, but with the collection of examples thus far the basic idea, and much more beyond that has been covered in this post I think.</p>
<p>I do get around to editing my content on threejs from time to time, and this post is just one of many that I am sure I will come back to again at some point also. I all ready have many more ideas when it comes to additional examples, and improvements to the examples thus far. If you did enjoy what I have wrote about here, or thing that you have obtained something of value there is checking out one of <a href="/categories/three-js/">my other posts on threejs</a>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2019/12/17/threejs-camera-move/" data-id="cleu7sy3k025hecv1craasthn" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2019/12/17/threejs-camera-move/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/12/18/threejs-mesh-copy/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Copy a mesh in threejs
        
      </div>
    </a>
  
  
    <a href="/2019/12/16/threejs-examples-clock-basic/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">A Three js example of a basic clock</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2019/12/17/threejs-camera-move/index.html';
    this.page.identifier = '582';
    this.page.title = 'Moving a camera in threejs over time';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 12.73px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/03/03/threejs-examples-breath-module/">A Breath Module threejs project example</a>
          </li>
        
          <li>
            <a href="/2023/02/23/threejs-points/">Points in threejs</a>
          </li>
        
          <li>
            <a href="/2023/02/17/threejs-examples-tracks/">Train Track threejs module project example</a>
          </li>
        
          <li>
            <a href="/2023/02/10/threejs-curves-cubicbeziercurve3/">Cubic Bezier Curves in threejs</a>
          </li>
        
          <li>
            <a href="/2023/02/03/threejs-buffer-geometry-morph-attributes/">Morph Attributes of buffer geometry objects</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2019/12/17/threejs-camera-move/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>