<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>JavaScript async await | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2019/06/25/js-async-await/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="A js async function can be used as a way to define a special kind of asynchronous function. These async functions can be used in conjunction with the await keyword to help with the process of writing">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript async await">
<meta property="og:url" content="https://dustinpfister.github.io/2019/06/25/js-async-await/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="A js async function can be used as a way to define a special kind of asynchronous function. These async functions can be used in conjunction with the await keyword to help with the process of writing">
<meta property="og:updated_time" content="2021-11-20T13:51:22.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript async await">
<meta name="twitter:description" content="A js async function can be used as a way to define a special kind of asynchronous function. These async functions can be used in conjunction with the await keyword to help with the process of writing">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-js-async-await" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/25/js-async-await/" class="article-date"> Published:
  <time datetime="2019-06-25T17:23:00.000Z" itemprop="datePublished">2019-06-25</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2019/06/25/js-async-await/" class="article-date"> Modified:
  <time datetime="2021-11-20T13:51:22.000Z" itemprop="dateModified">2021-11-20</time>
</a>

    <span class="article-date">V1.4</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      JavaScript async await
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank" rel="external">js async</a> function can be used as a way to define a special kind of asynchronous function. These async functions can be used in conjunction with the await keyword to help with the process of writing asynchronous code easier in javaScript as of late specs of javaScript as of ECMAScript 2017.</p>
<p>These kinds of <a href="https://stackoverflow.com/questions/46004290/will-async-await-block-a-thread-node-js" target="_blank" rel="external">async functions still operate in the main event loop</a>, so they still can not be used as a way to achieve what is often called true threading with javaScript, at least not by themselves. So then js async is not a replacement for <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" target="_blank" rel="external">Webworker in client side javaScript</a>, or something like the <a href="/2018/01/18/nodejs-cluster/">cluster module</a>, or <a href="/2018/02/04/nodejs-child-process/">child process module</a> in nodejs. If you want to get closer to true threading you would want to look into those options and not just use asnyc functions alone. Still in some situations the async keyword can be useful so lets look at some code examples of this in use.</p>
<a id="more"></a>
<h2 id="1-js-async-basics"><a href="#1-js-async-basics" class="headerlink" title="1 - js async basics"></a>1 - js async basics</h2><p>In this section I will be going over just a few very basic examples that involve the use of promises and the async keyword as a way to create functions, as well as other related topics when it comes to the very basics of this sort of thing. The main thing to keep in mind where is that the use of these async functions are just another way to operate in a single event loop, so if you are thinking that this is something that is far beyond using something <a href="/2018/12/06/js-settimeout/">like setTimeout</a> that is not really the case actually. The reason why is because that setTiemout and async functions are still working within a single event loop. So if you are thinking that async functions are another kind of web worker, or spawn method call in nodejs, that is not how to think about it. However async functions are another tool along side features like setTimeout, <a href="/2018/03/13/js-request-animation-frame/">requestAnimaitonFrame</a>, and the Promise constructor.</p>
<p>It should go without saying then that this is not a <a href="/2018/11/27/js-getting-started/">getting started type post with javaScript</a>, or <a href="/2019/12/26/js-function/">functions in general in javaScript</a>. However if you have at least some background with the very basics of getting started with javaScipt, in this section I will be sticking to a few simple examples that might hopefully show what async functions are, and also in the process hopefully also what they are not. After that I will be getting to some additional stuff that has to do with really getting into how to go about doing async type tasks with javaScipt that have to do with creating a whole other event loop.</p>
<h3 id="1-1-The-source-code-here-is-on-github"><a href="#1-1-The-source-code-here-is-on-github" class="headerlink" title="1.1 - The source code here is on github"></a>1.1 - The source code here is on github</h3><p>This post like many others is still a kind of work in progress, as such it is only a matter of time until I get around to editing the content here once again, as long as I am able to do so. With that said I have the collection of source code that I am writing about in this post up on my <a href="https://github.com/dustinpfister/test_vjs/tree/master/for_post/js-async-await" target="_blank" rel="external">test vjs Github respiratory</a>, along with all the other source code examples for all my other posts on native javaScript features. So then the latest work that I have done with these examples will be there, that is also where one would want to make a pull request. However there is also the comments section at the end of this post that can also be used to bring something up.</p>
<h3 id="1-2-Hello-world-async-function"><a href="#1-2-Hello-world-async-function" class="headerlink" title="1.2 - Hello world async function"></a>1.2 - Hello world async function</h3><p>To start off with maybe it would be best to compare what the return values are for a async function compared to say a <a href="/2019/01/27/js-function-expression/">function expression</a>. When I have a function expression that returns a string, the return value is, well a string no surprise there. However the same will not always be true for an async function as when I call such a function the return value right away is not a string, but an object. That is because an async function will always return a promise, even if the return value is not one the return value will be wrapped in a promise object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> helloWorld = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'Hello World'</span>;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> helloWorldAsync =  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'Hello World'</span>;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> helloWorld());      <span class="comment">// 'string'</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> helloWorldAsync()); <span class="comment">// 'object'</span></div></pre></td></tr></table></figure>
<h3 id="1-3-Hello-world-promise-function"><a href="#1-3-Hello-world-promise-function" class="headerlink" title="1.3 - Hello world promise function"></a>1.3 - Hello world promise function</h3><p>So then there is having a similar result to a sync function by just getting into the habit of creating functions that return a promise. One way to go about returning a promise inside the body of a function would be to use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/Promise" target="_blank" rel="external">Promise Constructor</a>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> helloWorld = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">'Hello World'</span>;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> helloWorldPromise = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">            resolve(<span class="string">'Hello World'</span>);</div><div class="line">        &#125;, <span class="number">3000</span>)</div><div class="line">    &#125;)</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> helloWorld()); <span class="comment">// 'string'</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> helloWorldPromise()); <span class="comment">// 'object'</span></div></pre></td></tr></table></figure>
<h3 id="1-4-using-then-off-of-a-promise-object"><a href="#1-4-using-then-off-of-a-promise-object" class="headerlink" title="1.4 - using then off of a promise object"></a>1.4 - using then off of a promise object</h3><p>The main thing about promise objects is not to just assign the promise object to a variable, but to call the then function off of the promise object and do what needs to be done with the result insdie the body of this then function call.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> foo = <span class="function">(<span class="params">delay</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</div><div class="line">        setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            resolve();</div><div class="line">        &#125;, delay);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="keyword">let</span> bar = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'start'</span>);</div><div class="line">    <span class="keyword">return</span> foo(<span class="number">3000</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'end'</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">bar();</div></pre></td></tr></table></figure>
<h3 id="1-5-The-same-example-with-js-async"><a href="#1-5-The-same-example-with-js-async" class="headerlink" title="1.5 - The same example with js async"></a>1.5 - The same example with js async</h3><p>The async keyword can be used in combination with a function such as an arrow function to declare an async function. Inside the body of the async function the await keyword can be used as a way to pause the execution of the rest of the logic in the function until a function that was called with await is completed. The function that is called with await should be a function that will return a promise or another function created with the async keyword.</p>
<p>A basic example of an async function in javaScript might then look like this then:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> foo = <span class="keyword">async</span> (delay) =&gt; &#123;</div><div class="line">    <span class="keyword">let</span> st = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    now = st,</div><div class="line">    t = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(t &lt; delay)&#123;</div><div class="line">        now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">        t = now - st;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="keyword">let</span> bar = <span class="keyword">async</span> ()=&gt; &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'start'</span>);</div><div class="line">    <span class="keyword">await</span> foo(<span class="number">3000</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'end'</span>);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">bar();</div></pre></td></tr></table></figure>
<p>The foo function returns a promise that resolves after a delay. When used inside the body of the func async function that execution of code is paused, and thus the string end is not logged to the console until the delay has completed. So this can be thought of as a cleaner style compared to just using promises.</p>
<h3 id="1-6-Async-functions-will-still-hold-up-the-event-loop"><a href="#1-6-Async-functions-will-still-hold-up-the-event-loop" class="headerlink" title="1.6 - Async functions will still hold up the event loop"></a>1.6 - Async functions will still hold up the event loop</h3><p>So an async function that has some code in it that might hold up the event loop will do so just like that of any other function in javaScript. This is because just like any other function in javaScript, we are still dealing with a single event loop when it comes to just using a kind of function alone. That is unless we take advantage of something that allows for us to create an additional event loop completely what is going on in an async function can still hold up the rest of a script. However do not just take my word for it run a few simple source code examples to see for yourself.</p>
<p>For example take into account the following:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// async function that does something heavy</span></div><div class="line"><span class="keyword">let</span> heavyAsync = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.pow(<span class="number">10</span>, <span class="number">9.25</span>)),</div><div class="line">    st = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">while</span> (i--) &#123;&#125;</div><div class="line">    <span class="keyword">var</span> secs = (<span class="keyword">new</span> <span class="built_in">Date</span>() - st) / <span class="number">1000</span>;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">''</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'heavy time: '</span>, secs.toFixed(<span class="number">2</span>));</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">''</span>);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">let</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    setTimeout(loop, <span class="number">250</span>);</div><div class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    lt = now;</div><div class="line">    <span class="keyword">if</span> (i % <span class="number">10</span> === <span class="number">5</span>) &#123;</div><div class="line">        heavyAsync();</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'tick'</span> + i, <span class="string">' time: '</span> + secs.toFixed(<span class="number">2</span>));</div><div class="line">    i += <span class="number">1</span>;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>In this example when the heavyAsync function is called it still ends up delaying the whole application. This is because I am still just working with a single event loop. So then in order to truly get around this limitation I will need to do something more beyond just using async and promises that will help me to spin up more than one event loop to work with, and pass data to and from this other event loop. </p>
<h2 id="2-The-Async-and-await-keywords-are-then-NOT-a-replacement-for-WebWorker"><a href="#2-The-Async-and-await-keywords-are-then-NOT-a-replacement-for-WebWorker" class="headerlink" title="2 - The Async and await keywords are then NOT a replacement for WebWorker"></a>2 - The Async and await keywords are then NOT a replacement for WebWorker</h2><p>An async function still operates in the main javaScript event loop, so it is not a way to go about accomplishing what is often called true threading in javaScript. However there are ways of doing that these days with javaScript, just not with async await, at least not by itself anyway. When it comes to client side javaScript the feature of interest to look into would be web workers, this is a way to go about creating an instance of an object that can be used to, and receive results back from a script that is running in a whole other event loop completely.</p>
<h3 id="2-1-I-will-need-a-way-to-host-what-I-am-working-on-by-way-of-http-rather-than-file"><a href="#2-1-I-will-need-a-way-to-host-what-I-am-working-on-by-way-of-http-rather-than-file" class="headerlink" title="2.1 - I will need a way to host what I am working on by way of http rather than file"></a>2.1 - I will need a way to host what I am working on by way of http rather than file</h3><p>The thing about getting into web workers is that they are of of many things that will not work when it comes to opening up an html file <a href="/2020/09/21/js-getting-started-file-protocol/">by way of the file protocol</a>. So then if you are still developing that way this is one of many things that will come up where you have to loosen security settings with your browser, or better yet just find a way to host what you are working on by way of the http protocol by setting up a basic web static web sever. I have <a href="/2017/12/04/nodejs-simple-static-sever-file">wrote another post on a simple script that can be used with node in the from of a single stand alone file</a>, however there is also learning how to do things like this by using a popular framework like express in nodejs.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> *  server.js</div><div class="line"> *</div><div class="line"> *   This just provides a simple static server for the project.</div><div class="line"> *</div><div class="line"> *   ex: $ node server ./ 8080</div><div class="line"> *</div><div class="line"> */</div><div class="line"> </div><div class="line"><span class="keyword">let</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>),</div><div class="line">fs = <span class="built_in">require</span>(<span class="string">'fs'</span>),</div><div class="line">path = <span class="built_in">require</span>(<span class="string">'path'</span>),</div><div class="line">promisify = <span class="built_in">require</span>(<span class="string">'util'</span>).promisify,</div><div class="line">lstat = promisify(fs.lstat),</div><div class="line">readFile = promisify(fs.readFile),</div><div class="line">readdir = promisify(fs.readdir);</div><div class="line"> </div><div class="line"><span class="comment">// the root folder to serve</span></div><div class="line"><span class="keyword">let</span> root = process.argv[<span class="number">2</span>] || path.join(__dirname, <span class="string">'./'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// set port with argument or hard coded default</span></div><div class="line"><span class="keyword">let</span> port = process.argv[<span class="number">3</span>] || <span class="number">8080</span>; <span class="comment">// port 8080 for now</span></div><div class="line"> </div><div class="line"><span class="comment">// create path info object</span></div><div class="line"><span class="keyword">let</span> createPathInfoObject = <span class="function">(<span class="params">url</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// remove any extra / ( /foo/bar/  to /foo/bar )</span></div><div class="line">    <span class="keyword">let</span> urlArr = url.split(<span class="string">''</span>);</div><div class="line">    <span class="keyword">if</span>(urlArr[urlArr.length - <span class="number">1</span>] === <span class="string">'/'</span>)&#123;</div><div class="line">        urlArr.pop();</div><div class="line">        url = urlArr.join(<span class="string">''</span>);</div><div class="line">    &#125;  </div><div class="line">    <span class="comment">// starting state</span></div><div class="line">    <span class="keyword">let</span> pInfo = &#123;</div><div class="line">        <span class="attr">url</span> : url,</div><div class="line">        <span class="attr">uri</span> : path.join(root, url),</div><div class="line">        <span class="attr">encoding</span>: <span class="string">'utf-8'</span>,</div><div class="line">        <span class="attr">mime</span>: <span class="string">'text/plain'</span>,</div><div class="line">        <span class="attr">ext</span>: <span class="string">''</span>,</div><div class="line">        <span class="attr">contents</span>: [],</div><div class="line">        <span class="attr">html</span>: <span class="string">''</span></div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//return pInfo;</span></div><div class="line">    <span class="keyword">return</span> lstat(pInfo.uri)</div><div class="line">    .then(<span class="function">(<span class="params">stat</span>)=&gt;</span>&#123;</div><div class="line">        pInfo.stat = stat;</div><div class="line">        <span class="keyword">if</span>(pInfo.stat.isFile())&#123;</div><div class="line">            pInfo.ext = path.extname(pInfo.uri).toLowerCase();</div><div class="line">            pInfo.ext = path.extname(pInfo.uri).toLowerCase();</div><div class="line">            pInfo.mime = pInfo.ext === <span class="string">'.html'</span> ? <span class="string">'text/html'</span> : pInfo.mime;</div><div class="line">            pInfo.mime = pInfo.ext === <span class="string">'.css'</span> ? <span class="string">'text/css'</span> : pInfo.mime;</div><div class="line">            pInfo.mime = pInfo.ext === <span class="string">'.js'</span> ? <span class="string">'text/javascript'</span> : pInfo.mime;</div><div class="line">             <span class="comment">// images</span></div><div class="line">            pInfo.mime = pInfo.ext === <span class="string">'.png'</span> ? <span class="string">'image/png'</span> : pInfo.mime;</div><div class="line">            pInfo.mime = pInfo.ext === <span class="string">'.ico'</span> ? <span class="string">'image/x-icon'</span> : pInfo.mime;</div><div class="line">            <span class="comment">// binary encoding if...</span></div><div class="line">            pInfo.encoding = pInfo.ext === <span class="string">'.png'</span> || pInfo.ext === <span class="string">'.ico'</span> ? <span class="string">'binary'</span> : pInfo.encoding;</div><div class="line">            <span class="keyword">return</span> pInfo;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(pInfo.stat.isDirectory())&#123;</div><div class="line">            pInfo.ext = <span class="string">''</span>;</div><div class="line">            pInfo.mime = <span class="string">'text/plain'</span>;</div><div class="line">            pInfo.encoding = <span class="string">'utf-8'</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> createDirInfo(pInfo);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// create an html index of a folder</span></div><div class="line"><span class="keyword">let</span> createHTML = <span class="function">(<span class="params">pInfo</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">var</span> html = <span class="string">'&lt;html&gt;&lt;head&gt;&lt;title&gt;Index of - '</span> + pInfo.url + <span class="string">'&lt;/title&gt;'</span>+</div><div class="line">    <span class="string">'&lt;style&gt;body&#123;padding:20px;background:#afafaf;font-family:arial;&#125;div&#123;display: inline-block;padding:10px;&#125;&lt;/style&gt;'</span> +</div><div class="line">    <span class="string">'&lt;/head&gt;&lt;body&gt;'</span>;</div><div class="line">    html += <span class="string">'&lt;h3&gt;Contents of : '</span> + pInfo.url + <span class="string">'&lt;/h3&gt;'</span></div><div class="line">    pInfo.contents.forEach(<span class="function">(<span class="params">itemName</span>)=&gt;</span>&#123;</div><div class="line">        <span class="keyword">let</span> itemURL = pInfo.url + <span class="string">'/'</span> + itemName;</div><div class="line">        html += <span class="string">'&lt;div&gt; &lt;a href=\"'</span> + itemURL + <span class="string">'\" &gt;'</span> +  itemName + <span class="string">'&lt;/a&gt; &lt;/div&gt;'</span></div><div class="line">    &#125;);</div><div class="line">    html += <span class="string">'&lt;/body&gt;&lt;/html&gt;'</span>;</div><div class="line">    <span class="keyword">return</span> html;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// create dir info for a pInfo object</span></div><div class="line"><span class="keyword">let</span> createDirInfo = <span class="function">(<span class="params">pInfo</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// first check for an index.html</span></div><div class="line">    <span class="keyword">let</span> uriIndex = path.join( pInfo.uri, <span class="string">'index.html'</span> );</div><div class="line">    <span class="keyword">return</span> readFile(uriIndex)</div><div class="line">    <span class="comment">// if all goes file we have an indrex file call createPathInfoObject with new uri</span></div><div class="line">    .then(<span class="function">(<span class="params">file</span>)=&gt;</span>&#123;</div><div class="line">        pInfo.uri = uriIndex;</div><div class="line">        pInfo.ext = <span class="string">'.html'</span>;</div><div class="line">        pInfo.mime = <span class="string">'text/html'</span>;</div><div class="line">        <span class="keyword">return</span> pInfo;</div><div class="line">    &#125;)</div><div class="line">    <span class="comment">// else we do not get contents</span></div><div class="line">    .catch(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">        <span class="keyword">return</span> readdir(pInfo.uri);</div><div class="line">    &#125;).then(<span class="function">(<span class="params">contents</span>)=&gt;</span>&#123;</div><div class="line">        <span class="keyword">if</span>(contents &amp;&amp; pInfo.ext === <span class="string">''</span>)&#123;</div><div class="line">            pInfo.contents = contents;</div><div class="line">            pInfo.mime = <span class="string">'text/html'</span>;</div><div class="line">            pInfo.html = createHTML(pInfo);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> pInfo;</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// create server object</span></div><div class="line"><span class="keyword">let</span> server = http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line">    <span class="comment">// create path info object for req.url</span></div><div class="line">    createPathInfoObject(req.url)</div><div class="line">    <span class="comment">// if we have a pinfo object without any problems</span></div><div class="line">    .then(<span class="function">(<span class="params">pInfo</span>)=&gt;</span>&#123;</div><div class="line">        <span class="comment">// send content</span></div><div class="line">        res.writeHead(<span class="number">200</span>, &#123;</div><div class="line">            <span class="string">'Content-Type'</span>: pInfo.mime</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// if we have html send that</span></div><div class="line">        <span class="keyword">if</span>(pInfo.html != <span class="string">''</span>)&#123;</div><div class="line">            res.write(pInfo.html, pInfo.encoding);</div><div class="line">            res.end();</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="comment">// else we are sending a file</span></div><div class="line">            readFile(pInfo.uri, pInfo.encoding).then(<span class="function">(<span class="params">file</span>)=&gt;</span>&#123;</div><div class="line">                res.write(file, pInfo.encoding);</div><div class="line">                res.end();</div><div class="line">            &#125;).catch(<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</div><div class="line">                <span class="comment">// send content</span></div><div class="line">                res.writeHead(<span class="number">200</span>, &#123;</div><div class="line">                    <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span></div><div class="line">                &#125;);</div><div class="line">                res.write(e.message, <span class="string">'utf8'</span>);</div><div class="line">                res.end();</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;).catch(<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</div><div class="line">        <span class="comment">// send content</span></div><div class="line">        res.writeHead(<span class="number">200</span>, &#123;</div><div class="line">            <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span></div><div class="line">        &#125;);</div><div class="line">        res.write(e.message, <span class="string">'utf8'</span>);</div><div class="line">        res.end();</div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="comment">// start server</span></div><div class="line">server.listen(port, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'hosting a public folder at: '</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'path: '</span> + root);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'port: '</span> + port);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="2-2-A-basic-example-of-a-web-worker"><a href="#2-2-A-basic-example-of-a-web-worker" class="headerlink" title="2.2 - A basic example of a web worker"></a>2.2 - A basic example of a web worker</h3><p>So now that I have a way to host an html file and some javaScript code by way of the http protocol rather that the file protocol I can now get into working out a simple hello world style web worker example.</p>
<p>I will want a ww-basic.js file that looks like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">  postMessage(e.data[<span class="number">0</span>] + <span class="string">'bar'</span>);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>This script when used as the source code file for a web worker will respond to a message from the main event loop by just appending what is passed to it to the string bar, and send that back as a message. Nothing special but this is a basic example of this that I am starting out where here in the section after all. So now that I have a script that I want to use for a web worker I will now want at least one html file, and a little additional javaScript code that will make use of this file.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>web worker example<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">"out"</span> <span class="attr">cols</span>=<span class="string">"60"</span> <span class="attr">rows</span>=<span class="string">"15"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">var</span> out = <span class="built_in">document</span>.getElementById(<span class="string">'out'</span>),</div><div class="line">workerBasic;</div><div class="line"><span class="comment">// feature test</span></div><div class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.Worker) &#123;</div><div class="line">    workerBasic = <span class="keyword">new</span> Worker(<span class="string">'ww-basic.js'</span>);</div><div class="line">    workerBasic.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">       out.value += e.data + <span class="string">'\n'</span>;</div><div class="line">       <span class="built_in">console</span>.log(<span class="string">'Message received from worker'</span>);</div><div class="line">    &#125;;</div><div class="line">    workerBasic.postMessage([<span class="string">'foo'</span>]);</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">    out.value += <span class="string">'Web Woker is not supported.\n'</span></div><div class="line">&#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>When I go to this file in the web browser what I end up with is the string foo bar in the text area element. So then that seems to work okay as a basic example of a web worker at least when it comes to just getting started with this sort of thing. However maybe I should get around to making at least one more example of this to help really address what the deal is with this sort of thing and how it can help to really run code that will not bog down the rest of what is going on in the main event loop.</p>
<h2 id="3-In-nodejs-the-child-process-module-can-help-to-spin-up-more-than-one-event-loop"><a href="#3-In-nodejs-the-child-process-module-can-help-to-spin-up-more-than-one-event-loop" class="headerlink" title="3 - In nodejs the child_process module can help to spin up more than one event loop"></a>3 - In nodejs the child_process module can help to spin up more than one event loop</h2><p>In nodejs there is the child_process built in module, and in this module there are methods like the exec method, and the spawn method that can be used to start a whole other process on the operating system on which node is running. This can be used to launch something from the command line such as a script that contains a shebang and made executable with the chmod command in Linux systems, an alias, or a binary, including node itself. </p>
<p>When doing so it results in an additional, independent process on the operating system. Thus it is a way to do something involving more than one event loop with javaScript, thus it is a kind of so called true threading that differs from what is typical when it comes to async functions, setTiemout, and so forth by itself. There is also the cluster module that is also worth checking out, but what is great about child process is that it can be used to run any kind of executable thing from the command line, not just javaScript.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> heavyAsync = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i = <span class="built_in">Math</span>.pow(<span class="number">10</span>, <span class="number">9</span>),</div><div class="line">    st = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">while</span> (i--) &#123;&#125;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'heavy time: '</span>, <span class="keyword">new</span> <span class="built_in">Date</span>() - st);</div><div class="line">&#125;;</div><div class="line">heavyAsync();</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> spawn = <span class="built_in">require</span>(<span class="string">'child_process'</span>).spawn;</div><div class="line"><span class="keyword">let</span> startHeavy = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> heavy = spawn(<span class="string">'node'</span>, [<span class="string">'heavy.js'</span>]);</div><div class="line">    heavy.stdout.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(data.toString());</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>, st;</div><div class="line"><span class="keyword">let</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    setTimeout(loop, <span class="number">250</span>);</div><div class="line">    st = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">if</span> (i % <span class="number">10</span> === <span class="number">5</span>) &#123;</div><div class="line">        startHeavy();</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'tick'</span> + i, <span class="string">' time: '</span> + (<span class="keyword">new</span> <span class="built_in">Date</span>() - st));</div><div class="line">    i += <span class="number">1</span>;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>So then this example, unlike the first one that just makes use of async await, does not hold up the main javaScript event loop.</p>
<h2 id="3-Conclusion"><a href="#3-Conclusion" class="headerlink" title="3 - Conclusion"></a>3 - Conclusion</h2><p>So then an async function is just a function that will always return a function, and inside the body of the function the await keyword can be used as a way to pause and wait for a result rather than moving on. I can not say that I use these kinds of functions that often actually as there are many ways of having a similar situation with things other than using async functions. There is having functions that return a function, and then there is also just doing things that involve old javaScriot style call back functions.</p>
<p>There are other late javaScript features that ate of greater interest to me, mainly web workers as that is a way to spin up a whole other event loop completely. Inside the score code of a file that I am using for a web worker, I could use async functions, but there are also many other options when it comes to delaying the calling of a function, or doing some kind of task that will finish at a later time.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2019/06/25/js-async-await/" data-id="cl9002dsu00nkw4v1hk5svyzg" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2019/06/25/js-async-await/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/06/26/hapi-routing/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Routing in hapi js
        
      </div>
    </a>
  
  
    <a href="/2019/06/25/hapi-plugins/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Plugins in hapi js</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2019/06/25/js-async-await/index.html';
    this.page.identifier = '490';
    this.page.title = 'JavaScript async await';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.5px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.5px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.5px;">angular</a> <a href="/tags/animation/" style="font-size: 12px;">animation</a> <a href="/tags/automation/" style="font-size: 12px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.5px;">backbone</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.5px;">canvas</a> <a href="/tags/corejs/" style="font-size: 13px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.5px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.5px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.5px;">express</a> <a href="/tags/games/" style="font-size: 17px;">games</a> <a href="/tags/git/" style="font-size: 13px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 12px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.5px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.5px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.5px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.5px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.5px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.5px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.5px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.5px;">python</a> <a href="/tags/statistics/" style="font-size: 14px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/10/07/threejs-buffer-geometry-compute-bounding-box/">Computing Bounding Box for buffer geometries in threejs</a>
          </li>
        
          <li>
            <a href="/2022/09/30/threejs-examples-animation-loop-module/">Animation Loop Framework threejs project example</a>
          </li>
        
          <li>
            <a href="/2022/09/23/threejs-examples-svg-movement/">Using SVG for movement of objects threejs example module</a>
          </li>
        
          <li>
            <a href="/2022/09/16/threejs-svg-loader/">The SVG Loader in threejs</a>
          </li>
        
          <li>
            <a href="/2022/09/09/threejs-examples-wrap-module/">threejs wrap module example for wrapping rather than clamping values</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2019/06/25/js-async-await/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>