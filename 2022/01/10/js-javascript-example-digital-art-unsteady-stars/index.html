<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Unsteady Stars Digital Art javaScript example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2022/01/10/js-javascript-example-digital-art-unsteady-stars/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Over the last few days I was working on yet another one of my javaScript examples this time it is yet another Digital Art Projects based off of revision 5 of my first Object Pool Reduction digital art">
<meta property="og:type" content="article">
<meta property="og:title" content="Unsteady Stars Digital Art javaScript example">
<meta property="og:url" content="https://dustinpfister.github.io/2022/01/10/js-javascript-example-digital-art-unsteady-stars/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="Over the last few days I was working on yet another one of my javaScript examples this time it is yet another Digital Art Projects based off of revision 5 of my first Object Pool Reduction digital art">
<meta property="og:updated_time" content="2022-01-11T16:26:22.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Unsteady Stars Digital Art javaScript example">
<meta name="twitter:description" content="Over the last few days I was working on yet another one of my javaScript examples this time it is yet another Digital Art Projects based off of revision 5 of my first Object Pool Reduction digital art">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-js-javascript-example-digital-art-unsteady-stars" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/01/10/js-javascript-example-digital-art-unsteady-stars/" class="article-date"> Published:
  <time datetime="2022-01-10T19:10:00.000Z" itemprop="datePublished">2022-01-10</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2022/01/10/js-javascript-example-digital-art-unsteady-stars/" class="article-date"> Modified:
  <time datetime="2022-01-11T16:26:22.000Z" itemprop="dateModified">2022-01-11</time>
</a>

    <span class="article-date">V1.23</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Unsteady Stars Digital Art javaScript example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>Over the last few days I was working on yet another one of my <a href="/2021/04/02/js-javascript-example/">javaScript examples</a> this time it is yet another Digital Art Projects based off of <a href="/2021/12/31/js-javascript-example-digital-art-reduce-pool/">revision 5 of my first Object Pool Reduction digital art example</a> that I started late last year. This time around I wanted to make a quick project that was just a bunch of display objects moving around the canvas, each of which also contains a collection of points that form a star. However this is not just any star, but a kind of unsteady star that has more than one collection of points attached to it. One collection of points is a bunch of home points that are the pure position locations for each point in the star, then other collections of points have to do with old, target, and current positions. So then the points move from the home positions to random positions that are a certain random radius and angle from each home position. So then simply put they end up being collections of points that look like stars but the points will move around to these random locations within a range of each home point.</p>
<p>The main goal of this project was not just to create yet another digital art project, but also to continue to practice and refine the basic process that I started with in my first digital art javaScript example project. That is to come up with what the Core idea of a project is first, finish that, then move on to a few additional features. Also when it comes to additional features set a limit as to how many of them there will be, and try to focus on what I really want or need to add to the project. Then onces the few features are done, sop adding features and focus on code readability and fixing bugs. This kind of process combined with sticking to simple, artful projects will then result in me actually finishing a project, and then I will be free to move on to the next idea. With that said I would say that the main goal of this project was a success, now it is just doing the same of the next project, and the project after that. Keeping the ides simple and in the scope of something that I can complete in a few days, or at most a month if it is something that is a little involves.</p>
<a id="more"></a>
<h2 id="What-to-know-first-before-continuing-to-read-this-post"><a href="#What-to-know-first-before-continuing-to-read-this-post" class="headerlink" title="What to know first before continuing to read this post"></a>What to know first before continuing to read this post</h2><p>This is one of my many posts on a full javaScript example that might be a fairly basic example, but still it is a fair amount of code stretched over several files. This is then not a post intended for people that are new to javaScript, but rather for people that have at least a little experience with javaScript and would like to now start working on some actually prototypes for various kinds of projects.</p>
<h3 id="The-source-code-for-this-javaScript-example-as-well-as-other-notes-and-assets-can-be-found-on-Github"><a href="#The-source-code-for-this-javaScript-example-as-well-as-other-notes-and-assets-can-be-found-on-Github" class="headerlink" title="The source code for this javaScript example as well as other notes and assets can be found on Github"></a>The source code for this javaScript example as well as other notes and assets can be found on Github</h3><p>The full up to date source code for this example can also be found on my <a href="https://github.com/dustinpfister/test_vjs/tree/master/for_post/js-javascript-example-digital-art-unsteady-stars" target="_blank" rel="external">test vjs Github Repository</a>. This might also be the best way to pull down and use not just this javaScipt example, but all my other javaScript examples that I have made over the years for each <a href="/categories/js/">post I have wrote on javaScript in general</a>.</p>
<h2 id="1-The-utilities-library"><a href="#1-The-utilities-library" class="headerlink" title="1 - The utilities library"></a>1 - The utilities library</h2><p>The <a href="/2021/08/06/js-javascript-example-utils/">utilities library</a> for this example contains a number of methods that I will be using throughout the other files in this over all project. So then many of these methods are usual suspect type methods that I end up using in just about any other javaScript example of mine, but I sill keep the example more or less custom cut for the specific project.</p>
<p>The create canvas method is something that I made for my collection of canvas example posts, for that collection of posts like this collection I was not using any kind of framework and writing all the code from the ground up sort of speak. However I did reuse code from example to example, just as I do with this example, and one thing I wanted to work out is a standard way to create a canvas element, and set up some values for such an element. So then this create canvas method is such a method, and will return an object with a reference to the canvas element, as well as the 2d drawing content of the canvas element.</p>
<p>Another usual suspect method for this utilizes library is the <a href="/2017/09/02/js-whats-wrong-with-modulo/">mathematical modulo</a> method that is just another way to go about doing what the modulo operator does in native javaScript but it works better with negative numbers. </p>
<p>I then also have a <a href="/2018/07/22/phaser-math-wrap-and-clamp/">wrapNumber method based off of what is used in the game frameWork known as phaser</a>, along with distance and bounding box collection detection methods. I also have a chunk method that works in more or less the same way as that of the <a href="/2017/09/13/lodash-chunk/">lodash chunk</a> method as a basic tool for spiting an array into arrays of arrays. After that I have a whole bunch of methods that are based off of the source code from <a href="https://www.npmjs.com/package/angles" target="_blank" rel="external">angles.js</a> that work well for various tasks that have to do with angles.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> utils = &#123;&#125;;</div><div class="line"><span class="comment">// create a canvas element</span></div><div class="line">utils.createCanvas = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    opt.container = opt.container || <span class="built_in">document</span>.getElementById(<span class="string">'canvas-app'</span>) || <span class="built_in">document</span>.body;</div><div class="line">    opt.canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">    opt.ctx = opt.canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    <span class="comment">// assign the 'canvas_example' className</span></div><div class="line">    opt.canvas.className = <span class="string">'canvas_example'</span>;</div><div class="line">    <span class="comment">// set native width</span></div><div class="line">    opt.canvas.width = opt.width === <span class="literal">undefined</span> ? <span class="number">320</span> : opt.width;</div><div class="line">    opt.canvas.height = opt.height === <span class="literal">undefined</span> ? <span class="number">240</span> : opt.height;</div><div class="line">    <span class="comment">// translate by 0.5, 0.5</span></div><div class="line">    opt.ctx.translate(<span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line">    <span class="comment">// disable default action for onselectstart</span></div><div class="line">    opt.canvas.onselectstart = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</div><div class="line">    <span class="comment">// append canvas to container</span></div><div class="line">    opt.container.appendChild(opt.canvas);</div><div class="line">    <span class="keyword">return</span> opt;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// mathematical modulo</span></div><div class="line">utils.mod = <span class="function"><span class="keyword">function</span>(<span class="params">x, m</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (x % m + m) % m;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// wrap a number</span></div><div class="line">utils.wrapNumber = <span class="function"><span class="keyword">function</span>(<span class="params">n, min, max</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> r = max - min;</div><div class="line">    <span class="keyword">return</span> (min + ((((n - min) % r) + r) % r));</div><div class="line">&#125;;</div><div class="line"><span class="comment">// distance</span></div><div class="line">utils.distance = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, x2, y2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow(x1 - x2, <span class="number">2</span>) + <span class="built_in">Math</span>.pow(y1 - y2, <span class="number">2</span>));</div><div class="line">&#125;;</div><div class="line"><span class="comment">// bounding box</span></div><div class="line">utils.boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, w1, h1, x2, y2, w2, h2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> !(</div><div class="line">        y1 + h1 &lt; y2 ||</div><div class="line">        y1 &gt; y2 + h2 ||</div><div class="line">        x1 + w1 &lt; x2 ||</div><div class="line">        x1 &gt; x2 + w2);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// chunk and array</span></div><div class="line">utils.chunk = <span class="function"><span class="keyword">function</span> (<span class="params">arr, size</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> chunkedArr = [];</div><div class="line">    arr = arr || [];</div><div class="line">    size = size === <span class="literal">undefined</span> ? <span class="number">1</span> : size;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i += size) &#123;</div><div class="line">        chunkedArr.push(arr.slice(i, i + size));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> chunkedArr;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// PI * 2</span></div><div class="line">utils.PI2 = <span class="built_in">Math</span>.PI * <span class="number">2</span>;</div><div class="line"><span class="comment">// normalize an angle by half</span></div><div class="line">utils.normalizeHalf = <span class="function"><span class="keyword">function</span> (<span class="params">n, scale</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> c = scale || utils.PI2,</div><div class="line">    h = c / <span class="number">2</span>;</div><div class="line">    <span class="keyword">return</span> utils.mod(n + h, c) - h;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// the angular distance between two angles</span></div><div class="line">utils.angleDistance = <span class="function"><span class="keyword">function</span> (<span class="params">a, b, scale</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> m = scale || utils.PI2,</div><div class="line">    h = m / <span class="number">2</span>,</div><div class="line">    diff = utils.normalizeHalf(a - b);</div><div class="line">    <span class="keyword">if</span> (diff &gt; h) &#123;</div><div class="line">        diff = diff - m;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> utils.mod( <span class="built_in">Math</span>.abs(diff), m);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// get -1, 1, or 0 depending on the the state of two angles</span></div><div class="line">utils.shortestAngleDirection = <span class="function"><span class="keyword">function</span> (<span class="params">a1, a2, scale</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> z = a1 - a2,</div><div class="line">    x = utils.normalizeHalf(z, scale || utils.PI2);</div><div class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">// Left</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (x &gt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>; <span class="comment">// Right</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// if a1 === a2 or any other case</span></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="2-The-star-module"><a href="#2-The-star-module" class="headerlink" title="2 - The star module"></a>2 - The star module</h2><p>The star module that I am suing for this example is based off of what I worked out for my older <a href="/2020/02/12/canvas-example-star/">canvas example project and drawing stars</a>. It is more or less the same source code, but of course I made some additions to it when it comes to creating an instance of this unsteady star object that I want to use as the main feature of the over all digital art example.</p>
<p>The unsteady star object is just like the same object that is returned by the create1 method of the star module from before. I went with the cerate1 method that works by creating just one line to make a star by bounding between an outer ind inner radius, rather than the other method that words by creating one or two lines depending if the number of points is even or not. So then what is returned by the main unsteady star method is also an Array, but with some named keys attached to the array. As you might guess these additional keys and corresponding values have to do with updating the main collection of points for the star. Speaking of updating things I also of course have an update method for this unsteady star object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> starMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"><span class="comment">/********* **********</span></div><div class="line">   HELPERS</div><div class="line">********** *********/</div><div class="line">    <span class="comment">// get a point with a given radian, radius, and origin point</span></div><div class="line">    <span class="keyword">var</span> getPoint = <span class="function"><span class="keyword">function</span> (<span class="params">radian, radius, ox, oy</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">x</span>: <span class="built_in">Math</span>.cos(radian) * radius + ox,</div><div class="line">            <span class="attr">y</span>: <span class="built_in">Math</span>.sin(radian) * radius + oy</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// parse options</span></div><div class="line">    <span class="keyword">var</span> parseOptions = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.pointCount = opt.pointCount || <span class="number">5</span>;</div><div class="line">        opt.radius = opt.radius === <span class="literal">undefined</span> ? <span class="number">50</span> : opt.radius;</div><div class="line">        opt.radiusInner = opt.radiusInner === <span class="literal">undefined</span> ? <span class="number">25</span> : opt.radiusInner;</div><div class="line">        opt.radianAjust = opt.radianAjust === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.radianAjust;</div><div class="line">        opt.ox = opt.ox || <span class="number">0</span>;</div><div class="line">        opt.oy = opt.oy || <span class="number">0</span>;</div><div class="line">        opt.pointSkip = opt.pointSkip || <span class="number">2</span>;</div><div class="line">        <span class="keyword">return</span> opt;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// new random positions</span></div><div class="line">    <span class="keyword">var</span> getNewPositions = <span class="function"><span class="keyword">function</span>(<span class="params">uStar</span>)</span>&#123;</div><div class="line">        <span class="comment">// deltas for each point</span></div><div class="line">        <span class="keyword">var</span> newPos = [[]];</div><div class="line">        utils.chunk(uStar.homePoints[<span class="number">0</span>], <span class="number">2</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">pos, i</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> vIndex = <span class="number">1</span>,</div><div class="line">            radian = <span class="built_in">Math</span>.PI * <span class="number">2</span> * <span class="built_in">Math</span>.random(),</div><div class="line">            radius = uStar.nprMin + ( uStar.nprMax - uStar.nprMin ) * <span class="built_in">Math</span>.random(),</div><div class="line">            <span class="comment">// new position for each point</span></div><div class="line">            x = pos[<span class="number">0</span>] + <span class="built_in">Math</span>.cos(radian) * radius,</div><div class="line">            y = pos[<span class="number">1</span>] + <span class="built_in">Math</span>.sin(radian) * radius;</div><div class="line">            <span class="comment">// set new pos values</span></div><div class="line">            newPos[<span class="number">0</span>][i * <span class="number">2</span>] = x;</div><div class="line">            newPos[<span class="number">0</span>][i * <span class="number">2</span> + <span class="number">1</span>] = y;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> newPos;</div><div class="line">    &#125;;</div><div class="line"><span class="comment">/********* **********</span></div><div class="line">   PUBLIC METHODS</div><div class="line">********** *********/</div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// create a star points array by pointCount, and inner and outer radius</span></div><div class="line">    api.create1 = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = parseOptions(opt);</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">        pt,</div><div class="line">        r,</div><div class="line">        rd = <span class="built_in">Math</span>.PI * <span class="number">2</span> / opt.pointCount,</div><div class="line">        points = [];</div><div class="line">        <span class="keyword">while</span> (i &lt; opt.pointCount) &#123;</div><div class="line">            pt = getPoint(rd * i + opt.radianAjust, opt.radius, opt.ox, opt.oy);</div><div class="line">            points.push(pt.x, pt.y);</div><div class="line">            pt = getPoint(rd * i + rd / <span class="number">2</span> + opt.radianAjust, opt.radiusInner, opt.ox, opt.oy);</div><div class="line">            points.push(pt.x, pt.y);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> [points];</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// unsteady star objects</span></div><div class="line">    api.unsteady = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">var</span> uStar = [[]];</div><div class="line">        <span class="comment">// new point radius min and max</span></div><div class="line">        uStar.nprMin = opt.nprMin === <span class="literal">undefined</span> ? <span class="number">1</span> : opt.nprMin;</div><div class="line">        uStar.nprMax = opt.nprMax === <span class="literal">undefined</span> ? <span class="number">5</span> : opt.nprMax;</div><div class="line">        <span class="comment">// star create1 options</span></div><div class="line">        uStar.pointCount = opt.pointCount === <span class="literal">undefined</span> ? <span class="number">5</span> : opt.pointCount;</div><div class="line">        uStar.radius = opt.radius === <span class="literal">undefined</span> ? <span class="number">50</span> : opt.radius;</div><div class="line">        uStar.radiusInner = opt.radiusInner === <span class="literal">undefined</span> ? <span class="number">25</span> : opt.radiusInner;</div><div class="line">        uStar.radianAjust = opt.radianAjust === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.radianAjust;</div><div class="line">        <span class="comment">// home positions that will be used to fine new positions</span></div><div class="line">        uStar.homePoints = api.create1(uStar);</div><div class="line">        <span class="comment">// old positions start out at home positions for now</span></div><div class="line">        uStar.oldPositions = uStar.homePoints;</div><div class="line">        <span class="comment">// get first set of new positions</span></div><div class="line">        uStar.newPositions = getNewPositions(uStar);</div><div class="line">        <span class="comment">// frame, maxFrame, and Frames Per Second</span></div><div class="line">        uStar.frame = opt.frame === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.frame;</div><div class="line">        uStar.maxFrame = opt.maxFrame === <span class="literal">undefined</span> ? <span class="number">30</span> : opt.maxFrame;</div><div class="line">        uStar.fps = <span class="number">30</span>;</div><div class="line">        <span class="comment">// call update for first time, with 0 secs of time to just set things up</span></div><div class="line">        api.unsteady.update(uStar, <span class="number">0</span>);</div><div class="line">        <span class="comment">// return the uStar</span></div><div class="line">        <span class="keyword">return</span> uStar;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create is a ref to the main starMod.unsteady method</span></div><div class="line">    api.unsteady.create = api.upsteady;</div><div class="line">    <span class="comment">// update an unsteady star created with starMod.unsteady.create</span></div><div class="line">    api.unsteady.update = <span class="function"><span class="keyword">function</span>(<span class="params">uStar, secs</span>)</span>&#123;</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        uStar.frame += uStar.fps * secs;</div><div class="line">        uStar.frame = uStar.frame &gt; uStar.maxFrame ? uStar.maxFrame : uStar.frame;</div><div class="line">        <span class="keyword">var</span> perDone = uStar.frame / uStar.maxFrame; </div><div class="line">        <span class="comment">// update pos of uStar</span></div><div class="line">        <span class="keyword">var</span> newPos = utils.chunk(uStar.newPositions[<span class="number">0</span>], <span class="number">2</span>);</div><div class="line">        utils.chunk(uStar.oldPositions[<span class="number">0</span>], <span class="number">2</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">pos, i</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> vIndex = i,</div><div class="line">            <span class="comment">// start and end positions</span></div><div class="line">            sx = pos[<span class="number">0</span>],</div><div class="line">            sy = pos[<span class="number">1</span>],</div><div class="line">            ex = newPos[i][<span class="number">0</span>],</div><div class="line">            ey = newPos[i][<span class="number">1</span>],</div><div class="line">            <span class="comment">// angle and distance from old position and new position</span></div><div class="line">            a = <span class="built_in">Math</span>.atan2(ey - sy, ex - sx),</div><div class="line">            d = utils.distance(sx, sy, ex, ey),</div><div class="line">            <span class="comment">// delta x and delta y based off of angle and distance</span></div><div class="line">            dx = <span class="built_in">Math</span>.cos(a) * d,</div><div class="line">            dy = <span class="built_in">Math</span>.sin(a) * d,</div><div class="line">            <span class="comment">// current x and y is start position + deltas over perDone</span></div><div class="line">            <span class="comment">// which is set by frame / maxFrame</span></div><div class="line">            x = sx + dx * perDone,</div><div class="line">            y = sy + dy * perDone;</div><div class="line">            <span class="comment">// set the positions for uStar points array</span></div><div class="line">            uStar[<span class="number">0</span>][vIndex * <span class="number">2</span>] = x;</div><div class="line">            uStar[<span class="number">0</span>][vIndex * <span class="number">2</span> + <span class="number">1</span>] = y;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// if frame === maxFrame then set frame back to 0, set old position</span></div><div class="line">        <span class="comment">// as current new position, and then get a new position</span></div><div class="line">        <span class="keyword">if</span>(uStar.frame === uStar.maxFrame)&#123;</div><div class="line">            uStar.frame = <span class="number">0</span>;</div><div class="line">            uStar.oldPositions = uStar.newPositions;</div><div class="line">            uStar.newPositions = getNewPositions(uStar);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// resize unsteady</span></div><div class="line">    api.resizeUnsteady = <span class="function"><span class="keyword">function</span>(<span class="params">uStar, size, rDiv, riDiv</span>)</span>&#123;</div><div class="line">        size = size || <span class="number">0</span>;</div><div class="line">        rDiv = rDiv === <span class="literal">undefined</span> ? <span class="number">2</span> : rDiv;</div><div class="line">        riDiv = riDiv === <span class="literal">undefined</span> ? r : riDiv;</div><div class="line">        <span class="keyword">var</span> opt = <span class="built_in">Object</span>.assign(&#123;&#125;, uStar, &#123;</div><div class="line">            <span class="attr">radius</span>: size / rDiv,</div><div class="line">            <span class="attr">radiusInner</span>: size / riDiv</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> api.unsteady(opt);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return the public api</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="3-The-object-pool-module"><a href="#3-The-object-pool-module" class="headerlink" title="3 - The object pool module"></a>3 - The object pool module</h2><p>The object pool module was copied over from the other digital art example that I started this out from. It started out with what what I put together with in my <a href="/2020/07/20/canvas-example-object-pool/">canvas example on object pools</a>. Sense then I keep making little changes to it here and there as needed, and over time I slowly but surly have a more solid module for this sort of thing.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> poolMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// Public API</span></div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// get next inactive object in the given pool</span></div><div class="line">    <span class="keyword">var</span> getInactive = <span class="function"><span class="keyword">function</span> (<span class="params">pool</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a single display object</span></div><div class="line">    <span class="keyword">var</span> createDisp = <span class="function"><span class="keyword">function</span>(<span class="params">i, opt</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">active</span>: <span class="literal">false</span>,</div><div class="line">            <span class="attr">i</span>: i,</div><div class="line">            <span class="attr">x</span>: opt.x === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.x,</div><div class="line">            <span class="attr">y</span>: opt.y === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.y,</div><div class="line">            <span class="attr">w</span>: opt.w === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.w,</div><div class="line">            <span class="attr">h</span>: opt.h === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.h,</div><div class="line">            <span class="attr">heading</span>: opt.heading === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.heading,</div><div class="line">            <span class="attr">pps</span>: opt.pps === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.pps,</div><div class="line">            <span class="attr">lifespan</span>: opt.lifespan || <span class="number">3</span>,</div><div class="line">            <span class="attr">data</span>: &#123;&#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a new pool</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.count = opt.count || <span class="number">10</span>;</div><div class="line">        <span class="comment">// the main pool object</span></div><div class="line">        <span class="keyword">var</span> pool = &#123;</div><div class="line">            <span class="attr">objects</span>: [],</div><div class="line">            <span class="attr">secsCap</span>: opt.secsCap === <span class="literal">undefined</span> ? <span class="literal">Infinity</span> : opt.secsCap,</div><div class="line">            <span class="attr">disableLifespan</span>: opt.disableLifespan || <span class="literal">false</span>,</div><div class="line">            <span class="attr">data</span>: opt.data || &#123;&#125;,</div><div class="line">            <span class="attr">spawn</span>: opt.spawn || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state, opt</span>) </span>&#123;&#125;,</div><div class="line">            <span class="attr">purge</span>: opt.purge || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state</span>) </span>&#123;&#125;,</div><div class="line">            <span class="attr">update</span>: opt.update || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state, secs</span>) </span>&#123;&#125;,</div><div class="line">            <span class="attr">beforeUpdate</span>: opt.beforeUpdate || <span class="function"><span class="keyword">function</span>(<span class="params">pool, state, secs</span>)</span>&#123;&#125;,</div><div class="line">            <span class="attr">afterUpdate</span>: opt.afterUpdate || <span class="function"><span class="keyword">function</span>(<span class="params">pool, state, secs</span>)</span>&#123;&#125;</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// populate the pools objects array</span></div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (i &lt; opt.count) &#123;</div><div class="line">            pool.objects.push( createDisp(i, opt) );</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// return the pool object</span></div><div class="line">        <span class="keyword">return</span> pool;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// spawn the next inactive object in the given pool</span></div><div class="line">    api.spawn = <span class="function"><span class="keyword">function</span> (<span class="params">pool, state, opt</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> obj = getInactive(pool);</div><div class="line">        state = state || &#123;&#125;;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">if</span> (obj) &#123;</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                obj.active = <span class="literal">true</span>;</div><div class="line">                pool.spawn.call(pool, obj, pool, state, opt);</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// spawn all objects</span></div><div class="line">    api.spawnAll = <span class="function"><span class="keyword">function</span>(<span class="params">pool, state, opt</span>)</span>&#123;</div><div class="line">        pool.objects.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                obj.active = <span class="literal">true</span>;</div><div class="line">                pool.spawn.call(pool, obj, pool, state, opt);</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> pool.objects;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// purge an object ( make it inactive and call the purge method for the pool )</span></div><div class="line">    api.purge = <span class="function"><span class="keyword">function</span>(<span class="params">pool, obj, state</span>)</span>&#123;</div><div class="line">        obj.active = <span class="literal">false</span>;</div><div class="line">        pool.purge.call(pool, obj, pool, state);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// spawn all objects</span></div><div class="line">    api.purgeAll = <span class="function"><span class="keyword">function</span>(<span class="params">pool, state, opt</span>)</span>&#123;</div><div class="line">        pool.objects.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                obj.active =  <span class="literal">false</span>;</div><div class="line">                pool.purge.call(pool, obj, pool, state);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> pool.objects;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update a pool object by a secs value</span></div><div class="line">    api.update = <span class="function"><span class="keyword">function</span> (<span class="params">pool, secs, state</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        state = state || &#123;&#125;; <span class="comment">// your projects state object</span></div><div class="line">        secs = secs &gt; pool.secsCap ? pool.secsCap : secs;</div><div class="line">        <span class="comment">// call beforeUpdate hook</span></div><div class="line">        pool.beforeUpdate.call(pool, pool, secs, state);</div><div class="line">        <span class="comment">// for each object</span></div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            <span class="keyword">if</span> (obj.active) &#123;</div><div class="line">                pool.update.call(pool, obj, pool, state, secs);</div><div class="line">                <span class="comment">// if disableLifespan featre</span></div><div class="line">                <span class="keyword">if</span>(pool.disableLifespan)&#123;</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    <span class="comment">// else use lifespan feature</span></div><div class="line">                    obj.lifespan -= secs;</div><div class="line">                    obj.lifespan = obj.lifespan &lt; <span class="number">0</span> ? <span class="number">0</span> : obj.lifespan;</div><div class="line">                    <span class="keyword">if</span> (obj.lifespan === <span class="number">0</span>) &#123;</div><div class="line">                        obj.active = <span class="literal">false</span>;</div><div class="line">                        <span class="comment">//pool.purge.call(pool, obj, pool, state);</span></div><div class="line">                        api.purge.call(pool, pool, obj, state);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// call afterUpdate hook</span></div><div class="line">        pool.afterUpdate.call(pool, pool, secs, state);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set all to inActive or active state</span></div><div class="line">    api.setActiveStateForAll = <span class="function"><span class="keyword">function</span> (<span class="params">pool, bool</span>) </span>&#123;</div><div class="line">        bool = bool === <span class="literal">undefined</span> ? <span class="literal">false</span> : bool;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            obj.active = bool;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// move the given object by its current heading and pps</span></div><div class="line">    api.moveByPPS = <span class="function"><span class="keyword">function</span> (<span class="params">obj, secs</span>) </span>&#123;</div><div class="line">        obj.x += <span class="built_in">Math</span>.cos(obj.heading) * obj.pps * secs;</div><div class="line">        obj.y += <span class="built_in">Math</span>.sin(obj.heading) * obj.pps * secs;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// check bounds for the given display object and canvas and return true if the object</span></div><div class="line">    <span class="comment">// is out of bounds and false if it is not.</span></div><div class="line">    api.checkBounds = <span class="function"><span class="keyword">function</span> (<span class="params">obj, canvas</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (obj.x &gt;= canvas.width || obj.x &lt; obj.w * <span class="number">-1</span> || obj.y &gt; canvas.height || obj.y &lt; obj.h * <span class="number">-1</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// bounding box</span></div><div class="line">    api.boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> utils.boundingBox(a.x, a.y, a.w, a.h, b.x, b.y, b.w, b.h);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// wrap an object to an area like a canvas</span></div><div class="line">    api.wrap = <span class="function"><span class="keyword">function</span>(<span class="params">obj, area, space</span>)</span>&#123;</div><div class="line">        area = area || &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span>, <span class="attr">width</span>: <span class="number">640</span>, <span class="attr">height</span>: <span class="number">480</span> &#125;;</div><div class="line">        space = space === <span class="literal">undefined</span> ? <span class="number">0</span> : space;</div><div class="line">        <span class="comment">// using new utils.wrapNumber method</span></div><div class="line">        obj.x = utils.wrapNumber(obj.x, <span class="number">0</span> - space, area.width + space);</div><div class="line">        obj.y = utils.wrapNumber(obj.y, <span class="number">0</span> - space, area.height + space);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get a collection of overlaying active objects from a pool, that overlap with the gievn object</span></div><div class="line">    api.getOverlaping = <span class="function"><span class="keyword">function</span>(<span class="params">obj, pool</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">        obj2,</div><div class="line">        overlap = [];</div><div class="line">        len = pool.objects.length;</div><div class="line">        <span class="keyword">if</span>(obj.active)&#123;</div><div class="line">            <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">                obj2 = pool.objects[i];</div><div class="line">                <span class="keyword">if</span>(obj != obj2 &amp;&amp; obj2.active)&#123;</div><div class="line">                    <span class="keyword">if</span>(utils.boundingBox(obj.x, obj.y, obj.w, obj.h, obj2.x, obj2.y, obj2.w, obj2.h))&#123;</div><div class="line">                         overlap.push(obj2);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                i += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> overlap;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get a current active count for a pool</span></div><div class="line">    api.getActiveCount = <span class="function"><span class="keyword">function</span>(<span class="params">pool</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> pool.objects.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">acc, obj</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> obj.active ? acc += <span class="number">1</span>: acc;</div><div class="line">        &#125;, <span class="number">0</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get active objects from a pool</span></div><div class="line">    api.getActiveObjects = <span class="function"><span class="keyword">function</span>(<span class="params">pool</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> pool.objects.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">acc, obj</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span>(obj.active)&#123;</div><div class="line">                acc.push(obj);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> acc;</div><div class="line">        &#125;, []);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get distance to object method</span></div><div class="line">    api.getDistanceToObj = <span class="function"><span class="keyword">function</span>(<span class="params">obj1, obj2</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> x1 = obj2.x + obj2.w / <span class="number">2</span>,</div><div class="line">        y1 = obj2.y + obj2.h / <span class="number">2</span>,</div><div class="line">        x2 = obj1.x + obj1.w / <span class="number">2</span>,</div><div class="line">        y2 = obj1.y + obj1.h / <span class="number">2</span>;</div><div class="line">        <span class="keyword">return</span> utils.distance(x1, y1, x2, y2);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// return public method</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="4-The-game-module"><a href="#4-The-game-module" class="headerlink" title="4 - The game module"></a>4 - The game module</h2><p>I then have the main game state module for this example, which is what I make that is typically used to create and update a main game state object. For this digital art example there are only two public methods of interest with this one where are the main create method that will create and return a new game state for the example, and then of course an update method for the game state object that is returned by the create method. These two public create and update methods will then be used later on in the main javaScript file that I will be getting to later in this post which is where I tie all of this together.</p>
<p>In this game module I make use of the object pool covered in an above section to create a single object pool of units. When doing so I give an options object, and this options object contains methods that will fire when a unit spawns, as well as when it updates over time. How I go about using this object pool will change from one example to the next, but for this digital art example I am just spawning all the units at once, and from there it is just a matter of changing what the current ‘mode’ is for a unit. That is that for this javaScript example I have a value in the data object of each display object in the object pool that is a key for a current method to use in a collection of so called unit modes. Each unit mode has an update method as well as an init mety9d that will be called to set things up with the data object of the display object when a mode change happens.</p>
<p>In revision 0 of this example I started out with just a simply move mode that just moves a current display object in the units pool by the current heading and pps values of the object. As of revision 4 of this example there is a rebirth mode as well as two methods that have to do with movement. One movement mode is still a fairly simple movement mode that just goes by whatever the current settings are, and the other move2 mode will adjust the heading and speed while moving. The rebirth mode as the name suggests will cause the unit to undergo a kind of transformation from a current set of settings to a new set of settings, nit just with heading and speed but also the number of points in the star, colors, size, and so forth.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gameMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line"><span class="comment">/*  HARD CODED SETTINGS */</span></div><div class="line"> </div><div class="line">    <span class="keyword">var</span> UNIT_COUNT = <span class="number">20</span>,</div><div class="line">    <span class="comment">//UNIT_COLORS = ['rgb(64,0,32)', 'rgb(64,0,64)', 'rgb(64,0,128)', 'rgb(64,0,255)', 'black', 'white'], </span></div><div class="line">    UNIT_COLORS =  [<span class="string">'red'</span>, <span class="string">'green'</span>, <span class="string">'blue'</span>, <span class="string">'pink'</span>, <span class="string">'purple'</span>, <span class="string">'orange'</span>, <span class="string">'black'</span>],</div><div class="line">    UNIT_ALPHA = <span class="number">0.6</span>,    <span class="comment">// alpha transparency</span></div><div class="line">    UNIT_SIZE_MIN = <span class="number">32</span>,  <span class="comment">// size min and max values</span></div><div class="line">    UNIT_SIZE_MAX = <span class="number">256</span>,</div><div class="line">    UNIT_PPS_MIN = <span class="number">16</span>,   <span class="comment">// Pixles Per Second min and max values</span></div><div class="line">    UNIT_PPS_MAX = <span class="number">128</span>,</div><div class="line">    UNIT_PPSPS = <span class="number">128</span>,    <span class="comment">// Pixles Per Second Per Second used in mode 'move2'</span></div><div class="line">    UNIT_NPR_RATIO_MIN = <span class="number">0.03</span>, <span class="comment">// Unit New Point Radius Min + Max values used for new points to create 'unsteady star' effect</span></div><div class="line">    UNIT_NPR_RATIO_MAX = <span class="number">0.06</span>,</div><div class="line">    UNIT_MOVE_MODES = [<span class="string">'move'</span>, <span class="string">'move2'</span>];</div><div class="line"> </div><div class="line"><span class="comment">/*  HELPERS */</span></div><div class="line"> </div><div class="line">    <span class="keyword">var</span> changeMode = <span class="function"><span class="keyword">function</span>(<span class="params">unit, modeKey, pool, game</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> uDat = unit.data;</div><div class="line">        uDat.mode = modeKey;</div><div class="line">        <span class="keyword">var</span> modeObj = UNIT_MODES[uDat.mode];</div><div class="line">        uDat.modeTime = <span class="number">0</span>;</div><div class="line">        uDat.lastRoll = <span class="number">0</span>;</div><div class="line">        <span class="comment">// call init hook of new mode obj</span></div><div class="line">        modeObj.init.call(unit, unit, pool, game);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// random unit color helper</span></div><div class="line">    <span class="keyword">var</span> randomColor = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> UNIT_COLORS[ <span class="built_in">Math</span>.floor(UNIT_COLORS.length * <span class="built_in">Math</span>.random()) ];</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// random heading helper</span></div><div class="line">    <span class="keyword">var</span> randomHeading = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="keyword">return</span> <span class="built_in">Math</span>.PI * <span class="number">2</span> * <span class="built_in">Math</span>.random();</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// random ppx helper</span></div><div class="line">    <span class="keyword">var</span> randomPPS = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="keyword">return</span> UNIT_PPS_MIN + <span class="built_in">Math</span>.round((UNIT_PPS_MAX - UNIT_PPS_MIN) * <span class="built_in">Math</span>.random());</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// SIZE</span></div><div class="line">    <span class="comment">// get a size by a per value 0-1</span></div><div class="line">    <span class="keyword">var</span> getSizeByPer = <span class="function"><span class="keyword">function</span>(<span class="params">per</span>)</span>&#123;</div><div class="line">        per = per === <span class="literal">undefined</span> ? <span class="number">1</span> : per;</div><div class="line">        per = per &lt; <span class="number">0</span> ? <span class="number">0</span> : per;</div><div class="line">        per = per &gt; <span class="number">1</span> ? <span class="number">1</span> : per;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.round(UNIT_SIZE_MIN + (UNIT_SIZE_MAX - UNIT_SIZE_MIN) * per);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get a random size</span></div><div class="line">    <span class="keyword">var</span> getRandomSize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> getSizeByPer(<span class="built_in">Math</span>.random());</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// to random move mode helper</span></div><div class="line">    <span class="keyword">var</span> toRandomMoveMode = <span class="function"><span class="keyword">function</span>(<span class="params">unit, pool, game</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> nextMoveMode = UNIT_MOVE_MODES[ <span class="built_in">Math</span>.floor( UNIT_MOVE_MODES.length * <span class="built_in">Math</span>.random() ) ];</div><div class="line">        changeMode(unit, nextMoveMode, pool, game);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line"><span class="comment">/*  UNITS MODES AND OPTIONS */</span></div><div class="line"> </div><div class="line">    <span class="comment">// unit modes</span></div><div class="line">    <span class="keyword">var</span> UNIT_MODES = &#123;&#125;;</div><div class="line">    <span class="comment">// in rebirth mode the unit will translation from one set of values to another</span></div><div class="line">    UNIT_MODES.rebirth = &#123;</div><div class="line">        <span class="attr">init</span>: <span class="function"><span class="keyword">function</span>(<span class="params">unit, pool, game</span>)</span>&#123;</div><div class="line">            unit.data.oldSize = unit.data.size;</div><div class="line">            unit.data.newSize = getRandomSize();</div><div class="line">            unit.data.sizeDelta = <span class="number">-100</span>; <span class="comment">// size delta</span></div><div class="line">            unit.data.cx = unit.x + unit.w / <span class="number">2</span>;</div><div class="line">            unit.data.cy = unit.y + unit.h / <span class="number">2</span>;</div><div class="line">            <span class="comment">// set frame to zero in order to keep a bug #0 from happening</span></div><div class="line">            <span class="comment">// This is something I might want to look into more at some point maybe</span></div><div class="line">            <span class="keyword">var</span> points = unit.data.points;</div><div class="line">            points.frame = <span class="number">0</span>;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params">unit, pool, game, secs</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> uDat = unit.data;</div><div class="line">            <span class="comment">// update size</span></div><div class="line">            uDat.size += uDat.sizeDelta * secs;</div><div class="line">            <span class="comment">// clamp size</span></div><div class="line">            uDat.size = uDat.size &lt; <span class="number">0</span> ? <span class="number">0</span> : uDat.size;</div><div class="line">            uDat.size = uDat.size &gt; uDat.newSize &amp;&amp; uDat.sizeDelta &gt; <span class="number">0</span> ? uDat.newSize : uDat.size;</div><div class="line">            <span class="keyword">var</span> size = uDat.size;</div><div class="line">            <span class="comment">// update disp object w and h to size</span></div><div class="line">            unit.w = size;</div><div class="line">            unit.h = size;</div><div class="line">            unit.x = uDat.cx - size / <span class="number">2</span>;</div><div class="line">            unit.y = uDat.cy - size / <span class="number">2</span>;</div><div class="line">            <span class="keyword">if</span>(uDat.size === <span class="number">0</span>)&#123;</div><div class="line">                uDat.sizeDelta = <span class="number">100</span>;</div><div class="line">                <span class="comment">// new heading and speed</span></div><div class="line">                unit.heading = randomHeading();</div><div class="line">                unit.pps = randomPPS();</div><div class="line">                unit.data.fillStyle = randomColor();</div><div class="line">                unit.data.pointsOpt = &#123;</div><div class="line">                    <span class="attr">fill</span>: randomColor()</div><div class="line">                &#125;;</div><div class="line">                <span class="comment">// new points</span></div><div class="line">                unit.data.points = starMod.unsteady(&#123;</div><div class="line">                    <span class="attr">pointCount</span>: <span class="number">5</span> + <span class="built_in">Math</span>.round(<span class="number">5</span> * <span class="built_in">Math</span>.random()),</div><div class="line">                    <span class="attr">radius</span> : size / <span class="number">2</span>,</div><div class="line">                    <span class="attr">radiusInner</span>: size / <span class="number">4</span>,</div><div class="line">                    <span class="attr">radianAjust</span>: unit.heading,</div><div class="line">                    <span class="attr">nprMin</span>: <span class="built_in">Math</span>.round(UNIT_NPR_RATIO_MIN * uDat.newSize), <span class="comment">//UNIT_NPR_MIN,</span></div><div class="line">                    nprMax: <span class="built_in">Math</span>.round(UNIT_NPR_RATIO_MAX * uDat.newSize) <span class="comment">//UNIT_NPR_MAX</span></div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(uDat.sizeDelta &gt; <span class="number">0</span>)&#123;</div><div class="line">                size = uDat.size = uDat.size &gt; uDat.newSize ? uDat.newSize : uDat.size;</div><div class="line">            &#125;</div><div class="line">            unit.data.points = starMod.resizeUnsteady(uDat.points, uDat.size, <span class="number">2</span>, <span class="number">4</span>);</div><div class="line">            <span class="keyword">if</span>(size === uDat.newSize &amp;&amp; uDat.sizeDelta &gt; <span class="number">0</span>)&#123;</div><div class="line">                toRandomMoveMode(unit, pool, game)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// a more advanced move2 mode where the heading and pps values will change over time</span></div><div class="line">    UNIT_MODES.move2 = &#123;</div><div class="line">        <span class="attr">init</span>: <span class="function"><span class="keyword">function</span>(<span class="params">unit, pool, game</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> uDat = unit.data;</div><div class="line">            uDat.oldHeading = unit.heading;</div><div class="line">            uDat.targetHeading = randomHeading();</div><div class="line">            uDat.targetDir = utils.shortestAngleDirection(unit.heading, uDat.targetHeading);</div><div class="line">            uDat.targetDist = utils.angleDistance(unit.heading, uDat.targetHeading, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">            uDat.radiansPerSec = <span class="built_in">Math</span>.PI / <span class="number">180</span> * (<span class="number">10</span> + <span class="number">80</span> * <span class="built_in">Math</span>.random());</div><div class="line">            uDat.headingSecs = <span class="number">0</span>;</div><div class="line">            uDat.targetPPS = randomPPS();</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params">unit, pool, game, secs</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> uDat = unit.data;</div><div class="line">            uDat.headingSecs += secs;</div><div class="line">            <span class="keyword">var</span> totalSecs = uDat.targetDist / uDat.radiansPerSec;</div><div class="line">            <span class="keyword">var</span> per = uDat.headingSecs / totalSecs;</div><div class="line">            per = per &gt; <span class="number">1</span> ? <span class="number">1</span> : per;</div><div class="line">            unit.heading = uDat.oldHeading + uDat.targetDist * uDat.targetDir * per;</div><div class="line">            <span class="keyword">if</span>(per === <span class="number">1</span>)&#123;</div><div class="line">                toRandomMoveMode(unit, pool, game);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// incress or decress target pps</span></div><div class="line">            <span class="keyword">if</span>(unit.pps &lt; uDat.targetPPS)&#123;</div><div class="line">                unit.pps += UNIT_PPSPS * secs;</div><div class="line">                unit.pps = unit.pps &gt; uDat.targetPPS ? uDat.targetPPS : unit.pps;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(unit.pps &gt; uDat.targetPPS)&#123;</div><div class="line">                unit.pps -= UNIT_PPSPS * secs;</div><div class="line">                unit.pps = unit.pps &lt; uDat.targetPPS ? uDat.targetPPS : unit.pps;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// move and wrap</span></div><div class="line">            poolMod.moveByPPS(unit, secs);</div><div class="line">            poolMod.wrap(unit, game.sm.canvas, unit.w);</div><div class="line">            <span class="comment">// update only in move mode</span></div><div class="line">            starMod.unsteady.update(unit.data.points, secs);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// a simple move mode where the unit will just move by current PPS and heading values</span></div><div class="line">    UNIT_MODES.move = &#123;</div><div class="line">        <span class="attr">init</span>: <span class="function"><span class="keyword">function</span>(<span class="params">unit, pool, game</span>)</span>&#123;</div><div class="line">            <span class="comment">//var uDat = unit.data;</span></div><div class="line">            <span class="comment">//uDat.sizePer = getSizePer(unit.data.size);</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params">unit, pool, game, secs</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> uDat = unit.data;</div><div class="line">            <span class="comment">// move and wrap</span></div><div class="line">            poolMod.moveByPPS(unit, secs);</div><div class="line">            poolMod.wrap(unit, game.sm.canvas, unit.w);</div><div class="line">            <span class="comment">// update only in move mode</span></div><div class="line">            starMod.unsteady.update(uDat.points, secs);</div><div class="line">            <span class="comment">// switch to another move mode after some time</span></div><div class="line">            <span class="keyword">if</span>(uDat.modeTime &gt;= <span class="number">5</span>)&#123;</div><div class="line">               toRandomMoveMode(unit, pool, game);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// the unit pool options object</span></div><div class="line">    <span class="keyword">var</span> UNIT_OPTIONS = &#123;</div><div class="line">        <span class="attr">count</span>: UNIT_COUNT,</div><div class="line">        <span class="attr">disableLifespan</span>: <span class="literal">true</span></div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// spawn a unit</span></div><div class="line">    UNIT_OPTIONS.spawn = <span class="function"><span class="keyword">function</span> (<span class="params">unit, pool, game, spawnOpt</span>) </span>&#123;</div><div class="line">        spawnOpt = spawnOpt || &#123;&#125;;</div><div class="line">        <span class="keyword">var</span> canvas = game.sm.canvas;</div><div class="line">        <span class="comment">// mode of the unit</span></div><div class="line">        unit.data.mode = spawnOpt.mode || UNIT_MOVE_MODES[<span class="number">0</span>];</div><div class="line">        unit.data.modeTime = <span class="number">0</span>; <span class="comment">// the total amount of time the unit has been in the current mode</span></div><div class="line">        unit.data.lastRoll = <span class="number">0</span>; <span class="comment">// the amount of time sense the last roll (used for mode switching)</span></div><div class="line">        <span class="comment">// colors</span></div><div class="line">        unit.data.fillStyle = randomColor();</div><div class="line">        unit.data.pointsOpt = &#123;</div><div class="line">            <span class="attr">fill</span>: randomColor()</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// alpha</span></div><div class="line">        unit.data.alpha = UNIT_ALPHA;</div><div class="line">        <span class="comment">// size</span></div><div class="line">        <span class="keyword">var</span> size = unit.data.size = getRandomSize();</div><div class="line">        unit.w = size;</div><div class="line">        unit.h = size;</div><div class="line">        <span class="comment">// start position</span></div><div class="line">        unit.x = <span class="built_in">Math</span>.floor( canvas.width * <span class="built_in">Math</span>.random());</div><div class="line">        unit.y = <span class="built_in">Math</span>.floor( canvas.height * <span class="built_in">Math</span>.random());</div><div class="line">        <span class="comment">// heading</span></div><div class="line">        unit.heading = randomHeading();</div><div class="line">        <span class="comment">// speed</span></div><div class="line">        unit.pps = randomPPS();</div><div class="line">        <span class="comment">// start points for the unit</span></div><div class="line">        unit.data.points = starMod.unsteady(&#123;</div><div class="line">            <span class="attr">pointCount</span>: <span class="number">5</span> + <span class="built_in">Math</span>.round(<span class="number">5</span> * <span class="built_in">Math</span>.random()),</div><div class="line">            <span class="attr">radius</span> : size / <span class="number">2</span>,</div><div class="line">            <span class="attr">radiusInner</span>: size / <span class="number">4</span>,</div><div class="line">            <span class="attr">radianAjust</span>: unit.heading,</div><div class="line">            <span class="attr">nprMin</span>: <span class="built_in">Math</span>.round(UNIT_NPR_RATIO_MIN * size),</div><div class="line">            <span class="attr">nprMax</span>: <span class="built_in">Math</span>.round(UNIT_NPR_RATIO_MAX * size)</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// chance mode</span></div><div class="line">        changeMode(unit, unit.data.mode, pool, game);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update a unit</span></div><div class="line">    UNIT_OPTIONS.update = <span class="function"><span class="keyword">function</span> (<span class="params">unit, pool, game, secs</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> uDat = unit.data;</div><div class="line">        <span class="comment">// update mode time and last roll</span></div><div class="line">        uDat.modeTime += secs;</div><div class="line">        uDat.lastRoll += secs;</div><div class="line">        <span class="comment">// crude yet effective mode switching</span></div><div class="line">        <span class="keyword">if</span>(uDat.modeTime &gt;= <span class="number">3</span> &amp; uDat.lastRoll &gt;= <span class="number">2</span>)&#123;</div><div class="line">            <span class="keyword">var</span> roll = <span class="built_in">Math</span>.random();</div><div class="line">            <span class="keyword">if</span>(roll &gt; <span class="number">0.5</span>)&#123;</div><div class="line">                <span class="keyword">if</span>(uDat.mode === <span class="string">'move'</span> || uDat.mode === <span class="string">'move2'</span>)&#123;</div><div class="line">                    changeMode(unit, <span class="string">'rebirth'</span>, pool, game);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            uDat.lastRoll = <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> modeKey = uDat.mode,</div><div class="line">        modeObj = UNIT_MODES[modeKey];</div><div class="line">        <span class="comment">// call the current mode update method</span></div><div class="line">        modeObj.update(unit, pool, game, secs);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// purge a unit</span></div><div class="line">    UNIT_OPTIONS.purge = <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, game</span>) </span>&#123;&#125;;</div><div class="line">    <span class="comment">// what to do after all the objects have been updated</span></div><div class="line">    UNIT_OPTIONS.afterUpdate = <span class="function"><span class="keyword">function</span>(<span class="params">pool, secs, game</span>)</span>&#123;&#125;;</div><div class="line"> </div><div class="line"><span class="comment">/*  PUBLIC API */</span></div><div class="line"> </div><div class="line">    <span class="comment">// the public api</span></div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// public create method</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">var</span> game = &#123;</div><div class="line">            <span class="attr">sm</span>: opt.sm || &#123;&#125;,</div><div class="line">            <span class="attr">units</span>: poolMod.create(UNIT_OPTIONS)</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// spawn all for starters</span></div><div class="line">        poolMod.spawnAll(game.units, game, &#123;&#125;);</div><div class="line">        <span class="keyword">return</span> game;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// public update method</span></div><div class="line">    api.update = <span class="function"><span class="keyword">function</span> (<span class="params">game, secs</span>) </span>&#123;</div><div class="line">        <span class="comment">// update units</span></div><div class="line">        poolMod.update(game.units, secs, sm.game);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return the public API</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="5-The-draw-module"><a href="#5-The-draw-module" class="headerlink" title="5 - The draw module"></a>5 - The draw module</h2><p>I then have a draw module that contains all the methods that I will be using to draw the current state of the game object to a canvas element.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> draw = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> DEFAULT_LINE_WIDTH = <span class="number">6</span>,</div><div class="line">    DEFAULT_STROKE_STYLE = <span class="string">'black'</span>,</div><div class="line">    DEFAULT_FILL_STYLE = <span class="string">'white'</span>,</div><div class="line">    DEFAULT_TEXT_COLOR = <span class="string">'black'</span>,</div><div class="line">    DEFAULT_COLOR_STOPS = [</div><div class="line">       [<span class="number">1</span>, <span class="string">'red'</span>],</div><div class="line">       [<span class="number">2</span>, <span class="string">'blue'</span>]</div><div class="line">    ];</div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="keyword">var</span> createBackground = <span class="function"><span class="keyword">function</span>(<span class="params">ctx, canvas, opt</span>)</span>&#123;</div><div class="line">        <span class="comment">// options</span></div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.angle = opt.angle === <span class="literal">undefined</span> ? <span class="built_in">Math</span>.PI * <span class="number">0.25</span>: opt.angle;</div><div class="line">        opt.radius = opt.radius === <span class="literal">undefined</span> ? <span class="number">150</span> : opt.radius;</div><div class="line">        <span class="comment">// create locals</span></div><div class="line">        <span class="keyword">var</span> cx = canvas.width / <span class="number">2</span>,</div><div class="line">        cy = canvas.height / <span class="number">2</span>,</div><div class="line">        dx = <span class="built_in">Math</span>.cos(opt.angle) * opt.radius,</div><div class="line">        dy = <span class="built_in">Math</span>.sin(opt.angle) * opt.radius,</div><div class="line">        sx = cx - dx,</div><div class="line">        sy = cy - dy,</div><div class="line">        ex = cx + dx,</div><div class="line">        ey = cy + dy;</div><div class="line">        <span class="comment">// create gradient</span></div><div class="line">        <span class="keyword">var</span> gradient = ctx.createLinearGradient(sx, sy, ex, ey);</div><div class="line">        <span class="comment">// Add color stops</span></div><div class="line">        <span class="keyword">var</span> colorStops = opt.colorStops || DEFAULT_COLOR_STOPS;</div><div class="line">        colorStops.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">colorStop</span>)</span>&#123;</div><div class="line">            gradient.addColorStop(colorStop[<span class="number">0</span>], colorStop[<span class="number">1</span>]);</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// return gradiant</span></div><div class="line">        <span class="keyword">return</span> gradient;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// draw points</span></div><div class="line">    <span class="keyword">var</span> drawPoints = <span class="function"><span class="keyword">function</span>(<span class="params">obj, ctx, canvas</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> points = obj.data.points || <span class="literal">null</span>,</div><div class="line">        cx = obj.x + obj.w / <span class="number">2</span>,</div><div class="line">        cy = obj.y + obj.h / <span class="number">2</span>;</div><div class="line">        <span class="keyword">if</span>(points)&#123;</div><div class="line">            api.points(ctx, points, cx, cy, obj.data.pointsOpt);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// PUBLIC API METHODS</span></div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// draw the background</span></div><div class="line">    api.background = <span class="function"><span class="keyword">function</span> (<span class="params">sm, ctx, canvas</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> bg = createBackground(ctx, canvas, sm.background);</div><div class="line">        ctx.fillStyle = bg;</div><div class="line">        ctx.fillRect(<span class="number">-1</span>, <span class="number">-1</span>, canvas.width + <span class="number">2</span>, canvas.height + <span class="number">2</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// draw the pool</span></div><div class="line">    api.pool = <span class="function"><span class="keyword">function</span> (<span class="params">game, ctx, canvas</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> pool = game.units;</div><div class="line">        ctx.lineWidth = DEFAULT_LINE_WIDTH;</div><div class="line">        pool.objects.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">            ctx.fillStyle = obj.data.fillStyle || DEFAULT_FILL_STYLE;</div><div class="line">            ctx.strokeStyle = obj.data.strokeStyle || DEFAULT_STROKE_STYLE;</div><div class="line">            ctx.globalAlpha = obj.data.alpha === <span class="literal">undefined</span> ? <span class="number">1</span>: obj.data.alpha;</div><div class="line">            <span class="comment">// if the object is active</span></div><div class="line">            <span class="keyword">if</span> (obj.active) &#123;</div><div class="line">                <span class="comment">// draw base area</span></div><div class="line">                <span class="keyword">var</span> cx = obj.x + obj.w / <span class="number">2</span>,</div><div class="line">                cy = obj.y + obj.h / <span class="number">2</span>;</div><div class="line">                ctx.beginPath();</div><div class="line">                ctx.arc(cx, cy, (obj.w + obj.h) / <span class="number">2</span> / <span class="number">2</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">                ctx.fill();</div><div class="line">                ctx.stroke();</div><div class="line">                <span class="comment">// draw any points</span></div><div class="line">                drawPoints(obj, ctx, canvas);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        ctx.globalAlpha = <span class="number">1</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// new draw points</span></div><div class="line">    api.points = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, points, cx, cy, opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        ctx.save();</div><div class="line">        ctx.translate(cx, cy);</div><div class="line">        points.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">pointArray</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> len = pointArray.length,</div><div class="line">            close = opt.close === <span class="literal">undefined</span> ? <span class="literal">true</span> : opt.close,</div><div class="line">            fill = opt.fill === <span class="literal">undefined</span> ? DEFAULT_FILL_STYLE : opt.fill,</div><div class="line">            stroke = opt.stroke === <span class="literal">undefined</span> ? DEFAULT_STROKE_STYLE : opt.stroke,</div><div class="line">            lineWidth = opt.lineWidth === <span class="literal">undefined</span> ? DEFAULT_LINE_WIDTH : opt.lineWidth,</div><div class="line">            el,</div><div class="line">            i = <span class="number">2</span>;</div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.moveTo(pointArray[<span class="number">0</span>], pointArray[<span class="number">1</span>]);</div><div class="line">            <span class="keyword">while</span> (i &lt; len) &#123;</div><div class="line">                el = pointArray[i];</div><div class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> el === <span class="string">'number'</span>) &#123;</div><div class="line">                    ctx.lineTo(el, pointArray[i + <span class="number">1</span>]);</div><div class="line">                    i += <span class="number">2</span>;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">var</span> parts = el.split(<span class="string">':'</span>);</div><div class="line">                    <span class="keyword">if</span> (parts[<span class="number">0</span>] === <span class="string">'close'</span>) &#123;</div><div class="line">                        close = parts[<span class="number">1</span>] === <span class="string">'true'</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">if</span> (parts[<span class="number">0</span>] === <span class="string">'stroke'</span>) &#123;</div><div class="line">                        stroke = parts[<span class="number">1</span>] || <span class="literal">false</span>;</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">if</span> (parts[<span class="number">0</span>] === <span class="string">'fill'</span>) &#123;</div><div class="line">                        fill = parts[<span class="number">1</span>] || <span class="literal">false</span>;</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">if</span> (parts[<span class="number">0</span>] === <span class="string">'lineWidth'</span>) &#123;</div><div class="line">                        lineWidth = parts[<span class="number">1</span>] || <span class="number">1</span>;</div><div class="line">                    &#125;</div><div class="line">                    i += <span class="number">1</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            ctx.lineWidth = lineWidth;</div><div class="line">            <span class="keyword">if</span> (close) &#123;</div><div class="line">                ctx.closePath();</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (fill) &#123;</div><div class="line">                ctx.fillStyle = fill;</div><div class="line">                ctx.fill();</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (stroke) &#123;</div><div class="line">                ctx.strokeStyle = stroke;</div><div class="line">                ctx.stroke();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        ctx.restore();</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// draw version number</span></div><div class="line">    api.ver = <span class="function"><span class="keyword">function</span> (<span class="params">sm, ctx, canvas</span>) </span>&#123;</div><div class="line">        ctx.fillStyle = DEFAULT_TEXT_COLOR;</div><div class="line">        ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">        ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">        ctx.font = <span class="string">'12px arial'</span>;</div><div class="line">        ctx.fillText(<span class="string">'version: '</span> + sm.ver, <span class="number">5</span>, canvas.height - <span class="number">15</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return public api</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h2 id="6-The-main-javaScript-file"><a href="#6-The-main-javaScript-file" class="headerlink" title="6 - The main javaScript file"></a>6 - The main javaScript file</h2><p>Now that I have everything that I need to create a state object, update that state object, and draw it to a canvas element I will just need a little more javaScript to make use of all of this in the form of a main javaScript file.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// state object</span></div><div class="line"><span class="keyword">var</span> canvasObj = utils.createCanvas(&#123;</div><div class="line">        <span class="attr">width</span>: <span class="number">640</span>,</div><div class="line">        <span class="attr">height</span>: <span class="number">480</span></div><div class="line">    &#125;);</div><div class="line"><span class="comment">// main sm object</span></div><div class="line"><span class="keyword">var</span> sm = &#123;</div><div class="line">    <span class="attr">ver</span>: <span class="string">'r6'</span>,</div><div class="line">    <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    <span class="attr">fps</span>: <span class="number">30</span>,</div><div class="line">    <span class="attr">game</span>: <span class="literal">null</span>,</div><div class="line">    <span class="attr">ctx</span>: canvasObj.ctx,</div><div class="line">    <span class="attr">canvas</span>: canvasObj.canvas,</div><div class="line">    <span class="attr">background</span>: &#123;</div><div class="line">       <span class="attr">angle</span>: <span class="number">1</span>,</div><div class="line">       <span class="attr">degreesPerSec</span>: <span class="number">5</span>,</div><div class="line">       <span class="attr">ri</span>: <span class="number">0</span>,</div><div class="line">       <span class="attr">radius</span>: <span class="number">100</span>,</div><div class="line">       <span class="attr">colorStops</span>: [</div><div class="line">           [<span class="number">0</span>, <span class="string">'white'</span>],</div><div class="line">           [<span class="number">0.5</span>, <span class="string">'green'</span>],</div><div class="line">           [<span class="number">1</span>, <span class="string">'white'</span>]</div><div class="line">       ]</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// set up game object</span></div><div class="line">sm.game = gameMod.create(&#123;</div><div class="line">        <span class="attr">sm</span>: sm</div><div class="line">    &#125;);</div><div class="line"><span class="comment">// basic app loop</span></div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - sm.lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span> (secs &gt;= <span class="number">1</span> / sm.fps) &#123;</div><div class="line">        gameMod.update(sm.game, secs);</div><div class="line">        draw.background(sm, sm.ctx, sm.canvas);</div><div class="line">        draw.pool(sm.game, sm.ctx);</div><div class="line">        draw.ver(sm, sm.ctx, sm.canvas);</div><div class="line">        sm.lt = now;</div><div class="line">        <span class="comment">// rotation of background</span></div><div class="line">        <span class="keyword">var</span> bg = sm.background; </div><div class="line">        bg.angle += <span class="built_in">Math</span>.PI / <span class="number">180</span> * bg.degreesPerSec * secs;</div><div class="line">        bg.angle = utils.mod(bg.angle, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">        <span class="comment">// radius</span></div><div class="line">        bg.ri += <span class="number">5</span> * secs;</div><div class="line">        bg.ri %= <span class="number">100</span>;</div><div class="line">        <span class="keyword">var</span> per = bg.ri / <span class="number">100</span>,</div><div class="line">        bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - per) / <span class="number">0.5</span>;</div><div class="line">        bg.radius = <span class="number">400</span> - <span class="number">350</span> * bias;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="7-Conclusion"><a href="#7-Conclusion" class="headerlink" title="7 - Conclusion"></a>7 - Conclusion</h2><p>So then I am glad that I followed threw with this project and have completed it by working out the core of the idea first, and also completed just the two features that I hand planed out for this. Of course I could just keep going with this project even further adding yet even more features that have come to mind for the project in terms of other movement modes, and well as whole other kinds of modes that have to do with completely different behavior all together. There is more that could be done with how to go about switching between modes, and also more advanced features for the background, colors, and so forth. However I did only want to spend at most a few days on this and then move on to the next project, which is what I will be doing.</p>
<p>So then the current plans with this at the time of this writing at least is to just do a little clean up with the code in order to help make the over all project a little easier to follow. I fixed all the bugs that I know of at this point as of revision 4 of this project, but I am sure there might be at least one or two more maybe. So then for the most part I intended to just maintain what the project all ready is rather than add more to it, unless of course something happens that might change that for me.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2022/01/10/js-javascript-example-digital-art-unsteady-stars/" data-id="cl9srjbkk00vu0gv1ofsfhmob" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2022/01/10/js-javascript-example-digital-art-unsteady-stars/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/01/14/lodash_collection/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          lodash collection methods, and working with collection in general with javaScript
        
      </div>
    </a>
  
  
    <a href="/2022/01/07/lodash_tap/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Tap off of a chain in lodash with the lodash tap method</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2022/01/10/js-javascript-example-digital-art-unsteady-stars/index.html';
    this.page.identifier = '950';
    this.page.title = 'Unsteady Stars Digital Art javaScript example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.5px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.5px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.5px;">angular</a> <a href="/tags/animation/" style="font-size: 12px;">animation</a> <a href="/tags/automation/" style="font-size: 12px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.5px;">backbone</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.5px;">canvas</a> <a href="/tags/corejs/" style="font-size: 13px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.5px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.5px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.5px;">express</a> <a href="/tags/games/" style="font-size: 17px;">games</a> <a href="/tags/git/" style="font-size: 13px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 12px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.5px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.5px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.5px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.5px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.5px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.5px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.5px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.5px;">python</a> <a href="/tags/statistics/" style="font-size: 14px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/10/28/threejs-examples-create-path-tool/">Create Path tool threejs example</a>
          </li>
        
          <li>
            <a href="/2022/10/21/threejs-curve-quadratic-bezier-curve3/">Quadratic Bezier Curves in threejs</a>
          </li>
        
          <li>
            <a href="/2022/10/14/threejs-examples-text-plane/">Text Plane Module threejs example</a>
          </li>
        
          <li>
            <a href="/2022/10/07/threejs-buffer-geometry-compute-bounding-box/">Computing Bounding Box for buffer geometries in threejs</a>
          </li>
        
          <li>
            <a href="/2022/09/30/threejs-examples-animation-loop-module/">Animation Loop Framework threejs project example</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2022/01/10/js-javascript-example-digital-art-unsteady-stars/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>