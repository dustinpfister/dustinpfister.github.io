<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>New Object Pool library javaScript example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2022/01/24/js-javascript-example-pool-normalized/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Looks like I will be continuing to expand on my collection of javaScript examples posts with a new examples as it just seems like the thing to do once I write about the basics of javaScript. This week">
<meta property="og:type" content="article">
<meta property="og:title" content="New Object Pool library javaScript example">
<meta property="og:url" content="https://dustinpfister.github.io/2022/01/24/js-javascript-example-pool-normalized/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="Looks like I will be continuing to expand on my collection of javaScript examples posts with a new examples as it just seems like the thing to do once I write about the basics of javaScript. This week">
<meta property="og:updated_time" content="2022-01-27T20:52:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="New Object Pool library javaScript example">
<meta name="twitter:description" content="Looks like I will be continuing to expand on my collection of javaScript examples posts with a new examples as it just seems like the thing to do once I write about the basics of javaScript. This week">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS-Examples</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas-Examples</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-js-javascript-example-pool-normalized" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/01/24/js-javascript-example-pool-normalized/" class="article-date"> Published:
  <time datetime="2022-01-24T16:43:00.000Z" itemprop="datePublished">2022-01-24</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2022/01/24/js-javascript-example-pool-normalized/" class="article-date"> Modified:
  <time datetime="2022-01-27T20:52:40.000Z" itemprop="dateModified">2022-01-27</time>
</a>

    <span class="article-date">V1.23</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      New Object Pool library javaScript example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>Looks like I will be continuing to expand on my collection of <a href="/2021/04/02/js-javascript-example/">javaScript examples</a> posts with a new examples as it just seems like the thing to do once I write about the <a href="/2018/11/27/js-getting-started/">basics of javaScript</a>. This week the example that I made is a new object pool library that I made for a recent digital art example earlier this month. After doing so I thought that this new object pool library deserves a <a href="https://github.com/dustinpfister/test_vjs/tree/master/for_post/js-javascript-example-pool-normalized" target="_blank" rel="external">for post folder of its own in my test vjs repository</a>, and I should also maybe mack at least one if not more examples that make use of this library when it comes to making additional javaScript projects.</p>
<p>This is not the first time I made this sort of library that I then end up using in one or more additional projects, in fact this is still very much based off of what I started in my <a href="/2020/07/20/canvas-example-object-pool/">canvas examples series post on this subject of object pools</a>. If you are not sure what an <a href="https://en.wikipedia.org/wiki/Object_pool_pattern" target="_blank" rel="external">object pool is</a> the general idea is more or less as the term descries, it is just a system of creating a pool of objects that are then used over and over again, rather than creating and destroying objects as needed.</p>
<p>One major improvement that I wanted to make with this object pool library is how the object state is stored as well as rendered. The older object pool module that I based this on centered around the idea of having the x and y values of an object refer to the upper left corner of a display object. In this pool I wanted to change things with the various methods so that the x and y values refer to the center point of a display object actually, and then things are figured out from there. While I was at it I started to make some additional improvements on top of that of course though. As I keep copying the source code of the original library over from project to project I have made little additions here and there with this, one of which is a wrap object method which is a typical methods that is needed for a library such as thins, however for this version of the library I also added a clamp method.</p>
<a id="more"></a>
<h2 id="1-The-pool-normalized-lib"><a href="#1-The-pool-normalized-lib" class="headerlink" title="1 - The pool normalized lib"></a>1 - The pool normalized lib</h2><p>So then in this section I will want to start out with the state of the source code of the object pool library itself before continuing with additional dependencies and files to make use of this library for the sake of having at least one or more demos of it. The public methods of this library can be divided into three categorizes on create methods, pool methods, and disp object methods. That is methods that are used to create a single display object, or a pool of such objects when it comes to create methods. Then there are methods that will do something with a whole pool of objects such as get a count of how many in the pool are currently active, while display object methods are for figuring out something with just one display object.</p>
<p>The main method of interest for getting started with using this object pool library would be to use the main create method. When doing so I can pass an options object that will contain all the logic that is used to update the pool for each active display object, as well as what to do when an object is spawned, and purged, or rather set active and inactive as objects are never created or destroyed once that main object pool object is created.</p>
<p>Conditions are not set when creating the object pool as to go about spawning one or more objects from the pool, this is something that is to be determined when creating the over all larger app that will make use of this. Inside the body of a main app loop, the update method of a state object or whatever the case may be is where I will want to call the main spawn method of the module, when doing so I pass the object pool, along with a state object that I want to use and an additional spawn options object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> poolMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// Public API</span></div><div class="line">    <span class="keyword">var</span> api = &#123;</div><div class="line">        <span class="attr">ver</span>: <span class="string">'r2'</span></div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get next inactive object in the given pool</span></div><div class="line">    <span class="keyword">var</span> getInactive = <span class="function"><span class="keyword">function</span> (<span class="params">pool</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">//  CREATE METHODS</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line">    <span class="comment">// create a single display object</span></div><div class="line">    <span class="keyword">var</span> createDisp = api.createDisp = <span class="function"><span class="keyword">function</span>(<span class="params">opt, i</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">active</span>: <span class="literal">false</span>,</div><div class="line">            <span class="attr">pool</span>: opt.pool || <span class="literal">null</span>,</div><div class="line">            <span class="attr">i</span>: i === <span class="literal">undefined</span> ? <span class="number">-1</span> : i,</div><div class="line">            <span class="attr">x</span>: opt.x === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.x,</div><div class="line">            <span class="attr">y</span>: opt.y === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.y,</div><div class="line">            <span class="attr">w</span>: opt.w === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.w,</div><div class="line">            <span class="attr">h</span>: opt.h === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.h,</div><div class="line">            <span class="attr">heading</span>: opt.heading === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.heading,</div><div class="line">            <span class="attr">pps</span>: opt.pps === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.pps,</div><div class="line">            <span class="attr">lifespan</span>: opt.lifespan || <span class="number">3</span>,</div><div class="line">            <span class="attr">data</span>: &#123;&#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a new pool</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.count = opt.count || <span class="number">10</span>;</div><div class="line">        <span class="comment">// the main pool object</span></div><div class="line">        <span class="keyword">var</span> pool = &#123;</div><div class="line">            <span class="attr">objects</span>: [],</div><div class="line">            <span class="attr">secsCap</span>: opt.secsCap === <span class="literal">undefined</span> ? <span class="literal">Infinity</span> : opt.secsCap,</div><div class="line">            <span class="attr">disableLifespan</span>: opt.disableLifespan || <span class="literal">false</span>,</div><div class="line">            <span class="attr">data</span>: opt.data || &#123;&#125;,</div><div class="line">            <span class="attr">game</span>: opt.game || &#123;&#125;,</div><div class="line">            <span class="attr">spawn</span>: opt.spawn || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state, opt</span>) </span>&#123;&#125;,</div><div class="line">            <span class="attr">purge</span>: opt.purge || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state</span>) </span>&#123;&#125;,</div><div class="line">            <span class="attr">update</span>: opt.update || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state, secs</span>) </span>&#123;&#125;,</div><div class="line">            <span class="attr">beforeUpdate</span>: opt.beforeUpdate || <span class="function"><span class="keyword">function</span>(<span class="params">pool, state, secs</span>)</span>&#123;&#125;,</div><div class="line">            <span class="attr">afterUpdate</span>: opt.afterUpdate || <span class="function"><span class="keyword">function</span>(<span class="params">pool, state, secs</span>)</span>&#123;&#125;</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// populate the pools objects array</span></div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>, dispOpt;</div><div class="line">        <span class="keyword">while</span> (i &lt; opt.count) &#123;</div><div class="line">            <span class="keyword">var</span> dispOpt = <span class="built_in">Object</span>.assign(&#123;&#125;, &#123;<span class="attr">pool</span>: pool&#125;, opt)</div><div class="line">            pool.objects.push( createDisp(dispOpt, i) );</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// return the pool object</span></div><div class="line">        <span class="keyword">return</span> pool;</div><div class="line">    &#125;;</div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">//  POOL METHODS</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line">    <span class="comment">// spawn the next inactive object in the given pool</span></div><div class="line">    api.spawn = <span class="function"><span class="keyword">function</span> (<span class="params">pool, state, opt</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> obj = getInactive(pool);</div><div class="line">        state = state || pool.game || &#123;&#125;;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">if</span> (obj) &#123;</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                obj.active = <span class="literal">true</span>;</div><div class="line">                pool.spawn.call(pool, obj, pool, state, opt);</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// spawn all objects</span></div><div class="line">    api.spawnAll = <span class="function"><span class="keyword">function</span>(<span class="params">pool, state, opt</span>)</span>&#123;</div><div class="line">        state = state || pool.game || &#123;&#125;;</div><div class="line">        pool.objects.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                obj.active = <span class="literal">true</span>;</div><div class="line">                pool.spawn.call(pool, obj, pool, state, opt);</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> pool.objects;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// spawn all objects</span></div><div class="line">    api.purgeAll = <span class="function"><span class="keyword">function</span>(<span class="params">pool, state, opt</span>)</span>&#123;</div><div class="line">        state = state || pool.game || &#123;&#125;;</div><div class="line">        pool.objects.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                obj.active =  <span class="literal">false</span>;</div><div class="line">                pool.purge.call(pool, obj, pool, state);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> pool.objects;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update a pool object by a secs value</span></div><div class="line">    api.update = <span class="function"><span class="keyword">function</span> (<span class="params">pool, secs, state</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        state = state || pool.game || &#123;&#125;; <span class="comment">// your projects state object</span></div><div class="line">        secs = secs &gt; pool.secsCap ? pool.secsCap : secs;</div><div class="line">        <span class="comment">// call beforeUpdate hook</span></div><div class="line">        pool.beforeUpdate.call(pool, pool, secs, state);</div><div class="line">        <span class="comment">// for each object</span></div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            <span class="keyword">if</span> (obj.active) &#123;</div><div class="line">                pool.update.call(pool, obj, pool, state, secs);</div><div class="line">                <span class="comment">// if disableLifespan featre</span></div><div class="line">                <span class="keyword">if</span>(pool.disableLifespan)&#123;</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    <span class="comment">// else use lifespan feature</span></div><div class="line">                    obj.lifespan -= secs;</div><div class="line">                    obj.lifespan = obj.lifespan &lt; <span class="number">0</span> ? <span class="number">0</span> : obj.lifespan;</div><div class="line">                    <span class="keyword">if</span> (obj.lifespan === <span class="number">0</span>) &#123;</div><div class="line">                        obj.active = <span class="literal">false</span>;</div><div class="line">                        <span class="comment">//pool.purge.call(pool, obj, pool, state);</span></div><div class="line">                        api.purge.call(pool, pool, obj, state);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// call afterUpdate hook</span></div><div class="line">        pool.afterUpdate.call(pool, pool, secs, state);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set all to inActive or active state</span></div><div class="line">    api.setActiveStateForAll = <span class="function"><span class="keyword">function</span> (<span class="params">pool, bool</span>) </span>&#123;</div><div class="line">        bool = bool === <span class="literal">undefined</span> ? <span class="literal">false</span> : bool;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            obj.active = bool;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get active objects from a pool</span></div><div class="line">    api.getActiveObjects = <span class="function"><span class="keyword">function</span>(<span class="params">pool, bool</span>)</span>&#123;</div><div class="line">        bool = bool === <span class="literal">undefined</span> ? <span class="literal">true</span> : bool;</div><div class="line">        <span class="keyword">return</span> pool.objects.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">acc, obj</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span>(obj.active === bool)&#123;</div><div class="line">                acc.push(obj);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> acc;</div><div class="line">        &#125;, []);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get a current active count for a pool</span></div><div class="line">    api.getActiveCount = <span class="function"><span class="keyword">function</span>(<span class="params">pool, bool</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> api.getActiveObjects(pool, bool).length;</div><div class="line">    &#125;;</div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">//  DISP OBJECT METHODS</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line">    <span class="comment">// move the given object by its current heading and pps</span></div><div class="line">    api.moveByPPS = <span class="function"><span class="keyword">function</span> (<span class="params">obj, secs</span>) </span>&#123;</div><div class="line">        obj.x += <span class="built_in">Math</span>.cos(obj.heading) * obj.pps * secs;</div><div class="line">        obj.y += <span class="built_in">Math</span>.sin(obj.heading) * obj.pps * secs;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// bounding box</span></div><div class="line">    api.boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">obj, obj2</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> x1 = obj.x - obj.w / <span class="number">2</span>,</div><div class="line">        y1 = obj.y - obj.h / <span class="number">2</span>,</div><div class="line">        x2 = obj2.x - obj2.w / <span class="number">2</span>,</div><div class="line">        y2 = obj2.y - obj2.h / <span class="number">2</span>;</div><div class="line">        <span class="keyword">return</span> utils.boundingBox(x1, y1, obj.w, obj.h, x2, y2, obj2.w, obj2.h);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// wrap an object to an area like a canvas</span></div><div class="line">    api.wrap = <span class="function"><span class="keyword">function</span>(<span class="params">obj, area, space</span>)</span>&#123;</div><div class="line">        area = area || &#123;<span class="attr">width</span>: <span class="number">640</span>, <span class="attr">height</span>: <span class="number">480</span> &#125;;</div><div class="line">        space = space === <span class="literal">undefined</span> ? <span class="number">0</span> : space;</div><div class="line">        <span class="comment">// using new utils.wrapNumber method</span></div><div class="line">        obj.x = utils.wrapNumber(obj.x, <span class="number">0</span> - space, area.width + space);</div><div class="line">        obj.y = utils.wrapNumber(obj.y, <span class="number">0</span> - space, area.height + space);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// clamp an object to an area like a canvas</span></div><div class="line">    api.clamp = <span class="function"><span class="keyword">function</span>(<span class="params">obj, area, space</span>)</span>&#123;</div><div class="line">        area = area || &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span>, <span class="attr">width</span>: <span class="number">640</span>, <span class="attr">height</span>: <span class="number">480</span> &#125;;</div><div class="line">        area = <span class="built_in">Object</span>.assign(&#123;&#125;, &#123;<span class="attr">x</span>: area.x, <span class="attr">y</span>: area.y, <span class="attr">width</span>: area.width, <span class="attr">height</span>: area.height&#125;, &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span>&#125;);</div><div class="line">        space = space === <span class="literal">undefined</span> ? <span class="number">0</span> : space;</div><div class="line">        <span class="keyword">var</span> xMin = area.x - space,</div><div class="line">        xMax = area.x + area.width + space,</div><div class="line">        yMin = area.y - space,</div><div class="line">        yMax = area.y + area.height + space;</div><div class="line">        <span class="keyword">if</span>(obj.x &lt; xMin)&#123; obj.x = xMin; &#125;</div><div class="line">        <span class="keyword">if</span>(obj.x &gt; xMax)&#123; obj.x = xMax; &#125;</div><div class="line">        <span class="keyword">if</span>(obj.y &lt; yMin)&#123; obj.y = yMin;&#125;</div><div class="line">        <span class="keyword">if</span>(obj.y &gt; yMax)&#123; obj.y = yMax; &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// find out if an object is on edge or not with the given area and space values</span></div><div class="line">    api.isOnEdge = <span class="function"><span class="keyword">function</span>(<span class="params">obj, area, space</span>)</span>&#123;</div><div class="line">        area = area || &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span>, <span class="attr">width</span>: <span class="number">640</span>, <span class="attr">height</span>: <span class="number">480</span> &#125;;</div><div class="line">        area = <span class="built_in">Object</span>.assign(&#123;&#125;, &#123;<span class="attr">x</span>: area.x, <span class="attr">y</span>: area.y, <span class="attr">width</span>: area.width, <span class="attr">height</span>: area.height&#125;, &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span>&#125;);</div><div class="line">        space = space === <span class="literal">undefined</span> ? <span class="number">0</span> : space;</div><div class="line">        <span class="keyword">var</span> xMin = area.x - space,</div><div class="line">        xMax = area.x + area.width + space,</div><div class="line">        yMin = area.y - space,</div><div class="line">        yMax = area.y + area.height + space;</div><div class="line">        <span class="keyword">if</span>(obj.x === xMin)&#123; <span class="keyword">return</span> <span class="literal">true</span>; &#125;</div><div class="line">        <span class="keyword">if</span>(obj.x === xMax)&#123; <span class="keyword">return</span> <span class="literal">true</span>; &#125;</div><div class="line">        <span class="keyword">if</span>(obj.y === yMin)&#123; <span class="keyword">return</span> <span class="literal">true</span>; &#125;</div><div class="line">        <span class="keyword">if</span>(obj.y === yMax)&#123; <span class="keyword">return</span> <span class="literal">true</span>; &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// purge an object ( make it inactive and call the purge method for the pool )</span></div><div class="line">    api.purge = <span class="function"><span class="keyword">function</span>(<span class="params">obj, state</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> pool = obj.pool;</div><div class="line">        state = state || pool.game || &#123;&#125;;</div><div class="line">        obj.active = <span class="literal">false</span>;</div><div class="line">        pool.purge.call(pool, obj, pool, state);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get a collection of overlaying active objects from a pool, that overlap with the given object</span></div><div class="line">    api.getOverlaping = <span class="function"><span class="keyword">function</span>(<span class="params">obj, pool</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">        obj2,</div><div class="line">        overlap = [];</div><div class="line">        len = pool.objects.length;</div><div class="line">        <span class="keyword">if</span>(obj.active)&#123;</div><div class="line">            <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">                obj2 = pool.objects[i];</div><div class="line">                <span class="keyword">if</span>(obj != obj2 &amp;&amp; obj2.active)&#123;</div><div class="line">                    <span class="keyword">if</span>(api.boundingBox(obj, obj2))&#123;</div><div class="line">                         overlap.push(obj2);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                i += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> overlap;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get the distance between the two given disp objects</span></div><div class="line">    <span class="comment">// or a given position depending on the number of arguments given</span></div><div class="line">    api.distance = <span class="function"><span class="keyword">function</span>(<span class="params">disp, a, b</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> x2 = <span class="number">0</span>, y2 = <span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> a === <span class="string">'object'</span> &amp;&amp; a != <span class="literal">null</span>)&#123;</div><div class="line">            x2 = a.x;</div><div class="line">            y2 = a.y;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(b != <span class="literal">undefined</span>)&#123;</div><div class="line">            x2 = a;</div><div class="line">            y2 = b;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> utils.distance(disp.x, disp.y, x2, y2);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get the angle from the given disp, to the given other disp or position</span></div><div class="line">    api.getAngleTo = <span class="function"><span class="keyword">function</span>(<span class="params">disp, a, b</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> x2 = <span class="number">0</span>, y2 = <span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> a === <span class="string">'object'</span> &amp;&amp; a != <span class="literal">null</span>)&#123;</div><div class="line">            x2 = a.x;</div><div class="line">            y2 = a.y;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(b != <span class="literal">undefined</span>)&#123;</div><div class="line">            x2 = a;</div><div class="line">            y2 = b;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.atan2(y2 - disp.y, x2 - disp.x);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// center the disp to the given areaObj, the areaObj can be a canvas</span></div><div class="line">    api.centerDisp = <span class="function"><span class="keyword">function</span>(<span class="params">obj, areaObj</span>)</span>&#123;</div><div class="line">        areaObj = areaObj === <span class="literal">undefined</span> ? &#123;<span class="attr">width</span>: <span class="number">0</span>, <span class="attr">height</span>: <span class="number">0</span>&#125; : areaObj;</div><div class="line">        obj.x = areaObj.width / <span class="number">2</span>;</div><div class="line">        obj.y = areaObj.height / <span class="number">2</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return public method</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<p>I could go nuts adding additional methods to this module, but for now I am thinking that I should stick with just a very small core set of usual suspect methods. Many of the ideas that come to mind are specific to a certain kind of game, or just an idea of some kind of digital art type thing, such as having a method that will give me an average heading for a pool of objects or a subset of a pool of objects. That is an idea that I would want to keep in a specific application rather than writing it into the core of what this is.</p>
<h2 id="2-Utilities-of-this-example"><a href="#2-Utilities-of-this-example" class="headerlink" title="2 - Utilities of this example"></a>2 - Utilities of this example</h2><p>Just like with my many other javaScript examples I typical have a <a href="/2021/08/06/js-javascript-example-utils/">utilities library</a> that contains a lot of methods that I will use in my various files that compose an over all project. As you may have noticed a few of the methods in my object pool library use methods in this utilities library, namely a distance formula method, wrap number method, and bounding box.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> utils = &#123;&#125;;</div><div class="line"> </div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">//  MISC</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"> </div><div class="line"><span class="comment">// get a value by way of a per value (0-1), and a min and max value</span></div><div class="line">utils.valueByRange = <span class="function"><span class="keyword">function</span>(<span class="params">per, a, b</span>)</span>&#123;</div><div class="line">    per = per === <span class="literal">undefined</span> ? <span class="number">0</span> : per;</div><div class="line">    <span class="keyword">var</span> nMin, nMax;</div><div class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> a === <span class="string">'object'</span>)&#123;</div><div class="line">        nMin = a[<span class="number">0</span>];</div><div class="line">        nMax = a[<span class="number">1</span>];</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        nMin = a === <span class="literal">undefined</span> ? <span class="number">0</span> : a;</div><div class="line">        nMax = b === <span class="literal">undefined</span> ? <span class="number">1</span> : b;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> nMin + <span class="built_in">Math</span>.round(per * (nMax - nMin));</div><div class="line">&#125;;</div><div class="line"><span class="comment">// mathematical modulo</span></div><div class="line">utils.mod = <span class="function"><span class="keyword">function</span>(<span class="params">x, m</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (x % m + m) % m;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// wrap a number</span></div><div class="line">utils.wrapNumber = <span class="function"><span class="keyword">function</span>(<span class="params">n, min, max</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> r = max - min;</div><div class="line">    <span class="keyword">return</span> (min + ((((n - min) % r) + r) % r));</div><div class="line">&#125;;</div><div class="line"><span class="comment">// distance</span></div><div class="line">utils.distance = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, x2, y2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow(x1 - x2, <span class="number">2</span>) + <span class="built_in">Math</span>.pow(y1 - y2, <span class="number">2</span>));</div><div class="line">&#125;;</div><div class="line"><span class="comment">// bounding box</span></div><div class="line">utils.boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, w1, h1, x2, y2, w2, h2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> !(</div><div class="line">        y1 + h1 &lt; y2 ||</div><div class="line">        y1 &gt; y2 + h2 ||</div><div class="line">        x1 + w1 &lt; x2 ||</div><div class="line">        x1 &gt; x2 + w2);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">//  DOM</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"> </div><div class="line"><span class="comment">// create a canvas element</span></div><div class="line">utils.createCanvas = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    opt.container = opt.container || <span class="built_in">document</span>.getElementById(<span class="string">'canvas-app'</span>) || <span class="built_in">document</span>.body;</div><div class="line">    opt.canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">    opt.ctx = opt.canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    <span class="comment">// assign the 'canvas_example' className</span></div><div class="line">    opt.canvas.className = <span class="string">'canvas_example'</span>;</div><div class="line">    <span class="comment">// set native width</span></div><div class="line">    opt.canvas.width = opt.width === <span class="literal">undefined</span> ? <span class="number">320</span> : opt.width;</div><div class="line">    opt.canvas.height = opt.height === <span class="literal">undefined</span> ? <span class="number">240</span> : opt.height;</div><div class="line">    <span class="comment">// translate by 0.5, 0.5</span></div><div class="line">    opt.ctx.translate(<span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line">    <span class="comment">// disable default action for onselectstart</span></div><div class="line">    opt.canvas.onselectstart = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</div><div class="line">    <span class="comment">// append canvas to container</span></div><div class="line">    opt.container.appendChild(opt.canvas);</div><div class="line">    <span class="keyword">return</span> opt;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">//  OBJECT</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"> </div><div class="line"><span class="comment">// chunk and array</span></div><div class="line">utils.chunk = <span class="function"><span class="keyword">function</span> (<span class="params">arr, size</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> chunkedArr = [];</div><div class="line">    arr = arr || [];</div><div class="line">    size = size === <span class="literal">undefined</span> ? <span class="number">1</span> : size;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i += size) &#123;</div><div class="line">        chunkedArr.push(arr.slice(i, i + size));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> chunkedArr;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">//  ANGLES</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"> </div><div class="line"><span class="comment">// PI * 2</span></div><div class="line">utils.PI2 = <span class="built_in">Math</span>.PI * <span class="number">2</span>;</div><div class="line"><span class="comment">// unit conversion</span></div><div class="line">utils.radToDeg = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> utils.mod(n, utils.PI2) / utils.PI2 * <span class="number">360</span>;</div><div class="line">&#125;;</div><div class="line">utils.degToRad = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">   <span class="keyword">return</span> utils.mod(n, <span class="number">360</span>) / <span class="number">360</span> * utils.PI2;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// normalize an angle by half</span></div><div class="line">utils.normalizeHalf = <span class="function"><span class="keyword">function</span> (<span class="params">n, scale</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> c = scale || utils.PI2,</div><div class="line">    h = c / <span class="number">2</span>;</div><div class="line">    <span class="keyword">return</span> utils.mod(n + h, c) - h;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// the angular distance between two angles</span></div><div class="line">utils.angleDistance = <span class="function"><span class="keyword">function</span> (<span class="params">a, b, scale</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> m = scale || utils.PI2,</div><div class="line">    h = m / <span class="number">2</span>,</div><div class="line">    diff = utils.normalizeHalf(a - b);</div><div class="line">    <span class="keyword">if</span> (diff &gt; h) &#123;</div><div class="line">        diff = diff - m;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> utils.mod( <span class="built_in">Math</span>.abs(diff), m);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// get the angle from one point to another</span></div><div class="line">utils.getAngleToPoint = <span class="function"><span class="keyword">function</span> (<span class="params">pt1, pt2, scale</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> a = <span class="built_in">Math</span>.atan2(pt1.y - pt2.y, pt1.x - pt2.x);</div><div class="line">    <span class="keyword">return</span> utils.normalizeHalf(a, scale || utils.PI2);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// get -1, 1, or 0 depending on the the state of two angles</span></div><div class="line">utils.shortestAngleDirection = <span class="function"><span class="keyword">function</span> (<span class="params">a1, a2, scale</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> z = a1 - a2,</div><div class="line">    x = utils.normalizeHalf(z, scale || utils.PI2);</div><div class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">// Left</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (x &gt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span>; <span class="comment">// Right</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">// if a1 === a2 or any other case</span></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="3-Draw-module"><a href="#3-Draw-module" class="headerlink" title="3 - Draw module"></a>3 - Draw module</h2><p>I then have a draw module that will contain methods that are used to draw the state of various things to one or more canvas elements. For this project I then of course have a draw method that will render the current state of a display object to a canvas element. On top of that draw method I then also have a few other typical draw methods that are used for just about any project or example such as ones that are used to just draw a simple solid background, and also the current version of the example as I get around to editing these posts now and then, and when I do so I typically improve the quality of the code also while I am at it.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> draw = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">// hard settings</span></div><div class="line">    <span class="keyword">var</span> BACKGROUND_COLOR = <span class="string">'gray'</span>,</div><div class="line">    LINE_WIDTH = <span class="number">3</span>,</div><div class="line">    STROKE_STYLE = <span class="string">'black'</span>,</div><div class="line">    FILL_STYLE = <span class="string">'white'</span>,</div><div class="line">    TEXT_COLOR = <span class="string">'yellow'</span>;</div><div class="line">    <span class="comment">// draw disp</span></div><div class="line">    <span class="keyword">var</span> drawDisp = <span class="function"><span class="keyword">function</span>(<span class="params">sm, disp, ctx, canvas</span>)</span>&#123;</div><div class="line">        <span class="comment">// if the object is active</span></div><div class="line">        <span class="keyword">if</span> (disp.active) &#123;</div><div class="line">            <span class="comment">// draw base area as recr</span></div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.rect(disp.x - disp.w / <span class="number">2</span>, disp.y - disp.h / <span class="number">2</span>, disp.w, disp.h);</div><div class="line">            ctx.fill();</div><div class="line">            ctx.stroke();</div><div class="line">            <span class="comment">// draw base area as circle</span></div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.arc(disp.x, disp.y, (disp.w + disp.h) / <span class="number">2</span> / <span class="number">2</span>, <span class="number">0</span>, utils.PI2);</div><div class="line">            ctx.fill();</div><div class="line">            ctx.stroke();</div><div class="line">            <span class="comment">// draw small circle over obj.x, obj.y</span></div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.fillStyle = FILL_STYLE;</div><div class="line">            ctx.arc(disp.x, disp.y, <span class="number">2</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">            ctx.fill();</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// PUBLIC API METHODS</span></div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// draw the background</span></div><div class="line">    api.background = <span class="function"><span class="keyword">function</span> (<span class="params">sm, ctx, canvas</span>) </span>&#123;</div><div class="line">        ctx.fillStyle = BACKGROUND_COLOR;</div><div class="line">        ctx.fillRect(<span class="number">-1</span>, <span class="number">-1</span>, canvas.width + <span class="number">2</span>, canvas.height + <span class="number">2</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// draw the pool</span></div><div class="line">    api.pool = <span class="function"><span class="keyword">function</span> (<span class="params">sm, pool, ctx, canvas</span>) </span>&#123;</div><div class="line">        ctx.lineWidth = LINE_WIDTH;</div><div class="line">        pool.objects.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">            ctx.fillStyle = obj.data.fillStyle || FILL_STYLE;</div><div class="line">            ctx.strokeStyle = obj.data.strokeStyle || STROKE_STYLE;</div><div class="line">            ctx.globalAlpha = obj.data.alpha === <span class="literal">undefined</span> ? <span class="number">1</span>: obj.data.alpha;</div><div class="line">            drawDisp(sm, obj, ctx, canvas);</div><div class="line">        &#125;);</div><div class="line">        ctx.globalAlpha = <span class="number">1</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// draw version number</span></div><div class="line">    api.ver = <span class="function"><span class="keyword">function</span> (<span class="params">sm, ctx, canvas</span>) </span>&#123;</div><div class="line">        ctx.fillStyle = TEXT_COLOR;</div><div class="line">        ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">        ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">        ctx.font = <span class="string">'14px arial'</span>;</div><div class="line">        ctx.fillText(<span class="string">'version: '</span> + poolMod.ver, <span class="number">5</span>, canvas.height - <span class="number">15</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return public api</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h2 id="4-Main-javaScript-file"><a href="#4-Main-javaScript-file" class="headerlink" title="4 - Main javaScript file"></a>4 - Main javaScript file</h2><p>I think that I will be making at least a few examples that make use of this library, in fact the source code of pool was very much pulled from my recent digital art project on an invaders game concept type thing that came to mind. There are a few good things that came out of the project actually, this object pool library was just one of them that I polished up a little when working on this. However for this javaScrript example post I will want to make at least one additional demo that makes use of the object pool library just for the sake of testing out this revision of the object pool library.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// state object</span></div><div class="line"><span class="keyword">var</span> canvasObj = utils.createCanvas(&#123;</div><div class="line">        <span class="attr">width</span>: <span class="number">640</span>,</div><div class="line">        <span class="attr">height</span>: <span class="number">480</span></div><div class="line">    &#125;);</div><div class="line"><span class="comment">// pool options object</span></div><div class="line"><span class="keyword">var</span> POOL_OPT = &#123;</div><div class="line">    <span class="attr">count</span>: <span class="number">10</span>,</div><div class="line">    <span class="attr">disableLifespan</span>: <span class="literal">true</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">// on spawn</span></div><div class="line"><span class="keyword">var</span> modes = [<span class="string">'wrap'</span>, <span class="string">'clamp'</span>],</div><div class="line">mIndex = <span class="number">0</span>;</div><div class="line">POOL_OPT.spawn = <span class="function"><span class="keyword">function</span> (<span class="params">unit, pool, sm, spawnOpt</span>) </span>&#123;</div><div class="line">        spawnOpt = spawnOpt || &#123;&#125;;</div><div class="line">        <span class="keyword">var</span> canvas = sm.canvas;</div><div class="line">        <span class="comment">// usere defined data for this example</span></div><div class="line">        <span class="keyword">var</span> uDat = unit.data;</div><div class="line">        uDat.alpha = <span class="number">1</span>;</div><div class="line">        uDat.size = <span class="number">32</span>;</div><div class="line">        uDat.mode = modes[mIndex];</div><div class="line">        uDat.fillStyle = uDat.mode === <span class="string">'wrap'</span> ? <span class="string">'#008888'</span> : <span class="string">'#880088'</span>;</div><div class="line">        mIndex += <span class="number">1</span>;</div><div class="line">        mIndex = utils.mod(mIndex, modes.length);</div><div class="line">        <span class="comment">// size and pos</span></div><div class="line">        unit.w = uDat.size;</div><div class="line">        unit.h = uDat.size;</div><div class="line">        unit.x = canvas.width / <span class="number">2</span>;</div><div class="line">        unit.y = canvas.height / <span class="number">2</span>;</div><div class="line">        <span class="comment">// heading</span></div><div class="line">        unit.heading = utils.PI2 * <span class="built_in">Math</span>.random();</div><div class="line">        <span class="comment">// speed</span></div><div class="line">        unit.pps = utils.valueByRange(<span class="built_in">Math</span>.random(), [<span class="number">32</span>, <span class="number">256</span>]);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// update a unit</span></div><div class="line">POOL_OPT.update = <span class="function"><span class="keyword">function</span> (<span class="params">unit, pool, sm, secs</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> uDat = unit.data;</div><div class="line">    poolMod.moveByPPS(unit, secs);</div><div class="line">    <span class="keyword">if</span>(uDat.mode === <span class="string">'wrap'</span>)&#123;</div><div class="line">        poolMod.wrap(unit, sm.canvas, unit.data.size)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(uDat.mode === <span class="string">'clamp'</span>)&#123;</div><div class="line">        <span class="keyword">var</span> space = unit.data.size / <span class="number">2</span> * <span class="number">-1</span>;</div><div class="line">        poolMod.clamp(unit, sm.canvas, space);</div><div class="line">        <span class="keyword">if</span>(poolMod.isOnEdge(unit, sm.canvas, space))&#123;</div><div class="line">            unit.heading = utils.PI2 * <span class="built_in">Math</span>.random();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// main sm object</span></div><div class="line"><span class="keyword">var</span> sm = &#123;</div><div class="line">    <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    <span class="attr">fps</span>: <span class="number">30</span>,</div><div class="line">    <span class="attr">pool</span>: poolMod.create(POOL_OPT),</div><div class="line">    <span class="attr">ctx</span>: canvasObj.ctx,</div><div class="line">    <span class="attr">canvas</span>: canvasObj.canvas,</div><div class="line">    <span class="attr">background</span>: &#123;</div><div class="line">       <span class="attr">angle</span>: <span class="number">1</span>,</div><div class="line">       <span class="attr">degreesPerSec</span>: <span class="number">-5</span>,</div><div class="line">       <span class="attr">radius</span>: <span class="number">200</span></div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// spawn all</span></div><div class="line">poolMod.spawnAll(sm.pool, sm, &#123;&#125;)</div><div class="line"> </div><div class="line"><span class="comment">// basic app loop</span></div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - sm.lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span> (secs &gt;= <span class="number">1</span> / sm.fps) &#123;</div><div class="line">        <span class="comment">// update pool</span></div><div class="line">        poolMod.update(sm.pool, secs, sm);</div><div class="line">        <span class="comment">// draw</span></div><div class="line">        draw.background(sm, sm.ctx, sm.canvas);</div><div class="line">        draw.pool(sm, sm.pool, sm.ctx);</div><div class="line">        draw.ver(sm, sm.ctx, sm.canvas);</div><div class="line">        <span class="comment">// set sm.lt to now</span></div><div class="line">        sm.lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5 - Conclusion"></a>5 - Conclusion</h2><p>I will want to make at least a few revisions of this object pool library at one point or another, but only as needed. I think much of the additional features and functionality of this should be added on as additional libraries that build on top of this rather than making this project even more complex actually. I will be creating those projects in the not so distant future as I continue to work out even more javaScript project examples to write about in posts such as this.</p>
<p>As I make additional javaScript example prototypes I will like to continue with the same general tone that I started with a few weeks back with my <a href="/2021/12/31/js-javascript-example-digital-art-reduce-pool/">digital art reduce pool javaScript example</a>. That is to start out with a very basic, minimal idea when it comes to what the end result is, at least at first. I often end up going nuts with features when making something, and while doing so I do not finish the most important core set of features first. I often seem to think in terms of continuing to work on a project indefinitely, and when it comes to that there is always the thought of Oh I can just get to that later. That is a really bad habit, and I think the key to breaking it is to start out with an outline of what a project should be first.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2022/01/24/js-javascript-example-pool-normalized/" data-id="cl38y1zvm00u7mwv17spwrg3e" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2022/01/24/js-javascript-example-pool-normalized/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/01/28/lodash_string/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Lodash String methods
        
      </div>
    </a>
  
  
    <a href="/2022/01/21/lodash_thru/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Chains and the lodash thru method</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2022/01/24/js-javascript-example-pool-normalized/index.html';
    this.page.identifier = '954';
    this.page.title = 'New Object Pool library javaScript example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.38px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.48px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.33px;">angular</a> <a href="/tags/animation/" style="font-size: 11.9px;">animation</a> <a href="/tags/automation/" style="font-size: 11.9px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.38px;">backbone</a> <a href="/tags/blog/" style="font-size: 14.76px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.57px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.86px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.95px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.43px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 12.86px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.19px;">express</a> <a href="/tags/games/" style="font-size: 16.67px;">games</a> <a href="/tags/git/" style="font-size: 12.86px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 14.76px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.9px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.29px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.48px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.43px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.14px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.1px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.29px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.52px;">node.js</a> <a href="/tags/phaser/" style="font-size: 17.62px;">phaser</a> <a href="/tags/python/" style="font-size: 15.24px;">python</a> <a href="/tags/statistics/" style="font-size: 13.81px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.05px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 15.71px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/05/12/threejs-examples-sequence-hooks/">threejs example using a sequence module with hooks</a>
          </li>
        
          <li>
            <a href="/2022/05/09/threejs-box3/">The Box3 class in threejs.</a>
          </li>
        
          <li>
            <a href="/2022/05/06/threejs-examples-lookat-with-apply-euler/">Object3d lookAt and Vector3 apply Euler methods threejs example</a>
          </li>
        
          <li>
            <a href="/2022/05/02/threejs-examples-cube-stack-grid/">threejs cube stack grid example</a>
          </li>
        
          <li>
            <a href="/2022/04/29/threejs-examples-cube-stack/">threejs cube stack example</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS-Examples</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas-Examples</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2022/01/24/js-javascript-example-pool-normalized/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>