<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Setting the position of objects in threejs | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2022/04/04/threejs-object3d-position/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="The position property of the Object3d class in threejs will hold a instance of the Vector3 class. Setting the values of this will set the position of the origin of an object of interest relative to th">
<meta property="og:type" content="article">
<meta property="og:title" content="Setting the position of objects in threejs">
<meta property="og:url" content="https://dustinpfister.github.io/2022/04/04/threejs-object3d-position/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="The position property of the Object3d class in threejs will hold a instance of the Vector3 class. Setting the values of this will set the position of the origin of an object of interest relative to th">
<meta property="og:updated_time" content="2022-12-05T17:35:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Setting the position of objects in threejs">
<meta name="twitter:description" content="The position property of the Object3d class in threejs will hold a instance of the Vector3 class. Setting the values of this will set the position of the origin of an object of interest relative to th">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-object3d-position" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/04/threejs-object3d-position/" class="article-date"> Published:
  <time datetime="2022-04-04T14:46:00.000Z" itemprop="datePublished">2022-04-04</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2022/04/04/threejs-object3d-position/" class="article-date"> Modified:
  <time datetime="2022-12-05T17:35:37.000Z" itemprop="dateModified">2022-12-05</time>
</a>

    <span class="article-date">V1.72</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Setting the position of objects in threejs
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>The <a href="https://threejs.org/docs/index.html#api/en/core/Object3D.position" target="_blank" rel="external">position property of the Object3d class in threejs</a> will hold a instance of the Vector3 class. Setting the values of this will set the position of the origin of an object of interest relative to the parent object or world space in the event that there is no parent object which will often be the case for the scene object. </p>
<p>Sense the Object3d class is a base class of many objects in threejs such as <a href="/2018/05/04/threejs-mesh/">Mesh objects</a> and <a href="/2018/04/06/threejs-camera/">Cameras</a> just to name a few. So learning a thing or two about the position property of an object3d instance will also apply to a whole lot of various objects.</p>
<p>The <a href="/2021/06/07/threejs-buffer-geometry-attributes-position/">position property of an instance of Buffer geometry</a> is a whole other topic of concern. When it comes to mutating the position attribute of buffer geometry that is a little more involved, however there are ways of using what there is to work with in the Vector3 class to change the various values for vertices in position attributes. However in this post I will for the most part be sticking to examples that just have to do with object3d based objects rather than the arrays of various attributes of geometry.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/ckQTPYZvpzI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>



<h2 id="The-position-property-of-the-object3d-class-and-what-to-know-first"><a href="#The-position-property-of-the-object3d-class-and-what-to-know-first" class="headerlink" title="The position property of the object3d class and what to know first"></a>The position property of the object3d class and what to know first</h2><p>This is a post on just the position property of the object3d class in the javaScript library known as threejs. This is then not any kind of <a href="/2018/04/04/threejs-getting-started/">how to get started with threejs kind of a post</a> as well as with any additional skills that are also required beforehand that have to do with client side web development in general. </p>
<p>There are a whole lot of other topics that will branch off from the position property such as things that have to do with the Vector3 class to which the position property is an instance of in terms of its value. Also there is not just setting position but also orientation of objects so I might also need to touch base on the rotation property also in this post at least a little.</p>
<p>There is no way I will ever cover every little detail that should be known before hand then. Still I often use these opening sections of posts to go over a few things that you might want to read up more on before continuing with the rest of this content.</p>
<h3 id="Check-out-the-Object3d-class-in-general"><a href="#Check-out-the-Object3d-class-in-general" class="headerlink" title="Check out the Object3d class in general"></a>Check out the Object3d class in general</h3><p>There is a great deal to be aware of when it comes to the Object3d class in terms of properties as well as methods that often prove to be helpful. There are all kinds of useful features in this class that apply to just about everything that will be added to a scene object, including the scene object itself. In this post I will be focusing mostly on features that have to do with setting position, but there is also checking out my post on the <a href="/2018/04/23/threejs-object3d/">object3d class in general</a>.</p>
<h3 id="Read-up-more-on-the-Vector3-class"><a href="#Read-up-more-on-the-Vector3-class" class="headerlink" title="Read up more on the Vector3 class"></a>Read up more on the Vector3 class</h3><p>The value of the position property of the Object3d class is an instance of the Vector3 class. This vector3 class as the name suggests stores the current state of a 3d Vector, and is also packed with a whole bunch of useful methods that have to do with the mutation of this kind of state. When it comes to Vector3, or any Vector for that matter there is thinking in terms of the direction of the Vector, and what is often called unit length. I will be touching base on a lot of what this all means in this post of course, but you might still want to check out my <a href="/2018/04/15/threejs-vector3/">main post on the Vector3 class</a>.</p>
<h3 id="Curves-are-great-for-moving-objects-along-a-path-so-I-started-a-threejs-project-example-centered-around-that"><a href="#Curves-are-great-for-moving-objects-along-a-path-so-I-started-a-threejs-project-example-centered-around-that" class="headerlink" title="Curves are great for moving objects along a path, so I started a threejs project example centered around that"></a>Curves are great for moving objects along a path, so I started a threejs project example centered around that</h3><p>I have a section in this post in which I am writing about using curves as a way to get vector3 objects than can then be used to set the position of an object.  There is scrolling down to read that section to get a basic idea of what the deal is, but you might also want to check out my <a href="/2022/11/18/threejs-examples-curves-module/">threejs project in which I am making a module centered around the use of curves</a>. When it comes to curves this might be one of the best ways to go about defining paths in space in which objects will move. I can use a built in option to create a curve, then add that to a curve path that is just simply a kind of collection of curves that acts as a single curve. There is then calling the get point method and passing an alpha value (0 - 1) as the first argument and the returned object in a Vector3 object which I can then copy to the position of an object that I want to position along the curve.</p>
<h3 id="The-Source-code-example-in-this-post-are-on-Github"><a href="#The-Source-code-example-in-this-post-are-on-Github" class="headerlink" title="The Source code example in this post are on Github"></a>The Source code example in this post are on Github</h3><p>The source code examples that I am writing about in this post <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-object3d-position" target="_blank" rel="external">can be found on Github</a>. This is also the repository where I am parking all the other source code examples for the <a href="/categories/three-js/">many other posts on threejs</a> that I have written thus far over the years.</p>
<h3 id="Be-mindful-of-version-numbers-with-threejs"><a href="#Be-mindful-of-version-numbers-with-threejs" class="headerlink" title="Be mindful of version numbers with threejs"></a>Be mindful of version numbers with threejs</h3><p>When I first wrote this post I was using r135 of threejs, and the last time I came around to do some editing I was using r146 of the library.</p>
<h2 id="1-Basic-examples-of-the-position-property-of-Object3d"><a href="#1-Basic-examples-of-the-position-property-of-Object3d" class="headerlink" title="1 - Basic examples of the position property of Object3d"></a>1 - Basic examples of the position property of Object3d</h2><p>To start things off, here are a few basic examples of the position property that involves just setting the position of a single mesh object as well as the camera. There are a whole lot of ways of doing this, and I will be outlining many of them here.</p>
<p>As with any threejs example I set up my <a href="/2018/05/03/threejs-scene/">scene object</a>, <a href="/2018/04/06/threejs-camera/">camera</a>, and <a href="/2018/11/24/threejs-webglrenderer/">renderer</a> and when doing so I also often add a <a href="/2022/02/18/threejs-grid-helper/">Grid helper</a> to the scene as well to have a better idea of what is going on when I position things around. I then create one or more <a href="/2018/05/04/threejs-mesh/">mesh objects</a> and when doing so I will need a <a href="/2021/04/22/threejs-buffer-geometry/">geometry</a> and a <a href="/2018/04/30/threejs-materials/">mesh material</a> for that. I will not be getting into all the options with that here of course as I have other posts on geometry and material options. So for these basic examples I will be just going with the normal material as well as built in geometry <a href="/2019/02/27/js-javascript-constructor/">constructor functions</a> such as the <a href="/2021/04/26/threejs-box-geometry/">Box</a> and <a href="/2021/05/26/threejs-sphere/">Sphere geometry</a> constructor functions.</p>
<h3 id="1-1-Using-the-x-y-and-z-properties-of-Vector3"><a href="#1-1-Using-the-x-y-and-z-properties-of-Vector3" class="headerlink" title="1.1 - Using the x, y, and z properties of Vector3"></a>1.1 - Using the x, y, and z properties of Vector3</h3><p>Maybe one of the easiest ways of just getting started with setting position would be to just directly set, or step, the x, y, and z properties of the vector3 object stored at the position property of the object of interest. That is that I can just set the value of say the x property of the position property to a desired value and be done with it. There is also using the value itself in the expression I am using or make use of a javaScript operator such as +\= or -\= as a way to step the value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE TYPE OBJECT, CAMERA TYPE OBJECT, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">9</span>, <span class="number">9</span>));</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">20</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// MESH</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    scene.add(mesh);</div><div class="line">    <span class="comment">// SETTING POSITION OF THE MESH OBJECT WITH x,y,z props</span></div><div class="line">    mesh.position.x = <span class="number">4</span>;</div><div class="line">    mesh.position.y = <span class="number">0.5</span>;</div><div class="line">    mesh.position.z = <span class="number">4</span>;</div><div class="line">    <span class="comment">// A Camera can also be set this way</span></div><div class="line">    camera.position.z = <span class="number">8</span>;</div><div class="line">    camera.position.y = <span class="number">8</span>;</div><div class="line">    <span class="comment">// look at 0,0,0</span></div><div class="line">    camera.lookAt( <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> );</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<p>This might be a great way to start, and also in many situations I do in fact still update positions this way. Often I might need to work out some kind of expression and I just wan to apply it to a single axis of the object while preserving the state of the other axis values. There are however a whole lot of other ways of setting the state of the position though so lets look at a few more options.</p>
<h3 id="1-2-Using-the-set-method-of-Vector3"><a href="#1-2-Using-the-set-method-of-Vector3" class="headerlink" title="1.2 - Using the set method of Vector3"></a>1.2 - Using the set method of Vector3</h3><p>The set method of the Vector3 instance would be another option to set object position to certain fixed values. With this method I can just call the set method off of the instance of Vector3 at the position property and pass number literals for a desired fixed position of the object. The first argument will be the value that I would like to set for x, followed by y and then z.</p>
<p>On top of using the set method to set object3d position, an instance of Vector3 can be used as a value to give to the <a href="/2021/05/13/threejs-object3d-lookat/">Object3d.lookAt method</a>. Here I am making a clone of the position property of the mesh, and then using the add method of the copy of the Vector3 instance to translate the position for the camera to look at, making it a position that is slightly lower than the actual position of the mesh object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE TYPE OBJECT, CAMERA TYPE OBJECT, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">9</span>, <span class="number">9</span>));</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">20</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// MESH</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    scene.add(mesh);</div><div class="line">    <span class="comment">// SETTING POSITION OF THE MESH OBJECT</span></div><div class="line">    mesh.position.set(<span class="number">-3</span>, <span class="number">0.5</span>, <span class="number">1</span>);</div><div class="line">    <span class="comment">// SETTNG POSITION OF THE CAMERA</span></div><div class="line">    camera.position.set(<span class="number">8</span>, <span class="number">4</span>, <span class="number">0</span>);</div><div class="line">    <span class="comment">// setting Rotation of the camera using clone, and add Vector3 methods off </span></div><div class="line">    camera.lookAt( mesh.position.clone().add( <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>,<span class="number">-2</span>,<span class="number">0</span>) ) );</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="1-3-The-Copy-and-add-methods-of-vector3"><a href="#1-3-The-Copy-and-add-methods-of-vector3" class="headerlink" title="1.3 - The Copy, and add methods of vector3"></a>1.3 - The Copy, and add methods of vector3</h3><p>Often I might already have a Vector3 object and I would like to copy the state of that vector3 to the vector3 of the position property of an object. For these kinds of tasks there is the copy method of the Vector3 class that can be used to perform this kind of action. Also I often use the copy method along with many other methods to work with in the Vector3 class. </p>
<p>For example, say that I want to copy the value of one Vector3 to a mesh object, and then also do the same for a camera, but then add another vector3 value that will serve as delta values from the position so that the camera is positioned anyway from the mesh object. This kind of thing can be done with the copy and add methods like so.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE TYPE OBJECT, CAMERA TYPE OBJECT, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">9</span>, <span class="number">9</span>));</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// MESH</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// mesh</span></div><div class="line">    <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    scene.add(mesh);</div><div class="line">    <span class="comment">// SOME INSTANCES OF Vector3 THAT I would like to COPY to other Vector3 instances</span></div><div class="line">    <span class="keyword">const</span> v1 = <span class="keyword">new</span> THREE.Vector3(<span class="number">-4</span>, <span class="number">-0.5</span>, <span class="number">4</span>);</div><div class="line">    <span class="keyword">const</span> v2 = <span class="keyword">new</span> THREE.Vector3( <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">    <span class="comment">// COPYING v1 TO THE POSITION OF THE MESH</span></div><div class="line">    mesh.position.copy(v1)</div><div class="line">    <span class="comment">// COPYING V1 TO THE CAMERA AND THEN ADDING v2</span></div><div class="line">    camera.position.copy(v1).add(v2);</div><div class="line">    camera.lookAt(v1);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="1-4-The-lerp-method-along-with-clone-for-positioning-between-two-vectors"><a href="#1-4-The-lerp-method-along-with-clone-for-positioning-between-two-vectors" class="headerlink" title="1.4 - The lerp method, along with clone for positioning between two vectors"></a>1.4 - The lerp method, along with clone for positioning between two vectors</h3><p>Say that I have two vectors that I would like to treat as start and end points in space and I would like to position a whole bunch of mesh objects between these two vectors. Once again I can use the copy method to copy the desired start point for all the mesh objects position property, and then I can call the lerp method after that. When doing so I will then just want to pass the end vector as the first argument, and then an alpha value in the 0 to 1 range. A value of zero will be the start point, 1 will be the end point, and any float value between 0 and 1 will be a point between the start and end point.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE TYPE OBJECT, CAMERA TYPE OBJECT, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">9</span>, <span class="number">9</span>));</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPER FUNCTIONS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> MESH_GEO = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.5</span>, <span class="number">20</span>, <span class="number">20</span>);</div><div class="line">    <span class="keyword">const</span> MESH_MATERIAL = <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;<span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.8</span>&#125;);</div><div class="line">    <span class="keyword">const</span> makeMesh = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            MESH_GEO,</div><div class="line">            MESH_MATERIAL);</div><div class="line">        <span class="keyword">return</span> mesh;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">const</span> len = <span class="number">20</span>;</div><div class="line">    <span class="comment">// STRT AND END VECTORS TO LERP TO AND FROM</span></div><div class="line">    <span class="keyword">const</span> v_start = <span class="keyword">new</span> THREE.Vector3(<span class="number">-25</span>,<span class="number">-20</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">const</span> v_end = <span class="keyword">new</span> THREE.Vector3(<span class="number">6</span>, <span class="number">5</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">        <span class="keyword">const</span> mesh = makeMesh();</div><div class="line">        <span class="keyword">const</span> alpha = i / len;</div><div class="line">        <span class="comment">// UISNG COPY AND LERP TO SET POSITION</span></div><div class="line">        mesh.position.copy(v_start).lerp(v_end, alpha);</div><div class="line">        <span class="comment">// scale</span></div><div class="line">        <span class="keyword">const</span> s = <span class="number">5</span> - <span class="number">4.75</span> * alpha;</div><div class="line">        mesh.scale.set(s, s, s);</div><div class="line">        <span class="comment">// add to scene</span></div><div class="line">        scene.add(mesh);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    camera.position.set(<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<p>Alpha values are something that seem to come up a lot when it comes to this sort of thing. There are many built in methods for creating alpha values in the <a href="/2022/04/11/threejs-math-utils/">Math Utils object</a>, and I have also made a number of projects in which I really start to explore some other options outside of the library with this. </p>
<h3 id="1-5-The-normalize-and-multiply-scalar-methods"><a href="#1-5-The-normalize-and-multiply-scalar-methods" class="headerlink" title="1.5 - The normalize and multiply scalar methods"></a>1.5 - The normalize and multiply scalar methods</h3><p>Now say that I am in a situation in which I want to adjust just the length of a vector without changing the direction, or I want to set direction of a vector one way but then adjust the length by another means. For these kinds of situations there is the <a href="/2021/06/14/threejs-vector3-normalize/">normalize method</a> that will set the length of the vector to 1, but will preserve the direction of the vector. Once the unit length of the vector is one then I can just multiply one or more of the axis values by the desired vector unit length that is higher or lower than 1. If I just want to multiply all axis values by one single value there is the <a href="/2022/03/23/threejs-vector3-multiply-scalar/">multiply scalar method</a> that can be used to do so.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE TYPE OBJECT, CAMERA TYPE OBJECT, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">9</span>, <span class="number">9</span>));</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPER FUNCTIONS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> MESH_GEO = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.5</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    <span class="keyword">const</span> MESH_MATERIAL = <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;<span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.8</span>&#125;);</div><div class="line">    <span class="keyword">const</span> makeMesh = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            MESH_GEO,</div><div class="line">            MESH_MATERIAL);</div><div class="line">        <span class="keyword">return</span> mesh;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">const</span> len = <span class="number">15</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">        <span class="keyword">const</span> mesh = makeMesh();</div><div class="line">        <span class="keyword">const</span> alpha = i / len;</div><div class="line">        <span class="comment">// SETTING MESH POSITION USING set, normalize, and multiplyScalar</span></div><div class="line">        <span class="comment">// methods as a way to set a direction and unit length</span></div><div class="line">        <span class="keyword">const</span> y = <span class="number">-2</span> + <span class="number">5</span> * alpha;</div><div class="line">        <span class="keyword">const</span> unitLength = <span class="number">-5.5</span> + <span class="number">15</span> * alpha;</div><div class="line">        mesh.position.set(<span class="number">-5</span>, y, <span class="number">0</span>).normalize().multiplyScalar(unitLength);</div><div class="line">        scene.add(mesh);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    camera.position.set(<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="1-6-Apply-Euler-basic-example"><a href="#1-6-Apply-Euler-basic-example" class="headerlink" title="1.6 - Apply Euler basic example"></a>1.6 - Apply Euler basic example</h3><p>This time I will be using the <a href="/2021/06/18/threejs-vector3-apply-euler/">apply Euler method of the vector3 class</a> as a way to go about setting the position of a whole bunch of mesh objects. This method allows me to use an instance of the <a href="/2021/04/28/threejs-euler/">Euler class</a> to set the state of the Vector3 object. The Euler class is the kind of object that is used for the value of the rotation property of an object3d based object. It is very similar to that of Vector3 in some respects, but the values for each axis are radian values rather than a position relative to an origin.</p>
<p>So then I can use something like the set method to set a standard starting location from the origin, and then use the apply Euler method with an instance of the Euler class to preform a translation. I can then make sure that the unit length is one to begin with, or use the normalize method to do so, at which point I can use multiply scalar to adjust the vector unit length. This is then one way to set up a system of sorts where I can position things in a spherical kind of way.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE TYPE OBJECT, CAMERA TYPE OBJECT, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">9</span>, <span class="number">9</span>));</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPER FUNCTIONS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> makeMesh = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.25</span>, <span class="number">20</span>, <span class="number">20</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">        <span class="keyword">return</span> mesh;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">const</span> setSpherePos = <span class="function">(<span class="params">mesh, a1, a2, radius</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> e = <span class="keyword">new</span> THREE.Euler();</div><div class="line">        e.y = <span class="built_in">Math</span>.PI * <span class="number">2</span> * a1;</div><div class="line">        e.z = -<span class="built_in">Math</span>.PI * <span class="number">0.5</span> + <span class="built_in">Math</span>.PI * a2;</div><div class="line">        mesh.position.set(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>).applyEuler(e).multiplyScalar(radius);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">const</span> len = <span class="number">400</span>;</div><div class="line">    <span class="keyword">const</span> perRing = <span class="number">40</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">        <span class="keyword">const</span> mesh = makeMesh();</div><div class="line">        <span class="keyword">const</span> ri = <span class="built_in">Math</span>.floor( i / perRing);</div><div class="line">        <span class="keyword">const</span> mi = i % perRing;</div><div class="line">        <span class="keyword">const</span> a1 = mi / perRing;</div><div class="line">        <span class="keyword">const</span> a2 = (ri + <span class="number">1</span>) / (( len / perRing ) + <span class="number">1</span>);</div><div class="line">        setSpherePos(mesh, a1, a2, <span class="number">5</span>);</div><div class="line">        <span class="keyword">const</span> a3 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a2) / <span class="number">0.5</span>;</div><div class="line">        mesh.scale.multiplyScalar(<span class="number">0.25</span> + a3 * <span class="number">1.25</span>)</div><div class="line">        scene.add(mesh);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    camera.position.set(<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h2 id="2-Setting-the-positions-of-a-parent-and-child-objects"><a href="#2-Setting-the-positions-of-a-parent-and-child-objects" class="headerlink" title="2 - Setting the positions of a parent and child objects"></a>2 - Setting the positions of a parent and child objects</h2><p>Things can get a little confusing when it comes to working with one or more nested objects that are children of another object. In such situations there is setting position relative to a parent object, and then there is setting an object relative to what is called world space. So then I think I should have a section in this post in which I go over at least a few examples that have to do with setting the position of objects by way of both local and world space which is one major thing that comes up when it comes to groups of objects, and setting position of children and parent objects in such situations.</p>
<h3 id="2-1-Group-object-example-and-local-space"><a href="#2-1-Group-object-example-and-local-space" class="headerlink" title="2.1 - Group object example and local space"></a>2.1 - Group object example and local space</h3><p>There is not just setting the position of a single object, but also all the children of a single object as well which can be called a  parent object. When I use the add method of a group object, or any object3d based object for that matter to add and object as a child of the parent object, the position of that child object will be relative to the parent object. The example here makes use of the <a href="/2018/05/16/threejs-grouping-mesh-objects/">THREE.Group constructor</a> as a way to just create a kind of blank object that will just work as a wrapper of sorts for additional objects that I will be adding to the group that are mesh objects.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE TYPE OBJECT, CAMERA TYPE OBJECT, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">9</span>, <span class="number">9</span>));</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// CREATING A GROUP WITH CHILDREN</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>, len = <span class="number">30</span>, radian, radius, x, y, z;</div><div class="line">    <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">        radian = <span class="built_in">Math</span>.PI * <span class="number">2</span> * <span class="number">4</span> / len * i;</div><div class="line">        radius = <span class="number">1</span>;</div><div class="line">        x = <span class="built_in">Math</span>.cos(radian) * radius;</div><div class="line">        y = <span class="number">10</span> / <span class="number">2</span> * <span class="number">-1</span> + <span class="number">10</span> * ( i / len);</div><div class="line">        z = <span class="built_in">Math</span>.sin(radian) * radius;</div><div class="line">        <span class="comment">// SETTING THE POSITION OF JUST THIS MESH</span></div><div class="line">        mesh.position.set(x, y, z);</div><div class="line">        group.add(mesh);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    scene.add(group);</div><div class="line">    <span class="comment">// SETTING POSITION OF THE GROUP</span></div><div class="line">    group.position.set(<span class="number">-5</span>,<span class="number">0</span>,<span class="number">-5</span>)</div><div class="line">    <span class="comment">// POSITON AND ROTATION OF CAMERA</span></div><div class="line">    camera.position.set(<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<p>So then the situation here is that I am creating a group, and then adding a bunch of mesh objects to the group, and then I am adding the group to the scene object. The position values of the mesh objects are then relative to the position of the group, and then the group is relative to the position of the scene object. The scene object is also an object3d based object just like that of the group and mesh objects, so then this two has a position property. By default the position of the scene is at 0,0,0 but it too can be moved. When a scene objects is moved it is then relative to a final kind of world space then, which I will be getting into more later in this section.</p>
<h3 id="2-2-Get-World-Position-method"><a href="#2-2-Get-World-Position-method" class="headerlink" title="2.2 - Get World Position method"></a>2.2 - Get World Position method</h3><p>When adding a child object to a group the position of each child object will be relative to the parent object, and not that of world space. There is then a method in the Object3d class to help get a world space relative position rather than a parent object relative position, namely <a href="/2021/05/25/threejs-object3d-get-world-position/">the get world position method </a>. This is then a method in the object3d prototype that I find myself using all the time whenever I find myself in a situation in which I want a world space relative location rather than the typical local space location of the values of position attributes of nested objects.</p>
<p>To use this get world position method I need to create a new Vector3 object to copy the world position to first. Then I just call the get world position method of the Object3d based object such as a group that I would like to get the world position of, passing the new vector3 object that will get the values copied to. After that I then have the world position of the object, I can then add an additional value from there to get the world space position that would be relative to the group object rather than the scene, or rather world space and a scene object can also have its x and y values alerted to something other than 0,0.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE TYPE OBJECT, CAMERA TYPE OBJECT, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0x0000ff</span>, <span class="number">0xffffff</span>));</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// CREATING A GROUP WITH CHILDREN</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">    group.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>,<span class="number">10</span>, <span class="number">0xff0000</span>, <span class="number">0x00ff00</span>));</div><div class="line">    <span class="keyword">const</span> len = <span class="number">20</span>;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>, radian, radius = <span class="number">5</span>, x, y = <span class="number">0</span>, z;</div><div class="line">    <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">        radian = <span class="built_in">Math</span>.PI * <span class="number">2</span> / len * i;</div><div class="line">        x = <span class="built_in">Math</span>.cos(radian) * radius;</div><div class="line">        z = <span class="built_in">Math</span>.sin(radian) * radius;</div><div class="line">        mesh.position.set(x, y, z);</div><div class="line">        mesh.lookAt(group.position);</div><div class="line">        group.add(mesh);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    scene.add(group);</div><div class="line">    group.position.set(<span class="number">-12</span>, <span class="number">0</span>, <span class="number">-7</span>);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// WORLD SPACE VECTOR</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> v_ws = <span class="keyword">new</span> THREE.Vector3(<span class="number">1</span>, <span class="number">1.5</span>, <span class="number">-1</span>);</div><div class="line">    <span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">        <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>),</div><div class="line">        <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;<span class="attr">color</span>: <span class="string">'red'</span>&#125;));</div><div class="line">    scene.add(mesh1);</div><div class="line">    mesh1.position.copy(v_ws);</div><div class="line">    <span class="keyword">const</span> mesh2 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">        <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>),</div><div class="line">        <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;<span class="attr">color</span>: <span class="string">'red'</span>&#125;));</div><div class="line">    scene.add(mesh2);</div><div class="line">    <span class="comment">// get world position works</span></div><div class="line">    <span class="keyword">const</span> v_ls = <span class="keyword">new</span> THREE.Vector3()</div><div class="line">    group.getWorldPosition(v_ls);</div><div class="line">    v_ls.add(v_ws)</div><div class="line">    mesh2.position.copy( v_ls );</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LIGHT</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">    dl.position.set(<span class="number">1</span>, <span class="number">4</span>, <span class="number">2</span>)</div><div class="line">    scene.add(dl);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// camera position</span></div><div class="line">    camera.position.set(<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">    <span class="comment">// render</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h2 id="3-Setting-Position-With-Curves"><a href="#3-Setting-Position-With-Curves" class="headerlink" title="3 - Setting Position With Curves"></a>3 - Setting Position With Curves</h2><p>As of late I am thinking that maybe the best way to go about setting the position of an object3d based object would be to look into the <a href="/2022/06/17/threejs-curve/">curve class</a> to do so. This might be a great way to set position when it comes to video projects, but might also work well in games and so forth by creating new curves as needed as well. There are ways of making custom curve classes but I have found that I do not need to bother with that by rather make use of one of the many built in curve classes to do so. In any case once I have a curve object I can use the get point method of the base curve class to get a vector3 object at any point along the curve, and then copy this to the Vector3 object at the position property of the object3d based object that I would like to positon to that point along the curve.</p>
<p>Anyway in this section I will not be getting into anything to advanced but rather just touching base on the basics of creating a curve and then getting a vector3 object along that curve that can then be used with the copy method of the vector3 class to set position. When it comes to really getting into curves and having a whole bunch of logic at the ready from project to project one might want to go as far as starting to have some kind of module in which to take from project to project when it comes to curves. With that said I have one of my <a href="/2022/11/18/threejs-examples-curves-module/">threejs example projects that is a kind of curve module</a>.</p>
<h3 id="3-1-Basic-Curve-example-to-set-position"><a href="#3-1-Basic-Curve-example-to-set-position" class="headerlink" title="3.1 - Basic Curve example to set position"></a>3.1 - Basic Curve example to set position</h3><p>To start this section off here I have an example in which I am using the built in <a href="/2022/10/21/threejs-curve-quadratic-bezier-curve3/">THREE.QuadraticBezierCurve3</a> to create a curve. This curve constructor will take three arguments all of which are Vector3 objects, one for a start point, another for a control point, and a final one for and end point. Once I have my curve object that I want I can use the get point method to get any point along the curve by just calling the get point method and giving a value between 0 and one as the argument for the get point method.</p>
<p>In this example then I am creating a loop in which I am creating a whole bunch of mesh objects that will be placed along the curve. When I call the get point method I just give the current index value over the total number of mesh objects I want to get the point that I want along the curve.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>));</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">75</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CURVE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> v_start = <span class="keyword">new</span> THREE.Vector3(<span class="number">-5</span>,<span class="number">0</span>,<span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> v_end = <span class="keyword">new</span> THREE.Vector3(<span class="number">-5</span>,<span class="number">5</span>,<span class="number">-5</span>);</div><div class="line"><span class="keyword">const</span> v_control = <span class="keyword">new</span> THREE.Vector3(<span class="number">15</span>,<span class="number">0</span>,<span class="number">7</span>);</div><div class="line"><span class="keyword">const</span> curve = <span class="keyword">new</span> THREE.QuadraticBezierCurve3(v_start, v_control, v_end);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> len = <span class="number">40</span>;</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">    <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.125</span>, <span class="number">30</span>, <span class="number">30</span>), <span class="keyword">new</span> THREE.MeshNormalMaterial() );</div><div class="line">    <span class="keyword">const</span> alpha = i / ( len - <span class="number">1</span> );</div><div class="line">    mesh.position.copy( curve.getPoint( alpha ) );</div><div class="line">    scene.add(mesh);</div><div class="line">    i += <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="3-2-Creating-a-Curve-and-using-a-number-of-helper-methods-to-do-so"><a href="#3-2-Creating-a-Curve-and-using-a-number-of-helper-methods-to-do-so" class="headerlink" title="3.2 - Creating a Curve and using a number of helper methods to do so"></a>3.2 - Creating a Curve and using a number of helper methods to do so</h3><p>In this example I am using a few helper methods that I made while working on my Frink beta world video project series. In the video project I am creating curves and using those curves to set the position of a camera along with cretaing random points in space along with these curves. However to get to the point here I am using one helper function that is just an abstraction of the THREE.QuadraticBezierCurve3 method, and another helper that calls that abstraction that allows for me to define the control point as a delta from the midpoint between the start and end points that are used to define the curve.</p>
<iframe class="youtube_video" src="https://www.youtube.com/embed/GDXM1o9hMK4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<p>I then use these helpers to create the curve that I want at which point I can use it to get any point along the curve by using the get point method of the base curve class. The returned vector3 object can then be used to set the position of an object by just passing it as an argument to the copy method of the Vector3 class that is called off of the Vector3 object store at the position of the object3d based object that I would like to set to that given position.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">75</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">1</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    ( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS - from 'frink3' project in videoground-beta-world</span></div><div class="line">    <span class="comment">//           ( https://github.com/dustinpfister/videoground-beta-world )</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// just a short hand for THREE.QuadraticBezierCurve3</span></div><div class="line">    <span class="keyword">const</span> QBC3 = <span class="function"><span class="keyword">function</span>(<span class="params">x1, y1, z1, x2, y2, z2, x3, y3, z3</span>)</span>&#123;</div><div class="line">        <span class="keyword">let</span> vs = x1;</div><div class="line">        <span class="keyword">let</span> ve = y1;</div><div class="line">        <span class="keyword">let</span> vc = z1;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="number">9</span>)&#123;</div><div class="line">            vs = <span class="keyword">new</span> THREE.Vector3(x1, y1, z1);</div><div class="line">            ve = <span class="keyword">new</span> THREE.Vector3(x2, y2, z2);</div><div class="line">            vc = <span class="keyword">new</span> THREE.Vector3(x3, y3, z3);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> THREE.QuadraticBezierCurve3( vs, vc, ve );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// QBDelta helper using QBC3</span></div><div class="line">    <span class="comment">// this works by giving deltas from the point that is half way between</span></div><div class="line">    <span class="comment">// the two start and end points rather than a direct control point for x3, y3, and x3</span></div><div class="line">    <span class="keyword">const</span> QBDelta = <span class="function"><span class="keyword">function</span>(<span class="params">x1, y1, z1, x2, y2, z2, x3, y3, z3</span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> vs = <span class="keyword">new</span> THREE.Vector3(x1, y1, z1);</div><div class="line">        <span class="keyword">const</span> ve = <span class="keyword">new</span> THREE.Vector3(x2, y2, z2);</div><div class="line">        <span class="comment">// deltas</span></div><div class="line">        <span class="keyword">const</span> vDelta = <span class="keyword">new</span> THREE.Vector3(x3, y3, z3);</div><div class="line">        <span class="keyword">const</span> vc = vs.clone().lerp(ve, <span class="number">0.5</span>).add(vDelta);</div><div class="line">        <span class="keyword">const</span> curve = QBC3(vs, ve, vc);</div><div class="line">        <span class="keyword">return</span> curve;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// CURVE</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> curve = QBC3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-5</span>, <span class="number">-20</span>, <span class="number">6</span>, <span class="number">4.5</span>);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// mesh object that will be positioned along the curve</span></div><div class="line">    <span class="keyword">const</span> MESH_COUNT = <span class="number">10</span>;</div><div class="line">    <span class="keyword">const</span> POINT_COUNT = <span class="number">100</span>;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; MESH_COUNT)&#123;</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">0.75</span>, <span class="number">0.75</span>, <span class="number">0.75</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;<span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.5</span>&#125;));</div><div class="line">        <span class="keyword">const</span> a1 = <span class="built_in">Math</span>.round(i / MESH_COUNT * POINT_COUNT) / (POINT_COUNT - POINT_COUNT / MESH_COUNT );</div><div class="line">        <span class="keyword">const</span> a2 = a1; <span class="comment">//0.1 + a1 * 0.9;</span></div><div class="line">        <span class="comment">// USING THE getPoint METHOD OF THE CURVE TO GET a Vector3</span></div><div class="line">        <span class="comment">// OBJECT THAT I CAN THEN USE WITH THE COPY METHOD TO SET</span></div><div class="line">        <span class="comment">// THE STATE OF THE POSITION OF THIS MESH OBJECT</span></div><div class="line">        <span class="keyword">const</span> v3 =  curve.getPoint( a2);</div><div class="line">        mesh.position.copy( v3 );</div><div class="line">        mesh.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        scene.add(mesh);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// grid helper</span></div><div class="line">    <span class="keyword">const</span> grid = <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    scene.add(grid);</div><div class="line">    <span class="comment">// points to get an indea of what the deal is with the curve</span></div><div class="line">    <span class="keyword">const</span> points = <span class="keyword">new</span> THREE.Points(</div><div class="line">        <span class="keyword">new</span> THREE.BufferGeometry().setFromPoints( curve.getPoints(POINT_COUNT) ),</div><div class="line">        <span class="keyword">new</span> THREE.PointsMaterial(&#123;<span class="attr">size</span>: <span class="number">0.125</span>, <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>)&#125;)</div><div class="line">    );</div><div class="line">    scene.add(points);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="3-3-Curves-get-point-method-and-get-alpha-methods"><a href="#3-3-Curves-get-point-method-and-get-alpha-methods" class="headerlink" title="3.3 - Curves, get point method, and get alpha methods"></a>3.3 - Curves, get point method, and get alpha methods</h3><p>There is not just using a curve and the get points method, but also using a curve and a custom method for getting the alpha method to use with the get point method. The get points method might be nice in that it will quickly return an array of vector3 objects, however one draw back is that it will do so in a way in which the space between the points will always be consistent. Although often that might be what one might one, in some cases I might want the space between the points to follow some other kind of logic.</p>
<p>There is then looking into creating what I have come to call get alpha methods, there are methods that will return a value between 0 and 1 that can be used with the get point method of the curve base class to create an array of vector3 objects. In this example I have a get smoother helper function that is just a wrapper for the <a href="https://threejs.org/docs/#api/en/math/MathUtils.smootherstep" target="_blank" rel="external">MathUtils.getsmoother</a> method. Speaking of the <a href="/2022/04/11/threejs-math-utils/">Math Utils object</a> that is a good place to start when it comes to getting an idea of what there is to work with with some of these kinds of methods.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    <span class="comment">// grid helper</span></div><div class="line">    <span class="keyword">const</span> grid = <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    scene.add(grid);</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">75</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">1</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">5</span>, <span class="number">7</span>, <span class="number">5</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    ( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// just a short hand for THREE.QuadraticBezierCurve3</span></div><div class="line">    <span class="keyword">const</span> QBC3 = <span class="function"><span class="keyword">function</span>(<span class="params">x1, y1, z1, x2, y2, z2, x3, y3, z3</span>)</span>&#123;</div><div class="line">        <span class="keyword">let</span> vs = x1;</div><div class="line">        <span class="keyword">let</span> ve = y1;</div><div class="line">        <span class="keyword">let</span> vc = z1;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="number">9</span>)&#123;</div><div class="line">            vs = <span class="keyword">new</span> THREE.Vector3(x1, y1, z1);</div><div class="line">            ve = <span class="keyword">new</span> THREE.Vector3(x2, y2, z2);</div><div class="line">            vc = <span class="keyword">new</span> THREE.Vector3(x3, y3, z3);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> THREE.QuadraticBezierCurve3( vs, vc, ve );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create curve points</span></div><div class="line">    <span class="keyword">const</span> createCurvePoints = <span class="function">(<span class="params">curve, point_count, point_size, point_color, get_alpha</span>) =&gt;</span> &#123;</div><div class="line">        point_count = point_count === <span class="literal">undefined</span> ? <span class="number">100</span> : point_count;</div><div class="line">        point_size = point_size === <span class="literal">undefined</span> ? <span class="number">1</span> : point_size;</div><div class="line">        point_color = point_color || <span class="keyword">new</span> THREE.Color(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">        get_alpha = get_alpha || <span class="function"><span class="keyword">function</span>(<span class="params">a1</span>)</span>&#123; <span class="keyword">return</span> a1; &#125;;</div><div class="line">        <span class="keyword">const</span> v3_array = [];</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(i &lt; point_count)&#123;</div><div class="line">            v3_array.push( curve.getPoint( get_alpha(i / point_count) ));</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">const</span> points = <span class="keyword">new</span> THREE.Points(</div><div class="line">            <span class="keyword">new</span> THREE.BufferGeometry().setFromPoints( v3_array ),</div><div class="line">            <span class="keyword">new</span> THREE.PointsMaterial(&#123;<span class="attr">size</span>: point_size, <span class="attr">color</span>: point_color&#125;)</div><div class="line">        );</div><div class="line">        <span class="keyword">return</span> points;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// smooth get alpha</span></div><div class="line">    <span class="keyword">const</span> getAlphaSmoother = <span class="function">(<span class="params">a1</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> THREE.MathUtils.smootherstep(a1, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// curve mesh objects helper</span></div><div class="line">    <span class="keyword">const</span> addCurveMeshObjects = <span class="function">(<span class="params">parent, curve, mesh_count, get_alpha</span>) =&gt;</span> &#123;</div><div class="line">        get_alpha = get_alpha || <span class="function"><span class="keyword">function</span>(<span class="params">a1</span>)</span>&#123; <span class="keyword">return</span> a1; &#125;;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(i &lt; mesh_count)&#123;</div><div class="line">            <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>),</div><div class="line">                <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;<span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.5</span>&#125;));</div><div class="line">            <span class="keyword">const</span> v3 =  curve.getPoint( get_alpha( i / mesh_count ) );</div><div class="line">            mesh.position.copy( v3 );</div><div class="line">            parent.add(mesh);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// CURVE</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> curve1 = QBC3(<span class="number">-2</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">-2</span>, <span class="number">0</span>, <span class="number">-5</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">const</span> curve2 = QBC3(<span class="number">2</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">-5</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    addCurveMeshObjects(scene, curve1, <span class="number">20</span>);</div><div class="line">    scene.add( createCurvePoints(curve1, <span class="number">40</span>, <span class="number">0.125</span>, <span class="keyword">new</span> THREE.Color(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>) ) );</div><div class="line">    addCurveMeshObjects(scene, curve2, <span class="number">20</span>, getAlphaSmoother);</div><div class="line">    scene.add( createCurvePoints(curve2, <span class="number">40</span>, <span class="number">0.125</span>, <span class="keyword">new</span> THREE.Color(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>), getAlphaSmoother ) );</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<p>The end result here is then two curves one of which uses the default get alpha method that will give a similar result to the get points method. The other curve uses the get alpha method that makes use of the smoother step method that results in the points starting out space out closer together at first, then farther apart as the center of the curve is reached, at which pint the spacing goes back down again.</p>
<h2 id="4-–-Positioning-objects-to-the-position-attribute-of-geometry"><a href="#4-–-Positioning-objects-to-the-position-attribute-of-geometry" class="headerlink" title="4 – Positioning objects to the position attribute of geometry"></a>4 – Positioning objects to the position attribute of geometry</h2><p>When it comes to buffer geometry of any kind one of the most important attributes is the position attribute. This is the attribute that will contain the actual points in space that from the triangles of the geometry itself. As such this is a must have attribute even for geometries that are just going to be used with the THREE.Points, or THREE.Line objects.</p>
<p>Anyway in this section I will be exploring the idea of using the position attribute of a buffer geometry instance to set the position of objects.</p>
<h3 id="4-1-Using-the-getX-getY-and-getZ-Buffer-Attribute-methods"><a href="#4-1-Using-the-getX-getY-and-getZ-Buffer-Attribute-methods" class="headerlink" title="4.1 - Using the getX, getY, and getZ Buffer Attribute methods"></a>4.1 - Using the getX, getY, and getZ Buffer Attribute methods</h3><p>In this example I want to make a helper function where I just pass a geometry, and an alpha value to get a Vector3 object that is the point in the geometry based on the given alpha value. In other words I give a geometry, and then a 0 to 1 value, and then the helper will convert the alpha value to an index of a point in the position attribute, and return a Vector3 object that is that point in space.</p>
<p>When I have a buffer geometry instance, and there is a position attribute to work with, I can use the get attribute method to gain a reference to the buffer attribute object of the position attribute. I can then use the getX, getY, and getZ methods as a way to create a Vector3 object that I can then use with the copy method of the position attribute of a object3d based object. When it comes to the index values that I use with these buffer attribute class methods I can use the count property to find out how far to go when it comes to looping, or in this case concert an alpha value to an index value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE TYPE OBJECT, CAMERA TYPE OBJECT, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>));</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line">    camera.position.set(<span class="number">0</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild( renderer.domElement );</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPER FUNCTIONS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// get a geo position vector3 by a given alpha value</span></div><div class="line">    <span class="keyword">const</span> getGeoPosByAlpha = <span class="function">(<span class="params">geo, alpha</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> pos = geo.getAttribute(<span class="string">'position'</span>);</div><div class="line">        <span class="keyword">const</span> count = pos.count;</div><div class="line">        <span class="keyword">const</span> index = <span class="built_in">Math</span>.round( ( count - <span class="number">1</span> ) * alpha );</div><div class="line">        <span class="keyword">const</span> v = <span class="keyword">new</span> THREE.Vector3();</div><div class="line">        v.x = pos.getX(index);</div><div class="line">        v.y = pos.getY(index);</div><div class="line">        v.z = pos.getZ(index);</div><div class="line">        <span class="keyword">return</span> v;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a 'pointer' mesh object</span></div><div class="line">    <span class="keyword">const</span> createPointerMesh = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.2</span>, <span class="number">20</span>, <span class="number">20</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial()</div><div class="line">        );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// POSITION TO MESH OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> material_posto = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">wireframe</span>: <span class="literal">true</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.15</span>&#125;);</div><div class="line">    <span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">    scene.add(group);</div><div class="line">    <span class="comment">// sphere that will be the position property used</span></div><div class="line">    <span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">2</span>, <span class="number">14</span>, <span class="number">14</span>), material_posto );</div><div class="line">    group.add(mesh1);</div><div class="line">    <span class="comment">// torus that will be the position property used</span></div><div class="line">    <span class="keyword">const</span> mesh2 = <span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.TorusGeometry(<span class="number">1.5</span>, <span class="number">0.75</span>, <span class="number">14</span>, <span class="number">14</span>), material_posto);</div><div class="line">    mesh2.position.set(<span class="number">-5</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    mesh2.geometry.rotateX(<span class="built_in">Math</span>.PI * <span class="number">0.5</span>)</div><div class="line">    group.add(mesh2);</div><div class="line">    <span class="comment">// cone that will be the position property used</span></div><div class="line">    <span class="keyword">const</span> mesh3 = <span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.ConeGeometry(<span class="number">2</span>, <span class="number">4</span>, <span class="number">14</span>, <span class="number">14</span>), material_posto);</div><div class="line">    mesh3.position.set(<span class="number">5</span>, <span class="number">0</span>, <span class="number">-5</span>);</div><div class="line">    group.add(mesh3);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// POINTER MESH OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">const</span> count = <span class="number">16</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; count)&#123;</div><div class="line">        <span class="keyword">const</span> a1 = i / count;</div><div class="line">        group.children.forEach(<span class="function">(<span class="params"> mesh </span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">const</span> mesh_pointer = createPointerMesh();</div><div class="line">            <span class="keyword">const</span> v = getGeoPosByAlpha(mesh.geometry, a1);</div><div class="line">            mesh_pointer.position.copy(v).add(mesh.position);</div><div class="line">            scene.add(mesh_pointer);</div><div class="line">        &#125;);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h2 id="5-Deterministic-Animation-examples"><a href="#5-Deterministic-Animation-examples" class="headerlink" title="5 - Deterministic Animation examples"></a>5 - Deterministic Animation examples</h2><p>In order to really get a solid grasp on the subject of setting the position of object3d based objects in threejs one will want to work out a number of animations in which they are not just setting the position once, but a whole bunch of times over a length of time to create a kind of animation. When it comes to animation there are two general schools of thought that come to mind for me at least and that would be Deterministic, and Stochastic style animation. In other worlds there is having a Deterministic kind of animation where each frame over time is predicable, in other words think video rather than video game. Stochastic style animation is what I would often call the kinds of animations where randomness, and other factors such as user input are at play.</p>
<p>For this section I will be sticking to just a few examples of a kind of Deterministic style, saving the alternative style for some other post or section outside of this one. Many of these examples here will then often be in the demo videos that I embed for this post then as I often start out such projects in this kind of section.</p>
<h3 id="5-1-Just-moving-a-bunch-of-mesh-objects-on-the-x-axis-by-differing-rates"><a href="#5-1-Just-moving-a-bunch-of-mesh-objects-on-the-x-axis-by-differing-rates" class="headerlink" title="5.1 - Just moving a bunch of mesh objects on the x axis by differing rates"></a>5.1 - Just moving a bunch of mesh objects on the x axis by differing rates</h3><p>To start out with animation of the position object3d property I have an example here where I now have an animation loop rather than just a single call of the render method of the webgl renderer. This is an animation loop example that I seem to keep copying and pasting from one example to another over and over again that allows for me to set differing values for a frames per second value.  I then have one FPS rate that will be used to set the target frame rate at which the update function is called, and the other can be used to set the current frame value that is used in the update method to update the state of things. This allows for me to set a low update frame rate while still going by a higher frame rate update when it comes to the movement of objects. This helps to conserve system resources while maintain a rate of movement that is consistent. In other words I can set thee update rate low which will result in choppy video, but use less CPU overhead, or a higher update rate which will result in smoother video but at the cost of eating up more CPU Overhead.</p>
<p>Regardless of how I go about adjusting these settings the aim here is to update everything just by a frame over max frame value, rather than all kinds of other factors that might be at play when it comes to random style animation.</p>
<p>The main idea here with this one is to create a group of mesh objects and have them all move along the x axis between a min and max value. To set the x value for each mesh object I am multiplying a set max amount delta value from the start point, then multiplying that by a number that is the current index of the child mesh. I then pass the result of this to the THREE.MathUtils.euclideanModulo method of the math utils object, passing the max delta value as the second argument for this function.</p>
<p>The end result of all of this is then to end up with a whole bunch of mesh objects that are moving from a start x position to another position that is a max delta from that start position, but at differing rates, and having them wrap around.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE TYPE OBJECT, CAMERA TYPE OBJECT, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">9</span>, <span class="number">9</span>));</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPER FUNCTIONS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// make a single mesh object</span></div><div class="line">    <span class="keyword">const</span> MESH_GEO = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.5</span>, <span class="number">20</span>, <span class="number">20</span>);</div><div class="line">    <span class="keyword">const</span> MESH_MATERIAL = <span class="keyword">new</span> THREE.MeshNormalMaterial();</div><div class="line">    <span class="keyword">const</span> makeMesh = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            MESH_GEO,</div><div class="line">            MESH_MATERIAL);</div><div class="line">        <span class="keyword">return</span> mesh;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// make a group of mesh objects</span></div><div class="line">    <span class="keyword">const</span> makeGroup = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">       <span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">const</span> len = <span class="number">9</span>;</div><div class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">            <span class="keyword">const</span> mesh = makeMesh();</div><div class="line">            mesh.position.x = <span class="number">-4</span>;</div><div class="line">            mesh.position.z = <span class="number">-4</span> + i;</div><div class="line">            mesh.position.y =  <span class="number">0.5</span>;</div><div class="line">            group.add(mesh);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">       <span class="keyword">return</span> group;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set a group by an alpha value</span></div><div class="line">    <span class="keyword">const</span> setGroup = <span class="function">(<span class="params">group, alpha</span>) =&gt;</span> &#123;</div><div class="line">        group.children.forEach(<span class="function">(<span class="params">mesh, i</span>) =&gt;</span> &#123;</div><div class="line">            mesh.position.x = <span class="number">-4</span> + THREE.MathUtils.euclideanModulo( <span class="number">8</span> * ( i + <span class="number">1</span> ) * alpha, <span class="number">8</span> );</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// create group</span></div><div class="line">    <span class="keyword">const</span> group = makeGroup();</div><div class="line">    scene.add(group);</div><div class="line">    <span class="comment">// camera pos</span></div><div class="line">    camera.position.set(<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = <span class="number">300</span>;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// update</span></div><div class="line">    <span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        <span class="comment">// UPDATE GROUP</span></div><div class="line">        setGroup(group, frame / frameMax);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="5-2-Lerp-method-animation-example"><a href="#5-2-Lerp-method-animation-example" class="headerlink" title="5.2 - Lerp method animation example"></a>5.2 - Lerp method animation example</h3><p>Now that I have a nice basic frame over max frame animation example, I can now start to move into another example that makes use of many of the Vector3 class features that I wrote about in the basic section. One very useful method that I covered out of many others was the lerp method of the vector3 class which can be used in combination with the clone method as a great way to move an object back and from between a start and end vector.</p>
<p>So then for this animation example I will have a collection of mesh objects that I move between a start and end Vector with the Lerp method and the use of that method will be the center point of this specific example. I will however also make use of a number of other features of the vector3 class such as the add method, as well as some Math utils methods to helper make things more interesting.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE TYPE OBJECT, CAMERA TYPE OBJECT, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">9</span>, <span class="number">9</span>));</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">100</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">// camera pos</span></div><div class="line">    camera.position.set(<span class="number">6</span>, <span class="number">9</span>, <span class="number">6</span>);</div><div class="line">    camera.lookAt(<span class="number">1.4</span>, <span class="number">0</span>, <span class="number">1.4</span>);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPER FUNCTIONS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// get a value between 0 and 1 with the given numerator denominator and count</span></div><div class="line">    <span class="keyword">const</span> getAlpha = <span class="function">(<span class="params">n, d, ct</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> THREE.MathUtils.euclideanModulo(n / d * ct, <span class="number">1</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// getBias is like getAlpha but the value will 'pingpong', I often also refer to this as a 'bias' value</span></div><div class="line">    <span class="keyword">const</span> getBias = <span class="function">(<span class="params">n, d, ct</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> THREE.MathUtils.pingpong(getAlpha(n, d, ct) - <span class="number">0.5</span>, <span class="number">1</span>) * <span class="number">2</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// just passing a getBias call to THREE.MathUtils.smoothstep</span></div><div class="line">    <span class="keyword">const</span> getSmoothBias = <span class="function">(<span class="params">n, d, ct</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> THREE.MathUtils.smoothstep(getBias(n, d, ct), <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// make a single mesh object with custom user data</span></div><div class="line">    <span class="keyword">const</span> MESH_GEO = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.75</span>, <span class="number">20</span>, <span class="number">20</span>);</div><div class="line">    <span class="keyword">const</span> makeMesh = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            MESH_GEO,</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123; <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.5</span> &#125;));</div><div class="line">        <span class="keyword">const</span> ud = mesh.userData;</div><div class="line">        ud.v_start = opt.v_start || <span class="keyword">new</span> THREE.Vector3(<span class="number">-4</span>, <span class="number">0</span>, <span class="number">-4</span>);</div><div class="line">        ud.v_end = opt.v_end || <span class="keyword">new</span> THREE.Vector3(<span class="number">4</span>, <span class="number">0</span>, <span class="number">-4</span>);</div><div class="line">        ud.v_add = opt.v_add || <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">8</span>);</div><div class="line">        <span class="keyword">return</span> mesh;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">const</span> updateMesh = <span class="function">(<span class="params">mesh, opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.alphaLerp = opt.alphaLerp === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.alphaLerp;</div><div class="line">        opt.alphaAdd = opt.alphaAdd === <span class="literal">undefined</span> ? <span class="number">1</span> - getSmoothBias(opt.alphaLerp, <span class="number">1</span>, <span class="number">1</span>) : opt.alphaAdd;</div><div class="line">        <span class="comment">//const alpha = getSmoothBias(frame, frameMax, 4);</span></div><div class="line">        <span class="keyword">const</span> ud = mesh.userData;</div><div class="line">        <span class="keyword">const</span> delta = ud.v_add.clone().multiplyScalar( opt.alphaAdd );</div><div class="line">        mesh.position.copy(ud.v_start).lerp(ud.v_end, opt.alphaLerp).add( delta );</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">    <span class="keyword">const</span> len = <span class="number">18</span>;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">        <span class="keyword">const</span> alpha = i / len;</div><div class="line">        <span class="keyword">const</span> mesh = makeMesh(&#123;</div><div class="line">            <span class="attr">v_add</span>: <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">4</span>, <span class="number">8</span>)</div><div class="line">        &#125;);</div><div class="line">        group.add(mesh);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    scene.add(group);</div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = <span class="number">800</span>;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// update</span></div><div class="line">    <span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        group.children.forEach(<span class="function">(<span class="params">mesh, i, arr</span>)=&gt;</span>&#123;</div><div class="line">            <span class="keyword">let</span> alpha1 =  <span class="number">1</span> - getSmoothBias(frame, frameMax, <span class="number">4</span>),</div><div class="line">            alpha2 = getAlpha( alpha1 - <span class="number">0.75</span> * ( i / arr.length ), <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">            updateMesh(mesh, &#123;</div><div class="line">                <span class="attr">alphaLerp</span>: alpha2,</div><div class="line">                <span class="attr">alphaAdd</span>: <span class="number">1</span> - getSmoothBias(alpha2, <span class="number">1</span>, <span class="number">2</span> * alpha1)</div><div class="line">            &#125;);</div><div class="line">            <span class="comment">// opacity</span></div><div class="line">            <span class="keyword">let</span> alphaEffect = <span class="number">1</span> - getSmoothBias(alpha2, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">            mesh.material.opacity = alphaEffect;</div><div class="line">            <span class="comment">// scale</span></div><div class="line">            <span class="keyword">let</span> s = <span class="number">0.25</span> + <span class="number">0.75</span> * alphaEffect;</div><div class="line">            mesh.scale.set(s, s, s);</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="5-3-Using-a-Curve-to-position-a-mesh-object-over-time"><a href="#5-3-Using-a-Curve-to-position-a-mesh-object-over-time" class="headerlink" title="5.3 - Using a Curve to position a mesh object over time"></a>5.3 - Using a Curve to position a mesh object over time</h3><p>Here I have an animation loop example based off the basic curve section example in which I am moving a mesh along a curve. This time I made a custom get alpha method that makes use of a method in the <a href="/2022/04/11/threejs-math-utils/">Math Utils object</a> to get a smooth animation along the curve back and forth. A get alpha method is just a way to go about getting a value between 0 and 1 that will help with creating an argument value to use with the get point method of the base curve class.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">75</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">1</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">6</span>, <span class="number">6</span>, <span class="number">6</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    ( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS </span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// just a short hand for THREE.QuadraticBezierCurve3</span></div><div class="line">    <span class="keyword">const</span> QBC3 = <span class="function"><span class="keyword">function</span>(<span class="params">x1, y1, z1, x2, y2, z2, x3, y3, z3</span>)</span>&#123;</div><div class="line">        <span class="keyword">let</span> vs = x1;</div><div class="line">        <span class="keyword">let</span> ve = y1;</div><div class="line">        <span class="keyword">let</span> vc = z1;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="number">9</span>)&#123;</div><div class="line">            vs = <span class="keyword">new</span> THREE.Vector3(x1, y1, z1);</div><div class="line">            ve = <span class="keyword">new</span> THREE.Vector3(x2, y2, z2);</div><div class="line">            vc = <span class="keyword">new</span> THREE.Vector3(x3, y3, z3);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> THREE.QuadraticBezierCurve3( vs, vc, ve );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// custom get alpha method</span></div><div class="line">    <span class="keyword">const</span> getAlpha = <span class="function">(<span class="params">a1</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> a2 = THREE.MathUtils.pingpong(a1, <span class="number">0.5</span>);</div><div class="line">        <span class="keyword">return</span> THREE.MathUtils.smoothstep(a2 * <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// CURVE</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> curve = QBC3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">-5</span>, <span class="number">-15</span>, <span class="number">7</span>, <span class="number">2.5</span>);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// grid helper</span></div><div class="line">    <span class="keyword">const</span> grid = <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    scene.add(grid);</div><div class="line">    <span class="comment">// mesh object that will be positioned along the curve</span></div><div class="line">    <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">        <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>),</div><div class="line">        <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    scene.add(mesh);</div><div class="line">    <span class="comment">// points</span></div><div class="line">    <span class="keyword">const</span> POINT_COUNT = <span class="number">100</span>;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>, v3Array = [];</div><div class="line">    <span class="keyword">while</span>(i &lt; POINT_COUNT)&#123;</div><div class="line">        <span class="keyword">const</span> a2 = getAlpha( i / POINT_COUNT);</div><div class="line">        v3Array.push( curve.getPoint( a2 ) );</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">const</span> points = <span class="keyword">new</span> THREE.Points(</div><div class="line">        <span class="keyword">new</span> THREE.BufferGeometry().setFromPoints( v3Array ),</div><div class="line">        <span class="keyword">new</span> THREE.PointsMaterial(&#123;<span class="attr">size</span>: <span class="number">0.15</span>&#125;)</div><div class="line">    );</div><div class="line">    scene.add(points);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>,    <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;        <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = POINT_COUNT;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// update</span></div><div class="line">    <span class="keyword">const</span> v_start = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">    <span class="keyword">const</span> v_delta = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>);</div><div class="line">    <span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">        <span class="keyword">const</span> a2 = getAlpha(a1);</div><div class="line">        <span class="keyword">const</span> v3 = curve.getPoint( a2 );</div><div class="line">        mesh.position.copy( v3 );</div><div class="line">        mesh.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="5-4-Video1-example"><a href="#5-4-Video1-example" class="headerlink" title="5.4 - Video1 example"></a>5.4 - Video1 example</h3><p>This is an example based on the first video that I made for this post. It is an example where I just made a group of mesh objects and then moved them around using a home position that I stored in a user data object along with the use of some additional Vector3 class methods to move the mesh objects over time. I did not put a whole lot of thought into this one as I just wanted to make a quick place holder video for this post. I have sense then worked out some additional examples that make for a more interesting video than this.</p>
<iframe class="youtube_video" src="https://www.youtube.com/embed/iqTSfkGX3no" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'#202020'</span>);</div><div class="line">    scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0x00ff00</span>, <span class="number">0xffffff</span>));</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">75</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">1</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">0</span>, <span class="number">6</span>, <span class="number">6</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    ( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// GROUP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> group1 = <span class="keyword">new</span> THREE.Group();</div><div class="line">    <span class="keyword">var</span> i = <span class="number">0</span>, h = <span class="number">5</span>, len = <span class="number">30</span>, radian, radius, x, y, z;</div><div class="line">    <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">        <span class="keyword">var</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;</div><div class="line">                <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">                <span class="attr">opacity</span>: <span class="number">1</span></div><div class="line">            &#125;)</div><div class="line">        );</div><div class="line">        radian = <span class="built_in">Math</span>.PI * <span class="number">2</span> * <span class="number">4</span> / len * i;</div><div class="line">        radius = <span class="number">1</span>;</div><div class="line">        x = <span class="built_in">Math</span>.cos(radian) * radius;</div><div class="line">        y = h / <span class="number">2</span> * <span class="number">-1</span> + h * ( i / len);</div><div class="line">        z = <span class="built_in">Math</span>.sin(radian) * radius;</div><div class="line">        <span class="comment">// SETTING THE POSITION OF JUST THIS MESH</span></div><div class="line">        mesh.position.set(x, y, z);</div><div class="line">        mesh.userData.homePos = mesh.position.clone();</div><div class="line">        mesh.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        group1.add(mesh);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    scene.add(group1);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>,    <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;        <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = <span class="number">300</span>;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// update</span></div><div class="line">    <span class="keyword">const</span> v_start = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">    <span class="keyword">const</span> v_delta = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>);</div><div class="line">    <span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">        <span class="keyword">const</span> a2 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1) / <span class="number">0.5</span>;</div><div class="line">        group1.children.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">mesh, i</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> dy = <span class="number">-10</span> * (i / group1.children.length) * a2;</div><div class="line">            mesh.position.copy(mesh.userData.homePos).multiplyScalar(<span class="number">1</span> + a2 * <span class="number">2</span>).add(<span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, dy, <span class="number">0</span>))</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="5-5-Video2-example-making-use-of-Buffer-geometry-as-a-way-to-set-position"><a href="#5-5-Video2-example-making-use-of-Buffer-geometry-as-a-way-to-set-position" class="headerlink" title="5.5 - Video2 example making use of Buffer geometry as a way to set position."></a>5.5 - Video2 example making use of Buffer geometry as a way to set position.</h3><p>This is the source code that I used to make my second demo video for this blog post that at the time of this writing is the latest video that I have up at the top of the blog post. This time around I made a video that is about using the <a href="/2021/06/07/threejs-buffer-geometry-attributes-position/">position attribute of a buffer geometry</a> to create a vector3 object using the getX, getY, and getZ methods of the buffer attribute class. Once I have my current vector3 object for a point in a geometry I can then mutate from that point using the <a href="/2022/05/17/threejs-vector3-lerp/">vector3 lerp method</a> between the current point and the next point in the geometry. In the end I can then once again use the copy method to copy the state of this mutated Vector3 object to the position of a Mesh object.</p>
<p>In other words I am moving mesh objects on a path that is defined my the order of the points in a geometry such as one created with the Sphere or Torus Geometry built in classes.</p>
<p>On top of this I also have a mesh that is moving over time based on the state of a curve class instance as well. This is something that I think I should have going on for any and all demo videos moving forward because I think curves are a very important thing to be aware of when it comes to the subject of setting the position of objects in a scene.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'#000000'</span>);</div><div class="line">    <span class="comment">//scene.add( new THREE.GridHelper(10, 10, 0x00ff00, 0xffffff));</span></div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">75</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">1</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">    <span class="keyword">const</span> renderer = THREE.WebGL1Renderer ? <span class="keyword">new</span> THREE.WebGL1Renderer() : <span class="keyword">new</span> THREE.WebGLRenderer;</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    ( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LIGHT</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">    dl.position.set(<span class="number">2</span>, <span class="number">1</span>, <span class="number">-3</span>);</div><div class="line">    scene.add(dl);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// Make a single mesh object</span></div><div class="line">    <span class="keyword">const</span> makeMesh = <span class="function">(<span class="params">color</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">var</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.5</span>, <span class="number">20</span>, <span class="number">20</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">                <span class="attr">color</span>: color || <span class="keyword">new</span> THREE.Color(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">                <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">                <span class="attr">opacity</span>: <span class="number">1</span></div><div class="line">            &#125;)</div><div class="line">        );</div><div class="line">        <span class="keyword">return</span> mesh;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// Make a group of mesh objects</span></div><div class="line">    <span class="keyword">const</span> makeGroup = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.count = opt.count === <span class="literal">undefined</span> ? <span class="number">10</span> : opt.count;</div><div class="line">        opt.color = opt.color || <span class="keyword">new</span> THREE.Color(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">        <span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(i &lt; opt.count)&#123;</div><div class="line">            <span class="keyword">const</span> mesh = makeMesh(opt.color);</div><div class="line">            group.add(mesh);</div><div class="line">            i+= <span class="number">1</span>;</div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">return</span> group;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// clamp helper</span></div><div class="line">    <span class="keyword">const</span> clamp = <span class="function">(<span class="params">i, d</span>) =&gt;</span> &#123;</div><div class="line">        i = i &lt; <span class="number">0</span> ? <span class="number">0</span> : i;</div><div class="line">        i = i &gt;= d ? d - <span class="number">1</span> : i;</div><div class="line">        <span class="keyword">return</span> i;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// position a group to a geometry helper</span></div><div class="line">    <span class="keyword">const</span> positionGroupToGeometry = <span class="function">(<span class="params">group, geo, alpha</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> pos = geo.getAttribute(<span class="string">'position'</span>);</div><div class="line">        <span class="keyword">const</span> len1 = pos.count;</div><div class="line">        <span class="keyword">const</span> len2 = group.children.length;</div><div class="line">        <span class="keyword">const</span> a2 = len1  * alpha / len1;</div><div class="line">        <span class="keyword">const</span> a3 = a2 % ( <span class="number">1</span> / len1 ) * len1;</div><div class="line">        group.children.forEach( <span class="function">(<span class="params">mesh, mi</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">const</span> i = <span class="built_in">Math</span>.floor( len1 * alpha);</div><div class="line">            <span class="keyword">const</span> i2 = (i + mi) % len1;;</div><div class="line">            <span class="keyword">const</span> v_c = <span class="keyword">new</span> THREE.Vector3(pos.getX(i2), pos.getY(i2), pos.getZ(i2));</div><div class="line">            <span class="keyword">const</span> i3 = (i2 + <span class="number">1</span>) % len1;</div><div class="line">            <span class="keyword">const</span> v_n = <span class="keyword">new</span> THREE.Vector3(pos.getX(i3), pos.getY(i3), pos.getZ(i3));</div><div class="line">            mesh.position.copy( v_c.lerp( v_n, a3) );</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// just a short hand for THREE.QuadraticBezierCurve3</span></div><div class="line">    <span class="keyword">const</span> QBC3 = <span class="function"><span class="keyword">function</span>(<span class="params">x1, y1, z1, x2, y2, z2, x3, y3, z3</span>)</span>&#123;</div><div class="line">        <span class="keyword">let</span> vs = x1;</div><div class="line">        <span class="keyword">let</span> ve = y1;</div><div class="line">        <span class="keyword">let</span> vc = z1;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="number">9</span>)&#123;</div><div class="line">            vs = <span class="keyword">new</span> THREE.Vector3(x1, y1, z1);</div><div class="line">            ve = <span class="keyword">new</span> THREE.Vector3(x2, y2, z2);</div><div class="line">            vc = <span class="keyword">new</span> THREE.Vector3(x3, y3, z3);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> THREE.QuadraticBezierCurve3( vs, vc, ve );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create curve points</span></div><div class="line">    <span class="keyword">const</span> createCurvePoints = <span class="function">(<span class="params">curve, point_count, point_size, point_color, get_alpha</span>) =&gt;</span> &#123;</div><div class="line">        point_count = point_count === <span class="literal">undefined</span> ? <span class="number">100</span> : point_count;</div><div class="line">        point_size = point_size === <span class="literal">undefined</span> ? <span class="number">1</span> : point_size;</div><div class="line">        point_color = point_color || <span class="keyword">new</span> THREE.Color(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">        get_alpha = get_alpha || <span class="function"><span class="keyword">function</span>(<span class="params">a1</span>)</span>&#123; <span class="keyword">return</span> a1; &#125;;</div><div class="line">        <span class="keyword">const</span> v3_array = [];</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(i &lt; point_count)&#123;</div><div class="line">            v3_array.push( curve.getPoint( get_alpha(i / point_count) ));</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">const</span> points = <span class="keyword">new</span> THREE.Points(</div><div class="line">            <span class="keyword">new</span> THREE.BufferGeometry().setFromPoints( v3_array ),</div><div class="line">            <span class="keyword">new</span> THREE.PointsMaterial(&#123;<span class="attr">size</span>: point_size, <span class="attr">color</span>: point_color&#125;)</div><div class="line">        );</div><div class="line">        <span class="keyword">return</span> points;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// smooth get alpha</span></div><div class="line">    <span class="keyword">const</span> getAlphaSmoother = <span class="function">(<span class="params">a1</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> THREE.MathUtils.smootherstep(a1, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// GROUPS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> group1 = makeGroup(&#123; <span class="attr">count</span>: <span class="number">10</span>, <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>) &#125;)</div><div class="line">    scene.add(group1);</div><div class="line">    <span class="keyword">const</span> group2 = makeGroup(&#123; <span class="attr">count</span>: <span class="number">10</span>, <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>)  &#125;)</div><div class="line">    scene.add(group2);</div><div class="line">    <span class="keyword">const</span> group3 = makeGroup(&#123; <span class="attr">count</span>: <span class="number">10</span>, <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>)  &#125;)</div><div class="line">    scene.add(group3);</div><div class="line">    <span class="comment">// geometry used to update group1, group2, and group3</span></div><div class="line">    <span class="keyword">const</span> geo1 = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">4</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    <span class="keyword">const</span> geo2 = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">    <span class="keyword">const</span> geo3 = <span class="keyword">new</span> THREE.TorusGeometry(<span class="number">6</span>, <span class="number">1</span>, <span class="number">10</span>, <span class="number">40</span>);</div><div class="line">    geo3.rotateX(<span class="built_in">Math</span>.PI * <span class="number">0.5</span>);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// MESH OBJECTS FOR UPDATE GEOS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(geo1, </div><div class="line">        <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>),</div><div class="line">            <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.2</span>, <span class="attr">wireframe</span>: <span class="literal">true</span>, <span class="attr">wireframeLinewidth</span>: <span class="number">2</span></div><div class="line">        &#125;)</div><div class="line">    );</div><div class="line">    scene.add(mesh1);</div><div class="line">    <span class="keyword">const</span> mesh2 = <span class="keyword">new</span> THREE.Mesh(geo2, </div><div class="line">        <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>),</div><div class="line">            <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.8</span>, <span class="attr">wireframe</span>: <span class="literal">true</span>, <span class="attr">wireframeLinewidth</span>: <span class="number">4</span></div><div class="line">        &#125;)</div><div class="line">    );</div><div class="line">    scene.add(mesh2);</div><div class="line">    <span class="keyword">const</span> mesh3 = <span class="keyword">new</span> THREE.Mesh(geo3, </div><div class="line">        <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>),</div><div class="line">            <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.2</span>, <span class="attr">wireframe</span>: <span class="literal">true</span>, <span class="attr">wireframeLinewidth</span>: <span class="number">1</span></div><div class="line">        &#125;)</div><div class="line">    );</div><div class="line">    scene.add(mesh3);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// CURVE</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> curve1 = <span class="keyword">new</span> THREE.CurvePath();</div><div class="line">    curve1.add( QBC3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">-5</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">-5</span>, <span class="number">2</span>) );</div><div class="line">    curve1.add( QBC3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">-5</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">-10</span>, <span class="number">2.5</span>, <span class="number">10</span>) );</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// POINTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    scene.add( createCurvePoints(curve1, <span class="number">100</span>, <span class="number">0.125</span>, <span class="keyword">new</span> THREE.Color(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>), getAlphaSmoother ) );</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// MESH TO MOVE ALONG CURVE</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> mesh_curve1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">        <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), </div><div class="line">        <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;</div><div class="line">            <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.8</span></div><div class="line">        &#125;)</div><div class="line">    );</div><div class="line">    scene.add(mesh_curve1)</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>,    <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;        <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = <span class="number">800</span>;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// update</span></div><div class="line">    <span class="keyword">const</span> v_start = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">    <span class="keyword">const</span> v_delta = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>);</div><div class="line">    <span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">        <span class="keyword">const</span> a2 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1) / <span class="number">0.5</span>;</div><div class="line">        positionGroupToGeometry(group1, geo1, a1);</div><div class="line">        positionGroupToGeometry(group2, geo2, a2);</div><div class="line">        positionGroupToGeometry(group3, geo3, a2);</div><div class="line">        mesh_curve1.position.copy( curve1.getPoint( getAlphaSmoother(a1) ) );</div><div class="line">        mesh_curve1.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>The position property of the Object3d class is one feature of threejs that I find myself using all the time in projects. The <a href="/2022/04/08/threejs-object3d-rotation/">rotation property</a> and the <a href="/2021/05/13/threejs-object3d-lookat/">look at method</a> of the object3d class is also of interest of course when it comes to setting the orientation of objects as well that typically goes hand in hand with this feature of the object3d class. </p>
<p>There are also a whole lot of other features in threejs that are closely related to the position property also that I should maybe mention in this conclusion section when it comes to fuhrer reading topics related to this. One such feature that comes to mind right away is the <a href="/2021/05/18/threejs-raycaster/">Raycaster class</a>. If you are wondering how to go about getting a position on the surface of the geometry of a mesh object this raycaster class is a very helpful toll for that kind of thing. This position value can then also be used as a way to set the position of an object, but there are many other use cases as well. For example when it comes to finding out if a mesh object was clicked or not the raycaster class is how to go about doing so.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2022/04/04/threejs-object3d-position/" data-id="clfy54l8603duq4v127v5p2fv" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2022/04/04/threejs-object3d-position/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/04/08/threejs-object3d-rotation/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Setting the rotation of objects in threejs
        
      </div>
    </a>
  
  
    <a href="/2022/04/01/threejs-object3d-type/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">The type property of Objects in threejs</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2022/04/04/threejs-object3d-position/index.html';
    this.page.identifier = '975';
    this.page.title = 'Setting the position of objects in threejs';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 12.73px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/03/31/threejs-quaternion-premultiply/">Quaternion premultiply method in threejs</a>
          </li>
        
          <li>
            <a href="/2023/03/24/threejs-quaternion/">Quaternion rotation objects in threejs</a>
          </li>
        
          <li>
            <a href="/2023/03/17/threejs-examples-svg-tools/">SVG tools module threejs example</a>
          </li>
        
          <li>
            <a href="/2023/03/10/threejs-examples-camera-planes/">Camera Planes module threejs example</a>
          </li>
        
          <li>
            <a href="/2023/03/03/threejs-examples-breath-module/">A Breath Module threejs project example</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2022/04/04/threejs-object3d-position/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>