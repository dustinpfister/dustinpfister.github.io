<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Text Plane Module threejs example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2022/10/14/threejs-examples-text-plane/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="I am always thinking in terms of what more I can do when it comes to making javaScript modules built on top of threejs that I can use in my various video projects that I make for these blog posts. One">
<meta property="og:type" content="article">
<meta property="og:title" content="Text Plane Module threejs example">
<meta property="og:url" content="https://dustinpfister.github.io/2022/10/14/threejs-examples-text-plane/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="I am always thinking in terms of what more I can do when it comes to making javaScript modules built on top of threejs that I can use in my various video projects that I make for these blog posts. One">
<meta property="og:updated_time" content="2022-10-17T18:41:20.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Text Plane Module threejs example">
<meta name="twitter:description" content="I am always thinking in terms of what more I can do when it comes to making javaScript modules built on top of threejs that I can use in my various video projects that I make for these blog posts. One">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-examples-text-plane" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/10/14/threejs-examples-text-plane/" class="article-date"> Published:
  <time datetime="2022-10-14T17:25:00.000Z" itemprop="datePublished">2022-10-14</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2022/10/14/threejs-examples-text-plane/" class="article-date"> Modified:
  <time datetime="2022-10-17T18:41:20.000Z" itemprop="dateModified">2022-10-17</time>
</a>

    <span class="article-date">V1.22</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Text Plane Module threejs example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>I am always thinking in terms of what more I can do when it comes to making javaScript modules built on top of threejs that I can use in my <a href="https://github.com/dustinpfister/videoground-blog-posts" target="_blank" rel="external">various video projects that I make for these blog posts</a>. One such idea is to make an improved way to go about adding text content to a scene object as I am not happy with my current solution for doing so. There are a number of ways of doing this sort of thing I am sure, but I was thinking in terms of making a module centered around the idea of having one or more mesh objects that use a plane geometry and canvas textures as a way of displaying text content in a scene.</p>
<p>The process of doing this sort of thing will then prove to be a little involved then. On top of the text plane module itself I will also want to have at least some kind of canvas module such as the one that I made for my post on canvas textures. With that said because I want to just get up and running with the text plane module I will have to just go with what I worked out when it comes to that sort of thunk so far and get to work on the text plane module. However speaking of the text plane module there is a lot that I will need to do with text, such as End of Line conversion, wrapping text, and using the various 2d canvas drawing methods to render that text to a canvas element.</p>
<p>This will then be yet another one of my <a href="/2021/02/19/threejs-examples/">threejs examples</a> where I am writing about a module or some kind of project that is built on top threejs. This time it will have a lot to do with using canvas elements to create textures, and also a whole lot about working with text content.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/fn1Vwu4Jcew" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="The-text-Plane-threejs-module-example-and-what-to-know-first"><a href="#The-text-Plane-threejs-module-example-and-what-to-know-first" class="headerlink" title="The text Plane threejs module example and what to know first"></a>The text Plane threejs module example and what to know first</h2><p>This is a post in which I am writing about the state of a javaScript module that I made that creates textures from text content using canvas elements that can then be used to skin a plane geometry. This is then a little bit of an advanced project type post in which I am assuming that you all ready have a fair amount of background with threejs and client side javaScript in general. Also this is not at all a <a href="/2017/05/17/canvas-getting-started/">getting started type post with canvas elements</a> as well so I assume that you have at least a little background working with those elements as well.</p>
<h3 id="read-up-more-on-canvas-and-data-textures"><a href="#read-up-more-on-canvas-and-data-textures" class="headerlink" title="read up more on canvas and data textures"></a>read up more on canvas and data textures</h3><p>In this post I am making use of <a href="/2018/04/17/threejs-canvas-texture">canvas textures</a> as a way to display text with the plane geometry of a mesh object. There is a lot to cover when it comes to just getting started with canvas elements alone, as well as using canvas elements to create textures in threejs. There are also other ways of creating textures with javaScript code in threejs such as <a href="/2022/04/15/threejs-data-texture/">data textures</a> which allow for creating textures with raw color data.</p>
<h3 id="source-code-is-up-on-Github"><a href="#source-code-is-up-on-Github" class="headerlink" title="source code is up on Github"></a>source code is up on Github</h3><p>The source code for the text plane module, the canvas module I am working on top of, as well as all the demos can be found in my <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-examples-text-plane" target="_blank" rel="external">test threejs repository on Github</a>.</p>
<h3 id="version-numbers-matter"><a href="#version-numbers-matter" class="headerlink" title="version numbers matter"></a>version numbers matter</h3><p>When I first started this example I was using r140 of threejs.</p>
<h2 id="1-The-first-version-of-the-text-plane-module-r0-as-well-as-r1-of-of-my-canvas-module-and-demos"><a href="#1-The-first-version-of-the-text-plane-module-r0-as-well-as-r1-of-of-my-canvas-module-and-demos" class="headerlink" title="1 - The first version of the text plane module ( r0 ) as well as r1 of of my canvas module, and demos"></a>1 - The first version of the text plane module ( r0 ) as well as r1 of of my canvas module, and demos</h2><p>In this section I am writing about r0 of the text plane module where I manage to all ready get the core idea of what I wanted working which is great. The module allows for me to quickly create a mesh object with the plane geometry constructor and the basic material with the map option set to the current state of a canvas texture that I can update as needed. I can then create an array of text lines from a raw text source, and then use that with an update lines method to have scrolling text in a canvas element that I can then use to create and update a texture that is used with the plane geometry.</p>
<p>On top of writing about the text plane module itself, I will also want to write about the canvas module that I am working on top of as well as at least one of not more demos.</p>
<h3 id="1-A-The-canvas-module-r1"><a href="#1-A-The-canvas-module-r1" class="headerlink" title="1.A - The canvas module ( r1 )"></a>1.A - The canvas module ( r1 )</h3><p>I am using r1 of my canvas module that I write about in greater detail in my blog post on canvas textures. The main thing about this module is to just have a way to abstract away methods that I use to draw to the 2d context away into a module. There are two built in examples of this in the module itself with the square and rnd built in methods. However I did not want to go nuts with built in draw methods as much of that will be customized in the various additional modules that I will make that will work on top of this, such a the text plane module that this blog post is all about.</p>
<p>The two main public methods here are the create method, and the update method. The create method will create and return a new canvas object that will contain a reference to a canvas element, a 2d drawing context and also one or two textures depending on the update mode. You see I am a little torn between using canvas textures and data textures when it comes to creating texture with JavaScript code rather than external image assets. So I made this module in such a way that I can just update a canvas texture, or both a canvas texture and a data texture. Doing both is expensive so that is why I have update modes where if I am in a situation in which canvas alone is fine I can just update the canvas texture only and save overhead.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// canvas.js - r1 - from threejs-canvas-texture</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">api</span>)</span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// built in draw methods</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> DRAW = &#123;&#125;;</div><div class="line">    <span class="comment">// square draw method</span></div><div class="line">    DRAW.square = <span class="function">(<span class="params">canObj, ctx, canvas, state</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> squares = state.squares || [ &#123;</div><div class="line">            <span class="attr">lw</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">fi</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">si</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">rect</span>: [ <span class="number">0.5</span>, <span class="number">0.5</span>, canvas.width - <span class="number">1</span>, canvas.height - <span class="number">1</span> ] &#125; ];</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">const</span> len = squares.length;</div><div class="line">        ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">            <span class="keyword">const</span> sq = squares[i];</div><div class="line">            ctx.lineWidth = sq.lw === <span class="literal">undefined</span> ? <span class="number">1</span> : sq.lw;</div><div class="line">            ctx.fillStyle = canObj.palette[ sq.fi === <span class="literal">undefined</span> ? <span class="number">0</span> : sq.fi];</div><div class="line">            ctx.strokeStyle = canObj.palette[ sq.si === <span class="literal">undefined</span> ? <span class="number">1</span> : sq.si ];</div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.rect.apply(ctx, sq.rect);</div><div class="line">            ctx.fill();</div><div class="line">            ctx.stroke();</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// random using palette colors</span></div><div class="line">    DRAW.rnd = <span class="function">(<span class="params">canObj, ctx, canvas, state</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">const</span> gSize =  state.gSize === <span class="literal">undefined</span> ? <span class="number">5</span> : state.gSize;</div><div class="line">        <span class="keyword">const</span> len = gSize * gSize;</div><div class="line">        <span class="keyword">const</span> pxSize = canObj.size / gSize;</div><div class="line">        ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">            <span class="keyword">const</span> ci = <span class="built_in">Math</span>.floor( canObj.palette.length * <span class="built_in">Math</span>.random() );</div><div class="line">            <span class="keyword">const</span> x = i % gSize;</div><div class="line">            <span class="keyword">const</span> y = <span class="built_in">Math</span>.floor(i / gSize);</div><div class="line">            ctx.fillStyle = canObj.palette[ci];</div><div class="line">            ctx.fillRect(<span class="number">0.5</span> + x * pxSize, <span class="number">0.5</span> + y * pxSize, pxSize, pxSize);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELEPRS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// parse draw option helper</span></div><div class="line">    <span class="keyword">const</span> parseDrawOption = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        <span class="comment">// if opt.draw is false for any reason return DRAW.square</span></div><div class="line">        <span class="keyword">if</span>(!opt.draw)&#123;</div><div class="line">            <span class="keyword">return</span> DRAW.square;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// if a string is given assume it is a key for a built in draw method</span></div><div class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> opt.draw === <span class="string">'string'</span>)&#123;</div><div class="line">            <span class="keyword">return</span> DRAW[opt.draw];</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// assume we where given a custom function</span></div><div class="line">        <span class="keyword">return</span> opt.draw;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// PUBLIC API</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// to data texture method</span></div><div class="line">    api.toDataTexture = <span class="function">(<span class="params">canObj</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> canvasData = canObj.texture.image.getContext(<span class="string">'2d'</span>).getImageData(<span class="number">0</span>, <span class="number">0</span>, canObj.size, canObj.size);</div><div class="line">        <span class="keyword">const</span> texture_data = <span class="keyword">new</span> THREE.DataTexture(canvasData.data, canObj.size, canObj.size );</div><div class="line">        texture_data.needsUpdate = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">return</span> texture_data;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create and return a canvas texture</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="comment">// create canvas, get context, set size</span></div><div class="line">        <span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>),</div><div class="line">        ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">        opt.size = opt.size === <span class="literal">undefined</span> ? <span class="number">16</span> : opt.size;</div><div class="line">        canvas.width = opt.size;</div><div class="line">        canvas.height = opt.size;</div><div class="line">        <span class="comment">// create canvas object</span></div><div class="line">        <span class="keyword">const</span> canObj = &#123;</div><div class="line">            <span class="attr">texture</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">texture_data</span>: <span class="literal">null</span>,</div><div class="line">            <span class="attr">update_mode</span>: opt.update_mode || <span class="string">'dual'</span>,</div><div class="line">            <span class="attr">size</span>: opt.size,</div><div class="line">            <span class="attr">canvas</span>: canvas, <span class="attr">ctx</span>: ctx,</div><div class="line">            <span class="attr">palette</span>: opt.palette || [<span class="string">'black'</span>, <span class="string">'white'</span>],</div><div class="line">            <span class="attr">state</span>: opt.state || &#123;&#125;,</div><div class="line">            <span class="attr">draw</span>: parseDrawOption(opt)</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// create texture object</span></div><div class="line">        canObj.texture = <span class="keyword">new</span> THREE.CanvasTexture(canvas);</div><div class="line">        canObj.texture_data = api.toDataTexture(canObj);</div><div class="line">        api.update(canObj);</div><div class="line">        <span class="keyword">return</span> canObj;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update</span></div><div class="line">    <span class="keyword">const</span> UPDATE = &#123;&#125;;</div><div class="line">    <span class="comment">// update canvas only update mode</span></div><div class="line">    UPDATE.canvas = <span class="function">(<span class="params">canObj</span>) =&gt;</span> &#123;</div><div class="line">        <span class="comment">// update canvas texture</span></div><div class="line">        canObj.draw.call(canObj, canObj, canObj.ctx, canObj.canvas, canObj.state);</div><div class="line">        canObj.texture.needsUpdate = <span class="literal">true</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update canvas AND data texture AKA 'dual' mode ( default for r1 )</span></div><div class="line">    UPDATE.dual = <span class="function">(<span class="params">canObj</span>) =&gt;</span> &#123;</div><div class="line">        UPDATE.canvas(canObj);</div><div class="line">        <span class="comment">// update data texture</span></div><div class="line">        <span class="keyword">const</span> canvasData = canObj.texture.image.getContext(<span class="string">'2d'</span>).getImageData(<span class="number">0</span>, <span class="number">0</span>, canObj.size, canObj.size);</div><div class="line">        <span class="keyword">const</span> data = canObj.texture_data.image.data;</div><div class="line">        <span class="keyword">const</span> len = data.length;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">            data[i] = canvasData.data[i];</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        canObj.texture_data.flipY = <span class="literal">true</span>; <span class="comment">// need to do this even though it should be the default in r140</span></div><div class="line">        canObj.texture_data.center = <span class="keyword">new</span> THREE.Vector2(<span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line">        canObj.texture_data.needsUpdate = <span class="literal">true</span>;</div><div class="line">    &#125;;</div><div class="line">    api.update = <span class="function">(<span class="params">canObj</span>) =&gt;</span> &#123;</div><div class="line">        UPDATE[canObj.update_mode](canObj);</div><div class="line">    &#125;;</div><div class="line">&#125;( <span class="keyword">this</span>[<span class="string">'canvasMod'</span>] = &#123;&#125; ));</div></pre></td></tr></table></figure>
<h3 id="1-B-The-text-Plane-Module-r0"><a href="#1-B-The-text-Plane-Module-r0" class="headerlink" title="1.B - The text Plane Module ( r0 )"></a>1.B - The text Plane Module ( r0 )</h3><p>Now for the text plane module that I can use to create a canvas object with the canvas module and use that as a way to update the textures that I can use for the map option of the material that I use for a mesh that uses the plane geometry. There is a lot to wrote about with this module in terms of both private helper functions as well as the current set of public methods that I will be using when making one or more demos, as well as actual projects that will make use of this module.</p>
<p>At the top of the module I have a few private helper functions that I am using, one of which is a warp text method that is based off what what I have from my <a href="/2019/03/20/js-regex/">blog post on regular expressions</a>, which in turn was based on what i found at <a href="https://stackoverflow.com/questions/14484787/wrap-text-in-javascript" target="_blank" rel="external">stack overflow here</a>. This warp text method works somewhat okay, but with one little problem that has to do with really long words that might go beyond the max width that I want. I found a way to deal with that in my create text lines public method that I will be getting to a little later here.<br>Yet another concern that I have when dealing with text is that often I will be dealing with text content with a mix of End of Line patterns that are used. That is that often I will have content that will use the windows patter, and then others that will use the Unit pattern. Also often I have text content that is a mix of the two actually and this is in part because I am a bit of a Windows and Linux kind of person what keeps switching between different editors and I do not always do the best job converting end of line patterns. This is not such a big deal if I just have a little helper function that will convert all of these patterns to just one standard before splitting the text into an array of strings and that is what my End of line Convert helper function is all about.</p>
<p>Another helper that I have is a <a href="/2017/09/13/lodash-chunk/">vanilla javaScript alternative to the lodash chunk method</a>, in fact the method is copied from my post on that subject. This is a method that I am also using in my create text lines public methods to help address that problem with long words not wrapping.</p>
<p>The create lines helper is what I call once to create a fixed set of objects that I update as needed in order to display text content. The smooth y helper is the method that i use to update these lines to display a long volume of text. I then also have the built in draw function that I use for the draw option when creating the canvas object with my canvas javaScript module that I wrote about above. That about covers all the private helper functions now I just need to wrote a thing or two about the public methods of this thing.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// canvas.js - r1 - from threejs-canvas-texture</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">api</span>)</span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// wrap text method</span></div><div class="line">    <span class="comment">// https://stackoverflow.com/questions/14484787/wrap-text-in-javascript</span></div><div class="line">    <span class="comment">// https://dustinpfister.github.io/2019/03/20/js-regex/</span></div><div class="line">    <span class="keyword">const</span> wrapText = <span class="function"><span class="keyword">function</span> (<span class="params">str, width</span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> patt = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(?![^\\n]&#123;1,'</span> + width + <span class="string">')([^\\n]&#123;1,'</span> + width + <span class="string">'&#125;)\\s'</span>, <span class="string">'g'</span>);</div><div class="line">        <span class="keyword">return</span> str.replace(patt, <span class="string">'$1\n'</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// EOL CONVERSION - replace all /r/n and /r with /n</span></div><div class="line">    <span class="keyword">const</span> EOLConvert = <span class="function">(<span class="params">text</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> text.replace(<span class="regexp">/\r\n/g</span>,<span class="string">'\n'</span>).replace(<span class="regexp">/\r/g</span>,<span class="string">'\n'</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// VANILLA JAVASCRIPT LODASH CHUNK ALTERTAIVE</span></div><div class="line">    <span class="comment">// https://dustinpfister.github.io/2017/09/13/lodash-chunk/</span></div><div class="line">    <span class="keyword">const</span> chunk = <span class="function"><span class="keyword">function</span> (<span class="params">arr, size</span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> chunkedArr = [];</div><div class="line">        arr = arr || [];</div><div class="line">        size = size === <span class="literal">undefined</span> ? <span class="number">1</span> : size;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i += size) &#123;</div><div class="line">            chunkedArr.push(arr.slice(i, i + size));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> chunkedArr;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create an array of text objects to use with the drawText method</span></div><div class="line">    <span class="comment">// this is a reusable set of objects</span></div><div class="line">    <span class="keyword">const</span> createLines = <span class="function">(<span class="params">canObj, rows</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">const</span> lines = [];</div><div class="line">        <span class="keyword">while</span>(i &lt; rows)&#123;</div><div class="line">            lines.push(&#123;</div><div class="line">                <span class="attr">text</span>: <span class="string">''</span>,</div><div class="line">                <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>:<span class="number">0</span>,</div><div class="line">                <span class="attr">lw</span>: <span class="number">1</span>, </div><div class="line">                <span class="attr">fc</span>: canObj.palette[<span class="number">1</span>],</div><div class="line">                <span class="attr">sc</span>: canObj.palette[<span class="number">2</span>],</div><div class="line">                <span class="attr">a</span>: <span class="string">'left'</span>, <span class="attr">f</span>: <span class="string">'arial'</span>, <span class="attr">fs</span>: <span class="string">'20px'</span>, <span class="attr">bl</span>: <span class="string">'top'</span></div><div class="line">            &#125;);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> lines;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// smooth move of lines on the Y</span></div><div class="line">    <span class="keyword">const</span> smoothY = <span class="function">(<span class="params">lines, alpha, sy, dy</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">const</span> len = lines.length;</div><div class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">            <span class="keyword">const</span> li = lines[i];</div><div class="line">            li.y = sy + dy * i - dy * alpha * <span class="number">1</span>;</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// The custom draw text method to be used with canvas.js</span></div><div class="line">    <span class="keyword">const</span> drawText = <span class="function">(<span class="params">canObj, ctx, canvas, state</span>) =&gt;</span> &#123;</div><div class="line">        ctx.fillStyle = canObj.palette[<span class="number">0</span>];</div><div class="line">        <span class="comment">// clear rect then fill so that I can have a transparent background if I want</span></div><div class="line">        ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvas.width, canvas.height)</div><div class="line">        ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">        state.lines.forEach(<span class="function">(<span class="params">li</span>)=&gt;</span>&#123;</div><div class="line">            ctx.lineWidth = li.lw;</div><div class="line">            ctx.textAlign = li.a;</div><div class="line">            ctx.textBaseline = li.bl;</div><div class="line">            ctx.font = li.fs + <span class="string">' '</span> + li.f;</div><div class="line">            ctx.fillStyle = li.fc;</div><div class="line">            ctx.strokeStyle = li.sc;</div><div class="line">            ctx.fillText(li.text, li.x, li.y);</div><div class="line">            ctx.strokeText(li.text, li.x, li.y);</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// PUBLIC API</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// create just a canvas object that will work</span></div><div class="line">    <span class="comment">// for a material. I will want to call this if I want to</span></div><div class="line">    <span class="comment">// use the resulting texture with a mesh object other than a plane</span></div><div class="line">    <span class="comment">// of as a background or something to that effect</span></div><div class="line">    api.createCanObj = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">let</span> canObj = canvasMod.create(&#123;</div><div class="line">            <span class="attr">draw</span>: drawText,</div><div class="line">            <span class="attr">size</span>: opt.size === <span class="literal">undefined</span> ? <span class="number">512</span> : opt.size,</div><div class="line">            <span class="attr">update_mode</span>: opt.update_mode || <span class="string">'canvas'</span>,</div><div class="line">            <span class="attr">state</span>: &#123;</div><div class="line">                <span class="attr">lines</span>: []</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">palette</span>: opt.palette || [<span class="string">'#080808'</span>, <span class="string">'#8a8a8a'</span>, <span class="string">'#ffffff'</span>]</div><div class="line">        &#125;);</div><div class="line">        canObj.state.lines = createLines(canObj,  opt.rows === <span class="literal">undefined</span> ? <span class="number">9</span> : opt.rows );</div><div class="line">        <span class="keyword">return</span> canObj;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// make plane helper function</span></div><div class="line">    api.createPlane = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">const</span> canObj = api.createCanObj(opt);</div><div class="line">        <span class="comment">// create plane</span></div><div class="line">        <span class="keyword">const</span> plane = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.PlaneGeometry(opt.w, opt.h, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">                <span class="attr">map</span>: canObj.updateMode === <span class="string">'dual'</span> ? canObj.texture_data : canObj.texture,</div><div class="line">                <span class="attr">side</span>: THREE.DoubleSide,</div><div class="line">                <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">                <span class="attr">opacity</span>: <span class="number">1</span></div><div class="line">            &#125;)</div><div class="line">        );</div><div class="line">        plane.userData.canObj = canObj;</div><div class="line">        <span class="comment">// return the new plane</span></div><div class="line">        <span class="keyword">return</span> plane;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create text lines</span></div><div class="line">    api.createTextLines = <span class="function">(<span class="params">text, cols</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">let</span> arr = wrapText(EOLConvert(text), cols).split(<span class="string">'\n'</span>);</div><div class="line">        <span class="comment">// need to break down lines that are at or above cols</span></div><div class="line">        arr = arr.map(<span class="function">(<span class="params">a</span>)=&gt;</span>&#123;</div><div class="line">            <span class="keyword">if</span>(a.length &gt;= cols)&#123;</div><div class="line">                <span class="keyword">return</span> chunk(a.split(<span class="string">''</span>), cols).map(<span class="function">(<span class="params">b</span>)=&gt;</span>&#123; <span class="keyword">return</span> b.join(<span class="string">''</span>)&#125;)</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> a;</div><div class="line">        &#125;).flat()</div><div class="line">        <span class="keyword">return</span> arr;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// Just move the given text lines</span></div><div class="line">    api.moveTextLines = <span class="function">(<span class="params">lines, textLines, alpha, sy, dy</span>) =&gt;</span> &#123;</div><div class="line">        linesLen = lines.length;</div><div class="line">        <span class="keyword">const</span> tli = <span class="built_in">Math</span>.floor( textLines.length * alpha);</div><div class="line">        textLines.slice(tli, tli + linesLen).forEach( <span class="function">(<span class="params">text, i</span>) =&gt;</span> &#123;</div><div class="line">            lines[i].text = text;</div><div class="line">        &#125;);</div><div class="line">        smoothY(lines, alpha * textLines.length % <span class="number">1</span>, sy, dy);</div><div class="line">    &#125;;</div><div class="line">&#125;( <span class="keyword">this</span>[<span class="string">'TextPlane'</span>] = &#123;&#125; ));</div></pre></td></tr></table></figure>
<p>The create canvas object method is what will call the create method of my canvas module to create the object that is returned that contains references to a canvas element as well as everything else that is included in such an object such as the state object that will hold the line objects used for rendering text to the canvas. This create canvas object public function is what I will want to call directly if I want to create a canvas object by itself to use with something other than a plane. For example say that I want to use the texture property of the canvas object to use as a texture for the background of a whole scene. I can create just the texture object with this method and then set the value of scene.background to the texture.</p>
<p>I then have a create plane method that will create a canvas object and append that to the user data object of the mesh object, and a mesh object will be what is returned by this. This allows be to quickly create and set up a mesh object complete with the canvas object, geometry, and a material with the map value set to the texture or data texture property of the canvas object depending on the update mode.</p>
<p>The create text lines public method is what I will want to call in order to convert plain old text into an array of sub strings that can then work well with the line objects of the state object of the canvas object.</p>
<p>I then also have a move lines method that is what I am current using to update the state of the lines of the state object of the canvas object.</p>
<h3 id="1-1-First-demo-of-the-text-plane-module-r0"><a href="#1-1-First-demo-of-the-text-plane-module-r0" class="headerlink" title="1.1 - First demo of the text plane module ( r0 )"></a>1.1 - First demo of the text plane module ( r0 )</h3><p>Now that I wrote about the canvas and text plane modules I will now want to have at least one if not more demos of this for the sake of making sure that it is working the way that I would like it to. For this demo the aim is not to do anything fancy I will just want to create a mesh object with the canvas object, plane, and material all set up for my by calling that create plane method. I will then just want to create an array of text lines to use with it and the use that array of text lines with the move lines method in an update loop.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0.75</span>, <span class="number">0.75</span>, <span class="number">0.75</span>);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">75</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">.025</span>, <span class="number">20</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> plane = TextPlane.createPlane(&#123;</div><div class="line">    <span class="attr">w</span>: <span class="number">7</span>, <span class="attr">h</span>: <span class="number">5</span>,</div><div class="line">    <span class="attr">rows</span>: <span class="number">10</span>, <span class="attr">size</span>: <span class="number">256</span>, <span class="attr">palette</span>: [<span class="string">'rgba(0,255,255,0.2)'</span>, <span class="string">'black'</span>, <span class="string">'black'</span>]</div><div class="line">&#125;);</div><div class="line">plane.position.set(<span class="number">0</span>, <span class="number">2.5</span>, <span class="number">0</span>);</div><div class="line">scene.add(plane);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// TEXT and textLines</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> text2 = <span class="string">'\n\nThis is just a little demo of my text plane module thus far. \n\nIt is all ready working okay, or at least it seems to be working well thus far. I am sure there may be at least one or two bugs still maybe,this is just r0 of the module after all. \n\nIf all goes well I am sure that I will start using this in a lof of my video projects as a way to add text content to an over all scene. \n'</span></div><div class="line"><span class="keyword">const</span> textLines = TextPlane.createTextLines(text2, <span class="number">22</span>);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">600</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">let</span> a = frame / frameMax;</div><div class="line">    <span class="keyword">let</span> b = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a) / <span class="number">0.5</span>;</div><div class="line">    <span class="comment">// UPDATE</span></div><div class="line">    TextPlane.moveTextLines(plane.userData.canObj.state.lines, textLines, b, <span class="number">0</span>, <span class="number">30</span>);</div><div class="line">    <span class="comment">// update canvas</span></div><div class="line">    canvasMod.update(plane.userData.canObj);</div><div class="line">    <span class="comment">// update camera</span></div><div class="line">    camera.position.set(<span class="number">-4</span> * b, <span class="number">1</span>, <span class="number">5</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">1.5</span>, <span class="number">0</span>);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>So far so good, it would seem that I have the general idea of what I would like working. Now I might want to test out at least a few more things before moving on to making my next revision of this module. There is the idea of testing this out with other mesh objects, as well as doing things like mutating the position attribute of a plane and a whole bunch of other things.</p>
<h3 id="1-2-Using-a-Sphere-by-calling-the-create-canvas-object-method-rather-than-create-plane"><a href="#1-2-Using-a-Sphere-by-calling-the-create-canvas-object-method-rather-than-create-plane" class="headerlink" title="1.2 - Using a Sphere by calling the create canvas object method rather than create plane"></a>1.2 - Using a Sphere by calling the create canvas object method rather than create plane</h3><p>When I make a module like this often I will just have a create method and an update method, however for this module I know that I am going to want to have at least two create methods. There is the create plane method that will create and return a mesh object with everything set up for me and ready to go. However what if I want to try a mesh object with the sphere Geometry rather than plane geometry, or what if I want to use the canvas texture with some other material or map of a material? That is then why I have the create canvas method as an alternative to just always calling the create plane method.</p>
<p>Here in this example I am creating just the canvas object and then using it with a mesh object in which I am using a sphere geometry rather than that of plane geometry.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0.75</span>, <span class="number">0.75</span>, <span class="number">0.75</span>);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">75</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">.025</span>, <span class="number">20</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CANVAS OBJECT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> canObj = TextPlane.createCanObj(&#123;</div><div class="line">    <span class="attr">rows</span>: <span class="number">12</span>, <span class="attr">size</span>: <span class="number">512</span>,</div><div class="line">    <span class="attr">palette</span>: [<span class="string">'rgba(0,255,255,0.2)'</span>, <span class="string">'black'</span>, <span class="string">'black'</span>]</div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.85</span>, <span class="number">80</span>, <span class="number">80</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">        <span class="attr">map</span>: canObj.texture</div><div class="line">    &#125;)</div><div class="line">);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// TEXT and textLines</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> text2 = <span class="string">'\n\n\nThe main idea that I had with this involved just plane geometry.\n\nHowever I am going to want to have two create methods for this module, one of which I can use to create just a canvas object rather than a mesh. There are a lot of reasons why, one of which would be to use the texture of the canvas object with a whole other mesh object with geometry other than that of a plane. \n\n'</span></div><div class="line"><span class="keyword">const</span> textLines = TextPlane.createTextLines(text2, <span class="number">30</span>);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">0.75</span>, <span class="number">1.25</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">600</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">let</span> a = frame / frameMax;</div><div class="line">    <span class="keyword">let</span> b = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a) / <span class="number">0.5</span>;</div><div class="line">    <span class="comment">// UPDATE</span></div><div class="line">    TextPlane.moveTextLines(canObj.state.lines, textLines, b * <span class="number">0.4</span>, <span class="number">0</span>, <span class="number">30</span>);</div><div class="line">    <span class="comment">// update canvas</span></div><div class="line">    canvasMod.update(canObj);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h3 id="1-3-Using-a-custom-draw-method-for-one-or-more-new-canvas-objects"><a href="#1-3-Using-a-custom-draw-method-for-one-or-more-new-canvas-objects" class="headerlink" title="1.3 - Using a custom draw method for one or more new canvas objects"></a>1.3 - Using a custom draw method for one or more new canvas objects</h3><p>One major thing that I would like to do is to not just have text moving over a solid color background, but over some other kind of texture. This could be the texture that is all ready used for a model or texture that I create with other  canvas objects as I am doing here.</p>
<p>The generate idea is to create a canvas object with the text plane module, but use it to just update the canvas element and use that canvas element with the draw image method of the 2d context of other canvas elements. I then use a final canvas element that uses textures from a canvas that is used to create a background, and then the texture that is used for text to draw over it. This final canvas element is then  what I will use to create and update a texture that in turn is used for the map property of a material of a mesh object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0.75</span>, <span class="number">0.75</span>, <span class="number">0.75</span>);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">75</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">.025</span>, <span class="number">20</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CANVAS OBJECT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// canvas object 1 will be used for text</span></div><div class="line"><span class="keyword">const</span> canObj1 = TextPlane.createCanObj(&#123;</div><div class="line">    <span class="attr">rows</span>: <span class="number">12</span>, <span class="attr">size</span>: <span class="number">256</span>,</div><div class="line">    <span class="attr">palette</span>: [<span class="string">'rgba(0,0,0,0)'</span>, <span class="string">'black'</span>, <span class="string">'black'</span>]</div><div class="line">&#125;);</div><div class="line"><span class="comment">// canvas object 2 will use the 'rnd' built in draw method</span></div><div class="line"><span class="comment">// as a way to create a background a little more interesting</span></div><div class="line"><span class="comment">// than just a static background</span></div><div class="line"><span class="keyword">let</span> canObj2 = canvasMod.create(&#123;</div><div class="line">    <span class="attr">draw</span>: <span class="string">'rnd'</span>,</div><div class="line">    <span class="attr">size</span>: <span class="number">256</span>,</div><div class="line">    <span class="attr">update_mode</span>: <span class="string">'canvas'</span>,</div><div class="line">    <span class="attr">state</span>: &#123;</div><div class="line">        <span class="attr">gSize</span>: <span class="number">16</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">palette</span>: [<span class="string">'red'</span>, <span class="string">'lime'</span>, <span class="string">'cyan'</span>, <span class="string">'purple'</span>, <span class="string">'orange'</span>, <span class="string">'green'</span>, <span class="string">'blue'</span>]</div><div class="line">&#125;);</div><div class="line"><span class="comment">// canvas object 3 will be the final background use for the material</span></div><div class="line"><span class="keyword">let</span> canObj3 = canvasMod.create(&#123;</div><div class="line">    <span class="attr">draw</span>: <span class="function"><span class="keyword">function</span>(<span class="params">canObj, ctx, canvas, state</span>)</span>&#123;</div><div class="line">        ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">        ctx.globalAlpha = <span class="number">0.3</span>;</div><div class="line">        ctx.drawImage(canObj2.canvas, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        ctx.globalAlpha = <span class="number">1</span>;</div><div class="line">        ctx.save();</div><div class="line">        ctx.translate(<span class="number">128</span>, <span class="number">128</span>);</div><div class="line">        <span class="keyword">let</span> d = state.rStart + state.rDelta * state.rAlpha;</div><div class="line">        ctx.rotate(<span class="built_in">Math</span>.PI / <span class="number">180</span> * d);</div><div class="line">        ctx.drawImage(canObj1.canvas, <span class="number">-128</span>, <span class="number">-128</span>);</div><div class="line">        ctx.restore();</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">size</span>: <span class="number">256</span>,</div><div class="line">    <span class="attr">update_mode</span>: <span class="string">'canvas'</span>,</div><div class="line">    <span class="attr">state</span>: &#123;</div><div class="line">        <span class="attr">rStart</span>: <span class="number">-90</span>,</div><div class="line">        <span class="attr">rDelta</span>: <span class="number">180</span>,</div><div class="line">        <span class="attr">rAlpha</span>: <span class="number">0</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">palette</span>: [<span class="string">'black'</span>, <span class="string">'white'</span>]</div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.PlaneGeometry(<span class="number">3.75</span>, <span class="number">2</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">        <span class="attr">map</span>: canObj3.texture,</div><div class="line">        <span class="attr">transparent</span>: <span class="literal">true</span></div><div class="line">    &#125;)</div><div class="line">);</div><div class="line">mesh.position.set(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// TEXT and textLines</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> text2 = <span class="string">'\n\n888888888-888888888-88***\n\n\nThis is the custom draw method demo.\n\nThe idea here is that the canvas object that I am using for the text is just being used to update the canvas element. I then use that canvas element with the draw image method when drawing to another canvas element that is actauly used to to skin a geometry of a mesh object. \n\n'</span></div><div class="line"><span class="keyword">const</span> textLines = TextPlane.createTextLines(text2, <span class="number">22</span>);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">600</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">let</span> a = frame / frameMax;</div><div class="line">    <span class="keyword">let</span> b = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a) / <span class="number">0.5</span>;</div><div class="line">    <span class="comment">// UPDATE</span></div><div class="line">    TextPlane.moveTextLines(canObj1.state.lines, textLines, b * <span class="number">0.5</span>, <span class="number">0</span>, <span class="number">30</span>);</div><div class="line">    <span class="comment">// update canvas</span></div><div class="line">    canvasMod.update(canObj1);</div><div class="line">    <span class="comment">//canvasMod.update(canObj2); // background can be animated or static</span></div><div class="line">    canObj3.state.rAlpha = b;</div><div class="line">    canvasMod.update(canObj3);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h3 id="1-4-One-last-r0-demo-of-the-plane-text-module-that-has-to-do-with-mutation-of-plane-geometry"><a href="#1-4-One-last-r0-demo-of-the-plane-text-module-that-has-to-do-with-mutation-of-plane-geometry" class="headerlink" title="1.4 - One last r0 demo of the plane text module that has to do with mutation of plane geometry"></a>1.4 - One last r0 demo of the plane text module that has to do with mutation of plane geometry</h3><p>One last demo of r0 of the plane texture module threejs example until I get around to making an r1 of the module I think. This time I will be making an example that not only uses the text plane module, but also involves some additional code that will mutate the position attribute of the geometry of the mesh that I am using the canvas object with. You see as of r0 I do not have any options for setting the width and height segment counts when it comes to using the create plane method. In future revisions I thing I will be changing that and adding options for that. One major reason why is because I think I will like to make this module not just update the state of a texture to use with the map option of a material use with the mesh object, but also update the state of buffer attribute values such as the position attribute.</p>
<p>In future revisions I have plans to make a more advanced system where I do not just make use of a built in draw function for updating texture, but also make use of built in code that has to do with mutation of geometry also. However for now I have to just do these sorts of things by making one or more helper function in example code that will be the first steps in the direction of making one or more options for update geometry as well as material of a plane.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0.75</span>, <span class="number">0.75</span>, <span class="number">0.75</span>);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">75</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">.025</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> setLinesStyle = <span class="function">(<span class="params">lines, lw, fs, f</span>) =&gt;</span> &#123;</div><div class="line">   lines.forEach(<span class="function">(<span class="params">lObj</span>)=&gt;</span>&#123;</div><div class="line">       lObj.lw = lw;</div><div class="line">       lObj.fs = fs + <span class="string">'px'</span>;</div><div class="line">       lObj.f = f;</div><div class="line">   &#125;);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// update position attribute</span></div><div class="line"><span class="keyword">const</span> updatePlaneGeoPosition = <span class="function">(<span class="params">plane, alpha, opt</span>) =&gt;</span> &#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    opt.m = opt.m || <span class="keyword">new</span> THREE.Vector3(<span class="number">6</span>, <span class="number">4</span>, <span class="number">0.2</span>);</div><div class="line">    opt.xWaves = opt.xWaves === <span class="literal">undefined</span> ? <span class="number">8</span> : opt.xWaves;</div><div class="line">    opt.yWaves = opt.yWaves === <span class="literal">undefined</span> ? <span class="number">0.5</span> : opt.yWaves;</div><div class="line">    <span class="keyword">const</span> geo = plane.geometry;</div><div class="line">    <span class="keyword">const</span> pos = geo.getAttribute(<span class="string">'position'</span>);</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">const</span> w = geo.parameters.widthSegments + <span class="number">1</span>;</div><div class="line">    <span class="keyword">const</span> h = geo.parameters.heightSegments + <span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; pos.count)&#123;</div><div class="line">        <span class="keyword">const</span> x = i % w;</div><div class="line">        <span class="keyword">const</span> y = <span class="built_in">Math</span>.floor(i / w);</div><div class="line">        <span class="keyword">const</span> px = x / ( w - <span class="number">1</span> ) * opt.m.x - ( w - <span class="number">1</span> ) *  opt.m.x / <span class="number">2</span> / (w - <span class="number">1</span> ) ;</div><div class="line">        <span class="keyword">const</span> py = y / ( h - <span class="number">1</span> ) * opt.m.y * <span class="number">-1</span> + ( h - <span class="number">1</span> ) *  opt.m.y / <span class="number">2</span> / (h - <span class="number">1</span>);</div><div class="line">        <span class="comment">//let pz = 0;</span></div><div class="line">        <span class="comment">//let pz = Math.sin(i / pos.count * 8 * Math.PI * 2) * 0.2;</span></div><div class="line">        <span class="comment">//let pz = Math.sin(i / pos.count * 8 * (Math.PI * (x * 0.6 / w)) * 2) * 0.2;</span></div><div class="line">        <span class="keyword">let</span> xWaves = opt.xWaves * alpha;</div><div class="line">        <span class="keyword">let</span> yWaves = <span class="built_in">Math</span>.PI * <span class="number">2</span> * (y / h) * opt.yWaves;</div><div class="line">        <span class="keyword">let</span> pz = <span class="built_in">Math</span>.sin(x / w * xWaves * ( <span class="built_in">Math</span>.PI + yWaves) * <span class="number">2</span>) * opt.m.z;</div><div class="line">        pos.setXYZ(i, px, py, pz);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    pos.needsUpdate = <span class="literal">true</span>;</div><div class="line">    geo.computeVertexNormals();</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CANVAS OBJECT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// canvas object 1 will be used for text</span></div><div class="line"><span class="keyword">const</span> canObj1 = TextPlane.createCanObj(&#123;</div><div class="line">    <span class="attr">rows</span>: <span class="number">12</span>, <span class="attr">size</span>: <span class="number">256</span>,</div><div class="line">    <span class="attr">palette</span>: [<span class="string">'rgba(0,0,0,0)'</span>, <span class="string">'#8f8f8f'</span>, <span class="string">'#ffffff'</span>]</div><div class="line">&#125;);</div><div class="line">setLinesStyle( canObj1.state.lines, <span class="number">1</span>, <span class="number">31</span>, <span class="string">'arial'</span>);</div><div class="line"><span class="comment">// canvas object 2 will use the 'rnd' built in draw method</span></div><div class="line"><span class="comment">// as a way to create a background a little more interesting</span></div><div class="line"><span class="comment">// than just a static background</span></div><div class="line"><span class="keyword">let</span> canObj2 = canvasMod.create(&#123;</div><div class="line">    <span class="attr">draw</span>: <span class="string">'rnd'</span>,</div><div class="line">    <span class="attr">size</span>: <span class="number">256</span>,</div><div class="line">    <span class="attr">update_mode</span>: <span class="string">'canvas'</span>,</div><div class="line">    <span class="attr">state</span>: &#123;</div><div class="line">        <span class="attr">gSize</span>: <span class="number">16</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">palette</span>: [<span class="string">'red'</span>, <span class="string">'lime'</span>, <span class="string">'cyan'</span>, <span class="string">'purple'</span>, <span class="string">'orange'</span>, <span class="string">'green'</span>, <span class="string">'blue'</span>]</div><div class="line">&#125;);</div><div class="line"><span class="comment">// canvas object 3 will be the final background use for the material</span></div><div class="line"><span class="keyword">let</span> canObj3 = canvasMod.create(&#123;</div><div class="line">    <span class="attr">draw</span>: <span class="function"><span class="keyword">function</span>(<span class="params">canObj, ctx, canvas, state</span>)</span>&#123;</div><div class="line">        ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">        <span class="comment">// draw down the back canvas</span></div><div class="line">        ctx.globalAlpha = <span class="number">1</span>;</div><div class="line">        ctx.drawImage(canObj2.canvas, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        <span class="comment">// black overlay</span></div><div class="line">        ctx.fillStyle = <span class="string">'rgba(0,0,0,0.7)'</span>;</div><div class="line">        ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height)</div><div class="line">        <span class="comment">// draw the text</span></div><div class="line">        ctx.globalAlpha = <span class="number">1</span>;</div><div class="line">        ctx.drawImage(canObj1.canvas, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">size</span>: <span class="number">256</span>,</div><div class="line">    <span class="attr">update_mode</span>: <span class="string">'canvas'</span>,</div><div class="line">    <span class="attr">state</span>: &#123;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">palette</span>: [<span class="string">'black'</span>, <span class="string">'white'</span>]</div><div class="line">&#125;);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> plane = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.PlaneGeometry(<span class="number">3.75</span>, <span class="number">2</span>, <span class="number">20</span>, <span class="number">20</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">        <span class="attr">map</span>: canObj3.texture,</div><div class="line">        <span class="attr">side</span>: THREE.DoubleSide,</div><div class="line">        <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">opacity</span>: <span class="number">0.6</span></div><div class="line">    &#125;)</div><div class="line">);</div><div class="line">plane.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">scene.add(plane);</div><div class="line"><span class="keyword">const</span> sphere = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">30</span>, <span class="number">30</span>, <span class="number">30</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">         <span class="attr">wireframe</span>: <span class="literal">true</span></div><div class="line">    &#125;)</div><div class="line">);</div><div class="line">scene.add(sphere);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// TEXT and textLines</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> text2 = <span class="string">'\n\n\n\n\nThe idea with this demo is to make an example where I am not just using the text plane module but also some additional code that has to do with mutating the position attribute of the buffer geometry instance that is created with the plane geometry constructor. \n\n\nThis is then something that I will want to back into future revisions maybe as I would like to turn the project into something that is not just used to create a texture, but also update the geometry of the mesh object that is used to display the texture as well. \n\n\nHowever for now this is something that I will have to just do with example code until I fine a good way to abstract it away into the module. \n'</span>;</div><div class="line"><span class="keyword">const</span> textLines = TextPlane.createTextLines(text2, <span class="number">17</span>);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">3</span>, <span class="number">3</span>, <span class="number">7</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">12</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">800</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">let</span> a = frame / frameMax;</div><div class="line">    <span class="keyword">let</span> b = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a) / <span class="number">0.5</span>;</div><div class="line">    <span class="comment">// UPDATE</span></div><div class="line">    updatePlaneGeoPosition(plane, a, &#123;</div><div class="line">        <span class="attr">xWaves</span> : <span class="number">8</span> * b,</div><div class="line">        <span class="attr">yWaves</span>: <span class="number">0.15</span> * a,</div><div class="line">        <span class="attr">m</span>: <span class="keyword">new</span> THREE.Vector3(<span class="number">10</span> + <span class="number">2</span> * b,<span class="number">6</span> + <span class="number">4</span> * b,<span class="number">1.5</span>)</div><div class="line">    &#125;);</div><div class="line">    TextPlane.moveTextLines(canObj1.state.lines, textLines, b * <span class="number">1</span>, <span class="number">0</span>, <span class="number">40</span>);</div><div class="line">    <span class="comment">// update canvas</span></div><div class="line">    canvasMod.update(canObj1);</div><div class="line">    canvasMod.update(canObj2);</div><div class="line">    canvasMod.update(canObj3);</div><div class="line">    <span class="comment">// camera</span></div><div class="line">    camera.position.x = <span class="number">3</span> - <span class="number">6</span> * b;</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>The main function of interest with this example would then be the update plane geo position helper which is what I have together thus far when it comes to this sort of thing. For this example alone I wanted to create some kind of effect that involves sin waves, and I am more or less happy with what I have here thus far. However I would need to refine this more when it comes to the expression and options used. When done I think that this will be just one of many built in options for mutation of geometry over time.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>I will want to make at least one if not more revisions of this module, but even if I do not get around to it I think I have the general idea that I had in mind working all ready. i just simply wanted to have a way to take some text, create an array of sub strings that are formatted to fix into the size of a canvas element, and then also have a way to scroll that content and all ready I am able to do just that.</p>
<p>I have some ideas for future revisions of this module of course, and if you really want to find out what that is there is checking gout the todo lost in the Github folder. I might however in time might even want to work out yet even another system based off of what I have worked out here, but with 3d text rather than plane geometry and canvas elements. However that would be a better for a whole other post and project if I ever get around to that one.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2022/10/14/threejs-examples-text-plane/" data-id="cleu7syqk02aeecv1wde33ujf" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2022/10/14/threejs-examples-text-plane/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/10/21/threejs-curve-quadratic-bezier-curve3/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Quadratic Bezier Curves in threejs
        
      </div>
    </a>
  
  
    <a href="/2022/10/07/threejs-buffer-geometry-compute-bounding-box/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Computing Bounding Box for buffer geometries in threejs</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2022/10/14/threejs-examples-text-plane/index.html';
    this.page.identifier = '1009';
    this.page.title = 'Text Plane Module threejs example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 12.73px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/03/03/threejs-examples-breath-module/">A Breath Module threejs project example</a>
          </li>
        
          <li>
            <a href="/2023/02/23/threejs-points/">Points in threejs</a>
          </li>
        
          <li>
            <a href="/2023/02/17/threejs-examples-tracks/">Train Track threejs module project example</a>
          </li>
        
          <li>
            <a href="/2023/02/10/threejs-curves-cubicbeziercurve3/">Cubic Bezier Curves in threejs</a>
          </li>
        
          <li>
            <a href="/2023/02/03/threejs-buffer-geometry-morph-attributes/">Morph Attributes of buffer geometry objects</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2022/10/14/threejs-examples-text-plane/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>