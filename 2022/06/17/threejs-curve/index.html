<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner_2023.png">
  
  <title>The Curve class in threejs a general overview | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2022/06/17/threejs-curve/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="The curve class in threejs is a way to go about creating a curve with a little javaScript logic when it comes to working directly with the curve base class. There is also a number of built in classes">
<meta property="og:type" content="article">
<meta property="og:title" content="The Curve class in threejs a general overview">
<meta property="og:url" content="https://dustinpfister.github.io/2022/06/17/threejs-curve/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="The curve class in threejs is a way to go about creating a curve with a little javaScript logic when it comes to working directly with the curve base class. There is also a number of built in classes">
<meta property="og:updated_time" content="2023-05-31T23:40:12.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="The Curve class in threejs a general overview">
<meta name="twitter:description" content="The curve class in threejs is a way to go about creating a curve with a little javaScript logic when it comes to working directly with the curve base class. There is also a number of built in classes">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-curve" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/06/17/threejs-curve/" class="article-date"> Published:
  <time datetime="2022-06-17T18:06:00.000Z" itemprop="datePublished">2022-06-17</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2022/06/17/threejs-curve/" class="article-date"> Modified:
  <time datetime="2023-05-31T23:40:12.000Z" itemprop="dateModified">2023-05-31</time>
</a>

    <span class="article-date">V1.48</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      The Curve class in threejs a general overview
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>The <a href="https://threejs.org/docs/#api/en/extras/core/Curve" target="_blank" rel="external">curve class in threejs</a> is a way to go about creating a curve with a little javaScript logic when it comes to working directly with the curve base class. There is also a number of built in classes that extend the curve base class which might be the best starting point for this sort of thing actually. However there might end up being a situation now and then where I might want to create my own class that extends the curve base class. Also even if I just work with the built in options that extend the curve base class I still want to have a solid grasp on what there is to work with when it comes to the common methods of curves that can be found in this base curve class.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/mXbSwt-06lk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="The-curve-class-and-what-to-know-first"><a href="#The-curve-class-and-what-to-know-first" class="headerlink" title="The curve class and what to know first."></a>The curve class and what to know first.</h2><p>The main focus of this post is on the curve class in threejs, and using the objects cerated with this class and other classes based off of it with the tube geometry constructor. There is a whole lot of ground to cover when it comes to this class, and also an awful lot more to cover when it comes to all kinds of various things that you should be aware of before hand. I will not be getting into detail about every little thing that comes up with the <a href="/2018/04/04/threejs-getting-started/">basics of threejs</a> as well as the core javaScript itself. However I do still use this first section to quickly go over some things that you might want to read up more on.</p>
<h3 id="There-is-looking-into-lines-first-maybe"><a href="#There-is-looking-into-lines-first-maybe" class="headerlink" title="There is looking into lines first, maybe"></a>There is looking into lines first, maybe</h3><p>Getting into the use of the curve class and the typically corresponding tube geometry constructor seems like the next step from <a href="/2018/04/19/threejs-line/">creating lines</a>. One nice thing about lines is that I am create them by making an array of <a href="/2018/04/15/threejs-vector3/">vector3 class</a> instances by making use of the set from points method of the buffer geometry class. However there are limitations with lines compared to what there is work with when it comes to mesh objects, so that leads one to look into the curve class and tube geometry.</p>
<h3 id="Check-out-my-other-posts-on-curves-in-threejs"><a href="#Check-out-my-other-posts-on-curves-in-threejs" class="headerlink" title="Check out my other posts on curves in threejs"></a>Check out my other posts on curves in threejs</h3><p>I have a number of other posts that I have wrote on curves now such as my post where I am <a href="/2022/12/16/threejs-curve-geometry-from/">using curves to create and update custom geometry</a>. I also started a threejs example post that is on a <a href="/2022/11/18/threejs-examples-curves-module/">curves module</a>.</p>
<h3 id="Source-Code-is-up-on-Github"><a href="#Source-Code-is-up-on-Github" class="headerlink" title="Source Code is up on Github"></a>Source Code is up on Github</h3><p>I have the source code that I am writing about in this post also up on my <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-curve" target="_blank" rel="external">test threejs repo on Github</a>. This is also where I park the source code examples for my <a href="/categories/three-js/">many other blog posts on threejs</a> as well.</p>
<h3 id="Version-Numbers-matter"><a href="#Version-Numbers-matter" class="headerlink" title="Version Numbers matter"></a>Version Numbers matter</h3><p>When I first started this post I was using r140 of threejs, and the last time I came around to do some editing of the post I was able to get all the examples working just fine with r146.</p>
<h2 id="1-Basic-Curve-Examples"><a href="#1-Basic-Curve-Examples" class="headerlink" title="1 - Basic Curve Examples"></a>1 - Basic Curve Examples</h2><p>To start out with Curves in this section I will be going over some fairly simple getting started type examples of Curves. This will include some examples that make use of built in curve function examples, as well as at least one that has to do with creating a custom curve class.</p>
<h3 id="1-1-Line-Curve-Example-with-Points"><a href="#1-1-Line-Curve-Example-with-Points" class="headerlink" title="1.1 - Line Curve Example with Points"></a>1.1 - Line Curve Example with Points</h3><p>There is a Line Curve 3 class that is one built in option for creating a curve. This is just making an instance of a curve that is just a line between two points, but it is still an instance of a curve. So then this can be used in any situation that i need a curve object that is just a line actually. </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CURVE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> v1 = <span class="keyword">new</span> THREE.Vector3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> v2 = <span class="keyword">new</span> THREE.Vector3(<span class="number">-5</span>, <span class="number">0</span>, <span class="number">-5</span>);</div><div class="line"><span class="keyword">const</span> curve = <span class="keyword">new</span> THREE.LineCurve3( v1, v2);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0x00ff00</span>, <span class="number">0x4a4a4a</span>) );</div><div class="line"><span class="comment">// points</span></div><div class="line"><span class="keyword">const</span> v3Array = curve.getPoints(<span class="number">20</span>);</div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BufferGeometry();</div><div class="line">geometry.setFromPoints(v3Array);</div><div class="line"><span class="keyword">const</span> points = <span class="keyword">new</span> THREE.Points(geometry, <span class="keyword">new</span> THREE.PointsMaterial(&#123;<span class="attr">color</span>: <span class="number">0xff0000</span>, <span class="attr">size</span>: <span class="number">0.25</span> &#125;));</div><div class="line">scene.add(points);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">10</span>, <span class="number">5</span>, <span class="number">7</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="1-2-Bezier-Curve-Example-with-Points"><a href="#1-2-Bezier-Curve-Example-with-Points" class="headerlink" title="1.2 - Bezier Curve Example with Points"></a>1.2 - Bezier Curve Example with Points</h3><p>Although I can quickly create a curve that is a line actually I will typically want to use the <a href="/2022/10/21/threejs-curve-quadratic-bezier-curve3/">Bezier Curve Built in Curve object function</a> to create lines as well as curves in general. I make the kinds of curves that I will like to make as well as a straight line depending on the control point that I give when calling it.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0x00ff00</span>, <span class="number">0x4a4a4a</span>) )</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CURVE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> v1 = <span class="keyword">new</span> THREE.Vector3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> v2 = <span class="keyword">new</span> THREE.Vector3(<span class="number">-5</span>, <span class="number">0</span>, <span class="number">-5</span>);</div><div class="line"><span class="keyword">const</span> vControl = <span class="keyword">new</span> THREE.Vector3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">-5</span>);</div><div class="line"><span class="keyword">const</span> curve = <span class="keyword">new</span> THREE.QuadraticBezierCurve3( v1, vControl, v2);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0x00ff00</span>, <span class="number">0x4a4a4a</span>) );</div><div class="line"><span class="comment">// points</span></div><div class="line"><span class="keyword">const</span> v3Array = curve.getPoints(<span class="number">20</span>);</div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BufferGeometry();</div><div class="line">geometry.setFromPoints(v3Array);</div><div class="line"><span class="keyword">const</span> points = <span class="keyword">new</span> THREE.Points(geometry, <span class="keyword">new</span> THREE.PointsMaterial(&#123;<span class="attr">color</span>: <span class="number">0xff0000</span>, <span class="attr">size</span>: <span class="number">0.25</span> &#125;));</div><div class="line">scene.add(points);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">10</span>, <span class="number">5</span>, <span class="number">7</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="1-3-Making-a-Custom-THREE-Curve-and-THREE-TubeGeometry-example"><a href="#1-3-Making-a-Custom-THREE-Curve-and-THREE-TubeGeometry-example" class="headerlink" title="1.3 - Making a Custom THREE.Curve and THREE.TubeGeometry example"></a>1.3 - Making a Custom THREE.Curve and THREE.TubeGeometry example</h3><p>When it comes to the curve and tube geometry constructors in threejs one has to start somewhere, so for this example I will be doing just that with the THREE.Curve constructor and the tube geometry constructor. For this example I am starting out with the usual features when it comes to things like setting up a scene object, camera, and renderer. In additional the the usual features I am also adding a <a href="/2022/02/25/threejs-light/">light source</a> as I will be going with the <a href="/2021/04/27/threejs-standard-material/">standard material</a> for this example when setting  up the mesh object that will use the tube geometry later.</p>
<p>When it comes to using the curve base class I will want to extend the base class and define a constructor as well as a get point method. It is in this get point method that I will be defining the logic that is used to create the curve. For this basic example I am just making as simple curve using the Math.pow method for the y values for each point, alone with just simple linear stepping for x values, and for now just leaving z values at zero.</p>
<p>Once I have a new class created by extending the base curve class I can then use this class to create a new curve object. This curve object can then be passed to the tube geometry constructor as the first argument for that constructor. The resulting geometry from calling the tube geometry class constructor can then in turn be used with a mesh object just like that with the various other built in geometry constructor functions.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0x00ff00</span>, <span class="number">0x4a4a4a</span>) )</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">3</span>, <span class="number">10</span>, <span class="number">1</span>).normalize();</div><div class="line">scene.add(dl);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>, <span class="number">0.05</span>) )</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CURVE, TubeGeometry, Mesh</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// basic cuve class extending three curve</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BasicCurve</span> <span class="keyword">extends</span> <span class="title">THREE</span>.<span class="title">Curve</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>() &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">    &#125;</div><div class="line">    getPoint( t, optionalTarget = <span class="keyword">new</span> THREE.Vector3() ) &#123;</div><div class="line">        <span class="keyword">var</span> tx = <span class="number">-2</span> + <span class="number">4</span> * t,</div><div class="line">        ty = <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">5</span> * t) / <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">5</span>) * <span class="number">7</span>,</div><div class="line">        tz = <span class="number">0</span>;</div><div class="line">        <span class="keyword">return</span> optionalTarget.set( tx, ty, tz );</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// creating a tube geometry with path and additional arguments using basic curve</span></div><div class="line"><span class="keyword">let</span> path = <span class="keyword">new</span> BasicCurve(),</div><div class="line">tubularSegments = <span class="number">800</span>,</div><div class="line">radius = <span class="number">0.25</span>,</div><div class="line">radialSegments = <span class="number">20</span>;</div><div class="line"><span class="keyword">let</span> mesh = <span class="keyword">new</span> THREE.Mesh( </div><div class="line">    <span class="keyword">new</span> THREE.TubeGeometry( path, tubularSegments, radius, radialSegments, <span class="literal">false</span> ), </div><div class="line">    <span class="keyword">new</span> THREE.MeshStandardMaterial( &#123; <span class="attr">color</span>: <span class="number">0xff0000</span>, <span class="attr">side</span>: THREE.DoubleSide &#125;)</div><div class="line">);</div><div class="line">scene.add( mesh );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h2 id="2-More-on-Vector3-object-arrays-Points-and-curves-curves"><a href="#2-More-on-Vector3-object-arrays-Points-and-curves-curves" class="headerlink" title="2 - More on Vector3 object arrays, Points and curves curves"></a>2 - More on Vector3 object arrays, Points and curves curves</h2><p>When it comes to the Base Curve class there are some key methods of interest that are very useful for creating an array of Vector3 objects, or getting a single Vector3 object at any point along a curve. I touched based on this topic in the Basic section of this blog post, but I have to say that this is without question a topic that I should expand on with the curve class to say the learn about it.</p>
<p>There are a lot of reasons why I would want to create an array of Vector3 objects that are points along a curve, or get a single point along a curve. There is creating an instance of THREE.Points with a geometry that has a position attribute of vertices along the curve for example. When doing so there is not just the question of getting a number of points along the curve, but also the spacing between each point when doing so. The getPoints method of the base curve class can get a number of points along a curve just fine, but it will always be a fixed delta value between each point. With that said there is also the getPoint method that will just give me a single Vector3 object along the curve by way of a given alpha value. This getPoint method can then be used to address problems with this fixed delta problem with the getPoints method.</p>
<h3 id="2-1-The-curve-getPoints-method-and-THREE-Points"><a href="#2-1-The-curve-getPoints-method-and-THREE-Points" class="headerlink" title="2.1 - The curve.getPoints method and THREE.Points"></a>2.1 - The curve.getPoints method and THREE.Points</h3><p>For this first example of Points and the base Curve class I will be using the GetPoints method to just get a fixed number of points along a curve. Once again this example is fairly similar to what I covered in the basic section all ready, but I would like to start off with an example such as this before moving on to more complex examples.</p>
<p>Once I have a curve class based object by any means I can call the getPoints method of the base curve class to get an array of Vector3 objects. Although this might work okay for many situations in which I might need to do something like this there is one draw back about using this and that is that the spacing between each point will be the same for each vector3 object along the curve.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CURVE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> v_start = <span class="keyword">new</span> THREE.Vector3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> v_end = <span class="keyword">new</span> THREE.Vector3(<span class="number">-5</span>, <span class="number">0</span>, <span class="number">-5</span>);</div><div class="line"><span class="keyword">const</span> v_control = v_start.clone().lerp(v_end, <span class="number">0.5</span>).add( <span class="keyword">new</span> THREE.Vector3(<span class="number">-5</span>,<span class="number">0</span>,<span class="number">5</span>) );</div><div class="line"><span class="keyword">const</span> curve = <span class="keyword">new</span> THREE.QuadraticBezierCurve3( v_start, v_control, v_end);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// v3_array</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> v3array = curve.getPoints(<span class="number">50</span>);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BufferGeometry().setFromPoints(v3array);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0x00ff00</span>, <span class="number">0x4a4a4a</span>) );</div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.PointsMaterial(&#123; <span class="attr">size</span>: <span class="number">0.25</span>, <span class="attr">color</span>: <span class="number">0xffff00</span>&#125;)</div><div class="line"><span class="keyword">const</span> points1 = <span class="keyword">new</span> THREE.Points(geometry, material);</div><div class="line">scene.add(points1);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">10</span>, <span class="number">5</span>, <span class="number">7</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="2-2-Get-a-single-Vector3-object-at-a-time-and-use-custom-alpha-values-with-the-getPoint-method"><a href="#2-2-Get-a-single-Vector3-object-at-a-time-and-use-custom-alpha-values-with-the-getPoint-method" class="headerlink" title="2.2 - Get a single Vector3 object at a time, and use custom alpha values with the getPoint method"></a>2.2 - Get a single Vector3 object at a time, and use custom alpha values with the getPoint method</h3><p>Although the get points method of the curve class will work just fine for getting an array of Vector3 objects, there is still the matter of having custom spacing between the points when it comes to this kind of array of objects. So with that said often I will use the getPoint method over that of the getPoints method as it gives me greater flexibility with this. I can get the same result as with the getPoints method if I want by just giving a linear style alpha value for each point alone the curve. However I can also get any other kind of spacing that I might want by making use of various functions in threejs that help with the process of getting an alpha values, or using another other various expressions or means to do so.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CURVE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> v_start = <span class="keyword">new</span> THREE.Vector3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> v_end = <span class="keyword">new</span> THREE.Vector3(<span class="number">-5</span>, <span class="number">0</span>, <span class="number">-5</span>);</div><div class="line"><span class="keyword">const</span> v_control = v_start.clone().lerp(v_end, <span class="number">0.5</span>).add( <span class="keyword">new</span> THREE.Vector3(<span class="number">-5</span>,<span class="number">0</span>,<span class="number">5</span>) );</div><div class="line"><span class="keyword">const</span> curve = <span class="keyword">new</span> THREE.QuadraticBezierCurve3( v_start, v_control, v_end);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// v3_array</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> v3array = [];</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> len = <span class="number">50</span>;</div><div class="line"><span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">   <span class="comment">// use some kind of expression, method, or whatever means</span></div><div class="line">   <span class="comment">// to get an alpha value ( 0 - 1 ) that will be the point along</span></div><div class="line">   <span class="comment">// the curve</span></div><div class="line">   <span class="keyword">const</span> a_point = i / ( len - <span class="number">1</span> );</div><div class="line">   <span class="keyword">const</span> a_smooth = THREE.MathUtils.smootherstep(a_point, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">   v3array.push( curve.getPoint( a_smooth ) );</div><div class="line">   i += <span class="number">1</span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BufferGeometry().setFromPoints(v3array);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0x00ff00</span>, <span class="number">0x4a4a4a</span>) );</div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.PointsMaterial(&#123; <span class="attr">size</span>: <span class="number">0.25</span>, <span class="attr">color</span>: <span class="number">0xffff00</span>&#125;)</div><div class="line"><span class="keyword">const</span> points1 = <span class="keyword">new</span> THREE.Points(geometry, material);</div><div class="line">scene.add(points1);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">10</span>, <span class="number">5</span>, <span class="number">7</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="2-3-Updating-an-alpha-value-and-also-a-geometry-over-time"><a href="#2-3-Updating-an-alpha-value-and-also-a-geometry-over-time" class="headerlink" title="2.3 - Updating an alpha value, and also a geometry over time"></a>2.3 - Updating an alpha value, and also a geometry over time</h3><p>For this example I am not just creating a static geometry with a curve object, but also updating the <a href="/2021/06/07/threejs-buffer-geometry-attributes-position/">position attribute of that geometry</a> over time as well. The set from points method of buffer geometry objects will work fine for making a geometry with a position attribute in the first place, but I have found that I will run into problems when using it to update a geometry over time.</p>
<p>The main thing about this example here is that I am using the get point method to get a Vector3 object for each point along the curve with a custom alpha value. I am not creating an array of Vector3 objects now, but rather directly mutating the state of the position attribute by making use of the setXYZ method of the buffer attribute class.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPER FUNCTIONS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// the get alpha method</span></div><div class="line"><span class="keyword">const</span> get_alpha = <span class="function">(<span class="params">n, d, a = <span class="number">1</span></span>) =&gt;</span> &#123;</div><div class="line">   <span class="keyword">const</span> a_lin = n / ( d - <span class="number">1</span> );</div><div class="line">   <span class="keyword">const</span> a_smooth = THREE.MathUtils.smootherstep(a_lin, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">   <span class="keyword">return</span> THREE.MathUtils.lerp( a_lin, a_smooth, a);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// create a geometry</span></div><div class="line"><span class="keyword">const</span> createCurveGeometry = <span class="function">(<span class="params"> curve, count = <span class="number">50</span> </span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> THREE.BufferGeometry().setFromPoints( curve.getPoints(count) );</div><div class="line">&#125;;</div><div class="line"><span class="comment">// create a geometry</span></div><div class="line"><span class="keyword">const</span> updateCurveGeometry = <span class="function">(<span class="params"> curve, geometry, alpha = <span class="number">1</span> </span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> att_pos = geometry.getAttribute(<span class="string">'position'</span>);</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">const</span> len = att_pos.count;</div><div class="line">    <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">        <span class="keyword">const</span> a = get_alpha(i, len, alpha);</div><div class="line">        <span class="keyword">const</span> v = curve.getPoint( a );</div><div class="line">        att_pos.setXYZ(i, v.x, v.y, v.z);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    att_pos.needsUpdate = <span class="literal">true</span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CURVE</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> v_start = <span class="keyword">new</span> THREE.Vector3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> v_end = <span class="keyword">new</span> THREE.Vector3(<span class="number">-5</span>, <span class="number">0</span>, <span class="number">-5</span>);</div><div class="line"><span class="keyword">const</span> v_control = v_start.clone().lerp(v_end, <span class="number">0.5</span>).add( <span class="keyword">new</span> THREE.Vector3(<span class="number">-5</span>,<span class="number">0</span>,<span class="number">5</span>) );</div><div class="line"><span class="keyword">const</span> curve = <span class="keyword">new</span> THREE.QuadraticBezierCurve3( v_start, v_control, v_end);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEOMETRY</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = createCurveGeometry(curve, <span class="number">25</span>); <span class="comment">//new THREE.BufferGeometry().setFromPoints(v3array);</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0x00ff00</span>, <span class="number">0x4a4a4a</span>) );</div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.PointsMaterial(&#123; <span class="attr">size</span>: <span class="number">0.25</span>, <span class="attr">color</span>: <span class="number">0xffff00</span>&#125;)</div><div class="line"><span class="keyword">const</span> points1 = <span class="keyword">new</span> THREE.Points(geometry, material);</div><div class="line">scene.add(points1);</div><div class="line"></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">10</span>, <span class="number">5</span>, <span class="number">7</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> sm = &#123;</div><div class="line">   <span class="attr">FPS_UPDATE</span>: <span class="number">20</span>,     <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">   FPS_MOVEMENT: <span class="number">30</span>,  <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">   FRAME_MAX: <span class="number">100</span>,</div><div class="line">   <span class="attr">secs</span>: <span class="number">0</span>,</div><div class="line">   <span class="attr">frame_frac</span>: <span class="number">0</span>,</div><div class="line">   <span class="attr">frame</span>: <span class="number">0</span>,</div><div class="line">   <span class="attr">tick</span>: <span class="number">0</span>,</div><div class="line">   <span class="attr">now</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">   <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">sm</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> a1 = sm.frame / sm.FRAME_MAX;</div><div class="line">    <span class="keyword">const</span> a2 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1) / <span class="number">0.5</span>;</div><div class="line">    updateCurveGeometry(curve, geometry, a2 );</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    sm.now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    sm.secs = (sm.now - sm.lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(sm.secs &gt; <span class="number">1</span> / sm.FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update(sm);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        sm.frame_frac += sm.FPS_MOVEMENT * sm.secs;</div><div class="line">        sm.frame_frac %= sm.FRAME_MAX;</div><div class="line">        sm.frame = <span class="built_in">Math</span>.floor(sm.frame_frac);</div><div class="line">        sm.tick = (sm.tick += <span class="number">1</span>) % sm.FRAME_MAX;</div><div class="line">        sm.lt = sm.now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>Then end result of all of this is then a situation in which the spacing between the points will change from something that is similar to the use of the getPoints method to a custom spacing that is created with the smoother step method of the <a href="/2022/04/11/threejs-math-utils/">math utils object</a>.</p>
<h2 id="4-Using-2D-curves"><a href="#4-Using-2D-curves" class="headerlink" title="4 - Using 2D curves"></a>4 - Using 2D curves</h2><p>There are a number of built in options for curves, many of which are 3d curves, but there are also a few that are very much 2d curves. For example there is an EllipseCurve that will create a 2d curve of an ellipse and it can also be used to create 2d Arcs and circles, in fact ArcCurve is just an Alias for EllipseCurve. There are also a number of built in curve options that are there to work with in both 3D, and 2D form as well such as <a href="https://threejs.org/docs/#api/en/extras/curves/CubicBezierCurve3" target="_blank" rel="external">CubicBezierCurve3</a>, and <a href="https://threejs.org/docs/#api/en/extras/curves/CubicBezierCurve" target="_blank" rel="external">CubicBezierCurve</a>.</p>
<p>There are a number of little situations here and there where I might want to make use of a 2D curve rather than a 3D one. I often might be in a situation in which I will want to just have a simple 2D shape, and then make an extrude geometry of that shape. I will not be touching base on every little detail that might come up with 2d curves in this section as much of it might need to be a whole other topic in this post. However I think I should at least start out with some of the usual basic examples of 2d curves here.</p>
<h3 id="4-1-2D-curve-Shape-example"><a href="#4-1-2D-curve-Shape-example" class="headerlink" title="4.1 - 2D curve Shape example"></a>4.1 - 2D curve Shape example</h3><p>One Basic use case example of a 2D curve might be to use one to create an instance of THREE.Shape. Once I have a Shape object I can  then pass that to something like THREE.ShapeGeometry or THREE.ExtrudeGeometry to create a geometry that I can then use with a Mesh object.</p>
<p>The first step is to just create a 2D curve such as with the 2D form of the Quadratic Bezier Curve. Once I have the 2D curve I can then create an array of Vector2 objects by just calling the get Points method of the base curve class. This array of vector2 objects can then be passed as the first argument of the THREE.Shape constructor to create the Shape object. For this example I am then making a ShapeGeometry for a mesh object that will take a shape as the first argument. When using this geometry with a Mesh object I typically like to set the side option of the material to DoubleSide to make sure that both sides will render.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.querySelector(<span class="string">'#demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CURVE</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> v_start = <span class="keyword">new</span> THREE.Vector2(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> v_end = <span class="keyword">new</span> THREE.Vector2(<span class="number">5</span>, <span class="number">3</span>);</div><div class="line"><span class="keyword">const</span> v_control = v_start.clone().lerp(v_end, <span class="number">0.5</span>).add( <span class="keyword">new</span> THREE.Vector2(<span class="number">-2</span>, <span class="number">1</span>) );</div><div class="line"><span class="keyword">const</span> curve = <span class="keyword">new</span> THREE.QuadraticBezierCurve(v_start, v_control, v_end);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHAPE/GEOMETRY</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> v2array = curve.getPoints(<span class="number">50</span>);</div><div class="line">v2array.push( <span class="keyword">new</span> THREE.Vector2(<span class="number">5</span>, <span class="number">0</span>) );</div><div class="line"><span class="keyword">const</span> shape = <span class="keyword">new</span> THREE.Shape( v2array  );</div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.ShapeGeometry(shape);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(geometry, <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;  <span class="attr">side</span>: THREE.DoubleSide &#125;));</div><div class="line">scene.add(mesh1);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="4-2-2D-Curves-and-Lathe-Geometry"><a href="#4-2-2D-Curves-and-Lathe-Geometry" class="headerlink" title="4.2 - 2D Curves and Lathe Geometry"></a>4.2 - 2D Curves and Lathe Geometry</h3><p>Another option for making a geometry to use with a mesh object with a 2d curve would be to make use of THREE.LatheGeometry. Think of a 2d object for a moment and then think of what happens when you spin that 2d object along on a axis, the end result is something that more or less looks like a kind of 3D object, and that is what the lathe geometry is all about. For this demo I am making use of the ArcCurve 2d curve class to create an arc. I can then use the get points method to create an array of vector2 objects that I then pass as the first argument of the LatheGeometry constructor, I can then pass another argument that is the number of segments that I want for the lathe geometry. The end result here is then a kind of Sphere like geometry, but with holes on the top and bottom of the geometry. I can then adjust the start and end radian values to close or expand the holes.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.querySelector(<span class="string">'#demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CURVE</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> radian_start = <span class="built_in">Math</span>.PI * <span class="number">1.8</span>;</div><div class="line"><span class="keyword">const</span> radian_end = <span class="built_in">Math</span>.PI * <span class="number">0.2</span>;</div><div class="line"><span class="keyword">const</span> curve = <span class="keyword">new</span> THREE.ArcCurve(<span class="number">0</span>, <span class="number">0</span>, <span class="number">5</span>, radian_start, radian_end, <span class="literal">false</span> );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SHAPE/GEOMETRY</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.LatheGeometry( curve.getPoints(<span class="number">64</span>), <span class="number">40</span> );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(geometry, <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;  <span class="attr">side</span>: THREE.DoubleSide &#125;));</div><div class="line">scene.add(mesh1);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">8</span>, <span class="number">12</span>, <span class="number">8</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h2 id="3-Curve-Paths"><a href="#3-Curve-Paths" class="headerlink" title="3 - Curve Paths"></a>3 - Curve Paths</h2><p>Often I will find myself in a situation in which I will want to make not just one curve, but a whole bunch of them, and link them all together into one sort of logical path. With that said there is the built in curve path class of threejs that can be used to create this kind of curve of curves. I can then use the get point method to get a single point along one of these curve paths. However if I want a collection of Vector3 objects I might want to go with the get spaced points method of the curve path class.</p>
<h3 id="3-1-Basic-Curve-Path-example-using-THREE-Points-and-CurvePath-getSpacedPoints"><a href="#3-1-Basic-Curve-Path-example-using-THREE-Points-and-CurvePath-getSpacedPoints" class="headerlink" title="3.1 - Basic Curve Path example using THREE.Points and CurvePath.getSpacedPoints"></a>3.1 - Basic Curve Path example using THREE.Points and CurvePath.getSpacedPoints</h3><p>One way to start out with these curve paths would be to create a collection of THREE.Points by using the getSpacedPoints method of the CurvePath class. However before doing that I will need a CurvePath to begin with, with at least one curve added to it. So there is just calling the THREE.CurvePath constructor to get a new CurvePath to start things off. Once I have the curve path stored to a variable I can then start adding other curves to it by just simply calling the add method and passing a curve that I would like to add to it. For this example I am just making use of some line curves and a single Quadratic Bezier Curve.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CURVE PATH</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> v1 = <span class="keyword">new</span> THREE.Vector3(<span class="number">-4</span>, <span class="number">0</span>, <span class="number">3</span>);</div><div class="line"><span class="keyword">const</span> v2 = <span class="keyword">new</span> THREE.Vector3(<span class="number">3</span>, <span class="number">0</span>, <span class="number">3</span>);</div><div class="line"><span class="keyword">const</span> v3 = <span class="keyword">new</span> THREE.Vector3(<span class="number">-4</span>, <span class="number">0</span>, <span class="number">-5</span>);</div><div class="line"><span class="keyword">const</span> vc1 = v2.clone().lerp(v3, <span class="number">0.5</span>).add( <span class="keyword">new</span> THREE.Vector3(<span class="number">4</span>,<span class="number">0</span>,<span class="number">-1</span>) );</div><div class="line"><span class="keyword">const</span> curve = <span class="keyword">new</span> THREE.CurvePath();</div><div class="line">curve.add( <span class="keyword">new</span> THREE.LineCurve3( v1, v2 ) );</div><div class="line">curve.add( <span class="keyword">new</span> THREE.QuadraticBezierCurve3( v2, vc1, v3 ) );</div><div class="line">curve.add( <span class="keyword">new</span> THREE.LineCurve3( v3, v1 ) );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="keyword">const</span> points1 = <span class="keyword">new</span> THREE.Points(</div><div class="line">    <span class="keyword">new</span> THREE.BufferGeometry().setFromPoints( curve.getSpacedPoints(<span class="number">50</span>) ),</div><div class="line">    <span class="keyword">new</span> THREE.PointsMaterial(&#123; <span class="attr">size</span>: <span class="number">0.4</span>, <span class="attr">color</span>: <span class="number">0xff0000</span> &#125;));</div><div class="line">scene.add(points1);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">10</span>, <span class="number">5</span>, <span class="number">7</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h2 id="5-Using-Curves-to-create-functions-that-compute-alpha-values"><a href="#5-Using-Curves-to-create-functions-that-compute-alpha-values" class="headerlink" title="5 - Using Curves to create functions that compute alpha values"></a>5 - Using Curves to create functions that compute alpha values</h2><p>One thing that will come up all the time with threejs, as well as with computer programming in general is the concept of what is often referred to as an alpha value, at least in terms of threejs docs terminology at least. What I am really taking about here is  a number in the range of 0 to 1 <a href="https://english.stackexchange.com/questions/275734/a-word-for-a-value-between-0-and-1-inclusive" target="_blank" rel="external">which can take on many names</a>. Other terms for this kind of value might be things like Unit Interval, normalized value, I often referred to them as percent values they are similar to that kind of range.</p>
<p>There are a whole lot of functions in various classes in threejs that expect one of these alpha values as an argument. In fact thus far in this post alone I have all ready covered a number of demos that use the getPoint curve class method that takes an alpha value as the first argument. There are a number of various typical expressions that can be used to create these kinds of values, also there are a lot of methods in the <a href="/2022/04/11/threejs-math-utils/">Math Utils object</a> of threejs that help with these as well. However in this section I am going to explore using curves as a way to create these kinds of values.</p>
<h3 id="5-1-Create-Curve-Alpha-Function-draw-Curve-Graph-Quadratic-Bezier-Curve"><a href="#5-1-Create-Curve-Alpha-Function-draw-Curve-Graph-Quadratic-Bezier-Curve" class="headerlink" title="5.1 - Create Curve Alpha Function, draw Curve Graph, Quadratic Bezier Curve"></a>5.1 - Create Curve Alpha Function, draw Curve Graph, Quadratic Bezier Curve</h3><p>For this first demo of the alphas section of this post on curves in threejs I will want to work out at least some of the basic things that will be necessary to do this subject justice. I have a create curve alpha funciton helper funciton that will return a get alpha funciton that uses a given curve. I then also made a draw curve graph helper funciton that will draw to a 2d canvas drawing context the current state of a given get alpha funciton.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER, 2DCANVAS OVERLAY</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">scene.background = <span class="literal">null</span>;</div><div class="line">renderer.setClearColor(<span class="number">0x000000</span>, <span class="number">0</span>)</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="keyword">const</span> canvas_2d = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line"><span class="keyword">const</span> ctx = canvas_2d.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas_2d.width = <span class="number">640</span>;</div><div class="line">canvas_2d.height = <span class="number">480</span>;</div><div class="line"><span class="keyword">const</span> canvas_3d = renderer.domElement;</div><div class="line"><span class="keyword">const</span> container = <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body;</div><div class="line">container.appendChild(canvas_2d);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// create a curve alpha function</span></div><div class="line"><span class="keyword">const</span> createCurveAlphaFunc = <span class="function">(<span class="params">curve, grain = <span class="number">100</span></span>) =&gt;</span> &#123;</div><div class="line">   <span class="keyword">const</span> varray = curve.getPoints(grain);</div><div class="line">   <span class="keyword">const</span> y_array = varray.map( <span class="function">(<span class="params">v</span>) =&gt;</span> &#123; <span class="keyword">return</span> v.y &#125;);</div><div class="line">   <span class="keyword">const</span> y_min = <span class="built_in">Math</span>.min.apply(<span class="literal">null</span>, y_array );</div><div class="line">   <span class="keyword">const</span> y_max = <span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, y_array );</div><div class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">n = <span class="number">0</span>, d = <span class="number">1</span></span>)</span>&#123;</div><div class="line">      <span class="keyword">const</span> alpha = n / d;</div><div class="line">      <span class="keyword">const</span> v = curve.getPoint(alpha);</div><div class="line">      <span class="keyword">const</span> range = y_max - y_min;</div><div class="line">      <span class="keyword">return</span> <span class="number">1</span> - ( <span class="built_in">Math</span>.sqrt( <span class="built_in">Math</span>.pow(v.y - y_max, <span class="number">2</span>) ) / range );</div><div class="line">   &#125;;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw a curve graph Line with a getApha function</span></div><div class="line"><span class="keyword">const</span> drawCurveGraph = <span class="function">(<span class="params">ctx, getAlpha, a_pointer = <span class="number">0.5</span>, x = <span class="number">460</span>, y = <span class="number">10</span>, w = <span class="number">160</span>, h = <span class="number">120</span>, grain = <span class="number">100</span> </span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// outline, background</span></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.rect(x, y, w, h);</div><div class="line">    ctx.fillStyle = <span class="string">'rgba(0,0,0, 0.5)'</span>;</div><div class="line">    ctx.strokeStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.fill();</div><div class="line">    ctx.stroke();</div><div class="line">    ctx.beginPath();</div><div class="line">    <span class="comment">// alpha line</span></div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; grain)&#123;</div><div class="line">        <span class="keyword">const</span> a_pt = i / ( grain - <span class="number">1</span>);</div><div class="line">        <span class="keyword">const</span> alpha = getAlpha( a_pt, <span class="number">1</span> );</div><div class="line">        <span class="keyword">const</span> x2 = x + w * a_pt;</div><div class="line">        <span class="keyword">const</span> y2 = y + h - h * alpha;</div><div class="line">        <span class="keyword">if</span>(i === <span class="number">0</span>)&#123;</div><div class="line">            ctx.moveTo(x2, y2);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(i &gt; <span class="number">0</span>)&#123;</div><div class="line">            ctx.lineTo(x2, y2);</div><div class="line">        &#125;</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    ctx.stroke();</div><div class="line">    <span class="comment">// draw pointer</span></div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    <span class="keyword">const</span> alpha = getAlpha( a_pointer, <span class="number">1</span> );</div><div class="line">    <span class="keyword">const</span> cx = x + w * a_pointer;</div><div class="line">    <span class="keyword">const</span> cy = y + h - h * alpha;</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.arc(cx, cy, <span class="number">5</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">false</span>);</div><div class="line">    ctx.fill();</div><div class="line"></div><div class="line">&#125;;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CURVE ALPHA</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> v_start = <span class="keyword">new</span> THREE.Vector2(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> v_end = <span class="keyword">new</span> THREE.Vector2(<span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="keyword">const</span> v_control = v_start.clone().lerp(v_end, <span class="number">0.25</span>).add( <span class="keyword">new</span> THREE.Vector2( <span class="number">0</span>, <span class="number">2</span> ) );</div><div class="line"><span class="keyword">const</span> curve = <span class="keyword">new</span> THREE.QuadraticBezierCurve(v_start, v_control, v_end);</div><div class="line"><span class="keyword">const</span> getAlpha = createCurveAlphaFunc(curve);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper( <span class="number">10</span>,<span class="number">10</span> ) );</div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">scene.add(mesh1);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CONTROLS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">let</span> controls = <span class="literal">null</span>;</div><div class="line"><span class="keyword">if</span>(THREE.OrbitControls)&#123;</div><div class="line">    controls = <span class="keyword">new</span> THREE.OrbitControls(camera, canvas_2d);</div><div class="line">&#125;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set( <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span> );</div><div class="line">camera.lookAt( <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span> );</div><div class="line"><span class="keyword">const</span> sm = &#123;</div><div class="line">   <span class="attr">FPS_UPDATE</span>: <span class="number">24</span>,     <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">   FPS_MOVEMENT: <span class="number">24</span>,   <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">   FRAME_MAX: <span class="number">450</span>,</div><div class="line">   <span class="attr">secs</span>: <span class="number">0</span>,</div><div class="line">   <span class="attr">frame_frac</span>: <span class="number">0</span>,      <span class="comment">// 30.888 / 450</span></div><div class="line">   frame: <span class="number">0</span>,           <span class="comment">// 30 / 450</span></div><div class="line">   tick: <span class="number">0</span>,            <span class="comment">//  1 / 450 ( about 1 FPS then )</span></div><div class="line">   now: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">   <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">   <span class="attr">a_frame</span>: <span class="number">0</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">// main update method for the scene</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">sm</span>)</span>&#123;</div><div class="line">    sm.a_frame = sm.frame / sm.FRAME_MAX;</div><div class="line">    sm.a_bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs( <span class="number">0.5</span> - sm.a_frame ) / <span class="number">0.5</span>;</div><div class="line">    sm.a_curve = getAlpha(sm.a_bias, <span class="number">1</span>);</div><div class="line">    mesh1.rotation.y = <span class="built_in">Math</span>.PI * <span class="number">2</span> * sm.a_curve;</div><div class="line">    mesh1.scale.set(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>).multiplyScalar(sm.a_curve);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// 2d render layer</span></div><div class="line"><span class="keyword">const</span> render2d = <span class="function">(<span class="params">sm</span>) =&gt;</span> &#123;</div><div class="line">    ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    ctx.fillStyle = <span class="string">'rgba(0,0,0,0.4)'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    ctx.drawImage(canvas_3d, <span class="number">0</span>, <span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    <span class="comment">// draw the curve graph</span></div><div class="line">    drawCurveGraph(ctx, getAlpha, sm.a_bias)</div><div class="line">    <span class="comment">// simple text info</span></div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.font = <span class="string">'10px monospace'</span>;</div><div class="line">    ctx.fillText(<span class="string">'frame : '</span> + sm.frame + <span class="string">'/'</span> + sm.FRAME_MAX, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">    ctx.fillText(<span class="string">'a_curve : '</span> + sm.a_curve.toFixed(<span class="number">4</span>), <span class="number">5</span>, <span class="number">15</span>);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    sm.now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    sm.secs = (sm.now - sm.lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(sm.secs &gt; <span class="number">1</span> / sm.FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render to 3d canvas, and then render to 2d canvas</span></div><div class="line">        update(sm);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        render2d(sm);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        sm.frame_frac += sm.FPS_MOVEMENT * sm.secs;</div><div class="line">        sm.frame_frac %= sm.FRAME_MAX;</div><div class="line">        sm.frame = <span class="built_in">Math</span>.floor(sm.frame_frac);</div><div class="line">        sm.tick = (sm.tick += <span class="number">1</span>) % sm.FRAME_MAX;</div><div class="line">        sm.lt = sm.now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>There are all kinds of things that I can do with an alpha funciton of course, but for this example at least I am just using it to set the scale and rotation of a mesh object.</p>
<h3 id="5-2-Comparison-to-other-threejs-math-utils-methods"><a href="#5-2-Comparison-to-other-threejs-math-utils-methods" class="headerlink" title="5.2 - Comparison to other threejs math utils methods"></a>5.2 - Comparison to other threejs math utils methods</h3><p>In the math utils object of threejs there are a number of methods that can also help with getting smooth alpha values for various kinds of effects and transitions. Many of these work nicer than just having a simple linear like translation, however what is really nice about using curves as a way to create these kinds of functions is that it allows for custom movement that is just about any kind of effect that I would want when it comes to creating these kinds of functions.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER, 2DCANVAS OVERLAY</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">scene.background = <span class="literal">null</span>;</div><div class="line">renderer.setClearColor(<span class="number">0x000000</span>, <span class="number">0</span>)</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="keyword">const</span> canvas_2d = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line"><span class="keyword">const</span> ctx = canvas_2d.getContext(<span class="string">'2d'</span>);</div><div class="line">canvas_2d.width = <span class="number">640</span>;</div><div class="line">canvas_2d.height = <span class="number">480</span>;</div><div class="line"><span class="keyword">const</span> canvas_3d = renderer.domElement;</div><div class="line"><span class="keyword">const</span> container = <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body;</div><div class="line">container.appendChild(canvas_2d);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// create a curve alpha function</span></div><div class="line"><span class="keyword">const</span> createCurveAlphaFunc = <span class="function">(<span class="params">curve, grain = <span class="number">100</span></span>) =&gt;</span> &#123;</div><div class="line">   <span class="keyword">const</span> varray = curve.getPoints(grain);</div><div class="line">   <span class="keyword">const</span> y_array = varray.map( <span class="function">(<span class="params">v</span>) =&gt;</span> &#123; <span class="keyword">return</span> v.y &#125;);</div><div class="line">   <span class="keyword">const</span> y_min = <span class="built_in">Math</span>.min.apply(<span class="literal">null</span>, y_array );</div><div class="line">   <span class="keyword">const</span> y_max = <span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, y_array );</div><div class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">n = <span class="number">0</span>, d = <span class="number">1</span></span>)</span>&#123;</div><div class="line">      <span class="keyword">const</span> alpha = n / d;</div><div class="line">      <span class="keyword">const</span> v = curve.getPoint(alpha);</div><div class="line">      <span class="keyword">const</span> range = y_max - y_min;</div><div class="line">      <span class="keyword">return</span> <span class="number">1</span> - ( <span class="built_in">Math</span>.sqrt( <span class="built_in">Math</span>.pow(v.y - y_max, <span class="number">2</span>) ) / range );</div><div class="line">   &#125;;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// math utils get alphas functions</span></div><div class="line"><span class="keyword">const</span> getSmoothAlpha = <span class="function">(<span class="params">n = <span class="number">0</span>, d = <span class="number">1</span></span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> THREE.MathUtils.smoothstep(n / d, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> getSmootherAlpha = <span class="function">(<span class="params">n = <span class="number">0</span>, d = <span class="number">1</span></span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> THREE.MathUtils.smootherstep(n / d, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// get bias get alpha function</span></div><div class="line"><span class="keyword">const</span> getBiasAlpha = <span class="function">(<span class="params">n = <span class="number">0</span>, d = <span class="number">1</span></span>) =&gt;</span> &#123;</div><div class="line">   <span class="keyword">const</span> a = n / d;</div><div class="line">   <span class="keyword">return</span> <span class="number">1</span> - <span class="built_in">Math</span>.abs( <span class="number">0.5</span> - a ) / <span class="number">0.5</span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw a curve graph Line with a getApha function</span></div><div class="line"><span class="keyword">const</span> drawCurveGraph = <span class="function">(<span class="params">ctx, getAlpha, a_pointer = <span class="number">0.5</span>, x = <span class="number">460</span>, y = <span class="number">10</span>, w = <span class="number">160</span>, h = <span class="number">120</span>, grain = <span class="number">100</span>, style = <span class="string">'white'</span> </span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// outline, background</span></div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.rect(x, y, w, h);</div><div class="line">    ctx.fillStyle = <span class="string">'rgba(0,0,0, 0.5)'</span>;</div><div class="line">    ctx.strokeStyle = style;</div><div class="line">    ctx.fill();</div><div class="line">    ctx.stroke();</div><div class="line">    ctx.beginPath();</div><div class="line">    <span class="comment">// alpha line</span></div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; grain)&#123;</div><div class="line">        <span class="keyword">const</span> a_pt = i / ( grain - <span class="number">1</span>);</div><div class="line">        <span class="keyword">const</span> alpha = getAlpha( a_pt, <span class="number">1</span> );</div><div class="line">        <span class="keyword">const</span> x2 = x + w * a_pt;</div><div class="line">        <span class="keyword">const</span> y2 = y + h - h * alpha;</div><div class="line">        <span class="keyword">if</span>(i === <span class="number">0</span>)&#123;</div><div class="line">            ctx.moveTo(x2, y2);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(i &gt; <span class="number">0</span>)&#123;</div><div class="line">            ctx.lineTo(x2, y2);</div><div class="line">        &#125;</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    ctx.stroke();</div><div class="line">    <span class="comment">// draw pointer</span></div><div class="line">    ctx.fillStyle = style;</div><div class="line">    <span class="keyword">const</span> alpha = getAlpha( a_pointer, <span class="number">1</span> );</div><div class="line">    <span class="keyword">const</span> cx = x + w * a_pointer;</div><div class="line">    <span class="keyword">const</span> cy = y + h - h * alpha;</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.arc(cx, cy, <span class="number">5</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>, <span class="literal">false</span>);</div><div class="line">    ctx.fill();</div><div class="line">&#125;;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CURVE ALPHA</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> v_start = <span class="keyword">new</span> THREE.Vector2(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> v_end = <span class="keyword">new</span> THREE.Vector2(<span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="keyword">const</span> v_control = v_start.clone().lerp(v_end, <span class="number">0.25</span>).add( <span class="keyword">new</span> THREE.Vector2( <span class="number">0</span>, <span class="number">2</span> ) );</div><div class="line"><span class="keyword">const</span> curve = <span class="keyword">new</span> THREE.QuadraticBezierCurve(v_start, v_control, v_end);</div><div class="line"><span class="keyword">const</span> getCurveAlpha = createCurveAlphaFunc(curve);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper( <span class="number">10</span>,<span class="number">10</span> ) );</div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123; <span class="attr">color</span>: <span class="number">0xffffff</span> &#125;));</div><div class="line">mesh1.position.x = <span class="number">-3</span>;</div><div class="line">scene.add(mesh1);</div><div class="line"><span class="keyword">const</span> mesh2 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123; <span class="attr">color</span>: <span class="number">0xff0000</span> &#125;));</div><div class="line">mesh2.position.x = <span class="number">-1</span>;</div><div class="line">scene.add(mesh2);</div><div class="line"><span class="keyword">const</span> mesh3 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123; <span class="attr">color</span>: <span class="number">0x00ff00</span> &#125;));</div><div class="line">mesh3.position.x = <span class="number">1</span>;</div><div class="line">scene.add(mesh3);</div><div class="line"><span class="keyword">const</span> mesh4 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">    <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">    <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123; <span class="attr">color</span>: <span class="number">0x0000ff</span> &#125;));</div><div class="line">mesh4.position.x = <span class="number">3</span>;</div><div class="line">scene.add(mesh4);</div><div class="line"><span class="comment">// light</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>)</div><div class="line">scene.add(dl);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CONTROLS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">let</span> controls = <span class="literal">null</span>;</div><div class="line"><span class="keyword">if</span>(THREE.OrbitControls)&#123;</div><div class="line">    controls = <span class="keyword">new</span> THREE.OrbitControls(camera, canvas_2d);</div><div class="line">&#125;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set( <span class="number">2</span>, <span class="number">7</span>, <span class="number">7</span> );</div><div class="line">camera.lookAt( <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span> );</div><div class="line"><span class="keyword">const</span> sm = &#123;</div><div class="line">   <span class="attr">FPS_UPDATE</span>: <span class="number">24</span>,     <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">   FPS_MOVEMENT: <span class="number">24</span>,   <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">   FRAME_MAX: <span class="number">450</span>,</div><div class="line">   <span class="attr">secs</span>: <span class="number">0</span>,</div><div class="line">   <span class="attr">frame_frac</span>: <span class="number">0</span>,      <span class="comment">// 30.888 / 450</span></div><div class="line">   frame: <span class="number">0</span>,           <span class="comment">// 30 / 450</span></div><div class="line">   tick: <span class="number">0</span>,            <span class="comment">//  1 / 450 ( about 1 FPS then )</span></div><div class="line">   now: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">   <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">   <span class="attr">a_frame</span>: <span class="number">0</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">// main update method for the scene</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">sm</span>)</span>&#123;</div><div class="line">    sm.a_frame = sm.frame / sm.FRAME_MAX;</div><div class="line">    sm.a_bias = getBiasAlpha(sm.a_frame, <span class="number">1</span>); </div><div class="line">    sm.a_smooth = getSmoothAlpha(sm.a_frame, <span class="number">1</span>); <span class="comment">//getAlpha(sm.a_bias, 1);</span></div><div class="line">    sm.a_smoother = getSmootherAlpha(sm.a_frame, <span class="number">1</span>);</div><div class="line">    sm.a_curve = getCurveAlpha(sm.a_frame, <span class="number">1</span>);</div><div class="line">    mesh1.rotation.y = <span class="built_in">Math</span>.PI * <span class="number">2</span> * sm.a_bias;</div><div class="line">    mesh1.scale.set(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>).multiplyScalar(sm.a_bias);</div><div class="line">    mesh2.rotation.y = <span class="built_in">Math</span>.PI * <span class="number">2</span> * sm.a_smooth;</div><div class="line">    mesh2.scale.set(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>).multiplyScalar(sm.a_smooth);</div><div class="line">    mesh3.rotation.y = <span class="built_in">Math</span>.PI * <span class="number">2</span> * sm.a_smoother;</div><div class="line">    mesh3.scale.set(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>).multiplyScalar(sm.a_smoother);</div><div class="line">    mesh4.rotation.y = <span class="built_in">Math</span>.PI * <span class="number">2</span> * sm.a_curve;</div><div class="line">    mesh4.scale.set(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>).multiplyScalar(sm.a_curve);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// 2d render layer</span></div><div class="line"><span class="keyword">const</span> render2d = <span class="function">(<span class="params">sm</span>) =&gt;</span> &#123;</div><div class="line">    ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    ctx.fillStyle = <span class="string">'rgba(0,0,0,0.4)'</span>;</div><div class="line">    ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    ctx.drawImage(canvas_3d, <span class="number">0</span>, <span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    ctx.fillRect(<span class="number">0</span>,<span class="number">0</span>, canvas_2d.width, canvas_2d.height);</div><div class="line">    <span class="comment">// draw the curve graph</span></div><div class="line">    drawCurveGraph(ctx, getBiasAlpha, sm.a_frame, <span class="number">460</span>, <span class="number">10</span>, <span class="number">160</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="string">'#ffffff'</span>);</div><div class="line">    drawCurveGraph(ctx, getSmoothAlpha, sm.a_frame, <span class="number">460</span>, <span class="number">120</span>, <span class="number">160</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="string">'#ff0000'</span>);</div><div class="line">    drawCurveGraph(ctx, getSmootherAlpha, sm.a_frame, <span class="number">460</span>, <span class="number">230</span>, <span class="number">160</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="string">'#00ff00'</span>);</div><div class="line">    drawCurveGraph(ctx, getCurveAlpha, sm.a_frame, <span class="number">460</span>, <span class="number">340</span>, <span class="number">160</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="string">'#0000ff'</span>);</div><div class="line">    <span class="comment">// simple text info</span></div><div class="line">    ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.font = <span class="string">'10px monospace'</span>;</div><div class="line">    ctx.fillText(<span class="string">'frame : '</span> + sm.frame + <span class="string">'/'</span> + sm.FRAME_MAX, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">    ctx.fillText(<span class="string">'a_smooth : '</span> + sm.a_smooth.toFixed(<span class="number">4</span>), <span class="number">5</span>, <span class="number">15</span>);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    sm.now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    sm.secs = (sm.now - sm.lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(sm.secs &gt; <span class="number">1</span> / sm.FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render to 3d canvas, and then render to 2d canvas</span></div><div class="line">        update(sm);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        render2d(sm);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        sm.frame_frac += sm.FPS_MOVEMENT * sm.secs;</div><div class="line">        sm.frame_frac %= sm.FRAME_MAX;</div><div class="line">        sm.frame = <span class="built_in">Math</span>.floor(sm.frame_frac);</div><div class="line">        sm.tick = (sm.tick += <span class="number">1</span>) % sm.FRAME_MAX;</div><div class="line">        sm.lt = sm.now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="6-The-CustomSinCurve-class-Demos"><a href="#6-The-CustomSinCurve-class-Demos" class="headerlink" title="6 - The CustomSinCurve class Demos"></a>6 - The CustomSinCurve class Demos</h2><p>When I first started writing this post the main over all subject of the post was to extend the base curve class to create a custom curve class. This is then a number of older demos that have to do with making a custom Sin Curve class by extending the base class. They also have a lot to do with the TubeGeometry constructor. In time if I keep editing this post a little more now and then I might eventualy removed these demos. However for the most part I often prefer to just keep pushing older demos such as this down to the bottom of the every growing content.</p>
<h3 id="6-1-CustomSinCurve-Class-Spiral-example"><a href="#6-1-CustomSinCurve-Class-Spiral-example" class="headerlink" title="6.1 - CustomSinCurve Class Spiral example"></a>6.1 - CustomSinCurve Class Spiral example</h3><p>So now that I have a basic example out of the way that involves creating a custom curve class by extending the base curve class out of the way I think I will want to have at least one more example that involves something like a spiral of sorts. I then came up with this custom sin curve class as a way to further explore just making custom curve classes. I also wanted to start working out at least a few basic demos of the tube geometry constructor as well while I was at it with this sort of thing.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'#000000'</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">60</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0x00ff00</span>, <span class="number">0x4a4a4a</span>) );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">3</span>, <span class="number">10</span>, <span class="number">1</span>).normalize();</div><div class="line">scene.add(dl);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>, <span class="number">0.05</span>) )</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CURVE, TubeGeometry, Mesh</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomSinCurve</span> <span class="keyword">extends</span> <span class="title">THREE</span>.<span class="title">Curve</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>( scale = 1 ) &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.scale = scale;</div><div class="line">    &#125;</div><div class="line">    getPoint( t, optionalTarget = <span class="keyword">new</span> THREE.Vector3() ) &#123;</div><div class="line">        <span class="keyword">let</span> tx = t * <span class="number">3</span> - <span class="number">1.5</span>,</div><div class="line">        ty = <span class="built_in">Math</span>.sin( <span class="number">24</span> * <span class="built_in">Math</span>.PI * t ) * <span class="number">0.5</span>,</div><div class="line">        tz = <span class="built_in">Math</span>.cos( <span class="number">24</span> * <span class="built_in">Math</span>.PI * t ) * <span class="number">0.25</span>;</div><div class="line">        <span class="keyword">return</span> optionalTarget.set( tx, ty, tz ).multiplyScalar( <span class="keyword">this</span>.scale );</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">let</span> path = <span class="keyword">new</span> CustomSinCurve( <span class="number">5</span> ),</div><div class="line">tubularSegments = <span class="number">800</span>,</div><div class="line">radius = <span class="number">0.25</span>,</div><div class="line">radialSegments = <span class="number">20</span>;</div><div class="line"><span class="comment">// creating a tube geometry with path and additional arguments</span></div><div class="line"><span class="keyword">let</span> mesh = <span class="keyword">new</span> THREE.Mesh( </div><div class="line">    <span class="keyword">new</span> THREE.TubeGeometry( path, tubularSegments, radius, radialSegments, <span class="literal">false</span> ), </div><div class="line">    <span class="keyword">new</span> THREE.MeshStandardMaterial( &#123; <span class="attr">color</span>: <span class="number">0xff0000</span>, <span class="attr">side</span>: THREE.DoubleSide &#125;)</div><div class="line">);</div><div class="line">scene.add( mesh );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="6-1-CustomSinCurve-and-the-buffer-geometry-copy-method-to-update-geometry"><a href="#6-1-CustomSinCurve-and-the-buffer-geometry-copy-method-to-update-geometry" class="headerlink" title="6.1 - CustomSinCurve and the buffer geometry copy method to update geometry"></a>6.1 - CustomSinCurve and the buffer geometry copy method to update geometry</h3><p>Thus far I just have some static scene examples of this curve class out of the way, so then I should have at least one example that involves an animation loop then. One way to go about doing this might involve creating a new curve object with update arguments in the body of the loop that I can then use to make an updated geometry. In can then make use of the copy method of the buffer geometry instance in the mesh object to copy this update geometry to the geometry object instance of the mesh objects as a way to update the geometry.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'#000000'</span>);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0x00ff00</span>, <span class="number">0x4a4a4a</span>) )</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">60</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">3</span>, <span class="number">10</span>, <span class="number">1</span>).normalize();</div><div class="line">scene.add(dl);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>, <span class="number">0.05</span>) )</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CURVE CLASS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomSinCurve</span> <span class="keyword">extends</span> <span class="title">THREE</span>.<span class="title">Curve</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span>( a = 0.5, b = 0.25, scale = 1 ) &#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.scale = scale;</div><div class="line">        <span class="keyword">this</span>.a = a;</div><div class="line">        <span class="keyword">this</span>.b = b;</div><div class="line">    &#125;</div><div class="line">    getPoint( t, optionalTarget = <span class="keyword">new</span> THREE.Vector3() ) &#123;</div><div class="line">        <span class="keyword">let</span> tx = t * <span class="number">3</span> - <span class="number">1.5</span>,</div><div class="line">        ty = <span class="built_in">Math</span>.sin( <span class="number">20</span> * <span class="built_in">Math</span>.PI * t ) * (<span class="keyword">this</span>.a * t),</div><div class="line">        tz = <span class="built_in">Math</span>.cos( <span class="number">20</span> * <span class="built_in">Math</span>.PI * t ) * (<span class="keyword">this</span>.b * t);</div><div class="line">        <span class="keyword">return</span> optionalTarget.set( tx, ty, tz ).multiplyScalar( <span class="keyword">this</span>.scale );</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> path = <span class="keyword">new</span> CustomSinCurve( <span class="number">5</span> ),</div><div class="line">tubularSegments = <span class="number">800</span>,</div><div class="line">radius = <span class="number">0.25</span>,</div><div class="line">radialSegments = <span class="number">20</span>;</div><div class="line"><span class="comment">// creating a tube geometry with path and additional arguments</span></div><div class="line"><span class="keyword">let</span> mesh = <span class="keyword">new</span> THREE.Mesh( </div><div class="line">    <span class="keyword">new</span> THREE.TubeGeometry( path, tubularSegments, radius, radialSegments, <span class="literal">false</span> ), </div><div class="line">    <span class="keyword">new</span> THREE.MeshStandardMaterial( &#123; <span class="attr">color</span>: <span class="number">0xff0000</span>, <span class="attr">side</span>: THREE.DoubleSide &#125;)</div><div class="line">);</div><div class="line">scene.add( mesh );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">let</span> controls = <span class="keyword">new</span> THREE.OrbitControls(camera, renderer.domElement);</div><div class="line"><span class="keyword">let</span> fps = <span class="number">30</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">frameMax = <span class="number">90</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">let</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>,</div><div class="line">    per = frame / frameMax,</div><div class="line">    bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - per) / <span class="number">0.5</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps)&#123;</div><div class="line">        <span class="keyword">let</span> path = <span class="keyword">new</span> CustomSinCurve( <span class="number">0.25</span> + <span class="number">0.75</span> * bias, <span class="number">0.25</span>, <span class="number">5</span> );</div><div class="line">        <span class="keyword">let</span> geo = <span class="keyword">new</span> THREE.TubeGeometry( path, tubularSegments, radius, radialSegments, <span class="literal">false</span> );</div><div class="line">        mesh.geometry.copy(geo);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        lt = now;</div><div class="line">        frame += <span class="built_in">Math</span>.floor( fps * secs );</div><div class="line">        frame %= frameMax;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>The use of the copy method might now always be the best way to go about updating geometry over time though. I have found that often the best way to update the state of geometry often involves mutation of the various buffer attributes of a geometry rather than copied a new one over each time. </p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>The curve geometry and tube geometry in threejs is then yet another option on tip of using lines and points when it comes to adding content to a scene object. For the most part using curves and tubes will work okay for various demo projects, but one major drawback is that I need to always generate curves with javaScript code rather than a data source of one kind or another. There may be ways of addressing this, and I do have some draft demos in the works that seem to work somewhat okay when it comes to this sort of thing, but I think they might need a little more work before writing about them here. Also there might be better ways of doing the source of things I world like to do with mesh objects rather than lines, such as some kind of system involving capsule geometry.</p>
<p>A long time ago I <a href="/2018/11/07/threejs-line-fat-width/">wrote a post on the subject of so called fat lines</a> that where a kind of additional line constructor that can be added to threejs by way of an additional javaScript file. However I am sure there are many other ways of getting a desired outcome when it comes to do things sort of thing such as using capsule geometry with a collection of vector3 class instances.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2022/06/17/threejs-curve/" data-id="cllo1crl802mh60v108xhhhgk" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2022/06/17/threejs-curve/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/07/01/threejs-examples-lerp-geo/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Lerping the points of a geometry from one to another
        
      </div>
    </a>
  
  
    <a href="/2022/06/10/threejs-examples-lines-deterministic/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Deterministic Lines threejs example</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2022/06/17/threejs-curve/index.html';
    this.page.identifier = '993';
    this.page.title = 'The Curve class in threejs a general overview';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.38px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.48px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.33px;">angular</a> <a href="/tags/animation/" style="font-size: 11.9px;">animation</a> <a href="/tags/automation/" style="font-size: 11.9px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.38px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.71px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.57px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.86px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.95px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.43px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.81px;">electronjs</a> <a href="/tags/express/" style="font-size: 17.14px;">express</a> <a href="/tags/games/" style="font-size: 17.62px;">games</a> <a href="/tags/git/" style="font-size: 13.81px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15.24px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.9px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.76px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.48px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.43px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 18.1px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.57px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.76px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.52px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.1px;">phaser</a> <a href="/tags/python/" style="font-size: 16.19px;">python</a> <a href="/tags/statistics/" style="font-size: 14.29px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.05px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.67px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/08/23/threejs-sprite/">Sprite Objects, and 2d overlays in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/17/threejs-buffer-geometry-attributes-tangent/">The tangent attribute of buffer geometry and normal maps in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/10/threejs-matcap-material/">The Matcap material in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/02/threejs-matrix4/">Matrix4 Objects in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/01/linux-folders/">Linux Root Folders</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2022/06/17/threejs-curve/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>