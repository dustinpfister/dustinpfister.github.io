<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Electronjs application example that I am using to make videos | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2022/03/10/electronjs-example-videoground/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This year I wanted to start looking into how to go about using electronjs, and so far I have a small collection of tech demos, and hello world type programs that make use of various features of electr">
<meta property="og:type" content="article">
<meta property="og:title" content="Electronjs application example that I am using to make videos">
<meta property="og:url" content="https://dustinpfister.github.io/2022/03/10/electronjs-example-videoground/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="This year I wanted to start looking into how to go about using electronjs, and so far I have a small collection of tech demos, and hello world type programs that make use of various features of electr">
<meta property="og:updated_time" content="2022-03-15T14:55:24.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Electronjs application example that I am using to make videos">
<meta name="twitter:description" content="This year I wanted to start looking into how to go about using electronjs, and so far I have a small collection of tech demos, and hello world type programs that make use of various features of electr">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-electronjs-example-videoground" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/03/10/electronjs-example-videoground/" class="article-date"> Published:
  <time datetime="2022-03-10T12:07:00.000Z" itemprop="datePublished">2022-03-10</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2022/03/10/electronjs-example-videoground/" class="article-date"> Modified:
  <time datetime="2022-03-15T14:55:24.000Z" itemprop="dateModified">2022-03-15</time>
</a>

    <span class="article-date">V1.24</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/electronjs/">electronjs</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Electronjs application example that I am using to make videos
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>This year I wanted to start looking into how to go about using electronjs, and so far I have a small collection of tech demos, and hello world type programs that make use of various features of electronjs to make desktop applications with html and javaScript. So far I all ready have wrote my <a href="/2022/02/07/electronjs-hello-world/">getting started post on electronjs</a>, and a <a href="/categories/electronjs/">few others on top</a> of that. However over the long term though I am going to want to make at least one or two actual programs that I use to make some kind of content, such as a text editor, an art program of some kind, or maybe even something that can be used to make a video project of some kind. With that said I have a simple text editor program in the works, but for todays post I am going to be writing about the current state of something that I have been putting a whole lot more time into to make videos that I am calling VideoGround.</p>
<p>Over the years I have wrote a whole <a href="/categories/three-js/">lot of posts on threejs</a> which is a popular javaScript library that has to do with 3d modeling. I have learned, and continue to learn, a whole lot about threejs, and also while I am at it 3d modeling in general inside and outside of threejs when it comes to using blender for example. I also like <a href="/2019/05/05/vuejs-getting-started/">vuejs</a> when it comes to using a front end framework, and I have also logged a fair amount of time working with <a href="/2017/04/05/nodejs-helloworld/">nodejs</a> as well when it comes to working in a javaScript environment outside of a web browser. So then working on a project like this allows me to use, refresh, and refine knowledge of a wide range of skills that I developed over many years. That is always a good thing for what that is worth, but the real motivation with this is to also work on something that is fun, and even if it is a little buggy can still be used to make a final product.</p>
<a id="more"></a>
<h2 id="What-to-know-first"><a href="#What-to-know-first" class="headerlink" title="What to know first"></a>What to know first</h2><p>This is not a getting started type post on electronjs, threejs, vuejs, javaScript in general as well as any and all additional subjects that need to be covered first before making something like this. If you are still fairly new to javaScript in general it would be best to start out with some <a href="/2018/11/27/js-getting-started/">simple examples of javaScript alone</a> in various environments for doing so. Also this might not be the best example of an electronjs application starting point, rather this is the first actual application that I have made that I am actually using to create some kind of content.</p>
<h3 id="The-full-source-code-and-additional-assets-are-up-on-Github"><a href="#The-full-source-code-and-additional-assets-are-up-on-Github" class="headerlink" title="The full source code and additional assets are up on Github"></a>The full source code and additional assets are up on Github</h3><p>The full source code for this electron js application is in my <a href="https://github.com/dustinpfister/examples-electronjs/tree/master/for_post/electronjs-example-videoground" target="_blank" rel="external">examples-electronjs</a> repository on github.</p>
<h2 id="1-The-root-electronjs-files"><a href="#1-The-root-electronjs-files" class="headerlink" title="1 - The root electronjs files"></a>1 - The root electronjs files</h2><p>The core of the electron application that is video ground as of revision 3 consists of three files, a main javaScript file, a Menu file, and a preload file. There are of course a lot of additional files that have to do with the client system, and then even more files when it comes to making video projects. However in this first section I will be sticking to just the typical root level files of the electronjs application.</p>
<h3 id="1-1-The-main-javaScript-file"><a href="#1-1-The-main-javaScript-file" class="headerlink" title="1.1 - The main javaScript file"></a>1.1 - The main javaScript file</h3><p>When it comes to the web preferences of the main browser window I am explicitly setting contextIsolation to true. Even though I am using an older version of electron for this application this is the default for newer versions and I am thinking that I should get accustomed to working with it for the sake of any and all future electron projects I might make.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// load app and BrowserWindow</span></div><div class="line"><span class="keyword">const</span> &#123; app, Menu, BrowserWindow, dialog &#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>);</div><div class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"><span class="comment">// Create the Main browser window.</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createMainWindow</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> mainWindow = <span class="keyword">new</span> BrowserWindow(&#123;</div><div class="line">            <span class="attr">width</span>: <span class="number">900</span>,</div><div class="line">            <span class="attr">height</span>: <span class="number">700</span>,</div><div class="line">            <span class="attr">backgroundColor</span>: <span class="string">'#008888'</span>,</div><div class="line">            <span class="attr">webPreferences</span>: &#123;</div><div class="line">                <span class="comment">// I tried to disable webSecurity to see if that would fix the issue with CSP and vuejs (did not work)</span></div><div class="line">                webSecurity: <span class="literal">true</span>,</div><div class="line">                <span class="attr">contextIsolation</span>: <span class="literal">true</span>,</div><div class="line">                <span class="attr">preload</span>: path.resolve( __dirname, <span class="string">'preload.js'</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    <span class="comment">// load the html file for the main window</span></div><div class="line">    mainWindow.loadFile(<span class="string">'html/window_main.html'</span>);</div><div class="line">    <span class="comment">// Open the DevTools for debugging</span></div><div class="line">    mainWindow.webContents.openDevTools();</div><div class="line">    <span class="keyword">const</span> menu = Menu.buildFromTemplate( <span class="built_in">require</span>( path.join(__dirname, <span class="string">'menu.js'</span>) ) );</div><div class="line">    mainWindow.setMenu(menu);</div><div class="line">    <span class="keyword">return</span> mainWindow;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// the 'ready' event</span></div><div class="line">app.whenReady().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">var</span> mainWindow = createMainWindow();</div><div class="line">    app.on(<span class="string">'activate'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (BrowserWindow.getAllWindows().length === <span class="number">0</span>)&#123;</div><div class="line">            createMainWindow()</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line">&#125;);</div><div class="line"><span class="comment">// the 'window-all-closed' is also a kind of on quit event</span></div><div class="line">app.on(<span class="string">'window-all-closed'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (process.platform !== <span class="string">'darwin'</span>)</div><div class="line">        app.quit()</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="1-2-The-Menu"><a href="#1-2-The-Menu" class="headerlink" title="1.2 - The Menu"></a>1.2 - The Menu</h3><p>I am going to want to have a custom menu for this application, and this will likely be the case for just about all future electron js applications as well. When it comes to the Menu of an application I could just make that part of the mainjavaScript file but I have found that I like to pull the object that I will be using with the Menu.buildFromTemplate method into a separate file and just require that in when creating the window.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// load app and BrowserWindow</span></div><div class="line"><span class="keyword">const</span> &#123; app, Menu, BrowserWindow, dialog &#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>);</div><div class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"><span class="comment">// Custom Menus</span></div><div class="line"><span class="keyword">const</span> isMac = process.platform === <span class="string">'darwin'</span>;</div><div class="line"><span class="keyword">const</span> pkg = <span class="built_in">require</span>( path.join(__dirname, <span class="string">'package.json'</span>) );</div><div class="line"><span class="comment">// The main menu for the main window</span></div><div class="line"><span class="keyword">const</span> MainMenuTemplate = [</div><div class="line">    &#123;</div><div class="line">        <span class="attr">label</span>: <span class="string">'File'</span>,</div><div class="line">        <span class="attr">submenu</span>: [</div><div class="line">            isMac ? &#123; <span class="attr">role</span>: <span class="string">'close'</span> &#125;: &#123; <span class="attr">role</span>: <span class="string">'quit'</span> &#125;,</div><div class="line">            &#123;</div><div class="line">                <span class="attr">label</span>: <span class="string">'Open'</span>,</div><div class="line">                <span class="attr">click</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                    <span class="keyword">const</span> mainWindow = BrowserWindow.fromId(<span class="number">1</span>);</div><div class="line">                    dialog.showOpenDialog(mainWindow, &#123;</div><div class="line">                        <span class="attr">properties</span>: [<span class="string">'openFile'</span>]</div><div class="line">                    &#125;).then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</div><div class="line">                        <span class="keyword">if</span>(result.canceled)&#123;</div><div class="line">                            mainWindow.webContents.send(<span class="string">'menuCanceled'</span>, result);</div><div class="line">                        &#125;<span class="keyword">else</span>&#123;</div><div class="line">                            mainWindow.webContents.send(<span class="string">'menuOpenFile'</span>, result);</div><div class="line">                        &#125;</div><div class="line">                    &#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</div><div class="line">                        <span class="comment">// error getting file path</span></div><div class="line">                        mainWindow.webContents.send(<span class="string">'menuError'</span>, err);</div><div class="line">                    &#125;);</div><div class="line">                &#125;</div><div class="line">            &#125;,</div><div class="line">            <span class="comment">// SAVE A FILE</span></div><div class="line">            &#123;</div><div class="line">                <span class="attr">label</span>: <span class="string">'Save As'</span>,</div><div class="line">                <span class="attr">click</span>: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">                    <span class="keyword">const</span> mainWindow = BrowserWindow.fromId(<span class="number">1</span>);</div><div class="line">                    dialog.showSaveDialog(mainWindow, &#123;</div><div class="line">                        <span class="attr">properties</span>: [<span class="string">'showHiddenFiles'</span>]</div><div class="line">                    &#125;).then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</div><div class="line">                        <span class="keyword">if</span>(result.canceled)&#123;</div><div class="line">                            mainWindow.webContents.send(<span class="string">'menuCanceled'</span>, result);</div><div class="line">                        &#125;<span class="keyword">else</span>&#123;</div><div class="line">                            mainWindow.webContents.send(<span class="string">'menuSaveFile'</span>, result);</div><div class="line">                        &#125;</div><div class="line">                    &#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</div><div class="line">                        mainWindow.webContents.send(<span class="string">'menuError'</span>, err);</div><div class="line">                    &#125;);</div><div class="line">                &#125;</div><div class="line">            &#125;,</div><div class="line">            <span class="comment">// EXPORT TO IMAGES</span></div><div class="line">            &#123;</div><div class="line">                <span class="attr">label</span>: <span class="string">'Export to Images'</span>,</div><div class="line">                <span class="attr">click</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                    <span class="keyword">const</span> mainWindow = BrowserWindow.fromId(<span class="number">1</span>);</div><div class="line">                    <span class="comment">// dialog will need to be used to select a folder</span></div><div class="line">                    dialog.showOpenDialog(mainWindow, &#123;</div><div class="line">                        <span class="attr">properties</span>: [<span class="string">'openDirectory'</span>]</div><div class="line">                    &#125;).then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</div><div class="line">                        <span class="keyword">if</span>(result.canceled)&#123;</div><div class="line">                            mainWindow.webContents.send(<span class="string">'menuCanceled'</span>, result);</div><div class="line">                        &#125;<span class="keyword">else</span>&#123;</div><div class="line">                            mainWindow.webContents.send(<span class="string">'menuExport'</span>, result, <span class="string">'images'</span>);</div><div class="line">                        &#125;</div><div class="line">                    &#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</div><div class="line">                        <span class="comment">// error getting file path</span></div><div class="line">                        mainWindow.webContents.send(<span class="string">'menuError'</span>, err);</div><div class="line">                    &#125;);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        ]</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="attr">label</span>: <span class="string">'View'</span>,</div><div class="line">        <span class="attr">submenu</span>: [</div><div class="line">            &#123;<span class="attr">role</span>: <span class="string">'togglefullscreen'</span>&#125;,</div><div class="line">            &#123; <span class="attr">role</span>: <span class="string">'toggleDevTools'</span> &#125;</div><div class="line">        ]</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="attr">label</span>: <span class="string">'Help'</span>,</div><div class="line">        <span class="attr">submenu</span>: [</div><div class="line">            &#123;</div><div class="line">                <span class="attr">label</span>: <span class="string">'About'</span>,</div><div class="line">                <span class="attr">click</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                    <span class="keyword">const</span> mainWindow = BrowserWindow.fromId(<span class="number">1</span>);</div><div class="line">                    <span class="keyword">const</span> r = pkg.version.split(<span class="string">'.'</span>)[<span class="number">1</span>];</div><div class="line">                    dialog.showMessageBox(mainWindow, &#123;</div><div class="line">                        <span class="attr">message</span>: <span class="string">'Video Ground version: r'</span> + r</div><div class="line">                    &#125;);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">];</div><div class="line"><span class="built_in">module</span>.exports = MainMenuTemplate;</div></pre></td></tr></table></figure>
<h3 id="1-3-The-preload-file"><a href="#1-3-The-preload-file" class="headerlink" title="1.3 - The preload file"></a>1.3 - The preload file</h3><p>This is the preload file that I am using to create an API that I can then used in the front end code of the application. This is then where I have a collection of methods that have to do with things like writing a frame png file when exporting a video to a folder in which I will be creating a video file. There is also directly exporting as a video from the browser, but I have found that doing so will often break as new versions of chromium come out. Even if I go that way in any future versions I am still going to want to have this feature as one of several export options.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// preload with contextIsolation enabled</span></div><div class="line"><span class="keyword">const</span> &#123; contextBridge, ipcRenderer&#125; = <span class="built_in">require</span>(<span class="string">'electron'</span>);</div><div class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</div><div class="line"><span class="comment">// the api that will be window.videoAPI in the client side code</span></div><div class="line"><span class="keyword">let</span> videoAPI = &#123;&#125;;</div><div class="line">videoAPI.dir_root = __dirname;</div><div class="line">videoAPI.pathJoin = path.join;</div><div class="line">videoAPI.pathBasename = path.basename;</div><div class="line">videoAPI.pathDirname = path.dirname;</div><div class="line"><span class="comment">// the events object</span></div><div class="line"><span class="keyword">const</span> EVENT = &#123;&#125;;</div><div class="line"><span class="comment">// export to images</span></div><div class="line">EVENT.menuExport = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</div><div class="line">    ipcRenderer.on(<span class="string">'menuExport'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evnt, result, mode</span>) </span>&#123;</div><div class="line">        <span class="keyword">let</span> imageFolder = result.filePaths[<span class="number">0</span>];</div><div class="line">        callback(evnt, result, imageFolder, mode);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// when a file is opened with file &gt; open</span></div><div class="line">EVENT.menuOpenFile = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</div><div class="line">    ipcRenderer.on(<span class="string">'menuOpenFile'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evnt, result</span>) </span>&#123;</div><div class="line">        <span class="keyword">let</span> filePath = result.filePaths[<span class="number">0</span>];</div><div class="line">        videoAPI.loadFile(filePath, callback, evnt, result);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line">EVENT.menuSaveFile = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</div><div class="line">    ipcRenderer.on(<span class="string">'menuSaveFile'</span>, callback);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// when an error happens with a menu option</span></div><div class="line">EVENT.menuError = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</div><div class="line">    ipcRenderer.on(<span class="string">'menuError'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evnt, err</span>) </span>&#123;</div><div class="line">        callback(evnt, err);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// The main on method to attach events</span></div><div class="line">videoAPI.on = <span class="function"><span class="keyword">function</span>(<span class="params">eventType, callback</span>)</span>&#123;</div><div class="line">   EVENT[eventType](callback);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// write a frame file to the given image folder, and frame index</span></div><div class="line">videoAPI.writeFrame = <span class="function">(<span class="params">imageFolder, frameIndex, dataURL, callback</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> data = dataURL.split(<span class="string">','</span>)[<span class="number">1</span>];</div><div class="line">    <span class="keyword">let</span> buf = Buffer.from(data, <span class="string">'base64'</span>);</div><div class="line">    <span class="comment">//let filePath = path.join(imageFolder, 'frame-' + frameIndex + '.png'); </span></div><div class="line">    <span class="keyword">let</span> filePath = path.join(imageFolder, <span class="string">'frame-'</span> + <span class="built_in">String</span>(frameIndex).padStart(<span class="number">4</span>, <span class="number">0</span>) + <span class="string">'.png'</span>); </div><div class="line">    fs.writeFile(filePath, buf, (e) =&gt; &#123;</div><div class="line">        callback(e);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// write js file text</span></div><div class="line">videoAPI.writeJSFile = <span class="function">(<span class="params">filePath, text, callback</span>) =&gt;</span> &#123;</div><div class="line">    fs.writeFile(filePath, text, <span class="string">'utf8'</span>, (e) =&gt; &#123;</div><div class="line">        callback(e);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line">videoAPI.loadFile = <span class="function">(<span class="params">filePath, callback</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span>(filePath)&#123;</div><div class="line">        <span class="comment">// if path is not absolute</span></div><div class="line">        <span class="keyword">if</span>(!path.isAbsolute(filePath))&#123;</div><div class="line">            filePath = path.join(__dirname, filePath);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// read the file and set it to the client</span></div><div class="line">        fs.readFile(filePath, <span class="string">'utf8'</span>, (e, text) =&gt; &#123;</div><div class="line">            <span class="keyword">if</span>(e)&#123;</div><div class="line">                ipcRenderer.send(<span class="string">'menuError'</span>, e);</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                callback(text, e, filePath);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        ipcRenderer.send(<span class="string">'menuError'</span>, <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'no file path in the result object.'</span>) );</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// create an api for window objects in web pages</span></div><div class="line">contextBridge.exposeInMainWorld(<span class="string">'videoAPI'</span>, videoAPI);</div></pre></td></tr></table></figure>
<h2 id="2-The-client-System"><a href="#2-The-client-System" class="headerlink" title="2 - The client System"></a>2 - The client System</h2><p>So then I have the javaScript files that have to do with the main process, and also setting up features for the render process of this electronjs application project example. However now there is the question of that html file that I am loading in the main javaScript file, and everything that branches off from that.</p>
<h3 id="2-1-The-main-html-file"><a href="#2-1-The-main-html-file" class="headerlink" title="2.1 - The main html file"></a>2.1 - The main html file</h3><p>The main html file that I load for the browser window in main.js also loads a whole bunch of additional javaScript files, and also provided some hard coded html that I work off of within those files. With that said on top of using electron I am also using threejs and vue.js when it comes to the client side code. Of course I need to use threejs because that is what I want to use when rendering each frame of a video, however I also want to use vuejs when it comes to working out user interface components as I have found that it just works out a lot better compared to what happens for me when I just go all out native with that.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;</span></div><div class="line"><span class="comment">&lt;!-- !!! - #0 - Looks like I jave to do away with CSP to get vuejs to work --&gt;</span></div><div class="line"><span class="comment">&lt;!--</span></div><div class="line">    &lt;meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'"&gt;</div><div class="line">    &lt;meta http-equiv="X-Content-Security-Policy" content="default-src 'self'; script-src 'self'"&gt;</div><div class="line">--&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>VideoGround<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"style.css"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap_main"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap_canvas"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap_playpack"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap_video_code"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/vue/2.6.14/vue.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/threejs/0.135.0/three.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/threejs/0.135.0/loaders/ColladaLoader.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/utils.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/video-setup.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;script src="js/video-start.js"&gt;&lt;/script&gt;--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/client.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/ui-playback.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/ui-video-code.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- Video Scripts --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap_video_scripts"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="2-2-utils-js-and-video-setup-js"><a href="#2-2-utils-js-and-video-setup-js" class="headerlink" title="2.2 - utils.js and video setup.js"></a>2.2 - utils.js and video setup.js</h3><p>I started a utils.js file where I intend to park a lot of typical methods that I will be using through the client system. I also have a file that is used to set up an object that is then changed by loading a main video javaScript file that overwrites what is set up in that file to define what the logic is for the video.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> utils = &#123;&#125;;</div><div class="line"><span class="comment">// DAE tools</span></div><div class="line">utils.DAE = &#123;&#125;;</div><div class="line"><span class="comment">// get the first Mesh or Group type object to be found</span></div><div class="line"><span class="comment">// in the given result object</span></div><div class="line">utils.DAE.getMesh = <span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> objects = result.scene.children,</div><div class="line">    i = objects.length, obj;</div><div class="line">    <span class="keyword">while</span>(i--)&#123;</div><div class="line">        obj = objects[i];</div><div class="line">        <span class="keyword">if</span>(obj.type === <span class="string">'Mesh'</span> || obj.type === <span class="string">'Group'</span>)&#123;</div><div class="line">            <span class="keyword">return</span> obj;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// remove all child nodes</span></div><div class="line"><span class="comment">// https://stackoverflow.com/questions/3955229/remove-all-child-elements-of-a-dom-node-in-javascript</span></div><div class="line">utils.removeAllChildNodes = <span class="function"><span class="keyword">function</span>(<span class="params">fromNode</span>)</span>&#123;</div><div class="line">  <span class="keyword">while</span> (fromNode.firstChild) &#123;</div><div class="line">    fromNode.removeChild(fromNode.lastChild);</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// create main VIDEO OBJECT</span></div><div class="line"><span class="keyword">let</span> VIDEO = &#123;&#125;;</div><div class="line"><span class="comment">// init method for the video</span></div><div class="line">VIDEO.init = <span class="function"><span class="keyword">function</span>(<span class="params">scene, camera</span>)</span>&#123;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// update method for the video</span></div><div class="line">VIDEO.update = <span class="function"><span class="keyword">function</span>(<span class="params">state, scene, camera, secs, per, bias</span>)</span>&#123;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="2-3-The-client-js-file"><a href="#2-3-The-client-js-file" class="headerlink" title="2.3 - The client.js file"></a>2.3 - The client.js file</h3><p>When I first started this project I just wanted to have a single javaScript to just set up the core of what I wanted, so I just simply called it client.js . I am not sure if I should write to much about this file at this time if I am gong to make at least one or more additional.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// ********** **********</span></div><div class="line">    <span class="comment">// HARD CODED SETTINGS</span></div><div class="line">    <span class="comment">// ********** **********</span></div><div class="line">    <span class="keyword">const</span> WRAP_CANVAS = <span class="built_in">document</span>.querySelector(<span class="string">'#wrap_canvas'</span>);</div><div class="line">    <span class="comment">// Sticking with 'youtube friendly' options when it comes to resolution</span></div><div class="line">    <span class="comment">// https://support.google.com/youtube/answer/6375112?hl=en&amp;co=GENIE.Platform%3DDesktop</span></div><div class="line">    <span class="keyword">const</span> RESOLUTIONS = [</div><div class="line">        &#123;<span class="attr">w</span>: <span class="number">426</span>, <span class="attr">h</span>: <span class="number">240</span>&#125;,</div><div class="line">        &#123;<span class="attr">w</span>: <span class="number">640</span>, <span class="attr">h</span>: <span class="number">360</span>&#125;,</div><div class="line">        &#123;<span class="attr">w</span>: <span class="number">854</span>, <span class="attr">h</span>: <span class="number">480</span>&#125;,</div><div class="line">        &#123;<span class="attr">w</span>: <span class="number">1280</span>, <span class="attr">h</span>: <span class="number">720</span>&#125;,</div><div class="line">        &#123;<span class="attr">w</span>: <span class="number">1920</span>, <span class="attr">h</span>: <span class="number">1080</span>&#125;</div><div class="line">    ];</div><div class="line">    <span class="keyword">const</span> DEFAULT_RESOLUTION = <span class="number">2</span>; <span class="comment">// going with 480p as a default for this</span></div><div class="line">    <span class="comment">// ********** **********</span></div><div class="line">    <span class="comment">// HELPER FUNCTIONS</span></div><div class="line">    <span class="comment">// ********** **********</span></div><div class="line">    <span class="comment">// get bias value helper</span></div><div class="line">    <span class="keyword">let</span> getBias = <span class="function">(<span class="params">per</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span> - <span class="built_in">Math</span>.abs(per - <span class="number">0.5</span>) / <span class="number">0.5</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get an object like &#123;w: 1, h: 0.75&#125; from an object like &#123; w: 640, h: 480&#125;</span></div><div class="line">    <span class="keyword">let</span> getRatio = <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</div><div class="line">       <span class="keyword">let</span> m = <span class="built_in">Math</span>.max(res.w, res.h);</div><div class="line">       <span class="keyword">return</span> &#123;</div><div class="line">           <span class="attr">w</span> : res.w / m,</div><div class="line">           <span class="attr">h</span> : res.h / m</div><div class="line">       &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// ********** **********</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line">    <span class="comment">// ********** **********</span></div><div class="line">    <span class="keyword">let</span> res = RESOLUTIONS[DEFAULT_RESOLUTION];</div><div class="line">    <span class="keyword">let</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    <span class="keyword">let</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">40</span>, res.w / res.h, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">let</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer(),</div><div class="line">    canvas = renderer.domElement;</div><div class="line">    <span class="comment">// append to wrap canvas</span></div><div class="line">    WRAP_CANVAS.appendChild(canvas);</div><div class="line">    renderer.setSize(res.w, res.h);</div><div class="line">    <span class="comment">// set scaled size of canvas</span></div><div class="line">    <span class="keyword">let</span> ratio = getRatio(res);</div><div class="line">    canvas.style.width = <span class="built_in">Math</span>.floor(ratio.w * <span class="number">420</span>) + <span class="string">'px'</span>;</div><div class="line">    canvas.style.height = <span class="built_in">Math</span>.floor(ratio.h * <span class="number">420</span>) + <span class="string">'px'</span>;</div><div class="line">    <span class="comment">// ********** **********</span></div><div class="line">    <span class="comment">// THE STATE MACHINE (sm) object</span></div><div class="line">    <span class="comment">// ********** **********</span></div><div class="line">    <span class="keyword">let</span> sm = <span class="built_in">window</span>.sm = &#123;</div><div class="line">        <span class="attr">canvas</span>: canvas,</div><div class="line">        <span class="attr">frame</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">frameFrac</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">frameMax</span>: <span class="number">600</span>,</div><div class="line">        <span class="attr">per</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">bias</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">scene</span>: scene,</div><div class="line">        <span class="attr">camera</span>: camera,</div><div class="line">        <span class="attr">loopActive</span>: <span class="literal">false</span></div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    fps_update = <span class="number">30</span>,   <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    fps_movement = <span class="number">60</span>, <span class="comment">// fps rate to move camera</span></div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    frameMax = <span class="number">600</span>,</div><div class="line">    loopActive = <span class="literal">false</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// update</span></div><div class="line">    <span class="keyword">let</span> update = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        sm.per = <span class="built_in">Math</span>.round(sm.frame) / sm.frameMax;</div><div class="line">        sm.bias = getBias(sm.per);</div><div class="line">        VIDEO.update(sm, scene, camera, sm.per, sm.bias);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// app loop</span></div><div class="line">    <span class="keyword">let</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">let</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        <span class="keyword">if</span>(sm.loopActive)&#123;</div><div class="line">            requestAnimationFrame(loop);</div><div class="line">            <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps_update)&#123;</div><div class="line">                sm.setFrame();</div><div class="line">                sm.frameFrac += fps_movement * secs;</div><div class="line">                sm.frameFrac %= sm.frameMax;</div><div class="line">                sm.frame = <span class="built_in">Math</span>.floor(sm.frameFrac)</div><div class="line">                lt = now;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// setup</span></div><div class="line">    sm.setup = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        sm.frame = <span class="number">0</span>;</div><div class="line">        sm.frameFrac = <span class="number">0</span>;</div><div class="line">        sm.loopActive = <span class="literal">false</span>;</div><div class="line">        scene.children = [];</div><div class="line">        scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'black'</span>);</div><div class="line">        VIDEO.init(sm, scene, camera);</div><div class="line">        sm.setFrame();</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set frame</span></div><div class="line">    sm.setFrame = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">// call update method</span></div><div class="line">        update(secs);</div><div class="line">        <span class="comment">// render</span></div><div class="line">        renderer.render(scene, camera);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// start loop</span></div><div class="line">    sm.play = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        sm.loopActive = !sm.loopActive;</div><div class="line">        <span class="keyword">if</span>(sm.loopActive)&#123;</div><div class="line">            lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">            loop();</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    sm.setup();</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h3 id="2-4-ui-playback"><a href="#2-4-ui-playback" class="headerlink" title="2.4 - ui playback"></a>2.4 - ui playback</h3><p>I am going to want to have at least one if not more features in the page that are used to interact with the state of the current video project that I am working on with this. One feature that I will want to have is a few buttons and various other input elements that have to do with just playing back the video, stopping the video, stepping the current frame forward and backward, and also to jump to a specific frame.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">        <span class="attr">el</span>: <span class="string">'#wrap_playpack'</span>,</div><div class="line">        <span class="attr">template</span>: <span class="string">'&lt;div class="wrap_ui"&gt;'</span> +</div><div class="line">            <span class="string">'&lt;input type="button" value="play/pause" v-on:click="play"&gt;&lt;br&gt;'</span> +</div><div class="line">            <span class="string">'&lt;input type="button" value="frame+" v-on:click="stepFrame(1)"&gt;  '</span> +</div><div class="line">            <span class="string">'&lt;input type="button" value="frame-" v-on:click="stepFrame(-1)"&gt;&lt;br&gt;'</span> +</div><div class="line">            <span class="string">'&lt;input type="text" size="5" v-model="targetFrame"&gt;&lt;input type="button" value="set frame" v-on:click="setFrame"&gt;&lt;br&gt;'</span> +</div><div class="line">            <span class="string">'&lt;input type="text" size="5" v-model="sm.frameMax"&gt;&lt;input type="button" value="set max frame" v-on:click="setFrame"&gt;&lt;br&gt;'</span> +</div><div class="line">             <span class="string">'&lt;span&gt; &#123;&#123; sm.frame &#125;&#125; / &#123;&#123; sm.frameMax&#125;&#125; &lt;/span&gt;'</span> + </div><div class="line">        <span class="string">'&lt;/div&gt;'</span>,</div><div class="line">        <span class="attr">data</span>: &#123;</div><div class="line">           <span class="attr">sm</span>: sm,</div><div class="line">           <span class="attr">targetFrame</span>: <span class="number">0</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">methods</span>: &#123;</div><div class="line">            <span class="attr">stepFrame</span>: <span class="function"><span class="keyword">function</span>(<span class="params">delta</span>)</span>&#123;</div><div class="line">                sm.frameFrac += <span class="built_in">parseInt</span>(delta);</div><div class="line">                sm.frameFrac = sm.frameFrac &gt; sm.frameMax ? <span class="number">0</span> : sm.frameFrac;</div><div class="line">                sm.frameFrac = sm.frameFrac &lt; <span class="number">0</span> ? sm.frameMax : sm.frameFrac;</div><div class="line">                sm.frame = <span class="built_in">Math</span>.floor(sm.frameFrac);</div><div class="line">                sm.setFrame();</div><div class="line">            &#125;,</div><div class="line">            <span class="comment">// set a frame</span></div><div class="line">            setFrame: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="keyword">var</span> sm = <span class="keyword">this</span>.$data.sm;</div><div class="line">                sm.frameMax = <span class="built_in">parseInt</span>(sm.frameMax);</div><div class="line">                sm.frameFrac = <span class="built_in">parseFloat</span>(<span class="keyword">this</span>.$data.targetFrame);</div><div class="line">                sm.frame = <span class="built_in">Math</span>.floor(sm.frameFrac);</div><div class="line">                sm.setFrame();</div><div class="line">            &#125;,</div><div class="line">            <span class="comment">// play or pause</span></div><div class="line">            play: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="keyword">var</span> sm = <span class="keyword">this</span>.$data.sm;</div><div class="line">                sm.play();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="keyword">var</span> writeFrame = <span class="function">(<span class="params">imageFolder, frameIndex</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">var</span> data = vm.$data,</div><div class="line">        sm = data.sm;</div><div class="line">        data.targetFrame = frameIndex;</div><div class="line">        vm.setFrame();</div><div class="line">        <span class="comment">// write the current frame</span></div><div class="line">        videoAPI.writeFrame(imageFolder, sm.frame, sm.canvas.toDataURL(), (e) =&gt; &#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'wrote frame: '</span> + frameIndex);</div><div class="line">            <span class="keyword">var</span> nextFrameIndex = frameIndex + <span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span>(nextFrameIndex &lt; sm.frameMax)&#123;</div><div class="line">                writeFrame(imageFolder, nextFrameIndex);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    videoAPI.on(<span class="string">'menuExport'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evnt, result, imageFolder, mode</span>)</span>&#123;</div><div class="line">        writeFrame(imageFolder, <span class="number">0</span>); </div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h3 id="2-5-The-ui-video-code-file"><a href="#2-5-The-ui-video-code-file" class="headerlink" title="2.5 - The ui video code file"></a>2.5 - The ui video code file</h3><p>On top of having a user interface for playing back the video I am also going to want to have a user interface for mutating the state of the video itself.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// template and vm instance for video code ui</span></div><div class="line">    <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">        <span class="attr">el</span>: <span class="string">'#wrap_video_code'</span>,</div><div class="line">        <span class="attr">template</span>: <span class="string">'&lt;div class="wrap_ui"&gt;'</span> +</div><div class="line">            <span class="string">'&lt;span&gt;&#123;&#123; fileName &#125;&#125;&lt;/span&gt;&lt;br&gt;&lt;br&gt;'</span> +</div><div class="line">            <span class="comment">//'&lt;span&gt;&#123;&#123; filePath &#125;&#125;&lt;/span&gt;&lt;br&gt;' +</span></div><div class="line">            <span class="string">'&lt;textarea v-model="videoJS" cols="60" rows="10" v-on:input="updateVideo"&gt;&lt;/textarea&gt;'</span>+</div><div class="line">        <span class="string">'&lt;/div&gt;'</span>,</div><div class="line">        <span class="attr">data</span>: &#123;</div><div class="line">           <span class="attr">sm</span>: sm,</div><div class="line">           <span class="attr">fileName</span>: <span class="literal">null</span>,</div><div class="line">           <span class="attr">filePath</span>: <span class="literal">null</span>, <span class="comment">// the current path for the video.js file</span></div><div class="line">           videoJS: <span class="string">'\/\/ Video JavaScript goes here'</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">methods</span>: &#123;</div><div class="line">            <span class="attr">updateVideo</span> : <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">                loadText(e.target.value);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">// load dae</span></div><div class="line">    <span class="keyword">var</span> loadDAE = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</div><div class="line">        <span class="comment">// if there are dea paths then I will want to load them	</span></div><div class="line">    <span class="keyword">if</span>(VIDEO.daePaths)&#123;</div><div class="line">            <span class="keyword">var</span> manager = <span class="keyword">new</span> THREE.LoadingManager(<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</div><div class="line">                callback();</div><div class="line">            &#125;);</div><div class="line">            <span class="keyword">var</span> loader = <span class="keyword">new</span> THREE.ColladaLoader(manager);</div><div class="line">            VIDEO.daePaths.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">daeRelUrl</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> url = videoAPI.pathJoin(vm.$data.filePath, daeRelUrl);</div><div class="line">                loader.load(url, <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</div><div class="line">                    VIDEO.daeResults.push(result);</div><div class="line">                &#125;);</div><div class="line">            &#125;);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">       <span class="comment">// just call setup if there are no *.dae files	</span></div><div class="line">           callback();</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set filePath helper</span></div><div class="line">    <span class="keyword">var</span> setFilePath = <span class="function">(<span class="params">filePath</span>) =&gt;</span> &#123;</div><div class="line">        vm.$data.filePath = videoAPI.pathDirname(filePath);</div><div class="line">        vm.$data.fileName = videoAPI.pathBasename(filePath);</div><div class="line">        <span class="built_in">document</span>.title = <span class="string">'VideoGround - '</span> + vm.$data.fileName;    </div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// load text</span></div><div class="line">    <span class="keyword">var</span> loadText = <span class="function">(<span class="params">text</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">try</span>&#123;</div><div class="line">            <span class="comment">// by default no dae files are used</span></div><div class="line">            VIDEO.daePaths = <span class="literal">null</span>;</div><div class="line">            VIDEO.daeResults = [];</div><div class="line">            VIDEO.scripts = <span class="literal">undefined</span>;</div><div class="line">            <span class="comment">// !!! - #1 - USING EVAL FOR NOW UNTIL I FIGURE OUT SOMTHING BETTER</span></div><div class="line">            <span class="built_in">eval</span>(text);</div><div class="line">            vm.$data.videoJS = text;</div><div class="line">            <span class="comment">// load any and all dae files first</span></div><div class="line">            loadDAE( <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">                <span class="comment">// load scripts</span></div><div class="line">                <span class="keyword">if</span>(VIDEO.scripts)&#123;</div><div class="line">                    <span class="keyword">var</span> loaded = <span class="number">0</span>,</div><div class="line">                    total = VIDEO.scripts.length,</div><div class="line">                    scriptDiv = <span class="built_in">document</span>.getElementById(<span class="string">'wrap_video_scripts'</span>);</div><div class="line">                    <span class="comment">// remove all child nodes of scriptDiv</span></div><div class="line">                    utils.removeAllChildNodes(scriptDiv);</div><div class="line">                    <span class="comment">// for each relative URL</span></div><div class="line">                    VIDEO.scripts.forEach( <span class="function">(<span class="params">scriptRelURL, i</span>) =&gt;</span> &#123;</div><div class="line">                        <span class="keyword">var</span> url = videoAPI.pathJoin(vm.$data.filePath, scriptRelURL);</div><div class="line">                        <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line">                        script.addEventListener(<span class="string">'load'</span>, (e) =&gt; &#123;</div><div class="line">                            loaded += <span class="number">1</span>;</div><div class="line">                            <span class="comment">// run setip when all scripts are loaded</span></div><div class="line">                            <span class="keyword">if</span>(loaded === total)&#123;</div><div class="line">                                sm.setup();</div><div class="line">                            &#125;</div><div class="line">                        &#125;);</div><div class="line">                        script.src = url;</div><div class="line">                        scriptDiv.appendChild(script);</div><div class="line">                    &#125;);</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    <span class="comment">// no scripts? then just run setup</span></div><div class="line">                    sm.setup();</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;<span class="keyword">catch</span>(e)&#123;</div><div class="line">            <span class="built_in">console</span>.warn(e.message);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// ********** **********</span></div><div class="line">    <span class="comment">// LOAD STARTING VIDEO FILE</span></div><div class="line">    <span class="comment">// ********** **********</span></div><div class="line">    <span class="keyword">var</span> startFilePath = videoAPI.pathJoin( videoAPI.dir_root, <span class="string">'start-videos/video9.js'</span> );</div><div class="line">    videoAPI.loadFile(startFilePath, (text, e, filePath) =&gt; &#123;</div><div class="line">        setFilePath(filePath);</div><div class="line">        <span class="keyword">if</span>(e)&#123;</div><div class="line">            <span class="built_in">console</span>.warn(e.message);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            loadText(text);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">// ********** **********</span></div><div class="line">    <span class="comment">// LOAD VIDEO FILE FROM MENU</span></div><div class="line">    <span class="comment">// ********** **********</span></div><div class="line">    videoAPI.on(<span class="string">'menuOpenFile'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">text, e, filePath</span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Menu open event handler in ui-video-code.js'</span>);</div><div class="line">        setFilePath(filePath);</div><div class="line">        loadText(text);</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">// on save file</span></div><div class="line">    videoAPI.on(<span class="string">'menuSaveFile'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evnt, result</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(!result.canceled)&#123;</div><div class="line">            videoAPI.writeJSFile(result.filePath, vm.$data.videoJS, (e) =&gt; &#123;</div><div class="line">                <span class="keyword">if</span>(e)&#123;</div><div class="line">                    <span class="built_in">console</span>.warn(e.message);</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    <span class="built_in">console</span>.log(<span class="string">'wrote file: '</span> + result.filePath);</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">// on menu error</span></div><div class="line">    videoAPI.on(<span class="string">'menuError'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">evnt, err</span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(err);</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="3-Conclusion"><a href="#3-Conclusion" class="headerlink" title="3 - Conclusion"></a>3 - Conclusion</h2><p>This might prove to be a project that I might very well continue to work on, that should go without saying if I do end up using this every day to make videos. Future plains with it will involve not just adding every feature that I can think of, but rather be a little more reserved about making the program more complex. At this point I am a little more interested in making the application as it currently stands more solid as there are a fair number of bugs that I would like to work out with it, and I am just not complicate happy with the over all structurer as it currently stands as revision 3.</p>
<p>That is not to say that I do not have ideas for additional features, I do, many of them have to do with automating things that I am currently doing manually. For example making use of the child process module to call ffmpeg to create a final video from exported frame images rather than doing so mainly from the command line. I am currently using some bash aliases, but I should just be able to do that from within VideoGround.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2022/03/10/electronjs-example-videoground/" data-id="cl7vyxdus00p30gv1ls5oph9v" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2022/03/10/electronjs-example-videoground/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/electronjs/">electronjs</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/03/11/linux-tr/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Transform and delete standard input text in bash with the Linux tr command
        
      </div>
    </a>
  
  
    <a href="/2022/03/04/linux-ffmpeg/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Using ffmpeg to create videos in Linux</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2022/03/10/electronjs-example-videoground/index.html';
    this.page.identifier = '966';
    this.page.title = 'Electronjs application example that I am using to make videos';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.5px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.5px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.5px;">angular</a> <a href="/tags/animation/" style="font-size: 12px;">animation</a> <a href="/tags/automation/" style="font-size: 12px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.5px;">backbone</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.5px;">canvas</a> <a href="/tags/corejs/" style="font-size: 13px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.5px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.5px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.5px;">express</a> <a href="/tags/games/" style="font-size: 17px;">games</a> <a href="/tags/git/" style="font-size: 13px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 12px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.5px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.5px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.5px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.5px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.5px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.5px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.5px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.5px;">python</a> <a href="/tags/statistics/" style="font-size: 14px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/09/09/threejs-examples-wrap-module/">threejs wrap module example for wrapping rather than clamping values</a>
          </li>
        
          <li>
            <a href="/2022/09/02/threejs-vector3-wrap/">Wrapping a vector3 instance in threejs</a>
          </li>
        
          <li>
            <a href="/2022/08/26/threejs-examples-many-object-tweening/">Tweening many objects at once threejs example</a>
          </li>
        
          <li>
            <a href="/2022/08/19/electronjs-example-user-data-file/">User Data File Electronjs application example</a>
          </li>
        
          <li>
            <a href="/2022/08/12/threejs-cylinder-geometry/">Cylinder Geometry threejs example</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2022/03/10/electronjs-example-videoground/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>