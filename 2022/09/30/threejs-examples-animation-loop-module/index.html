<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Animation Loop Framework threejs project example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2022/09/30/threejs-examples-animation-loop-module/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="The subject of creating an animation loop is something that will come up a lot, not just with threejs alone, but indeed with client side javaScript in general. When it comes to client side javaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="Animation Loop Framework threejs project example">
<meta property="og:url" content="https://dustinpfister.github.io/2022/09/30/threejs-examples-animation-loop-module/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="The subject of creating an animation loop is something that will come up a lot, not just with threejs alone, but indeed with client side javaScript in general. When it comes to client side javaScript">
<meta property="og:updated_time" content="2022-09-30T18:02:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Animation Loop Framework threejs project example">
<meta name="twitter:description" content="The subject of creating an animation loop is something that will come up a lot, not just with threejs alone, but indeed with client side javaScript in general. When it comes to client side javaScript">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-examples-animation-loop-module" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/09/30/threejs-examples-animation-loop-module/" class="article-date"> Published:
  <time datetime="2022-09-30T15:45:00.000Z" itemprop="datePublished">2022-09-30</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2022/09/30/threejs-examples-animation-loop-module/" class="article-date"> Modified:
  <time datetime="2022-09-30T18:02:00.000Z" itemprop="dateModified">2022-09-30</time>
</a>

    <span class="article-date">V1.7</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Animation Loop Framework threejs project example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>The subject of creating an animation loop is something that will come up a lot, not just with threejs alone, but indeed with client side javaScript in general. When it comes to client side javaScript alone there are methods like that of setTimeout, as well as request animation frame. There are also a number of additional features that are related to this sort of thing in client side javaScript, but also in the threejs library such as the <a href="https://threejs.org/docs/#api/en/core/Clock" target="_blank" rel="external">THREE.Clock class</a>, and thus also <a href="https://developer.mozilla.org/en-US/docs/Web/API/Performance/now" target="_blank" rel="external"> performance.now</a>, and Date.now that the class works on top of. However in todayâ€™s post I am going to be writing a thing or two about a new javaScript module project that is a kind of framework that builds on top of the core idea of an animation loop.</p>
<p>This is then yet another <a href="/2021/02/19/threejs-examples/">threejs example project</a> to add on top of the many others that I may continue to work on a bit more off and on in the future. I have a general idea of what I would like this project to be in terms of the core set of ideas. That is to have the usual code that I keep copying and pasting from one project to the next, abstracted away into a module, or framework kind of from which I would say is the case here with this project. That is that with this module I call a main create method and pass an object that contains a method that can be called to set up the scene, camera, and so forth, and then another that will update things over time.</p>
<a id="more"></a>
<h2 id="The-animation-loop-framework-and-what-to-know-first"><a href="#The-animation-loop-framework-and-what-to-know-first" class="headerlink" title="The animation loop framework and what to know first"></a>The animation loop framework and what to know first</h2><p>This is a post on a threejs animation framework that can be used to create little animation projects in a page. It should go without saying but I will being it up again anyway, this is not a <a href="/2018/04/04/threejs-getting-started/">post for people that are new to threejs</a> or client side javaScript in general. I will not be getting into detail about all the various little details of the threejs library and front end development that you should know before hand. However I do always make an effort to use these opening sections of my posts to bring up a few things that you might want to read up more on regardless of current standard experience and skill level.</p>
<h3 id="There-is-a-lot-to-take-in-when-it-comes-to-animation-loops-I-would-not-stop-with-this-post-for-sure"><a href="#There-is-a-lot-to-take-in-when-it-comes-to-animation-loops-I-would-not-stop-with-this-post-for-sure" class="headerlink" title="There is a lot to take in when it comes to animation loops, I would not stop with this post for sure"></a>There is a lot to take in when it comes to animation loops, I would not stop with this post for sure</h3><p>There is more than one way to skin a cat as the expression goes, in the context of this post there is more than one way to make an animation loop. For this example I am just using the <a href="/2018/03/13/js-request-animation-frame/">requestAnimationFrame method</a> to call a loop function recursively, or at least that is what I was using in r0 of this threejs example. when it comes to future revisions I might revisit what it is that I am doing to create this main loop and maybe change a few things around. Anyway this request animation frame method is my default go to method for this sort of thing and I am sure that I am not alone with that. On the open internet there may be a lot of developers that say that you should only use that and nothing else ever, but I am not sure if I would automatically assume that. </p>
<p>In some cases I might want to make use of <a href="/2018/12/06/js-settimeout/">setTimeout actually</a>, the main reason why is that there might be some situations in which I would want to have two loops. One loop for updating a model which would be powered by settimeout, and another loop for updating a view which would use request animation frame or similar alternative. This will be especially true if I get into using web workers as a way to push some heavy listing type tasks to a separate event loop, as I am limited to using methods like setTimeout in that kind of environment.</p>
<h3 id="Just-keep-what-is-most-important-it-mine-with-this-sort-of-thing"><a href="#Just-keep-what-is-most-important-it-mine-with-this-sort-of-thing" class="headerlink" title="Just keep what is most important it mine with this sort of thing"></a>Just keep what is most important it mine with this sort of thing</h3><p>It can get a little overwhelming when it comes to really looking into how to do an animation loop. However I think one of the most important things to keep in mind is that many visitors to a web site might only have so much in terms of system resources to work with. Also there might be a lot going on in a page that is all running in the main event loop of the page as well. So right off the bat I will want to build in a user interface that allows visitors to press a stop button that will stop the animation loop completely. </p>
<p>Right away my stop button feature seems to work great as when I press the stop button I noticed my systems CPU use drop way down to more or less zero. In future revisions I might add additional features that will allow for uses to adjust the frame rate for updating, and movement, or work out a way to adjust that automatically to further refine this very important have feature. However for now at a minimum that is working great right off the bat with r0 of the framework.</p>
<h3 id="Source-code-is-up-on-Github"><a href="#Source-code-is-up-on-Github" class="headerlink" title="Source code is up on Github"></a>Source code is up on Github</h3><p>On Github the source code as well as add tonal notes, and also the latest source code can be <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-examples-animation-loop-module" target="_blank" rel="external">found here</a>.</p>
<h3 id="Version-Numbers-matter"><a href="#Version-Numbers-matter" class="headerlink" title="Version Numbers matter"></a>Version Numbers matter</h3><p>When I first made this project and wrote this post I was using r140 of threejs.</p>
<h2 id="1-The-first-version-r0-of-the-animation-loop-framework-and-demos"><a href="#1-The-first-version-r0-of-the-animation-loop-framework-and-demos" class="headerlink" title="1 - The first version (r0) of the animation loop framework and demos"></a>1 - The first version (r0) of the animation loop framework and demos</h2><p>In this section I will be writing about the state of the first revision of the animation loop module, as well as some demos thus far of the project that test out what I have thus far here. I had a core set of ideas that i wanted to get up and working right away with this one, and the first and foremost was to have a stop button for it. If I use this code in production it will likely be used for add a little header app type project at the top of the page, and when it comes to such things I think a stop button is a must. There is a lot that can end up going on in a page that will be fighting for resources, and even in cases where there is not much else going on some people use economy hardware that only has so much FLOP Power to work with as well.</p>
<p>There where a lot of other core ideas also that are up and running. When making animations with threejs thus far there are two general kinds of animations that come to mind. One kind of animation I would call a frame by frame style, or deterministic style, while the other kind I would call random, or stochastic style. When it comes to the kind of animations that I will be making with this kind of project I am sure most of them will be the random style, but I am still baking in feature that help with both.</p>
<h3 id="1-0-The-source-code-of-the-framework"><a href="#1-0-The-source-code-of-the-framework" class="headerlink" title="1.0 - The source code of the framework"></a>1.0 - The source code of the framework</h3><p>At the top of the module I have a whole lot of private helper functions that are used in the process of creating a loop object, or to add additional methods to work with when it comes to creating the source code of an animation. At the very top I have some methods that I copied over from my recent <a href="/2022/09/09/threejs-examples-wrap-module/">wrap module threejs project</a>. This is used to create a wrap vector method that is one of several methods that I can use off of the public API of this that will come into play with random rather than frame by frame style animations. Simply put it is a way to wrap values around when something goes out of bounds, rather than clamping the value and not letting it continue.</p>
<p>Another helper function that I have here is my <a href="/2020/03/04/canvas-get-point-relative-to-canvas/">get canvas relative method</a> that will return an object with an x, and y position that is relative to a canvas or container element, rather than the main window object of a page. Additional helpers thus far have to do with setting up style or rather class names for container and canvas elements, as well as attaching events for and drawing the user interface thus far.</p>
<p>I then have my main Loop Class that is used by the public create method to create a new instance of the main loop object of this framework. After that main constructor of the Loop class and the few prototype methods thus far for it I then also have a few public methods that can be used to create an instance of this Class as well a start and stop the main loop function.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP MODULE - r0 - from threejs-examples-animation-loop-module</span></div><div class="line"><span class="comment">//  Copyright 2022 by Dustin Pfister - https://dustinpfister.github.io/about</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> loopMod = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// wrap and wrap axis methods from threejs-examples-wrap-module</span></div><div class="line">    <span class="comment">// https://dustinpfister.github.io/2022/09/09/threejs-examples-wrap-module/</span></div><div class="line">    <span class="keyword">const</span> wrap = <span class="function"><span class="keyword">function</span> (<span class="params">value, a, b</span>)</span>&#123;</div><div class="line">        <span class="comment">// get min and max this way</span></div><div class="line">        <span class="keyword">let</span> max = <span class="built_in">Math</span>.max(a, b);</div><div class="line">        <span class="keyword">let</span> min = <span class="built_in">Math</span>.min(a, b);</div><div class="line">        <span class="comment">// return 0 for Wrap(value, 0, 0);</span></div><div class="line">        <span class="keyword">if</span>(max === <span class="number">0</span> &amp;&amp; min === <span class="number">0</span>)&#123;</div><div class="line">             <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">let</span> range = max - min;</div><div class="line">        <span class="keyword">return</span> (min + ((((value - min) % range) + range) % range));</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// wrap an axis</span></div><div class="line">    <span class="keyword">const</span> wrapAxis = <span class="function"><span class="keyword">function</span>(<span class="params">vec, vecMin, vecMax, axis</span>)</span>&#123;</div><div class="line">        axis = axis || <span class="string">'x'</span>;</div><div class="line">        vec[axis] = wrap( vec[axis], vecMin[axis], vecMax[axis] );</div><div class="line">        <span class="keyword">return</span> vec;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get canvas relative position from mouse or touch event object</span></div><div class="line">    <span class="keyword">const</span> getCanvasRelative = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">var</span> canvas = e.target,</div><div class="line">        bx = canvas.getBoundingClientRect(),</div><div class="line">        pos = &#123;</div><div class="line">            <span class="attr">x</span>: (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientX : e.clientX) - bx.left,</div><div class="line">            <span class="attr">y</span>: (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientY : e.clientY) - bx.top,</div><div class="line">            <span class="attr">bx</span>: bx</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// ajust for native canvas matrix size</span></div><div class="line">        pos.x = <span class="built_in">Math</span>.floor((pos.x / canvas.scrollWidth) * canvas.width);</div><div class="line">        pos.y = <span class="built_in">Math</span>.floor((pos.y / canvas.scrollHeight) * canvas.height);</div><div class="line">        <span class="keyword">return</span> pos;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set the style of the container as well as all children</span></div><div class="line">    <span class="keyword">const</span> setContainerStyle = <span class="function">(<span class="params">li</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> con = li.container;</div><div class="line">        <span class="keyword">const</span> len = con.children.length;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="comment">// set style (of classNames, ids)</span></div><div class="line">        con.className = <span class="string">'aniloop_parent'</span></div><div class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">           <span class="keyword">const</span> item = con.children.item(i);</div><div class="line">           item.className = <span class="string">'aniloop_child'</span></div><div class="line">           i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// attach event handers</span></div><div class="line">    <span class="keyword">const</span> attachUIEvents = <span class="function">(<span class="params">li</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> con = li.container;</div><div class="line">        con.onselectstart = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;;</div><div class="line">        <span class="comment">// play pause button check</span></div><div class="line">        con.addEventListener(<span class="string">'click'</span>, (e) =&gt; &#123;</div><div class="line">            <span class="keyword">const</span> pos = getCanvasRelative(e);</div><div class="line">            <span class="comment">// prevent default</span></div><div class="line">            e.preventDefault();</div><div class="line">            <span class="keyword">const</span> pb = li.buttons.play;</div><div class="line">            <span class="keyword">const</span> v_click = <span class="keyword">new</span> THREE.Vector2(pos.x, pos.y);</div><div class="line">            <span class="keyword">const</span> v_pb = <span class="keyword">new</span> THREE.Vector2(pb.x, pb.y);</div><div class="line">            <span class="keyword">const</span> d = v_click.distanceTo(v_pb);</div><div class="line">            <span class="keyword">if</span>(d &lt;= pb.r )&#123;</div><div class="line">                <span class="keyword">if</span>(li.active)&#123;</div><div class="line">                    loopMod.stop(li);</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    loopMod.start(li);</div><div class="line">                &#125;</div><div class="line">                drawUI.draw(li, li.canvas_ui, li.ctx_ui);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// UI DRAW METHIDS</span></div><div class="line">    <span class="keyword">const</span> drawUI = &#123;&#125;;</div><div class="line">    <span class="comment">// draw the 'play/pause' button</span></div><div class="line">    drawUI.playButton = <span class="function">(<span class="params">loop, canvas, ctx</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> pb = loop.buttons.play;</div><div class="line">        <span class="keyword">const</span> x = pb.x;</div><div class="line">        <span class="keyword">const</span> y = pb.y;</div><div class="line">        ctx.globalAlpha = <span class="number">0.75</span>;</div><div class="line">        ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">        ctx.strokeStyle = <span class="string">'white'</span>;</div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.arc(x, y, pb.r, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">        ctx.fill();</div><div class="line">        ctx.stroke();</div><div class="line">        <span class="comment">// if active draw square, else triangle</span></div><div class="line">        ctx.beginPath();</div><div class="line">        ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">        <span class="keyword">const</span> r = pb.r / <span class="number">2</span>;</div><div class="line">        <span class="keyword">if</span>(loop.active)&#123;</div><div class="line">            ctx.rect( pb.x - r, pb.y - r, r * <span class="number">2</span>, r * <span class="number">2</span> );</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            ctx.moveTo(pb.x + r * <span class="number">1.25</span>, pb.y);</div><div class="line">            ctx.lineTo(pb.x - r, pb.y + r);</div><div class="line">            ctx.lineTo(pb.x - r, pb.y - r);</div><div class="line">        &#125;</div><div class="line">        ctx.fill();</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// main draw ui method</span></div><div class="line">    drawUI.draw = <span class="function">(<span class="params">loop, canvas, ctx</span>) =&gt;</span> &#123;</div><div class="line">        ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvas.width, canvas.height);</div><div class="line">        drawUI.playButton(loop, canvas, ctx);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LOOP CLASS CONSTRUCTOR</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> Loop = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> li = <span class="keyword">this</span>; <span class="comment">// li for Loop Instance</span></div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        li.frame = <span class="number">0</span>;</div><div class="line">        li.FRAME_MAX = opt.FRAME_MAX || <span class="number">300</span>;</div><div class="line">        li.lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">        li.secs = <span class="number">0</span>;</div><div class="line">        li.active = <span class="literal">false</span>;</div><div class="line">        li.alpha = <span class="number">0</span>;</div><div class="line">        li.fps_update = opt.fps_update || <span class="number">20</span>;</div><div class="line">        li.fps_movement = opt.fps_movement || <span class="number">30</span>;</div><div class="line">        li.init = opt.init || <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line">        li.onStart = opt.onStart || <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line">        li.update = opt.update || <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line">        li.scene = opt.scene || <span class="keyword">new</span> THREE.Scene();</div><div class="line">        li.camera = opt.camera || <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">640</span> / <span class="number">480</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">        <span class="comment">// renderer, ui canvas, and container div</span></div><div class="line">        li.container = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</div><div class="line">        li.renderer = <span class="keyword">new</span> THREE.WebGLRenderer(&#123; <span class="attr">alpha</span>: <span class="literal">true</span> &#125;);</div><div class="line">        li.canvas_ui =  <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">        li.ctx_ui =  li.canvas_ui.getContext(<span class="string">'2d'</span>);</div><div class="line">        <span class="comment">// append</span></div><div class="line">        li.container.appendChild(li.renderer.domElement);</div><div class="line">        li.container.appendChild(li.canvas_ui);</div><div class="line">        <span class="comment">// ui buttons</span></div><div class="line">        <span class="keyword">const</span> buttons = li.buttons = &#123;&#125;;</div><div class="line">        buttons.play = opt.pb || &#123; <span class="attr">x</span>:<span class="number">0</span>, <span class="attr">y</span>:<span class="number">0</span>, <span class="attr">r</span>: <span class="number">20</span>, <span class="attr">dx</span>: <span class="number">24</span>, <span class="attr">dy</span>: <span class="number">24</span> &#125;;</div><div class="line">        <span class="comment">// set style</span></div><div class="line">        setContainerStyle(li);</div><div class="line">        <span class="comment">// attach UI EVENTS</span></div><div class="line">        attachUIEvents(li);</div><div class="line">        <span class="comment">// set size for first time</span></div><div class="line">        li.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LOOP CLASS PROTOTYPE</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// GetAlpha method pased off of frame and FRAME_MAX by default</span></div><div class="line">    <span class="comment">// or the given count, n, d, values</span></div><div class="line">    Loop.prototype.getAlpha = <span class="function"><span class="keyword">function</span>(<span class="params">count, n, d</span>)</span>&#123;</div><div class="line">        count = count === <span class="literal">undefined</span> ? <span class="number">1</span> : count;</div><div class="line">        n = n === <span class="literal">undefined</span> ? <span class="keyword">this</span>.frame : n;</div><div class="line">        d = d === <span class="literal">undefined</span> ? <span class="keyword">this</span>.FRAME_MAX : d;</div><div class="line">        <span class="keyword">return</span> THREE.MathUtils.euclideanModulo(n / d * count, <span class="number">1</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get a bias or ping pong value</span></div><div class="line">    Loop.prototype.getBias = <span class="function"><span class="keyword">function</span>(<span class="params">count, n, d</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> alpha = <span class="keyword">this</span>.getAlpha(count, n, d);</div><div class="line">        <span class="keyword">return</span> THREE.MathUtils.pingpong(alpha - <span class="number">0.5</span>, <span class="number">1</span>) * <span class="number">2</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// the setSize method</span></div><div class="line">    Loop.prototype.setSize = <span class="function"><span class="keyword">function</span>(<span class="params">w, h</span>)</span>&#123;</div><div class="line">        <span class="comment">// set renderer</span></div><div class="line">        <span class="keyword">this</span>.renderer.setSize(w, h);</div><div class="line">        <span class="comment">// set container, and canvas with style api</span></div><div class="line">        <span class="keyword">const</span> con = <span class="keyword">this</span>.container;</div><div class="line">        <span class="keyword">const</span> can = <span class="keyword">this</span>.canvas_ui;</div><div class="line">        con.style.width = w + <span class="string">'px'</span>;</div><div class="line">        con.style.height = h + <span class="string">'px'</span>;</div><div class="line">        can.style.width = w + <span class="string">'px'</span>;</div><div class="line">        can.style.height = h + <span class="string">'px'</span>;</div><div class="line">        can.width = w;</div><div class="line">        can.height = h;</div><div class="line">        <span class="comment">// draw ui</span></div><div class="line">        <span class="keyword">const</span> pb = <span class="keyword">this</span>.buttons.play;</div><div class="line">        pb.x = <span class="keyword">this</span>.canvas_ui.width - pb.dx;</div><div class="line">        pb.y = <span class="keyword">this</span>.canvas_ui.height - pb.dy;</div><div class="line">        drawUI.draw(<span class="keyword">this</span>, <span class="keyword">this</span>.canvas_ui, <span class="keyword">this</span>.ctx_ui);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// loop function at prototype level is noop (might remove)</span></div><div class="line">    Loop.prototype.loop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// create loop helper</span></div><div class="line">    <span class="keyword">const</span> createLoopObject = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="comment">// create a Loop Class Object</span></div><div class="line">        <span class="keyword">const</span> loop = <span class="keyword">new</span> Loop(opt);</div><div class="line">        <span class="comment">// the loop function as own property</span></div><div class="line">        loop.loop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">            <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">            <span class="keyword">let</span> secs = loop.secs = (now - loop.lt) / <span class="number">1000</span>;</div><div class="line">            <span class="comment">// keep calling loop over and over again i active</span></div><div class="line">            <span class="keyword">if</span>(loop.active)&#123;</div><div class="line">                requestAnimationFrame(loop.loop);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / loop.fps_update)&#123;</div><div class="line">                <span class="comment">// update, render</span></div><div class="line">                loop.update.call(loop, loop, loop.scene, loop.camera, loop.renderer);</div><div class="line">                loop.renderer.render(loop.scene, loop.camera);</div><div class="line">                <span class="comment">// step frame</span></div><div class="line">                loop.frame += loop.fps_movement * secs;</div><div class="line">                loop.frame %= loop.FRAME_MAX;</div><div class="line">                loop.lt = now;</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// call init</span></div><div class="line">        loop.init(loop, loop.scene, loop.camera, loop.renderer);</div><div class="line">        <span class="keyword">return</span> loop;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// PUBLIC API</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// create a loop object</span></div><div class="line">    api.create = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="comment">// the loop object</span></div><div class="line">        <span class="keyword">const</span> loop = createLoopObject(opt);</div><div class="line">        <span class="comment">// return the loop object</span></div><div class="line">        <span class="keyword">return</span> loop;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// start a loop object</span></div><div class="line">    api.start = <span class="function">(<span class="params">loop</span>) =&gt;</span> &#123;</div><div class="line">        loop.active = <span class="literal">true</span>;</div><div class="line">        loop.lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">        loop.onStart(loop, loop.scene, loop.camera, loop.renderer);</div><div class="line">        drawUI.draw(loop, loop.canvas_ui, loop.ctx_ui);</div><div class="line">        loop.loop();</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// stop the loop</span></div><div class="line">    api.stop = <span class="function">(<span class="params">loop</span>) =&gt;</span> &#123;</div><div class="line">        loop.active = <span class="literal">false</span>;</div><div class="line">        drawUI.draw(loop, loop.canvas_ui, loop.ctx_ui);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// making wrap helper public</span></div><div class="line">    api.wrap = wrap;</div><div class="line">    <span class="comment">// Wrap a vector method of public api</span></div><div class="line">    api.wrapVector = <span class="function"><span class="keyword">function</span> (<span class="params">vec, vecMin, vecMax</span>) </span>&#123;</div><div class="line">        vecMin = vecMin || <span class="keyword">new</span> THREE.Vector3(<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>);</div><div class="line">        vecMax = vecMax || <span class="keyword">new</span> THREE.Vector3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">        <span class="built_in">Object</span>.keys(vec).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">axis</span>)</span>&#123;</div><div class="line">            wrapAxis(vec, vecMin, vecMax, axis);</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> vec;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return public api</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="1-1-Frame-by-frame-demo"><a href="#1-1-Frame-by-frame-demo" class="headerlink" title="1.1 - Frame by frame demo"></a>1.1 - Frame by frame demo</h3><p>Now that I have the source code of the framework out of the way I should go over at least one or two demos of the module to test things out. As I have mentioned above I think in two general styles of animation which are frame by frame, and random. Think in terms of the nature of videos, and how they compare to that of video games. A video is a static, fixed, collection of frames, while a video games state is subject to a wide variety of factors such as user input, and code that will control the state of Non player Elements of the Game and so forth. This first example will then be a kind of frame by frame, deterministic, or video style kind of animation then, and I will get to another demo of the other style in an addition demo of this framework.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// Frame by Frame animation example for r0 of threejs-examples-animation-loop-module</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> loopObj = loopMod.create(&#123;</div><div class="line">    <span class="comment">// fps_update is actual update FPS rate ( lower for less CPU use, but choppy )</span></div><div class="line">    fps_update: <span class="number">16</span>,</div><div class="line">    <span class="comment">// fps_movement is the rate at which frames will update by system time</span></div><div class="line">    fps_movement: <span class="number">30</span>,</div><div class="line">    <span class="comment">// if FAME_MAX == 300 and fps_movement === 30 then it is a 10 sec loop</span></div><div class="line">    FRAME_MAX: <span class="number">300</span>,</div><div class="line">    <span class="comment">// init hook for prefroming actions that will only happen once</span></div><div class="line">    <span class="comment">// this is called once the loopObj is ready but has not been </span></div><div class="line">    <span class="comment">// started yet for first time</span></div><div class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params">loopObj, scene, camera, renderer</span>)</span>&#123;</div><div class="line">        <span class="comment">// ---------- ----------</span></div><div class="line">        <span class="comment">// ADD OBJECTS</span></div><div class="line">        <span class="comment">// ---------- ----------</span></div><div class="line">        <span class="comment">// light</span></div><div class="line">        <span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">        dl.position.set(<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>);</div><div class="line">        scene.add(dl);</div><div class="line">        <span class="comment">// cube</span></div><div class="line">        <span class="keyword">const</span> ud = scene.userData;</div><div class="line">        <span class="keyword">const</span> cube = ud.cube = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">                <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123; <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.5</span>&#125;));</div><div class="line">        scene.add(cube);</div><div class="line">        <span class="comment">// progress bar mesh</span></div><div class="line">        <span class="keyword">const</span> bar = ud.bar = <span class="keyword">new</span> THREE.Group();</div><div class="line">        bar.add(<span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">5</span>),</div><div class="line">                <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123; <span class="attr">color</span>: <span class="number">0x00ff00</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.5</span>&#125;)));</div><div class="line">        bar.add(<span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">0.25</span>, <span class="number">0.25</span>, <span class="number">5</span>),</div><div class="line">                <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123; <span class="attr">color</span>: <span class="number">0x008888</span>, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.25</span>&#125;)));</div><div class="line">        scene.add(bar);</div><div class="line">        bar.position.set(<span class="number">0.75</span>, <span class="number">-1</span>, <span class="number">0</span>);</div><div class="line">        <span class="comment">// ---------- ----------</span></div><div class="line">        <span class="comment">// SETUP CAMERA, SIZE, AND APPEND CONTAINER TO HTML</span></div><div class="line">        <span class="comment">// ---------- ----------</span></div><div class="line">        <span class="comment">// setup camera and size</span></div><div class="line">        camera.aspect = <span class="number">640</span> / <span class="number">200</span>;</div><div class="line">        camera.updateProjectionMatrix();</div><div class="line">        loopObj.setSize(<span class="number">640</span>, <span class="number">200</span>);</div><div class="line">        camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>);</div><div class="line">        camera.lookAt(<span class="number">0</span>, <span class="number">-0.5</span>, <span class="number">0</span>);</div><div class="line">        ( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild( loopObj.container )</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// what needs to happen each time the loop starts</span></div><div class="line">    onStart: <span class="function"><span class="keyword">function</span>(<span class="params">loopObj, scene, camera, renderer</span>)</span>&#123;</div><div class="line">        loopObj.frame = <span class="number">0</span>;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// update method</span></div><div class="line">    update: <span class="function"><span class="keyword">function</span>(<span class="params">loop, scene, camera</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> ud = scene.userData;</div><div class="line">        <span class="keyword">const</span> cube = ud.cube;</div><div class="line">        <span class="keyword">const</span> bar = ud.bar;</div><div class="line">        cube.rotation.x = <span class="built_in">Math</span>.PI * <span class="number">2</span> * loop.getBias(<span class="number">2</span>);</div><div class="line">        cube.rotation.y = <span class="built_in">Math</span>.PI * <span class="number">2</span> * loop.getAlpha(<span class="number">1</span>);</div><div class="line">        <span class="keyword">let</span> alpha = loop.getAlpha(<span class="number">1</span>);</div><div class="line">        bar.children[<span class="number">0</span>].scale.set(<span class="number">1</span>, <span class="number">1</span>, alpha);</div><div class="line">        bar.children[<span class="number">0</span>].position.z = (<span class="number">5</span> / <span class="number">2</span>) * (<span class="number">1</span> - alpha);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// do just once</span></div><div class="line">loopMod.start(loopObj);</div></pre></td></tr></table></figure>
<h3 id="1-2-Random-demo"><a href="#1-2-Random-demo" class="headerlink" title="1.2 - Random demo"></a>1.2 - Random demo</h3><p>I like frame by frame style animations a lot, so much in fact that I have made a major project that I still work on a little now and then for making videos. However this animation loop module is not that kind of project, there goal here is to make the kind of amazonian loop framework that would be used on a web page, rather than making a video. Although I can still very much make frame by frame animation with it, the focus is very much animation in general, including ones that might make use of user input, seed data, and random values.</p>
<p>For this example I then wanted to make another animation on top of the framework that is more on point with the other general style of animation. Nothing major for this one, but i would like to test out that wrap vector method that i put in place with this style of animation in mind.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// Random animation example for r0 of threejs-examples-animation-loop-module</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> loopObj = loopMod.create(&#123;</div><div class="line">    <span class="attr">fps_update</span>: <span class="number">12</span>,</div><div class="line">    <span class="attr">fps_movement</span>: <span class="number">80</span>,</div><div class="line">    <span class="attr">pb</span>: &#123; <span class="attr">r</span>: <span class="number">32</span>, <span class="attr">dx</span>: <span class="number">40</span>, <span class="attr">dy</span>: <span class="number">40</span>&#125;,</div><div class="line">    <span class="comment">// init hook for prefroming actions that will only happen once</span></div><div class="line">    <span class="comment">// this is called once the loopObj is ready but has not been </span></div><div class="line">    <span class="comment">// started yet for first time</span></div><div class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params">loopObj, scene, camera, renderer</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> sud = scene.userData;</div><div class="line">        sud.vMin = <span class="keyword">new</span> THREE.Vector3(<span class="number">-5</span>, <span class="number">-5</span>, <span class="number">-5</span>);</div><div class="line">        sud.vMax = <span class="keyword">new</span> THREE.Vector3(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">        sud.vCenter = <span class="keyword">new</span> THREE.Vector3();</div><div class="line">        sud.dMax = <span class="number">5</span>;</div><div class="line">        <span class="comment">// SETUP MESH GROUP</span></div><div class="line">        <span class="keyword">const</span> group = scene.userData.group = <span class="keyword">new</span> THREE.Group();</div><div class="line">        <span class="keyword">const</span> len = <span class="number">60</span>;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">            <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>),</div><div class="line">                <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;<span class="attr">transparent</span>: <span class="literal">true</span>&#125;));</div><div class="line">            <span class="keyword">const</span> mud = mesh.userData;</div><div class="line">            <span class="comment">// setting a normalize direction</span></div><div class="line">            mud.dir = <span class="keyword">new</span> THREE.Vector3(</div><div class="line">               <span class="number">-3</span> + <span class="number">6</span> * <span class="built_in">Math</span>.random() ,</div><div class="line">               <span class="number">1</span> + <span class="number">9</span> * <span class="built_in">Math</span>.random() * (<span class="built_in">Math</span>.random() &gt; <span class="number">0.5</span> ? <span class="number">1</span> : <span class="number">-1</span>),</div><div class="line">               <span class="number">-3</span> + <span class="number">6</span> * <span class="built_in">Math</span>.random() );</div><div class="line">            mud.dir.normalize();</div><div class="line">            <span class="comment">// setting a unit length to use to create a delta vector3</span></div><div class="line">            mud.unit_length = <span class="number">0.25</span> + <span class="number">2.75</span> * <span class="built_in">Math</span>.random();</div><div class="line">            group.add(mesh);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;;</div><div class="line">        scene.add(group);</div><div class="line">        ( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild( loopObj.container );</div><div class="line">        <span class="comment">// update camera and size</span></div><div class="line">        camera.aspect = <span class="number">640</span> / <span class="number">200</span>;</div><div class="line">        camera.updateProjectionMatrix();</div><div class="line">        loopObj.setSize(<span class="number">640</span>, <span class="number">200</span>);</div><div class="line">        camera.position.set(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</div><div class="line">        camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// update method</span></div><div class="line">    update: <span class="function"><span class="keyword">function</span>(<span class="params">loop, scene, camera</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> group = scene.userData.group;</div><div class="line">        <span class="keyword">const</span> sud = scene.userData;</div><div class="line">        <span class="comment">// update children</span></div><div class="line">        group.children.forEach( <span class="function">(<span class="params">mesh, i</span>) =&gt;</span> &#123;</div><div class="line">             <span class="keyword">const</span> ud = mesh.userData;</div><div class="line">             <span class="comment">// creating a delta vector that will be used to step position</span></div><div class="line">             <span class="comment">// based on current value of ud.dir, and ud.unit_length</span></div><div class="line">             <span class="keyword">const</span> delta = ud.dir.clone().multiplyScalar(ud.unit_length * loop.secs);</div><div class="line">             mesh.position.x += delta.x;</div><div class="line">             mesh.position.y += delta.y;</div><div class="line">             mesh.position.z += delta.z;</div><div class="line">             <span class="comment">// USING THE WRAP VECTOR METHOD HERE</span></div><div class="line">             loopMod.wrapVector(mesh.position, sud.vMin, sud.vMax);</div><div class="line">             <span class="comment">// setting opacity</span></div><div class="line">             <span class="keyword">const</span> d = mesh.position.distanceTo( sud.vCenter );</div><div class="line">             <span class="keyword">let</span> dAlpha = d / sud.dMax;</div><div class="line">             dAlpha = THREE.MathUtils.clamp(dAlpha, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">             mesh.material.opacity = <span class="number">0.5</span> - <span class="number">0.5</span> * dAlpha;</div><div class="line">             <span class="comment">// mesh objects look at 0, 0, 0;</span></div><div class="line">             mesh.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// do just once</span></div><div class="line">loopMod.start(loopObj);</div></pre></td></tr></table></figure>
<h2 id="Concusion"><a href="#Concusion" class="headerlink" title="Concusion"></a>Concusion</h2><p>That will be it for now when it comes to this project, at least until I come around to do some editing of this post at least which may or may not happen. I do have a lot of pots building when it comes to these various projects, and some are more deserving of additional work than others. I have found that if this does prove to be the kind of project that I do in fact end up using in production that I will be working on it more.</p>
<p>In any case I do have a lot of ides written down for future revisions, such as seeing about using iframes as the kind of container element. There is also features like having a more advanced user interface that helps with adjusting the update frames per second rate, seeing about doing a thing or two with more than one layer that is updated at differing rates and a whole lot more. I will see about getting to some of this when and if I get around to it, but in any case thus far I think I have a great first crude yet effective starting point worked out thus far.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2022/09/30/threejs-examples-animation-loop-module/" data-id="cliqch0o802h1iov18cqzi1g5" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2022/09/30/threejs-examples-animation-loop-module/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/10/07/threejs-buffer-geometry-compute-bounding-box/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Computing Bounding Box for buffer geometries in threejs
        
      </div>
    </a>
  
  
    <a href="/2022/09/23/threejs-examples-svg-movement/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Using SVG for movement of objects threejs example module</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2022/09/30/threejs-examples-animation-loop-module/index.html';
    this.page.identifier = '1007';
    this.page.title = 'Animation Loop Framework threejs project example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 13.64px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/06/09/threejs-vector2/">The Vector2 class for 2D curves, mouse pointers, ect</a>
          </li>
        
          <li>
            <a href="/2023/06/08/linux-dd/">Linux dd command and files</a>
          </li>
        
          <li>
            <a href="/2023/06/07/threejs-lathe-geometry/">Lathe Geometry in threejs</a>
          </li>
        
          <li>
            <a href="/2023/06/06/linux-sysbench/">Linux sysbench command for benchmarking a file system</a>
          </li>
        
          <li>
            <a href="/2023/06/02/threejs-tube-geometry/">Tube Geometry in threejs</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2022/09/30/threejs-examples-animation-loop-module/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>