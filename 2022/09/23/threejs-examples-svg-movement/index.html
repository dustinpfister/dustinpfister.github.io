<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Using SVG for movement of objects threejs example module | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2022/09/23/threejs-examples-svg-movement/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="For today’s new threejs project example post I started a new project this week in which I am looking into using SVG as a way to create paths that can then be used to define the movement and rotation o">
<meta property="og:type" content="article">
<meta property="og:title" content="Using SVG for movement of objects threejs example module">
<meta property="og:url" content="https://dustinpfister.github.io/2022/09/23/threejs-examples-svg-movement/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="For today’s new threejs project example post I started a new project this week in which I am looking into using SVG as a way to create paths that can then be used to define the movement and rotation o">
<meta property="og:updated_time" content="2022-09-23T19:18:43.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Using SVG for movement of objects threejs example module">
<meta name="twitter:description" content="For today’s new threejs project example post I started a new project this week in which I am looking into using SVG as a way to create paths that can then be used to define the movement and rotation o">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-examples-svg-movement" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/09/23/threejs-examples-svg-movement/" class="article-date"> Published:
  <time datetime="2022-09-23T14:40:00.000Z" itemprop="datePublished">2022-09-23</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2022/09/23/threejs-examples-svg-movement/" class="article-date"> Modified:
  <time datetime="2022-09-23T19:18:43.000Z" itemprop="dateModified">2022-09-23</time>
</a>

    <span class="article-date">V1.7</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Using SVG for movement of objects threejs example module
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>For today’s new <a href="/2021/02/19/threejs-examples/">threejs project</a> example post I started a new project this week in which I am looking into using SVG as a way to create paths that can then be used to define the movement and rotation of objects in a scene. The idea cam to be while working on my blog post for the SVG loader last week where I hit me that SVG is a pretty cool standard for creating paths. There is just one little problem which is that SVG is very much 2d, so to create a kind of 3d path with SVG I will need to think in terms of two paths for each 3d path. One path that I will be using to define motion for x and z, and then another in which I just use the y value for y in the 3d path.</p>
<p>If I can work out a decent enough system for creating 3d paths then they can be used as a way to update the <a href="/2022/04/04/threejs-object3d-position/">position property</a> of any <a href="/2018/04/23/threejs-object3d/">object3d based object</a> over time. This will mean <a href="//2018/05/04/threejs-mesh/">mesh objects</a>, but also any other kind of object3d based object such as a <a href="/2018/04/06/threejs-camera/">camera</a>. Speaking of cameras there is also using these 3d paths created from SVG to update the rotation of objects as well by using the array of Vector3 objects for values to pass to the <a href="/2021/05/13/threejs-object3d-lookat/">look at method</a> of an object.</p>
<a id="more"></a>
<h2 id="The-SVG-Movement-module-and-what-to-know-first"><a href="#The-SVG-Movement-module-and-what-to-know-first" class="headerlink" title="The SVG Movement module and what to know first"></a>The SVG Movement module and what to know first</h2><p>The content of this post is about a few draft prototype examples, and then the current state of a javaScript module that has to do with updating the position of objects by way of SVG data. This is then a project example that is not really intended for people that are new to threejs, as well as client side javaScript in general. As such I will not be getting into detail about basic aspects of threejs as well as core javaScript that you should be up to speed with before hand here. However I do always take a moment with these opening sections of my posts to write about a few things that you might want to read up on or refresh a little before continuing with reading the rest of this post.</p>
<h3 id="The-SVG-Loader-is-not-built-in-and-must-be-added-on-top-of-the-core-threejs-library"><a href="#The-SVG-Loader-is-not-built-in-and-must-be-added-on-top-of-the-core-threejs-library" class="headerlink" title="The SVG Loader is not built in and must be added on top of the core threejs library"></a>The SVG Loader is not built in and must be added on top of the core threejs library</h3><p>The SVG loader is an example of an asset loader that is not built into the core of the library itself, but is rather one of many official options for assets loaders that can be added on top of threejs by downloading the file for the revision number that you are using in the github folder of threejs. I have wrote a <a href="/2022/09/16/threejs-svg-loader/">blog post on the subject of the SVG loader alone</a> as I have mentioned above last week in which I write about setting this up.</p>
<h3 id="Speaking-about-SVG-there-is-learning-and-or-refreshing-with-that"><a href="#Speaking-about-SVG-there-is-learning-and-or-refreshing-with-that" class="headerlink" title="Speaking about SVG there is learning and or refreshing with that"></a>Speaking about SVG there is learning and or refreshing with that</h3><p>If you have not yet looked into what the deal is with SVG then now would be a good time to <a href="/2019/02/11/js-javascript-svg">read my post on SVG in general</a>, or better yet check out the Mozilla docs. There is a lot to take in which it comes to SVG so when it comes to looking at the Mozilla docs it is mainly the <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Paths" target="_blank" rel="external">path element tutorial</a> that you would want to read about that is most relevant to this javaScript module.</p>
<h3 id="Source-code-is-up-on-Github"><a href="#Source-code-is-up-on-Github" class="headerlink" title="Source code is up on Github"></a>Source code is up on Github</h3><p>The source code examples as well as the addtional assets and notes that I am using here can be found in my <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-examples-svg-movement" target="_blank" rel="external">test threejs repo</a>.</p>
<h3 id="Version-Numbers-Matter"><a href="#Version-Numbers-Matter" class="headerlink" title="Version Numbers Matter"></a>Version Numbers Matter</h3><p>The version of threejs that I was using when I first wrote this blog post was r140.</p>
<h2 id="1-Some-basic-draft-examples-of-what-I-want-to-happen"><a href="#1-Some-basic-draft-examples-of-what-I-want-to-happen" class="headerlink" title="1 - Some basic draft examples of what I want to happen"></a>1 - Some basic draft examples of what I want to happen</h2><p>When I start an idea for a project like this often th first step is to create one or more fairly basic examples where I just want to get the core idea up and running first. Once I get the very general idea working then it is often just a process of creating a module form of what I made, add new features, and refine the features that are all ready working. In this section I will then be going over these draft examples of an SVG movement module then.</p>
<h3 id="1-1-Getting-the-xz-array-values"><a href="#1-1-Getting-the-xz-array-values" class="headerlink" title="1.1 - Getting the xz array values"></a>1.1 - Getting the xz array values</h3><p>The first and for most thing that I need to do is get the path data that I want to use to update the position of an object, and even then maybe just the x and z values first. For this first draft example of an svg movement module then I made a main object called SVGMove and added a create mesh, and set to alpha public methods for the module. The create mesh object is then just a way to create a mesh object with arays set to the user data object of the mesh object that are created from the svg data.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Basic load SVG DEMO</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, RENDERER, LIGHT</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'#000000'</span>);</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">let</span> SVGMove = &#123;&#125;;</div><div class="line">    <span class="comment">// create an Mesh based object with the given</span></div><div class="line">    <span class="comment">// svg data and id prefix</span></div><div class="line">    SVGMove.createMesh = <span class="function">(<span class="params">data, id_prefix, </span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> obj = <span class="keyword">new</span> THREE.Mesh( </div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">        <span class="keyword">const</span> ud = obj.userData;</div><div class="line">        data.paths.forEach(<span class="function">(<span class="params">path</span>)=&gt;</span>&#123;</div><div class="line">            <span class="comment">// get id of the path</span></div><div class="line">            <span class="keyword">const</span> id = path.userData.node.id;</div><div class="line">            <span class="keyword">const</span> idParts = id.split(<span class="string">'_'</span>);</div><div class="line">            <span class="keyword">if</span>(idParts[<span class="number">0</span>] === id_prefix)&#123;</div><div class="line">                <span class="comment">// get points</span></div><div class="line">                <span class="keyword">const</span> points = path.subPaths[<span class="number">0</span>].getPoints();</div><div class="line">                ud[ idParts[<span class="number">1</span>] + <span class="string">'_'</span> + idParts[<span class="number">2</span>] ] = points;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> obj;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set an object by an alpha value of 0 - 1</span></div><div class="line">    SVGMove.setToAlpha = <span class="function">(<span class="params">obj, alpha</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> ud = obj.userData;</div><div class="line">        <span class="keyword">let</span> len = <span class="number">0</span>, i = <span class="number">0</span>;</div><div class="line">        <span class="comment">// get current xz Vector2</span></div><div class="line">        len = ud.pos_xz.length;</div><div class="line">        i = <span class="built_in">Math</span>.floor( ( len - <span class="number">1</span>) * alpha);</div><div class="line">        <span class="keyword">const</span> v2_pos_xz = ud.pos_xz[i];</div><div class="line">        <span class="comment">// use xz Vector2 to set position of object</span></div><div class="line">        obj.position.set(v2_pos_xz.x, <span class="number">0</span>, v2_pos_xz.y);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// GRID</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> grid = <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0xffffff</span>, <span class="number">0xff0000</span>);</div><div class="line">    grid.material.linewidth = <span class="number">3</span>;</div><div class="line">    grid.material.transparent = <span class="literal">true</span>;</div><div class="line">    grid.material.opacity = <span class="number">0.25</span>;;</div><div class="line">    scene.add(grid);</div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = <span class="number">300</span>;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// mesh object to move</span></div><div class="line">    <span class="keyword">let</span> mesh;</div><div class="line">    <span class="comment">// update</span></div><div class="line">    <span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        <span class="comment">// calling set to alpha here</span></div><div class="line">        SVGMove.setToAlpha(mesh, frame / frameMax);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SVG LOADER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// instantiate a loader</span></div><div class="line">    <span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.SVGLoader();</div><div class="line">    <span class="comment">// load a SVG resource</span></div><div class="line">    loader.load(</div><div class="line">        <span class="comment">// resource URL</span></div><div class="line">        <span class="string">'/forpost/threejs-examples-svg-movement/svg/obj1.svg'</span>,</div><div class="line">        <span class="comment">// called when the resource is loaded</span></div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"> data </span>) </span>&#123;</div><div class="line">            <span class="comment">// creating mesh object, adding to scene, and starting loop</span></div><div class="line">            mesh = SVGMove.createMesh(data, <span class="string">'box1'</span>);</div><div class="line">            scene.add(mesh);</div><div class="line">            loop();</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// called when loading is in progresses</span></div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"> xhr </span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log( ( xhr.loaded / xhr.total * <span class="number">100</span> ) + <span class="string">'% loaded'</span> );</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// called when loading has errors</span></div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"> error </span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log( <span class="string">'An error happened'</span> );</div><div class="line">            <span class="built_in">console</span>.log(error)</div><div class="line">        &#125;</div><div class="line">    );</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="1-2-Lerping-between-points-and-y-values"><a href="#1-2-Lerping-between-points-and-y-values" class="headerlink" title="1.2 - Lerping between points, and y values"></a>1.2 - Lerping between points, and y values</h3><p>So far so good with my first x and z only proof of concept with this, but there are a few things that I will want to change before getting into making an actual module with this. There is of course using another path in the SVG to also get y values rather than just the x and z values and that is what I got up and working in this example. However the other thing that I would like to fix is to make it so that the movement is not so jumpy. So on top of using another path for the y values I also want to have a system where additional vectors are created between the points given from SVG as well.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Basic load SVG DEMO</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, RENDERER, LIGHT</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'#000000'</span>);</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">let</span> SVGMove = &#123;&#125;;</div><div class="line">    <span class="comment">// create an Mesh based object with the given</span></div><div class="line">    <span class="comment">// svg data and id prefix</span></div><div class="line">    SVGMove.createMesh = <span class="function">(<span class="params">data, id_prefix, </span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> obj = <span class="keyword">new</span> THREE.Mesh( </div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">        <span class="keyword">const</span> ud = obj.userData;</div><div class="line">        data.paths.forEach(<span class="function">(<span class="params">path</span>)=&gt;</span>&#123;</div><div class="line">            <span class="comment">// get id of the path</span></div><div class="line">            <span class="keyword">const</span> id = path.userData.node.id;</div><div class="line">            <span class="keyword">const</span> idParts = id.split(<span class="string">'_'</span>);</div><div class="line">            <span class="keyword">if</span>(idParts[<span class="number">0</span>] === id_prefix)&#123;</div><div class="line">                <span class="comment">// get points</span></div><div class="line">                <span class="keyword">const</span> points = path.subPaths[<span class="number">0</span>].getPoints();</div><div class="line">                ud[ idParts[<span class="number">1</span>] + <span class="string">'_'</span> + idParts[<span class="number">2</span>] ] = points;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> obj;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a v2 from the given obj, useStr, valueStr, and index</span></div><div class="line">    <span class="comment">// ex getV2(obj, 'pos', 'xz', 0)</span></div><div class="line">    <span class="keyword">const</span> getV2 = <span class="function">(<span class="params">obj, useStr, valueStr, index</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> ud = obj.userData;</div><div class="line">        <span class="keyword">const</span> arr = ud[ useStr + <span class="string">'_'</span> + valueStr ];</div><div class="line">        <span class="keyword">const</span> len = arr.length;</div><div class="line">        <span class="keyword">const</span> i = THREE.MathUtils.euclideanModulo(index, len);</div><div class="line">        <span class="keyword">return</span> arr[i];</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a v3 for the given obj, use string, and alpha value</span></div><div class="line">    <span class="comment">// ex crateV3(obj, 'pos', 0.35);</span></div><div class="line">    <span class="keyword">const</span> createV3 = <span class="function">(<span class="params">obj, useStr, alpha</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> ud = obj.userData;</div><div class="line">        <span class="keyword">let</span> len = <span class="number">0</span>, fi, i = <span class="number">0</span>, lerpAlpha;</div><div class="line">        <span class="comment">// get current xz Vector2</span></div><div class="line">        len = ud[useStr + <span class="string">'_xz'</span>].length;</div><div class="line">        fi = ( len - <span class="number">1</span>) * alpha; <span class="comment">// fraction index ex: 1.44</span></div><div class="line">        i = <span class="built_in">Math</span>.floor( fi);     <span class="comment">// index ex: 1</span></div><div class="line">        lerpAlpha = fi % <span class="number">1</span>;      <span class="comment">// lerpAlpha from current to next point ex: 0.44</span></div><div class="line">        <span class="comment">// current pos</span></div><div class="line">        <span class="keyword">const</span> xz = getV2(obj, useStr, <span class="string">'xz'</span>, i); </div><div class="line">        <span class="keyword">const</span> xz_next = getV2(obj, useStr, <span class="string">'xz'</span>, i + <span class="number">1</span>); </div><div class="line">        <span class="comment">// next pos</span></div><div class="line">        <span class="keyword">const</span> y = getV2(obj, useStr, <span class="string">'y'</span>, i);</div><div class="line">        <span class="keyword">const</span> y_next = getV2(obj, useStr, <span class="string">'y'</span>, i + <span class="number">1</span>);</div><div class="line">        <span class="comment">// use xz Vector2 to set position of object</span></div><div class="line">        <span class="keyword">const</span> v3_current = <span class="keyword">new</span> THREE.Vector3(xz.x, y.y, xz.y);</div><div class="line">        <span class="keyword">const</span> v3_next = <span class="keyword">new</span> THREE.Vector3(xz_next.x, y_next.y, xz_next.y);</div><div class="line">        <span class="keyword">return</span> v3_current.clone().lerp(v3_next, lerpAlpha);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set an object by an alpha value of 0 - 1</span></div><div class="line">    SVGMove.setToAlpha = <span class="function">(<span class="params">obj, alpha</span>) =&gt;</span> &#123;</div><div class="line">        <span class="comment">// just setting position for now</span></div><div class="line">        obj.position.copy( createV3(obj, <span class="string">'pos'</span>, alpha) );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// GRID</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> grid = <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0xffffff</span>, <span class="number">0xff0000</span>);</div><div class="line">    grid.material.linewidth = <span class="number">3</span>;</div><div class="line">    grid.material.transparent = <span class="literal">true</span>;</div><div class="line">    grid.material.opacity = <span class="number">0.25</span>;;</div><div class="line">    scene.add(grid);</div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = <span class="number">300</span>;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// mesh object to move</span></div><div class="line">    <span class="keyword">let</span> mesh;</div><div class="line">    <span class="comment">// update</span></div><div class="line">    <span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        <span class="comment">// calling set to alpha here</span></div><div class="line">        SVGMove.setToAlpha(mesh, frame / frameMax);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SVG LOADER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// instantiate a loader</span></div><div class="line">    <span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.SVGLoader();</div><div class="line">    <span class="comment">// load a SVG resource</span></div><div class="line">    loader.load(</div><div class="line">        <span class="comment">// resource URL</span></div><div class="line">        <span class="string">'/forpost/threejs-examples-svg-movement/svg/obj1.svg'</span>,</div><div class="line">        <span class="comment">// called when the resource is loaded</span></div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"> data </span>) </span>&#123;</div><div class="line">            <span class="comment">// creating mesh object, adding to scene, and starting loop</span></div><div class="line">            mesh = SVGMove.createMesh(data, <span class="string">'box1'</span>);</div><div class="line">            scene.add(mesh);</div><div class="line">            loop();</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// called when loading is in progresses</span></div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"> xhr </span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log( ( xhr.loaded / xhr.total * <span class="number">100</span> ) + <span class="string">'% loaded'</span> );</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// called when loading has errors</span></div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"> error </span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log( <span class="string">'An error happened'</span> );</div><div class="line">            <span class="built_in">console</span>.log(error)</div><div class="line">        &#125;</div><div class="line">    );</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h2 id="2-r0-of-the-svgmove-js-javaScript-module-and-demos"><a href="#2-r0-of-the-svgmove-js-javaScript-module-and-demos" class="headerlink" title="2 - r0 of the svgmove.js javaScript module and demos"></a>2 - r0 of the svgmove.js javaScript module and demos</h2><p>Looks like the core idea of what I want to work is working okay with my draft examples so after I have them looking good the next step is to create the first version of the SVG movement module. While I am at it I will also want to create a number of demos to make sure that the module is working okay thus far.</p>
<h3 id="2-0-r0-of-the-module"><a href="#2-0-r0-of-the-module" class="headerlink" title="2.0 - r0 of the module"></a>2.0 - r0 of the module</h3><p>This first version is for the most part just a module form of what I all ready got working well in my draft examples above but with some much needed changes made, as well as additional features. In my lerp draft example I laid the groundwork for additional sets of values that can be defined in the SVG by adding what I call a use string value as part of the id of an SVG path element. In this module I made changed to the set to alpha method to make use of a look at use string if it is there to use.</p>
<p>Another major feature change that is very much needed is a general use object public method on top of the create mesh method that I improved from the demos. This way I can just use and object3d based object with a set of paths that I define for the object in the SVG file. I still have a create mesh method as will but now it is far more flexible in terms of choosing the constructor function that I use to create the geometry and I can also pass a geometry rather than create one. In any case the create mesh object still uses the general use object method when it comes to appending values to the user data object.</p>
<p>Another thing that I wanted to add at the last moment was a system for checking for a revision number in the SVG file that should correspond to the revision number of this module. I have a lot of plans for this project when it comes to future work that I might do that will result in the svg path data being treated in a new way. So I can check revision numbers and process the data as it should moving forward.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// svgmove.js - r0 - from threejs-examples-svg-movement</span></div><div class="line"><span class="keyword">const</span> SVGMove = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// create a v2 from the given obj, useStr, valueStr, and index</span></div><div class="line">    <span class="comment">// ex getV2(obj, 'pos', 'xz', 0)</span></div><div class="line">    <span class="keyword">const</span> getV2 = <span class="function">(<span class="params">obj, useStr, valueStr, index</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> ud = obj.userData;</div><div class="line">        <span class="keyword">const</span> arr = ud[ useStr + <span class="string">'_'</span> + valueStr ];</div><div class="line">        <span class="keyword">const</span> len = arr.length;</div><div class="line">        <span class="keyword">const</span> i = THREE.MathUtils.euclideanModulo(index, len);</div><div class="line">        <span class="keyword">return</span> arr[i];</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a v3 for the given obj, use string, and alpha value</span></div><div class="line">    <span class="comment">// ex crateV3(obj, 'pos', 0.35);</span></div><div class="line">    <span class="keyword">const</span> createV3 = <span class="function">(<span class="params">obj, useStr, alpha</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> ud = obj.userData;</div><div class="line">        <span class="keyword">let</span> len = <span class="number">0</span>, fi, i = <span class="number">0</span>, lerpAlpha;</div><div class="line">        <span class="comment">// get current xz Vector2</span></div><div class="line">        len = ud[useStr + <span class="string">'_xz'</span>].length;</div><div class="line">        fi = ( len - <span class="number">1</span>) * alpha; <span class="comment">// fraction index ex: 1.44</span></div><div class="line">        i = <span class="built_in">Math</span>.floor( fi);     <span class="comment">// index ex: 1</span></div><div class="line">        lerpAlpha = fi % <span class="number">1</span>;      <span class="comment">// lerpAlpha from current to next point ex: 0.44</span></div><div class="line">        <span class="comment">// current pos</span></div><div class="line">        <span class="keyword">const</span> xz = getV2(obj, useStr, <span class="string">'xz'</span>, i); </div><div class="line">        <span class="keyword">const</span> xz_next = getV2(obj, useStr, <span class="string">'xz'</span>, i + <span class="number">1</span>); </div><div class="line">        <span class="comment">// next pos</span></div><div class="line">        <span class="keyword">const</span> y = getV2(obj, useStr, <span class="string">'y'</span>, i);</div><div class="line">        <span class="keyword">const</span> y_next = getV2(obj, useStr, <span class="string">'y'</span>, i + <span class="number">1</span>);</div><div class="line">        <span class="comment">// use xz Vector2 to set position of object</span></div><div class="line">        <span class="keyword">const</span> v3_current = <span class="keyword">new</span> THREE.Vector3(xz.x, y.y, xz.y);</div><div class="line">        <span class="keyword">const</span> v3_next = <span class="keyword">new</span> THREE.Vector3(xz_next.x, y_next.y, xz_next.y);</div><div class="line">        <span class="keyword">return</span> v3_current.clone().lerp(v3_next, lerpAlpha);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return true if an object has the given values else false</span></div><div class="line">    <span class="keyword">const</span> hasValues = <span class="function">(<span class="params">obj, useStr, valueStr</span>) =&gt;</span> &#123;</div><div class="line">        valueStr = valueStr || <span class="string">'xz'</span>;</div><div class="line">        <span class="keyword">const</span> ud = obj.userData;</div><div class="line">        <span class="keyword">return</span> !(ud[useStr + <span class="string">'_'</span> + valueStr] === <span class="literal">undefined</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get the revision number of the svg file</span></div><div class="line">    <span class="keyword">const</span> getRNum = <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">let</span> rNum = <span class="number">-1</span>;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>, len = data.xml.childNodes.length;</div><div class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">            <span class="keyword">let</span> item = data.xml.childNodes.item(i);</div><div class="line">            <span class="keyword">if</span>(item.id === <span class="string">'svgmove_r'</span>)&#123;</div><div class="line">                rNum = <span class="built_in">parseInt</span>(item.textContent)</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> rNum;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// PUBLIC API</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">let</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// use the given object for svg path data</span></div><div class="line">    <span class="comment">// this is what I will want to use if I all ready have an object</span></div><div class="line">    <span class="comment">// that I want to use</span></div><div class="line">    api.useObj = <span class="function">(<span class="params">data, id_prefix, obj</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> ud = obj.userData;</div><div class="line">        ud.data = data; <span class="comment">// ref to raw data</span></div><div class="line">        <span class="keyword">let</span> rNum = getRNum(data);</div><div class="line">        <span class="keyword">if</span>(rNum === <span class="number">0</span>)&#123;</div><div class="line">            data.paths.forEach(<span class="function">(<span class="params">path</span>)=&gt;</span>&#123;</div><div class="line">                <span class="comment">// get id of the path</span></div><div class="line">                <span class="keyword">const</span> id = path.userData.node.id;</div><div class="line">                <span class="keyword">const</span> idParts = id.split(<span class="string">'_'</span>);</div><div class="line">                <span class="keyword">if</span>(idParts[<span class="number">0</span>] === id_prefix)&#123;</div><div class="line">                    <span class="comment">// get points</span></div><div class="line">                    <span class="keyword">const</span> points = path.subPaths[<span class="number">0</span>].getPoints();</div><div class="line">                    ud[ idParts[<span class="number">1</span>] + <span class="string">'_'</span> + idParts[<span class="number">2</span>] ] = points;</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(rNum === <span class="number">-1</span>)&#123;</div><div class="line">            <span class="built_in">console</span>.warn(<span class="string">'Could not figure out r num for the SVG file.'</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(rNum &gt;= <span class="number">1</span>)&#123;</div><div class="line">            <span class="built_in">console</span>.warn(<span class="string">'This is r0 of svgmove.js, but svg file is for r'</span> + rNum);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> obj;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create an Mesh based object with the given</span></div><div class="line">    <span class="comment">// svg data and id prefix</span></div><div class="line">    api.createMesh = <span class="function">(<span class="params">data, id_prefix, opt </span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.con = opt.con || <span class="string">'Box'</span>;</div><div class="line">        opt.argu = opt.argu || [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>];</div><div class="line">        opt.material = opt.material || <span class="keyword">new</span> THREE.MeshNormalMaterial();</div><div class="line">        opt.geometry = <span class="literal">null</span>;</div><div class="line">        <span class="comment">// if opt is a string try to get con function like this</span></div><div class="line">        <span class="comment">// else assume the value given is all ready a function</span></div><div class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> opt.con === <span class="string">'string'</span>)&#123;</div><div class="line">            opt.con = THREE[opt.con + <span class="string">'Geometry'</span>];</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// if geometry is given use that and ignore any con and argu </span></div><div class="line">        <span class="comment">// props that might be there, else we will need to create it</span></div><div class="line">        <span class="keyword">if</span>(!opt.geometry)&#123;</div><div class="line">            opt.geometry = <span class="keyword">new</span> opt.con(...opt.argu);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// create the mesh</span></div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( </div><div class="line">            opt.geometry,</div><div class="line">            opt.material);</div><div class="line">        <span class="comment">// use path data with the mesh</span></div><div class="line">        api.useObj(data, id_prefix, mesh);</div><div class="line">        <span class="comment">// return the mesh</span></div><div class="line">        <span class="keyword">return</span> mesh;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set an object by an alpha value of 0 - 1</span></div><div class="line">    api.setToAlpha = <span class="function">(<span class="params">obj, alpha</span>) =&gt;</span> &#123;</div><div class="line">        <span class="comment">// set position</span></div><div class="line">        <span class="keyword">if</span>( hasValues(obj, <span class="string">'pos'</span>))&#123;</div><div class="line">            obj.position.copy( createV3(obj, <span class="string">'pos'</span>, alpha) );</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>( hasValues(obj, <span class="string">'lookat'</span>))&#123;</div><div class="line">            obj.lookAt( createV3(obj, <span class="string">'lookat'</span>, alpha) );</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="2-1-Look-at-example"><a href="#2-1-Look-at-example" class="headerlink" title="2.1 - Look at example"></a>2.1 - Look at example</h3><p>The general idea that I had in mind with this project is to not just use SVG paths as a way to define the position of an object over time but to also use SVG as a way to set the rotation of an object as well. For this demo I wanted to test drive the new set to alpha method of the module to see that both position and rotation can be set by SVG Paths. So I am using the create method method to create an create a mesh with the cone geometry and the basic material in wire frame mode. After creating the mesh object I also rotate the geometryto make sure that the cone is pointing in the direction that I want it to. For this cone mesh I am using SVG paths that start with a cone1 prefix in the SVG file as this is a collection of paths that I set up that have both position and look at paths.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Basic load SVG DEMO</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, RENDERER, LIGHT</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'#000000'</span>);</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// GRID</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> grid = <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0xffffff</span>, <span class="number">0xff0000</span>);</div><div class="line">    grid.material.linewidth = <span class="number">3</span>;</div><div class="line">    grid.material.transparent = <span class="literal">true</span>;</div><div class="line">    grid.material.opacity = <span class="number">0.25</span>;;</div><div class="line">    scene.add(grid);</div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = <span class="number">300</span>;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// mesh object to move</span></div><div class="line">    <span class="keyword">let</span> mesh1;</div><div class="line">    <span class="comment">// update</span></div><div class="line">    <span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        <span class="comment">// calling set to alpha here</span></div><div class="line">        SVGMove.setToAlpha(mesh1, frame / frameMax);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SVG LOADER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// instantiate a loader</span></div><div class="line">    <span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.SVGLoader();</div><div class="line">    <span class="comment">// load a SVG resource</span></div><div class="line">    loader.load(</div><div class="line">        <span class="comment">// resource URL</span></div><div class="line">        <span class="string">'/forpost/threejs-examples-svg-movement/svg/obj1.svg'</span>,</div><div class="line">        <span class="comment">// called when the resource is loaded</span></div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"> data </span>) </span>&#123;</div><div class="line">            <span class="comment">// CREATING A MESH OBJECT WITH SVG DATA FOR 'cone1' THAT</span></div><div class="line">            <span class="comment">// HAS BOTH 'pos', AND 'lookat' paths</span></div><div class="line">            mesh1 = SVGMove.createMesh(data, <span class="string">'cone1'</span>, &#123;</div><div class="line">                <span class="attr">con</span>: <span class="string">'Cone'</span>, <span class="attr">argu</span>: [<span class="number">0.5</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">5</span>],</div><div class="line">                <span class="attr">material</span>: <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;<span class="attr">wireframe</span>: <span class="literal">true</span>&#125;)</div><div class="line">            &#125;);</div><div class="line">            <span class="comment">// rotation geo once here so that it is pointing the way I want it</span></div><div class="line">            mesh1.geometry.rotateX(<span class="built_in">Math</span>.PI * <span class="number">0.5</span>);</div><div class="line">            scene.add(mesh1);</div><div class="line">            loop();</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// called when loading is in progresses</span></div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"> xhr </span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log( ( xhr.loaded / xhr.total * <span class="number">100</span> ) + <span class="string">'% loaded'</span> );</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// called when loading has errors</span></div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"> error </span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log( <span class="string">'An error happened'</span> );</div><div class="line">            <span class="built_in">console</span>.log(error)</div><div class="line">        &#125;</div><div class="line">    );</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<p>The end result of this is then working just the way that I expect it to, with the cone moving by way of the position paths and also having the front of the mesh facing values created with the look at paths. This works pretty good then, and what is also great is that I can use my use object method to get this to work with any kind of object including cameras.</p>
<h3 id="2-2-Objects-example"><a href="#2-2-Objects-example" class="headerlink" title="2.2 - Objects example"></a>2.2 - Objects example</h3><p>Another major change that I made with this module is worked out some better methods for creating the vector arrays that are then parked i the mesh objects user data object. In the draft prototypes I was doing this in a crude create mesh helper function that did not give many options when it comes to changing what the geometry is for the mesh and so forth. Now I have a way better method for creating mesh objects, but I am also doing the core actions that need to be preformed with my new use object method where I just give the SVG data result, an id prefix and then a camera that I want to create the vectors for in its user data object.</p>
<p>Simply put although I can use the create mesh object to quickly create a mesh with one of the built in geometry constructors, or a geometry that I have in the code of a project, I can also just create any object3d based object by any means and pass that to my use object method. So in this example I am once again creating a mesh object with the create mesh object method as before, but I am now also using my use object method with the camera of the demo.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Basic load SVG DEMO</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, RENDERER, LIGHT</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'#000000'</span>);</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    <span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// GRID</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> grid = <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>, <span class="number">0xffffff</span>, <span class="number">0xff0000</span>);</div><div class="line">    grid.material.linewidth = <span class="number">3</span>;</div><div class="line">    grid.material.transparent = <span class="literal">true</span>;</div><div class="line">    grid.material.opacity = <span class="number">0.25</span>;;</div><div class="line">    scene.add(grid);</div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = <span class="number">300</span>;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// mesh object to move</span></div><div class="line">    <span class="keyword">let</span> mesh1;</div><div class="line">    <span class="comment">// update</span></div><div class="line">    <span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        <span class="comment">// calling set to alpha here</span></div><div class="line">        SVGMove.setToAlpha(mesh1, frame / frameMax);</div><div class="line">        SVGMove.setToAlpha(camera, frame / frameMax);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SVG LOADER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// instantiate a loader</span></div><div class="line">    <span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.SVGLoader();</div><div class="line">    <span class="comment">// load a SVG resource</span></div><div class="line">    loader.load(</div><div class="line">        <span class="comment">// resource URL</span></div><div class="line">        <span class="string">'/forpost/threejs-examples-svg-movement/svg/obj1.svg'</span>,</div><div class="line">        <span class="comment">// called when the resource is loaded</span></div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"> data </span>) </span>&#123;</div><div class="line">            <span class="comment">// USE OBJECT METHOD SHOULD WORK WITH ANY OBJECT3D BASED OBJECT</span></div><div class="line">            <span class="comment">// SUCH AS A CAMERA</span></div><div class="line">            SVGMove.useObj(data, <span class="string">'cam1'</span>, camera);</div><div class="line">            <span class="comment">// CREATING A MESH OBJECT WITH SVG DATA FOR 'cone1' THAT</span></div><div class="line">            <span class="comment">// HAS BOTH 'pos', AND 'lookat' paths</span></div><div class="line">            mesh1 = SVGMove.createMesh(data, <span class="string">'cone1'</span>, &#123;</div><div class="line">                <span class="attr">con</span>: <span class="string">'Cone'</span>, <span class="attr">argu</span>: [<span class="number">0.5</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">5</span>],</div><div class="line">                <span class="attr">material</span>: <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;<span class="attr">wireframe</span>: <span class="literal">true</span>&#125;)</div><div class="line">            &#125;);</div><div class="line">            <span class="comment">// rotation geo once here so that it is pointing the way I want it</span></div><div class="line">            mesh1.geometry.rotateX(<span class="built_in">Math</span>.PI * <span class="number">0.5</span>);</div><div class="line">            scene.add(mesh1);</div><div class="line">            loop();</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// called when loading is in progresses</span></div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"> xhr </span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log( ( xhr.loaded / xhr.total * <span class="number">100</span> ) + <span class="string">'% loaded'</span> );</div><div class="line">        &#125;,</div><div class="line">        <span class="comment">// called when loading has errors</span></div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params"> error </span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log( <span class="string">'An error happened'</span> );</div><div class="line">            <span class="built_in">console</span>.log(error)</div><div class="line">        &#125;</div><div class="line">    );</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<p>The end result with this now is that both the cone mesh object as well as the camera are moving by way of SVG paths. This is more or less just what it is that I had in mind when it comes to this sort of thing, as I am always thinking in terms of having a better system for controlling the movement and rotation of a camera. I can then create all kinds of paths in SVG that will allow for real fine grain controls of camera movement and I can also use this kind of system for doing so with all kinds of values with cameras if I end up going that far in any and all future revisions of the module.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>That will be it for now then when it comes to this SVG Movement library that is a great way to go about moving objects around in a scene over time. Or at least it is for what I would like to use it for when it comes to my video projects to say the least. I am sure that there are other ways of doing this sort of thing that might work in a way that is maybe a bit more appropriate for the kind of situation that this is. I have been meaning to take another look at the Curve class that would be a starting point for some kind of alternative project that is another way of doing the same thing here. Although I am sure that such a system would work well I would have to store the data that I use with it as JSON rather than SVG. You see the plan here is to work out a real nice system where I can create the Paths that I want to use with a kind of simply 2d SVG editor and then use this data to display a 2d view of what the movements are and then also use that same data to update the position of the objects in the 3d scene as well.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2022/09/23/threejs-examples-svg-movement/" data-id="cle059rpx02chdwv1dtz0wp7k" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2022/09/23/threejs-examples-svg-movement/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/09/30/threejs-examples-animation-loop-module/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Animation Loop Framework threejs project example
        
      </div>
    </a>
  
  
    <a href="/2022/09/16/threejs-svg-loader/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">The SVG Loader in threejs</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2022/09/23/threejs-examples-svg-movement/index.html';
    this.page.identifier = '1006';
    this.page.title = 'Using SVG for movement of objects threejs example module';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 12.73px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/02/10/threejs-curves-cubicbeziercurve3/">Cubic Bezier Curves in threejs</a>
          </li>
        
          <li>
            <a href="/2023/02/03/threejs-buffer-geometry-morph-attributes/">Morph Attributes of buffer geometry objects</a>
          </li>
        
          <li>
            <a href="/2023/01/27/threejs-examples-house-two/">House Model two threejs project example</a>
          </li>
        
          <li>
            <a href="/2023/01/20/threejs-buffer-geometry-attributes-color/">Material Vertex Color and the buffer geometry attribute used for doing so</a>
          </li>
        
          <li>
            <a href="/2023/01/13/threejs-shader-material/">The shader material in threejs and getting started with a little GLSL</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2022/09/23/threejs-examples-svg-movement/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>