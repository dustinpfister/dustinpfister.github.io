<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Wrapping a vector3 instance in threejs | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2022/09/02/threejs-vector3-wrap/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Often I might be in a situation with a threejs project in which I would like to apply some kind of rules for Vector3 class instances that have to do with boundaries or limitations in terms of the poss">
<meta property="og:type" content="article">
<meta property="og:title" content="Wrapping a vector3 instance in threejs">
<meta property="og:url" content="https://dustinpfister.github.io/2022/09/02/threejs-vector3-wrap/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="Often I might be in a situation with a threejs project in which I would like to apply some kind of rules for Vector3 class instances that have to do with boundaries or limitations in terms of the poss">
<meta property="og:updated_time" content="2022-09-06T15:09:24.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wrapping a vector3 instance in threejs">
<meta name="twitter:description" content="Often I might be in a situation with a threejs project in which I would like to apply some kind of rules for Vector3 class instances that have to do with boundaries or limitations in terms of the poss">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-vector3-wrap" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/09/02/threejs-vector3-wrap/" class="article-date"> Published:
  <time datetime="2022-09-02T11:09:00.000Z" itemprop="datePublished">2022-09-02</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2022/09/02/threejs-vector3-wrap/" class="article-date"> Modified:
  <time datetime="2022-09-06T15:09:24.000Z" itemprop="dateModified">2022-09-06</time>
</a>

    <span class="article-date">V1.17</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Wrapping a vector3 instance in threejs
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>Often I might be in a situation with a <a href="https://threejs.org/docs/index.html#manual/en/introduction/Creating-a-scene" target="_blank" rel="external">threejs project</a> in which I would like to apply some kind of rules for <a href="/2018/04/15/threejs-vector3/">Vector3 class instances</a> that have to do with boundaries or limitations in terms of the possible range of values. In the past I have wrote one <a href="/2021/06/16/threejs-vector3-clamp/">blog post on the clamp method of the Vector3 class</a>, and that is one way to go about applying limitations. That is that when a vector goes out of a set range it will be clamped to a value that is within the range, and do so in a box kind of area as it is used by passing two vector3 class instances that define the lowermost and uppermost corners of the box. In that post I also wrote about the clamp length method that works by giving number values that define a min and max vector unit length. This is yet another option that works well, but then both work by clamping values rather than wrapping values. That is that some times when a Vector3 instance goes out of range I might not want to clamp it, but wrap it around to an opposite side of an area.</p>
<p>I covered the idea of wrapping rather than clamping in my older blog post on the clamp method, but I am thinking that this is a topic that does also deserve a content piece of its own as well. So today I will be writing about a few quick source code examples that have ti do with wrapping Vector3 class instances rather than clamping them.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/ytZkhOnqHCA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="Wrapping-Vector3-class-instances-in-threejs-and-what-to-know-first"><a href="#Wrapping-Vector3-class-instances-in-threejs-and-what-to-know-first" class="headerlink" title="Wrapping Vector3 class instances in threejs, and what to know first"></a>Wrapping Vector3 class instances in threejs, and what to know first</h2><p>There are a few things that you might want to read about first with threejs as well as core javaScript in general. When it comes to threejs there is of course the <a href="/2018/04/04/threejs-getting-started/">very basics of getting started with the library</a>, as well as specifics about the Vector3 class in general. When it comes to core javaScript there is a lot to wrote about when it comes to the built in modulo operator and what not to use in in many situations as well. I am not going to want to get into all of it in detail here in this post as I have done so in older posts on the subjects I am referring to. In this section I will just be briefly write about a few things to be aware of, and link to other content as needed.</p>
<h3 id="The-deal-with-javaScript-modulo"><a href="#The-deal-with-javaScript-modulo" class="headerlink" title="The deal with javaScript modulo"></a>The deal with javaScript modulo</h3><p>A long time ago I wrote a <a href="/2017/09/02/js-whats-wrong-with-modulo/">blog post on the built in modulo operator</a> in core javaScript and what it wrong with it. In truth there is not really anything wrong with the operator actually it is just that it works a little differently from what many developers might be used to when it comes to dealing with negative numbers. So then there is knowing how to go about adding what is often called mathematical modulo, or euclidean modulo to a JavaScript environment. There are many quick copy and past methods when it comes to vanilla javaScript, however if threejs is there to work with there is all ready a <a href="https://threejs.org/docs/index.html#api/en/math/MathUtils.euclideanModulo" target="_blank" rel="external">euclidean modulo method in the math utils object</a> as well that can be used.</p>
<h3 id="The-Math-utils-object-in-threejs"><a href="#The-Math-utils-object-in-threejs" class="headerlink" title="The Math utils object in threejs"></a>The Math utils object in threejs</h3><p>In these examples on wrapping a vector in threejs I am making use of a method in the math utils object in threejs that is a kind of modulo operation that differs from what is baked into javaScript itself. There are a number of other methods to be aware of in the math utils object also, so it would be a good idea to <a href="/2022/04/11/threejs-math-utils/">look into the math utils object more</a> if you have not done so before hand. Many of the methods are usual suspect type methods that I would use, but there is also a few methods that I would like to see there but they are missing, one of which would be a wrap method at least as of r140 backward. That’s okay though as maybe many of the methods should actaully be part of some other library actually that can be used with threejs or any javaScript project for that matter.</p>
<h3 id="Making-a-custom-cut-utility-libaray-with-a-wrap-method"><a href="#Making-a-custom-cut-utility-libaray-with-a-wrap-method" class="headerlink" title="Making a custom cut utility libaray with a wrap method"></a>Making a custom cut utility libaray with a wrap method</h3><p>When I was working on a whole bunch of vanilla <a href="/2021/08/06/js-javascript-example-utils/">javaScript projects I started a general utilities library</a> that just contains a collection of methods that I find myself copying nad pasting from one project to another. One of the methods in the library is a wrap method, along with a clamp method as well. </p>
<h3 id="Wrap-methods-in-other-libraries"><a href="#Wrap-methods-in-other-libraries" class="headerlink" title="Wrap methods in other libraries"></a>Wrap methods in other libraries</h3><p>In the Math object of the <a href="/2018/07/22/phaser-math-wrap-and-clamp/">Game Framework called Phaser there is a wrap method</a>, and I have found that method works okay with a few exceptions with certain sets of arguments. In any cases there is looking into the source code of various projects that have libraries like this to see how they are preforming a certain kind of task such as this.</p>
<h3 id="Source-code-is-on-Github"><a href="#Source-code-is-on-Github" class="headerlink" title="Source code is on Github"></a>Source code is on Github</h3><p>The source code examples that I am writing about here can also be found in my <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-vector3-wrap" target="_blank" rel="external">test threejs</a> repo.</p>
<h3 id="Version-numbers-matter"><a href="#Version-numbers-matter" class="headerlink" title="Version numbers matter"></a>Version numbers matter</h3><p>I was using r140 of threejs when I first wrote this post.</p>
<h2 id="1-The-deal-with-modulo-and-wrapping-values"><a href="#1-The-deal-with-modulo-and-wrapping-values" class="headerlink" title="1 - The deal with modulo and wrapping values"></a>1 - The deal with modulo and wrapping values</h2><p>First off here is a quick example that helps to show what the deal is with the built in javaScript modulo operator compared to using the euclidean modulo method in the math utils object. I have two sets of mesh objects that I would like to wrap, and I am trying to do so by just using modulo alone. When I use the core javaScript modulo operator the end result is that I get the outcome that I want, but only with positive numbers, negative numbers result in the object going out of the desired range. When I use the euclidean modulo method I do get a desired outcome where the mesh object loops back around within the desired range.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>));</div><div class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">.5</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">var</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// MESH</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    mesh1.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">-3</span>);</div><div class="line">    scene.add(mesh1);</div><div class="line">    <span class="keyword">var</span> mesh2 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    mesh2.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">-2</span>);</div><div class="line">    scene.add(mesh2);</div><div class="line">    <span class="keyword">var</span> mesh3 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    mesh3.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>);</div><div class="line">    scene.add(mesh3);</div><div class="line">    <span class="keyword">var</span> mesh4 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    mesh4.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>);</div><div class="line">    scene.add(mesh4);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LOOP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> frame = <span class="number">0</span>,</div><div class="line">    maxFrame = <span class="number">300</span>,</div><div class="line">    fps = <span class="number">20</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>,</div><div class="line">        per = frame / maxFrame,</div><div class="line">        bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - per) / <span class="number">0.5</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span> (secs &gt; <span class="number">1</span> / fps) &#123;</div><div class="line">            mesh1.position.x -= <span class="number">5</span> * secs;</div><div class="line">            mesh1.position.x %= <span class="number">5</span>;</div><div class="line">            mesh2.position.x += <span class="number">5</span> * secs;</div><div class="line">            mesh2.position.x %= <span class="number">5</span>;</div><div class="line">            mesh3.position.x -= <span class="number">5</span> * secs;</div><div class="line">            mesh3.position.x = THREE.MathUtils.euclideanModulo(mesh3.position.x, <span class="number">5</span>);</div><div class="line">            mesh4.position.x += <span class="number">5</span> * secs;</div><div class="line">            mesh4.position.x = THREE.MathUtils.euclideanModulo(mesh4.position.x, <span class="number">5</span>);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            frame += fps * secs;</div><div class="line">            frame %= maxFrame;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<p>However even though things are working the way that I want them to with the euclidean modulo method it is still working in a way that is relative to zero forward rather than in a way that can work with a range that might go into negative numbers. Still the general idea of wrapping is there, from here forward I just need to find ways to adjust the range.</p>
<h2 id="2-A-Wrap-Axis-method"><a href="#2-A-Wrap-Axis-method" class="headerlink" title="2 - A Wrap Axis method"></a>2 - A Wrap Axis method</h2><p>The process of making a wrap method from the ground up might prove to be a little involved, at least when it comes to making one from the ground up without looking into what is out there on the open Internet at least. In any case there is taking an approach in which I am figuring out that I need to do on a axis by axis bases which just seems like the thing to do. Wjat is good about this is that once I figure out something that works well for one axis, then it is generally just a mater of applying the same logic to all other axis values, at least that would seem to be the case with this anyway with respect to the way that I want to do it.</p>
<h3 id="2-1-Using-the-distance-to-method-along-with-euclidean-modulo"><a href="#2-1-Using-the-distance-to-method-along-with-euclidean-modulo" class="headerlink" title="2.1 - Using the distance to method along with euclidean modulo"></a>2.1 - Using the distance to method along with euclidean modulo</h3><p>The code that I worked out for this solution involves making two instances of the Vector2 class and then calling the distance to method of each to get an idea of what the max distance from 0 is as well as the current distance is. Once I have these two values I can use them with the euclidean modulo method to get how mush I need to add to the min vector or subtract from the max vector for the current axis.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">4</span>, <span class="number">4</span>));</div><div class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">.5</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">var</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// mod method</span></div><div class="line">    <span class="keyword">var</span> mod = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> THREE.MathUtils.euclideanModulo(a, b);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// wrap and axis</span></div><div class="line">    <span class="keyword">var</span> wrapAxis = <span class="function"><span class="keyword">function</span>(<span class="params">vec, vecMin, vecMax, axis</span>)</span>&#123;</div><div class="line">        axis = axis || <span class="string">'x'</span>;</div><div class="line">        <span class="keyword">var</span> maxD = <span class="keyword">new</span> THREE.Vector2(vecMin[axis], <span class="number">0</span>).distanceTo( <span class="keyword">new</span> THREE.Vector2(vecMax[axis], <span class="number">0</span>) );</div><div class="line">        <span class="keyword">var</span> d = <span class="keyword">new</span> THREE.Vector2(vec[axis], <span class="number">0</span>).distanceTo( <span class="keyword">new</span> THREE.Vector2(vecMin[axis], <span class="number">0</span>) );</div><div class="line">        <span class="keyword">if</span>(maxD === <span class="number">0</span>)&#123;</div><div class="line">           vec[axis] = <span class="number">0</span>;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">if</span>(vec[axis] &gt;= vecMax[axis])&#123;</div><div class="line">                vec[axis] = vecMin[axis] + mod(d, maxD);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(vec[axis] &lt; vecMin[axis])&#123;</div><div class="line">                vec[axis] = vecMax[axis] - mod(d, maxD);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// MESH</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    mesh1.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(mesh1);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LOOP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> vMin = <span class="keyword">new</span> THREE.Vector3(<span class="number">-2</span>, <span class="number">0</span>, <span class="number">0</span>),</div><div class="line">    vMax  = <span class="keyword">new</span> THREE.Vector3(<span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">var</span> frame = <span class="number">0</span>,</div><div class="line">    maxFrame = <span class="number">300</span>,</div><div class="line">    fps = <span class="number">20</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>,</div><div class="line">        per = frame / maxFrame,</div><div class="line">        bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - per) / <span class="number">0.5</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span> (secs &gt; <span class="number">1</span> / fps) &#123;</div><div class="line">            <span class="comment">// warp one axis</span></div><div class="line">            mesh1.position.x += (<span class="number">-5</span> + <span class="number">10</span> * bias) * secs</div><div class="line">            wrapAxis(mesh1.position, vMin, vMax, <span class="string">'x'</span>);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            frame += fps * secs;</div><div class="line">            frame %= maxFrame;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h3 id="2-2-Wrap-Axis-method-based-off-the-Math-Wrap-method-from-Phaser"><a href="#2-2-Wrap-Axis-method-based-off-the-Math-Wrap-method-from-Phaser" class="headerlink" title="2.2 - Wrap Axis method based off the Math.Wrap method from Phaser"></a>2.2 - Wrap Axis method based off the Math.Wrap method from Phaser</h3><p>I have wrote a blog post or two on the game framework called Phaser in the past and I remember that the math object of the <a href="https://github.com/photonstorm/phaser/blob/v3.55.2/src/math/Wrap.js" target="_blank" rel="external">framework has a wrap method</a>. This method does seem to work the way that I would want it to, but with a few exceptions one of which has to do with NaN values when given the value 0 for the min or max values of the range that i would like to wrap to. This can be fixed fairly easily though of course by just adding some code that will return 0 for such a case of course. While I am at it there is also making use of the Math.min and Math.max methods to I do not have to worry so much about the order of the arguments when calling the method.</p>
<p>The end result is a warp method that I like better that the more complex solution involving the distance to method, that still seems to give the same end results for the <a href="/2021/07/27/js-function-domain/">domain that I given the function</a> thus far.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">4</span>, <span class="number">4</span>));</div><div class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">.5</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">var</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// Wrap method based off of the method from Phaser3 </span></div><div class="line">    <span class="comment">// ( https://github.com/photonstorm/phaser/blob/v3.55.2/src/math/Wrap.js )</span></div><div class="line">    <span class="comment">// * Added some code for case: Wrap(0, 0, 0)</span></div><div class="line">    <span class="comment">// * Using Math.min and Math.max so that Wrap(value, 2, 10) is same as Wrap(value, 10, 2)</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="keyword">var</span> wrap = <span class="function"><span class="keyword">function</span> (<span class="params">value, a, b</span>)</span>&#123;</div><div class="line">        <span class="comment">// get min and max this way</span></div><div class="line">        <span class="keyword">var</span> max = <span class="built_in">Math</span>.max(a, b);</div><div class="line">        <span class="keyword">var</span> min = <span class="built_in">Math</span>.min(a, b);</div><div class="line">        <span class="comment">// return 0 for Wrap(value, 0, 0);</span></div><div class="line">        <span class="keyword">if</span>(max === <span class="number">0</span> &amp;&amp; min === <span class="number">0</span>)&#123;</div><div class="line">             <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> range = max - min;</div><div class="line">        <span class="keyword">return</span> (min + ((((value - min) % range) + range) % range));</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// wrap an axis</span></div><div class="line">    <span class="keyword">var</span> wrapAxis = <span class="function"><span class="keyword">function</span>(<span class="params">vec, vecMin, vecMax, axis</span>)</span>&#123;</div><div class="line">        axis = axis || <span class="string">'x'</span>;</div><div class="line">        vec[axis] = wrap( vec[axis], vecMin[axis], vecMax[axis] );</div><div class="line">        <span class="keyword">return</span> vec;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// MESH</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    mesh1.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(mesh1);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LOOP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> vMin = <span class="keyword">new</span> THREE.Vector3(<span class="number">-2</span>, <span class="number">0</span>, <span class="number">0</span>),</div><div class="line">    vMax  = <span class="keyword">new</span> THREE.Vector3(<span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">var</span> frame = <span class="number">0</span>,</div><div class="line">    maxFrame = <span class="number">300</span>,</div><div class="line">    fps = <span class="number">20</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>,</div><div class="line">        per = frame / maxFrame,</div><div class="line">        bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - per) / <span class="number">0.5</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span> (secs &gt; <span class="number">1</span> / fps) &#123;</div><div class="line">            <span class="comment">// warp one axis</span></div><div class="line">            mesh1.position.x += (<span class="number">-5</span> + <span class="number">10</span> * bias) * secs</div><div class="line">            wrapAxis(mesh1.position, vMin, vMax, <span class="string">'x'</span>);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            frame += fps * secs;</div><div class="line">            frame %= maxFrame;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="3-A-Wrap-vector3-class-instance-method"><a href="#3-A-Wrap-vector3-class-instance-method" class="headerlink" title="3 - A Wrap vector3 class instance method"></a>3 - A Wrap vector3 class instance method</h2><p>Now that I have a method that seems to work okay for one axis all I need to do to make a wrap method for Vector3 is to just call the method for each axis. What is great about this is that in order to make solutions that will also work for the Vector2 class the only major change is to just call the wrap axis for x and y only when making the wrap vector method. Also if I put more time into researching other solutions for this, and fine a better way of wrapping an axis, I can just recreate the wrap axis method, and leave everything else as is.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">4</span>, <span class="number">4</span>));</div><div class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">.5</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">var</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// Wrap method based off of the method from Phaser3 </span></div><div class="line">    <span class="comment">// ( https://github.com/photonstorm/phaser/blob/v3.55.2/src/math/Wrap.js )</span></div><div class="line">    <span class="comment">// * Added some code for case: Wrap(0, 0, 0)</span></div><div class="line">    <span class="comment">// * Using Math.min and Math.max so that Wrap(value, 2, 10) is same as Wrap(value, 10, 2)</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="keyword">var</span> wrap = <span class="function"><span class="keyword">function</span> (<span class="params">value, a, b</span>)</span>&#123;</div><div class="line">        <span class="comment">// get min and max this way</span></div><div class="line">        <span class="keyword">var</span> max = <span class="built_in">Math</span>.max(a, b);</div><div class="line">        <span class="keyword">var</span> min = <span class="built_in">Math</span>.min(a, b);</div><div class="line">        <span class="comment">// return 0 for Wrap(value, 0, 0);</span></div><div class="line">        <span class="keyword">if</span>(max === <span class="number">0</span> &amp;&amp; min === <span class="number">0</span>)&#123;</div><div class="line">             <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> range = max - min;</div><div class="line">        <span class="keyword">return</span> (min + ((((value - min) % range) + range) % range));</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// wrap an axis</span></div><div class="line">    <span class="keyword">var</span> wrapAxis = <span class="function"><span class="keyword">function</span>(<span class="params">vec, vecMin, vecMax, axis</span>)</span>&#123;</div><div class="line">        axis = axis || <span class="string">'x'</span>;</div><div class="line">        vec[axis] = wrap( vec[axis], vecMin[axis], vecMax[axis] );</div><div class="line">        <span class="keyword">return</span> vec;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// wrap a vector</span></div><div class="line">    <span class="keyword">var</span> wrapVector = <span class="function"><span class="keyword">function</span> (<span class="params">vec, vecMin, vecMax</span>) </span>&#123;</div><div class="line">        vecMin = vecMin || <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        vecMax = vecMax || <span class="keyword">new</span> THREE.Vector3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">        wrapAxis(vec, vecMin, vecMax, <span class="string">'x'</span>);</div><div class="line">        wrapAxis(vec, vecMin, vecMax, <span class="string">'y'</span>);</div><div class="line">        wrapAxis(vec, vecMin, vecMax, <span class="string">'z'</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create group</span></div><div class="line">    <span class="keyword">var</span> createGroup = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">        len = <span class="number">50</span>;</div><div class="line">        <span class="keyword">while</span> (i &lt; len) &#123;</div><div class="line">            <span class="keyword">var</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.0</span>), </div><div class="line">                <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;</div><div class="line">                    <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">opacity</span>: <span class="number">0.60</span></div><div class="line">                &#125;)</div><div class="line">            );</div><div class="line">            mesh.position.x = <span class="number">-2</span> + <span class="number">4</span> * <span class="built_in">Math</span>.random();</div><div class="line">            mesh.position.y = <span class="number">-2</span> + <span class="number">4</span> * <span class="built_in">Math</span>.random();</div><div class="line">            mesh.position.z = <span class="number">-2</span> + <span class="number">4</span> * <span class="built_in">Math</span>.random();</div><div class="line">            group.add(mesh);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> group;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update a group</span></div><div class="line">    <span class="keyword">var</span> updateGroup = <span class="function"><span class="keyword">function</span> (<span class="params">group, secs, bias</span>) </span>&#123;</div><div class="line">       group.children.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">mesh</span>)</span>&#123;</div><div class="line">            mesh.position.x += (<span class="number">2</span> - <span class="number">4</span> * bias) * secs;</div><div class="line">            mesh.position.y += (<span class="number">-2</span> + <span class="number">4</span> * bias ) * secs;</div><div class="line">            mesh.position.z += <span class="number">2</span> * secs;</div><div class="line">            wrapVector(</div><div class="line">                mesh.position,</div><div class="line">                <span class="keyword">new</span> THREE.Vector3(<span class="number">-2</span>, <span class="number">-2</span>, <span class="number">-2</span>),</div><div class="line">                <span class="keyword">new</span> THREE.Vector3(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>));</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LOOP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> group = createGroup();</div><div class="line">    scene.add(group);</div><div class="line">    <span class="keyword">var</span> frame = <span class="number">0</span>,</div><div class="line">    maxFrame = <span class="number">300</span>,</div><div class="line">    fps = <span class="number">20</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>,</div><div class="line">        per = frame / maxFrame,</div><div class="line">        bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - per) / <span class="number">0.5</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span> (secs &gt; <span class="number">1</span> / fps) &#123;</div><div class="line">            updateGroup(group, secs, bias)</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            frame += fps * secs;</div><div class="line">            frame %= maxFrame;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="4-A-wrap-Vector-module-and-some-demos"><a href="#4-A-wrap-Vector-module-and-some-demos" class="headerlink" title="4 - A wrap Vector module and some demos"></a>4 - A wrap Vector module and some demos</h2><p>Having a wrap vector method seems like the kind of tool that I would want to take with me from project to project. So then in this section I will be writing about the start of a wrap vector module that I might turn into a separate full blown project that I will make one of my threejs example posts.  There are a few ideas that come to mind for advanced features, but for now I think this module might just need to have one public method that will wrap a vector that I give it. On top of that I might want to also make a wrap number method public as well while I am at it so for now maybe that will be it for this project, as far as this post goes at least anyway.</p>
<h3 id="4-0-A-wrap-Vector-module"><a href="#4-0-A-wrap-Vector-module" class="headerlink" title="4.0 - A wrap Vector module"></a>4.0 - A wrap Vector module</h3><p>The module that I have together then thus far just makes use of the wrap method based off of the one from Phaser, along with the wrap axis method. I then create a public api that is a function and make the main function of the module the wrap vector method. I am thinking that will be the main feature of interest with this that I will be using over and over again in projects, so maybe that is all that I need to do with this one for the most part. The only other thing that I did is make the wrap method public as I might want to do this sort of thing with a number rather than a vector class instance in some cases.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* vector-wrap.js - r0 - A Wrap Vector Module prototype </span></div><div class="line"> *     for the post: https://dustinpfister.github.io/2022/09/02/threejs-vector3-wrap</div><div class="line"> * </div><div class="line"> *</div><div class="line"> */</div><div class="line"><span class="keyword">var</span> wrapVector = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// Wrap method based off of the method from Phaser3 </span></div><div class="line">    <span class="comment">// ( https://github.com/photonstorm/phaser/blob/v3.55.2/src/math/Wrap.js )</span></div><div class="line">    <span class="comment">// * Added some code for case: Wrap(0, 0, 0)</span></div><div class="line">    <span class="comment">// * Using Math.min and Math.max so that Wrap(value, 2, 10) is same as Wrap(value, 10, 2)</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="keyword">var</span> wrap = <span class="function"><span class="keyword">function</span> (<span class="params">value, a, b</span>)</span>&#123;</div><div class="line">        <span class="comment">// get min and max this way</span></div><div class="line">        <span class="keyword">var</span> max = <span class="built_in">Math</span>.max(a, b);</div><div class="line">        <span class="keyword">var</span> min = <span class="built_in">Math</span>.min(a, b);</div><div class="line">        <span class="comment">// return 0 for Wrap(value, 0, 0);</span></div><div class="line">        <span class="keyword">if</span>(max === <span class="number">0</span> &amp;&amp; min === <span class="number">0</span>)&#123;</div><div class="line">             <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> range = max - min;</div><div class="line">        <span class="keyword">return</span> (min + ((((value - min) % range) + range) % range));</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// wrap an axis</span></div><div class="line">    <span class="keyword">var</span> wrapAxis = <span class="function"><span class="keyword">function</span>(<span class="params">vec, vecMin, vecMax, axis</span>)</span>&#123;</div><div class="line">        axis = axis || <span class="string">'x'</span>;</div><div class="line">        vec[axis] = wrap( vec[axis], vecMin[axis], vecMax[axis] );</div><div class="line">        <span class="keyword">return</span> vec;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// Main wrap a vector method of public api</span></div><div class="line">    <span class="keyword">var</span> api = <span class="function"><span class="keyword">function</span> (<span class="params">vec, vecMin, vecMax</span>) </span>&#123;</div><div class="line">        vecMin = vecMin || <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        vecMax = vecMax || <span class="keyword">new</span> THREE.Vector3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">        <span class="built_in">Object</span>.keys(vec).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">axis</span>)</span>&#123;</div><div class="line">            wrapAxis(vec, vecMin, vecMax, axis);</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> vec;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// make wrap method public</span></div><div class="line">    api.wrap = wrap;</div><div class="line">    <span class="comment">// return api</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="4-1-Basic-demo-of-the-module"><a href="#4-1-Basic-demo-of-the-module" class="headerlink" title="4.1 - Basic demo of the module"></a>4.1 - Basic demo of the module</h3><p>A basic example of the module will now work by setting something up like this one. Here I just have two mesh objects and I would like to wrap them both to the same set of vectors as I move them around. Thus far the module seems to work just fine with this simple hello world type example, but now I would like to move on to something a little more involved.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// works well with Vector2</span></div><div class="line">    <span class="keyword">var</span> v = <span class="keyword">new</span> THREE.Vector2(<span class="number">5</span>, <span class="number">2</span>);</div><div class="line">    <span class="built_in">console</span>.log( wrapVector( v , <span class="keyword">new</span> THREE.Vector2(<span class="number">-3</span>, <span class="number">-3</span>), <span class="keyword">new</span> THREE.Vector2(<span class="number">3</span>, <span class="number">3</span>) ) );</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">4</span>, <span class="number">4</span>));</div><div class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">.5</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">var</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// MESH</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    mesh1.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(mesh1);</div><div class="line">    <span class="keyword">var</span> mesh2 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    mesh2.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">-1.5</span>);</div><div class="line">    scene.add(mesh2);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LOOP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> vMin = <span class="keyword">new</span> THREE.Vector3(<span class="number">-2</span>, <span class="number">-1</span>, <span class="number">-2</span>),</div><div class="line">    vMax  = <span class="keyword">new</span> THREE.Vector3(<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>);</div><div class="line">    <span class="keyword">var</span> frame = <span class="number">0</span>,</div><div class="line">    maxFrame = <span class="number">300</span>,</div><div class="line">    fps = <span class="number">20</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>,</div><div class="line">        per = frame / maxFrame,</div><div class="line">        bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - per) / <span class="number">0.5</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span> (secs &gt; <span class="number">1</span> / fps) &#123;</div><div class="line">            <span class="comment">// warp one axis</span></div><div class="line">            mesh1.position.x += (<span class="number">-5</span> + <span class="number">10</span> * bias) * secs;</div><div class="line">            mesh2.position.y += (<span class="number">-5</span> + <span class="number">10</span> * bias) * secs;</div><div class="line">            <span class="comment">// wrap vector</span></div><div class="line">            wrapVector(mesh1.position, vMin, vMax);</div><div class="line">            wrapVector(mesh2.position, vMin, vMax);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            frame += fps * secs;</div><div class="line">            frame %= maxFrame;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h3 id="4-2-Seeded-Random-example"><a href="#4-2-Seeded-Random-example" class="headerlink" title="4.2 - Seeded Random example"></a>4.2 - Seeded Random example</h3><p>For this example I made a few functions that will create and update a group of mesh objects. When I create a group I can set some data with the user data objects for the group as well as each mesh object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">4</span>, <span class="number">4</span>));</div><div class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">.5</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">var</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// create group</span></div><div class="line">    <span class="keyword">var</span> createGroup = <span class="function"><span class="keyword">function</span> (<span class="params">count, spread, ppsMin, ppsMax, meshSize, boundSize, gitDir</span>) </span>&#123;</div><div class="line">        spread = spread === <span class="literal">undefined</span> ? <span class="number">5</span> : spread;</div><div class="line">        count = count === <span class="literal">undefined</span> ? <span class="number">50</span> : count;</div><div class="line">        ppsMin = ppsMin === <span class="literal">undefined</span> ? <span class="number">0.5</span> : ppsMin;</div><div class="line">        ppsMax = ppsMax === <span class="literal">undefined</span> ? <span class="number">2</span> : ppsMax;</div><div class="line">        meshSize = meshSize === <span class="literal">undefined</span> ? <span class="number">1</span> : meshSize;</div><div class="line">        boundSize = boundSize === <span class="literal">undefined</span> ? <span class="number">4</span> : boundSize;</div><div class="line">        <span class="keyword">var</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">        <span class="keyword">var</span> gud = group.userData;</div><div class="line">        gud.meshSize = meshSize;</div><div class="line">        gud.boundSize = boundSize;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (i &lt; count) &#123;</div><div class="line">            <span class="keyword">var</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(gud.meshSize, gud.meshSize, gud.meshSize), </div><div class="line">                <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123;</div><div class="line">                    <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">opacity</span>: <span class="number">0.60</span></div><div class="line">                &#125;)</div><div class="line">            );</div><div class="line">            <span class="comment">// start position</span></div><div class="line">            mesh.position.x = spread * THREE.MathUtils.seededRandom();</div><div class="line">            mesh.position.y = spread * THREE.MathUtils.seededRandom();</div><div class="line">            mesh.position.z = spread * THREE.MathUtils.seededRandom();</div><div class="line">            <span class="comment">// user data values, pps and direction</span></div><div class="line">            <span class="keyword">var</span> ud = mesh.userData;</div><div class="line">            ud.pps = ppsMin + (ppsMax - ppsMin) * THREE.MathUtils.seededRandom();</div><div class="line">            ud.dir = gitDir ? gitDir(group, mesh, i) : <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>).normalize();</div><div class="line">            group.add(mesh);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> group;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update a group</span></div><div class="line">    <span class="keyword">var</span> updateGroup = <span class="function"><span class="keyword">function</span> (<span class="params">group, secs, bias</span>) </span>&#123;</div><div class="line">       <span class="keyword">var</span> gud = group.userData;</div><div class="line">       <span class="keyword">var</span> bs = gud.boundSize / <span class="number">2</span>;</div><div class="line">       <span class="keyword">var</span> ms = gud.meshSize / <span class="number">2</span>;</div><div class="line">       <span class="keyword">var</span> a = bs * <span class="number">-1</span> + ms;</div><div class="line">       <span class="keyword">var</span> b = bs - ms;</div><div class="line">       <span class="keyword">var</span> vMin = <span class="keyword">new</span> THREE.Vector3(a, a, a);</div><div class="line">       <span class="keyword">var</span> vMax = <span class="keyword">new</span> THREE.Vector3(b, b, b);</div><div class="line">       group.children.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">mesh</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> ud = mesh.userData;</div><div class="line">            mesh.position.x += ud.dir.x * ud.pps * secs;</div><div class="line">            mesh.position.y += ud.dir.y * ud.pps * secs;</div><div class="line">            mesh.position.z += ud.dir.z * ud.pps * secs;</div><div class="line">            wrapVector(</div><div class="line">                mesh.position,</div><div class="line">                vMin,</div><div class="line">                vMax);</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LOOP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">var</span> controls = <span class="keyword">new</span> THREE.OrbitControls(camera, renderer.domElement);</div><div class="line">    <span class="comment">// group1 uses default values</span></div><div class="line">    <span class="keyword">var</span> group1 = createGroup();</div><div class="line">    scene.add(group1);</div><div class="line">    <span class="comment">// group2 uses custom values</span></div><div class="line">    <span class="keyword">var</span> group2 = createGroup(<span class="number">100</span>, <span class="number">5</span>, <span class="number">0.125</span>, <span class="number">0.25</span>, <span class="number">0.25</span>, <span class="number">4</span>, () =&gt; &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> THREE.Vector3(</div><div class="line">            <span class="number">-5</span> + <span class="number">10</span> * THREE.MathUtils.seededRandom(),</div><div class="line">            <span class="number">-5</span> + <span class="number">10</span> * THREE.MathUtils.seededRandom(),</div><div class="line">            <span class="number">-5</span> + <span class="number">10</span> * THREE.MathUtils.seededRandom());</div><div class="line">    &#125;);</div><div class="line">    group2.position.set(<span class="number">-7</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(group2);</div><div class="line">    <span class="keyword">var</span> frame = <span class="number">0</span>,</div><div class="line">    maxFrame = <span class="number">300</span>,</div><div class="line">    fps = <span class="number">20</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>,</div><div class="line">        per = frame / maxFrame,</div><div class="line">        bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - per) / <span class="number">0.5</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span> (secs &gt; <span class="number">1</span> / fps) &#123;</div><div class="line">            updateGroup(group1, secs, bias);</div><div class="line">            updateGroup(group2, secs, bias);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            frame += fps * secs;</div><div class="line">            frame %= maxFrame;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Wrapping Vectors is something that I do find myself doing over and over again as a way to limit vectors to a given range. I have made a whole lot of projects that do something to this effect one of which I find myself using a whole lot when I make my various little video projects that I call my “object grid wrap module”. When it comes to that project I am just using the Euclidean Modulo method to do so by wrapping given values to a range of 0 and 1 and then use those values to set the position of objects in a grid. That kind of system seems to work well also on top of having some kind of function that will wrap a vector directly like I did with my main wrap method example in this post.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2022/09/02/threejs-vector3-wrap/" data-id="cl7vyxqr502o20gv1ja8mmlof" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2022/09/02/threejs-vector3-wrap/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/09/09/threejs-examples-wrap-module/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          threejs wrap module example for wrapping rather than clamping values
        
      </div>
    </a>
  
  
    <a href="/2022/08/26/threejs-examples-many-object-tweening/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Tweening many objects at once threejs example</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2022/09/02/threejs-vector3-wrap/index.html';
    this.page.identifier = '1003';
    this.page.title = 'Wrapping a vector3 instance in threejs';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.5px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.5px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.5px;">angular</a> <a href="/tags/animation/" style="font-size: 12px;">animation</a> <a href="/tags/automation/" style="font-size: 12px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.5px;">backbone</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.5px;">canvas</a> <a href="/tags/corejs/" style="font-size: 13px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.5px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.5px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.5px;">express</a> <a href="/tags/games/" style="font-size: 17px;">games</a> <a href="/tags/git/" style="font-size: 13px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 12px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.5px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.5px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.5px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.5px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.5px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.5px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.5px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.5px;">python</a> <a href="/tags/statistics/" style="font-size: 14px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/09/09/threejs-examples-wrap-module/">threejs wrap module example for wrapping rather than clamping values</a>
          </li>
        
          <li>
            <a href="/2022/09/02/threejs-vector3-wrap/">Wrapping a vector3 instance in threejs</a>
          </li>
        
          <li>
            <a href="/2022/08/26/threejs-examples-many-object-tweening/">Tweening many objects at once threejs example</a>
          </li>
        
          <li>
            <a href="/2022/08/19/electronjs-example-user-data-file/">User Data File Electronjs application example</a>
          </li>
        
          <li>
            <a href="/2022/08/12/threejs-cylinder-geometry/">Cylinder Geometry threejs example</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2022/09/02/threejs-vector3-wrap/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>