<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Indexed Buffer Geometry in threejs | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2022/12/09/threejs-buffer-geometry-index/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="The index property of a buffer geometry instance in threejs is a way to define an array of index values in a position attribute that will be used to draw triangles. Simply put it is a way to reuse poi">
<meta property="og:type" content="article">
<meta property="og:title" content="Indexed Buffer Geometry in threejs">
<meta property="og:url" content="https://dustinpfister.github.io/2022/12/09/threejs-buffer-geometry-index/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="The index property of a buffer geometry instance in threejs is a way to define an array of index values in a position attribute that will be used to draw triangles. Simply put it is a way to reuse poi">
<meta property="og:updated_time" content="2023-05-23T14:51:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Indexed Buffer Geometry in threejs">
<meta name="twitter:description" content="The index property of a buffer geometry instance in threejs is a way to define an array of index values in a position attribute that will be used to draw triangles. Simply put it is a way to reuse poi">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-buffer-geometry-index" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/12/09/threejs-buffer-geometry-index/" class="article-date"> Published:
  <time datetime="2022-12-09T14:22:00.000Z" itemprop="datePublished">2022-12-09</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2022/12/09/threejs-buffer-geometry-index/" class="article-date"> Modified:
  <time datetime="2023-05-23T14:51:00.000Z" itemprop="dateModified">2023-05-23</time>
</a>

    <span class="article-date">V1.13</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Indexed Buffer Geometry in threejs
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>The <a href="https://threejs.org/docs/#api/en/core/BufferGeometry.index" target="_blank" rel="external">index property of a buffer geometry instance in threejs</a> is a way to define an array of index values in a <a href="/2021/06/07/threejs-buffer-geometry-attributes-position/">position attribute</a> that will be used to draw triangles. Simply put it is a way to reuse points stored in the position attribute so that the over all length of the array in the position attribute is lower than it would otherwise have to be. The main reason why I might want to have a geometry indexed is to save memory when it comes to geometries with a lot of points in them. Also it would help to reduce the amount of overhead it would take to update geometry also a little as it is less points that have to be looped over in order to do so. </p>
<p>However there are also some draw backs with this as well that have to do with the state of the <a href="/2021/06/08/threejs-buffer-geometry-attributes-normals/">normal attribute</a> the corresponds with the position attribute for example. Also because I am reusing points any kind of effect that has to do with exploding a geometry into a hole bunch of single triangles is not possible as the points are being reused. It is not so hard to convert an index geometry to a non indexed one though, doing so involves just calling the to non indexed method of the buffer geometry class. Things might be a little involved when it comes to the other way around though as it will involve creating a buffer attribute instance and using the set index method.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/x-qV4hYJLOA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="The-Index-property-of-buffer-geometry-and-what-to-know-first"><a href="#The-Index-property-of-buffer-geometry-and-what-to-know-first" class="headerlink" title="The Index property of buffer geometry and what to know first"></a>The Index property of buffer geometry and what to know first</h2><p>The index property if an advanced topic in threejs that hs to do with how to go about reusing points that are defined I the position attribute of a buffer geometry. It should go without saying then that this is not a <a href="/2018/04/04/threejs-getting-started/">good starting point for people that are new to threejs</a>, let alone JavaScript in general. I am the assuming that you know a thing or two about the basics of setting up a threejs project, as well a various other things that have to do with client side web development. I will not be getting into every little detail that you should know before hand at this point, but I do like to use these opening sections to write about a few things you might want to read up more on before continuing to read the rest of this post.</p>
<h3 id="Read-More-on-Buffer-geometry-in-general"><a href="#Read-More-on-Buffer-geometry-in-general" class="headerlink" title="Read More on Buffer geometry in general"></a>Read More on Buffer geometry in general</h3><p>The index property if just one little feature of a buffer geometry object in threejs. There is a great deal more to be aware of when it comes to buffer geometry, so you might want to check out my <a href="/2021/04/22/threejs-buffer-geometry/">main post on buffer geometry in general</a>.</p>
<h3 id="Source-Code-is-up-on-Github"><a href="#Source-Code-is-up-on-Github" class="headerlink" title="Source Code is up on Github"></a>Source Code is up on Github</h3><p>The examples that I write about in this post can also <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-buffer-geometry-index" target="_blank" rel="external">be found on my Github</a>. This is also where I park the source code exmaples that I have made for my <a href="/categories/three-js/">other blog posts on threejs</a> as well.</p>
<h3 id="Version-Numbers-Matter"><a href="#Version-Numbers-Matter" class="headerlink" title="Version Numbers Matter"></a>Version Numbers Matter</h3><p>When I first wrote this post I was using r146 pf threejs.</p>
<h2 id="1-Some-Basic-examples-of-Indexed-Buffer-Geometry-in-threejs"><a href="#1-Some-Basic-examples-of-Indexed-Buffer-Geometry-in-threejs" class="headerlink" title="1 - Some Basic examples of Indexed Buffer Geometry in threejs"></a>1 - Some Basic examples of Indexed Buffer Geometry in threejs</h2><p>This first section will be just a few quick basic examples that have to do with the index property of a buffer geometry centered around examples that involve a very simple custom geometry. The index property has to do with reusing points in the position attribute so then these examples will involve a very simple custom geometry that is just two triangles. There is then just understanding the difference between using 6 points with no index, and 4 points with an index if two points are at the same location.</p>
<h3 id="1-1-The-basic-Index-of-an-Indexed-Geometry"><a href="#1-1-The-basic-Index-of-an-Indexed-Geometry" class="headerlink" title="1.1 - The basic Index of an Indexed Geometry"></a>1.1 - The basic Index of an Indexed Geometry</h3><p>For this example I am creating what might very well be the most basic form of an index geometry that is composed of just two triangles made from 4 points in the position attribute. I start out by making a new blank buffer geometry by calling the THREE.BufferGeometry with the new keyword and no arguments of any kind. The result is then a blank clean buffer geometry returned that I store to a variable. Now I can use the set attribute method of the buffer geometry class to set a position attribute. However first I will need an instance of THREE.BufferAttribute set up with the position data that I want to use to create my two triangles.</p>
<p>To create the position attribute I call the THREE.BufferAttribute constructor and pass a Float32Array that will contain the points in space that I want to use. Each three numbers in the array will be for x,y, and then z values for a single point in space. I want 4 points and 3 axis values for each point so that means the length of the array will be 12. After I pass the array as the first argument I will then pass the number 3 as the second argument as there are 3 values for each item in this buffer attribute. Now that I have the buffer attribute for the position attribute I can now call the set attribute method of that blank geometry, pass the string position as the first argument, and then the buffer attribute for position as the next.</p>
<p>So now I have a geometry with a position attribute, now I will want to add the index. For this it is more or less the same process as with making the custom position attribute. However I will be using a Uint8Array, and this time it is just 1 number per item as this is an array of index values for points in the position attribute that I just set. When I have my index buffer attribute instance I can then pass it as an argument when calling the set index method of the geometry.</p>
<p>One last thing with the geometry is that I will want to call the <a href="/2022/04/22/threejs-buffer-geometry-compute-vertex-normals/">compute vertex normals</a> method to quickly create a normals attribite for this geometry. The reason why is because I am going to use this geometry with a mesh object that will use the <a href="/2021/06/23/threejs-normal-material/">mesh normal material</a> so I will need this.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CUSTOM GEO WITH JUST A POSITION, AND NORMAL ATTRIBUTES</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BufferGeometry();</div><div class="line"><span class="comment">// position array of 4 points</span></div><div class="line"><span class="keyword">const</span> pos = <span class="keyword">new</span> THREE.BufferAttribute(</div><div class="line">    <span class="keyword">new</span> <span class="built_in">Float32Array</span>([</div><div class="line">        <span class="number">0</span>,<span class="number">-3</span>, <span class="number">0</span>,  <span class="comment">// 0</span></div><div class="line">        <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>,  <span class="comment">// 1</span></div><div class="line">       <span class="number">-5</span>, <span class="number">0</span>, <span class="number">0</span>,  <span class="comment">// 2</span></div><div class="line">        <span class="number">0</span>, <span class="number">0</span>,<span class="number">-5</span>   <span class="comment">// 3</span></div><div class="line">    ]),</div><div class="line">    <span class="number">3</span>    <span class="comment">// 3 numbers for every item in the buffer attribute ( x, y, z)</span></div><div class="line">);</div><div class="line">geometry.setAttribute(<span class="string">'position'</span>, pos);</div><div class="line"><span class="comment">// using computeVertexNormals to create normal attribute</span></div><div class="line">geometry.computeVertexNormals();</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">//CREATING AN INDEX BY USING THE setIndex METHOD AND PASSING AN ARRAY</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// drawing 2 trangles with just 4 points in the position attribute by giving an</span></div><div class="line"><span class="comment">// array of index values for points in the position attribute to the setIndex method</span></div><div class="line">geometry.setIndex( [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>] );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geometry, <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123; <span class="attr">side</span>: THREE.DoubleSide &#125;) );</div><div class="line">scene.add(mesh);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">2</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">camera.lookAt(<span class="number">-2</span>, <span class="number">0</span>, <span class="number">-2</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<h3 id="1-2-Indexed-and-non-indexed-geometry-compared"><a href="#1-2-Indexed-and-non-indexed-geometry-compared" class="headerlink" title="1.2 - Indexed and non indexed geometry compared"></a>1.2 - Indexed and non indexed geometry compared</h3><p>When it comes to getting started with the index property of buffer geometry there is making a custom geometry that is just two triangles. With a non indexed geometry these two triangles will consist of 6 points in space stored in the position attribute, even if two of the points of each triangles are the same. When it comes to an indexed geometry however only 4 points can be defined in the position attribute, and then an index can be used to define 6 index values of points in the position attribute as a way to draw the triangles.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// INDEX GEO</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geo_indexed = <span class="keyword">new</span> THREE.BufferGeometry();</div><div class="line"><span class="comment">// position array of 4 points to draw two triangles, by using an index</span></div><div class="line">geo_indexed.setAttribute(<span class="string">'position'</span>,</div><div class="line">    <span class="keyword">new</span> THREE.BufferAttribute(<span class="keyword">new</span> <span class="built_in">Float32Array</span>([<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>, <span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>,<span class="number">-2</span>]), <span class="number">3</span>)</div><div class="line">);</div><div class="line">geo_indexed.setIndex([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>]);</div><div class="line">geo_indexed.computeVertexNormals();</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// INDEX GEO</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> geo_non_indexed = <span class="keyword">new</span> THREE.BufferGeometry();</div><div class="line"><span class="comment">// position array of 6 points for two triangles ( no index )</span></div><div class="line">geo_non_indexed.setAttribute(<span class="string">'position'</span>,</div><div class="line">    <span class="keyword">new</span> THREE.BufferAttribute(<span class="keyword">new</span> <span class="built_in">Float32Array</span>([<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>, <span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, <span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>,<span class="number">-2</span>]), <span class="number">3</span>)</div><div class="line">);</div><div class="line">geo_non_indexed.computeVertexNormals();</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mesh_indexed = <span class="keyword">new</span> THREE.Mesh(geo_indexed, <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123; <span class="attr">side</span>: THREE.DoubleSide &#125;) );</div><div class="line">mesh_indexed.position.x = <span class="number">-1</span>;</div><div class="line">scene.add(mesh_indexed);</div><div class="line"><span class="keyword">const</span> mesh_non_indexed = <span class="keyword">new</span> THREE.Mesh(geo_non_indexed, <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123; <span class="attr">side</span>: THREE.DoubleSide &#125;) );</div><div class="line">mesh_non_indexed.position.x = <span class="number">2</span>;</div><div class="line">scene.add(mesh_non_indexed);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>With both mesh objects In this example I am using the mesh normal material and if you look closely at the outcome of this you will notice that they both look a littler different. This is because for both geometries I am calling the compute vertex normals method to create the normal attribute of the geometries and with the indexed geometry the state of the normal attribute is not a typically desired outcome.  This is because we have four points rather than sit which results in 4 normal vector rather than six, which in turn also effects the face normals sense vector normals are used to find that.</p>
<h2 id="2-The-set-index-method"><a href="#2-The-set-index-method" class="headerlink" title="2 - The set index method"></a>2 - The set index method</h2><p>One thing that I learned is that it is a good idea to be aware of the limits of typed arrays when making a buffer attribute that is to be used with the set index method of the buffer geometry class. In the threejs docs it is shown that a buffer attribute needs to be passed as the first and only argument when calling the set index method. However the good news is that a plane old JavaScript array can be passed in place of a buffer attribute as well and it may be best to just simply do that actually.</p>
<p>If you do want to pass a buffer attribute when calling the set index method just keep in mind that there are limits to these various data types. The numbers should be integers however it might still be best to go with a float option actually sense some of them have higher max safe integer values than the integer options for typed arrays. This is very true with the Uint8Array typed array that is just a single byte of course, and as such it will limit the usable point count of the geometry to 256.</p>
<h3 id="2-1-Custom-Plane-Geometry-based-on-THREE-PlaneGeometry-that-just-passes-an-array-when-calling-setIndex"><a href="#2-1-Custom-Plane-Geometry-based-on-THREE-PlaneGeometry-that-just-passes-an-array-when-calling-setIndex" class="headerlink" title="2.1 - Custom Plane Geometry based on THREE.PlaneGeometry that just passes an array when calling setIndex"></a>2.1 - Custom Plane Geometry based on THREE.PlaneGeometry that just passes an array when calling setIndex</h3><p>If you are not sure what typed array you should use one option is to just pass a plane old javaScript array and let the set index method figure that out for you. I have found that this is something that is being done in the actual threejs source code when it comes to the <a href="https://github.com/mrdoob/three.js/blob/r146/src/geometries/PlaneGeometry.js" target="_blank" rel="external">plane geometry constructor function</a> for example. Speaking of plane geometry the source code of the plane geometry is what this example is based off of with just a few very minor changes to create a helper funciton that creates and mutates a Buffer Geometry, rather than a Class that extends BufferGeometry.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">2000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPER FUNCTION</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// custom plane geo function based off of THREE.PlaneGeometry source code found at:</span></div><div class="line"><span class="comment">// https://github.com/mrdoob/three.js/blob/r146/src/geometries/PlaneGeometry.js</span></div><div class="line"><span class="keyword">const</span> PlaneGeo = <span class="function">(<span class="params"> width = <span class="number">1</span>, depth = <span class="number">1</span>, widthSegments = <span class="number">1</span>, depthSegments = <span class="number">1</span></span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.BufferGeometry();</div><div class="line">    <span class="keyword">const</span> width_half = width / <span class="number">2</span>;</div><div class="line">    <span class="keyword">const</span> depth_half = depth / <span class="number">2</span>;</div><div class="line">    <span class="keyword">const</span> gridX = <span class="built_in">Math</span>.floor( widthSegments );</div><div class="line">    <span class="keyword">const</span> gridZ = <span class="built_in">Math</span>.floor( depthSegments );</div><div class="line">    <span class="keyword">const</span> gridX1 = gridX + <span class="number">1</span>;</div><div class="line">    <span class="keyword">const</span> gridZ1 = gridZ + <span class="number">1</span>;</div><div class="line">    <span class="keyword">const</span> segment_width = width / gridX;</div><div class="line">    <span class="keyword">const</span> segment_depth = depth / gridZ;</div><div class="line">    <span class="keyword">const</span> indices = [];</div><div class="line">    <span class="keyword">const</span> vertices = [];</div><div class="line">    <span class="keyword">const</span> normals = [];</div><div class="line">    <span class="keyword">const</span> uvs = [];</div><div class="line">    <span class="comment">// position, normal, and uv data arrays</span></div><div class="line">    <span class="keyword">for</span> ( <span class="keyword">let</span> iz = <span class="number">0</span>; iz &lt; gridZ1; iz ++ ) &#123;</div><div class="line">        <span class="keyword">const</span> z = iz * segment_depth - depth_half;</div><div class="line">        <span class="keyword">for</span> ( <span class="keyword">let</span> ix = <span class="number">0</span>; ix &lt; gridX1; ix ++ ) &#123;</div><div class="line">            <span class="keyword">const</span> x = ix * segment_width - width_half;</div><div class="line">            vertices.push( x, <span class="number">0</span>, z );</div><div class="line">            normals.push( <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span> );</div><div class="line">            uvs.push( ix / gridX );</div><div class="line">            uvs.push( <span class="number">1</span> - ( iz / gridZ ) );</div><div class="line">         &#125;</div><div class="line">    &#125;</div><div class="line">    geo.setAttribute( <span class="string">'position'</span>, <span class="keyword">new</span> THREE.Float32BufferAttribute( vertices, <span class="number">3</span> ) );</div><div class="line">    geo.setAttribute( <span class="string">'normal'</span>, <span class="keyword">new</span> THREE.Float32BufferAttribute( normals, <span class="number">3</span> ) );</div><div class="line">    geo.setAttribute( <span class="string">'uv'</span>, <span class="keyword">new</span> THREE.Float32BufferAttribute( uvs, <span class="number">2</span> ) );</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// THE BUFFER GEOMETRY INDEX DATA, and the BufferGeometry setIndex method</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">for</span> ( <span class="keyword">let</span> iz = <span class="number">0</span>; iz &lt; gridZ; iz ++ ) &#123;</div><div class="line">        <span class="keyword">for</span> ( <span class="keyword">let</span> ix = <span class="number">0</span>; ix &lt; gridX; ix ++ ) &#123;</div><div class="line">            <span class="keyword">const</span> a = ix + gridX1 * iz;</div><div class="line">            <span class="keyword">const</span> b = ix + gridX1 * ( iz + <span class="number">1</span> );</div><div class="line">            <span class="keyword">const</span> c = ( ix + <span class="number">1</span> ) + gridX1 * ( iz + <span class="number">1</span> );</div><div class="line">            <span class="keyword">const</span> d = ( ix + <span class="number">1</span> ) + gridX1 * iz;</div><div class="line">            indices.push( a, b, d );</div><div class="line">            indices.push( b, c, d );</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// UISNG THE SET INDEX METHOD TO CREATE THE INDEX FOR THE BUFFER GEOMETRY</span></div><div class="line">    <span class="comment">// PASSING AN ARRAY, AND NOT A BUFFER ATTRIBUTE. IF A BUFFER ATTRIBUTE IS PASSED</span></div><div class="line">    <span class="comment">// MAKE SURE IT IS NOT A Uint8 TYPED ARRAY AS INDEX VALUES CAN GO BEYOND 255</span></div><div class="line">    <span class="comment">//--------</span></div><div class="line">    <span class="comment">// YES - Just give an array and let setIndex figure out what Attribute Type to use</span></div><div class="line">    geo.setIndex(indices);</div><div class="line">    <span class="comment">//--------</span></div><div class="line">    <span class="comment">// MAYBE - There is passing a BufferAttribute to make things explicit. </span></div><div class="line">    <span class="comment">//         Just be mindful of the number range limits.</span></div><div class="line">    <span class="comment">// geo.setIndex( new THREE.Uint32BufferAttribute( indices, 1) );</span></div><div class="line">    <span class="comment">// geo.setIndex( new THREE.Float64BufferAttribute( indices, 1) );</span></div><div class="line">    <span class="comment">//--------</span></div><div class="line">    <span class="comment">// NO!! - limit of Unit8Array is 255</span></div><div class="line">    <span class="comment">// geo.setIndex( new THREE.BufferAttribute( new Uint8Array(indices), 1) );</span></div><div class="line">    <span class="comment">// geo.setIndex( new THREE.Uint8BufferAttribute( indices, 1) );</span></div><div class="line">    <span class="keyword">return</span> geo;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GEO</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// geo1 is a 1000 x 1000 size with a 1 * 1 with segment size</span></div><div class="line"><span class="comment">// that results in 4 points which results in a Uint16Array</span></div><div class="line"><span class="keyword">const</span> geo1 = PlaneGeo(<span class="number">1000</span>, <span class="number">1000</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="built_in">console</span>.log(geo1.getAttribute(<span class="string">'position'</span>).count); <span class="comment">// 4</span></div><div class="line"><span class="built_in">console</span>.log(geo1.index.array.constructor.name);   <span class="comment">// Uint16Array</span></div><div class="line"><span class="comment">// geo2 is a 1000 x 1000 size with a 100 * 100 with segment size</span></div><div class="line"><span class="comment">// that results in 10201 points which results in a Uint16Array</span></div><div class="line"><span class="keyword">const</span> geo2 = PlaneGeo(<span class="number">1000</span>, <span class="number">1000</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line"><span class="built_in">console</span>.log(geo2.getAttribute(<span class="string">'position'</span>).count); <span class="comment">// 10201</span></div><div class="line"><span class="built_in">console</span>.log(geo2.index.array.constructor.name);   <span class="comment">// Uint16Array</span></div><div class="line"><span class="comment">// geo3 is a 1000 x 1000 size with a 280 * 280 with segment size</span></div><div class="line"><span class="comment">// that results in a total of 78961 points which results in a Uint32Array</span></div><div class="line"><span class="keyword">const</span> geo3 = PlaneGeo(<span class="number">1000</span>, <span class="number">1000</span>, <span class="number">280</span>, <span class="number">280</span>);</div><div class="line"><span class="built_in">console</span>.log(geo3.getAttribute(<span class="string">'position'</span>).count); <span class="comment">// 78961</span></div><div class="line"><span class="built_in">console</span>.log(geo3.index.array.constructor.name);   <span class="comment">// Uint32Array</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MATERIAL, MESH</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">    <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>),</div><div class="line">    <span class="attr">wireframe</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">wireframeLinewidth</span>: <span class="number">1</span></div><div class="line">&#125;);</div><div class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo2, material);</div><div class="line">scene.add(mesh);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">500</span>, <span class="number">500</span>, <span class="number">500</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>Notice that when passing a plane javaScript array to the set index method it will choose a Uint16Array, or a Uint32Array depending on the count of points in the position attribute. So if the count of points is below the limit of Uint16Array it will use that else it will go higher to the Uint32Array. The limit of a Uint32Array is 4,294,967,295 which is a whole lot of points, and for the most part I do not think that is something that I will end up going over for any geometry at least in terms of typical, practical use anyway. </p>
<p>Still if for some weird reason I do need the next step up there is no Uint64Array but there is Float64Array that has a max safe integer value of 9,007,199,254,740,991. I would not just use that though, it might be best to use Uint32Array arrays if I want to make things static and explicit, or just pass a plane old javaScript array and be done with this.</p>
<h2 id="3-Animaiton-loop-exmaples"><a href="#3-Animaiton-loop-exmaples" class="headerlink" title="3 - Animaiton loop exmaples"></a>3 - Animaiton loop exmaples</h2><p>As always I like to work out at least one if not more animation loop example for my posts that help to give a better idea of what the subject of the post is all about. For the subject of indexed and none indexed geometry there is a whole lot of potential when it comes to this subject that involves changing the state of a position attribute over time for both and indexed and non indexed geometry to showcase a major difference between they two.</p>
<h3 id="3-1-Two-Box-Geometry-based-Mesh-Objects"><a href="#3-1-Two-Box-Geometry-based-Mesh-Objects" class="headerlink" title="3.1 - Two Box Geometry based Mesh Objects"></a>3.1 - Two Box Geometry based Mesh Objects</h3><p>When using the <a href="/2021/04/26/threejs-box-geometry/">THREE.BoxGeometry class to create a geometry</a> it will have an index for it set up for me. If I want the box to not be indexed I can just call the to non index method to do so. For this example I create a geometry with the box geometry constructor function, and then another geometry that is just a clone of this. I then class the to non indexed method off of the clone of the box geometry to end up with an indexed and non indexed box geometry that I then use with two mesh objects. I then add both of these mesh objects to a group and loop over the children of the group in a main update method.</p>
<p>When updating the same points in each position attribute the result as one should expect is very different. When it comes to the non index geometry I can move a whole triangle by itself from the rest of the geometry, however of course when it comes to the indexed geometry there are shared points which effect the whole of the geometry.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// TWO GEOS ONE INDEX ONE NOT INDEXED</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> geo_index = <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line"><span class="keyword">const</span> geo_noindex = geo_index.clone().toNonIndexed();</div><div class="line"><span class="built_in">console</span>.log(geo_index.index);   <span class="comment">// ( buffer attribute object )</span></div><div class="line"><span class="built_in">console</span>.log(geo_noindex.index); <span class="comment">// null</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// MESH OBJECTS USING EACH GEO</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123; <span class="attr">side</span>: THREE.DoubleSide&#125;);</div><div class="line"><span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">scene.add(group)</div><div class="line"><span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(geo_index, material);</div><div class="line">mesh1.userData.pos_home = mesh1.geometry.getAttribute(<span class="string">'position'</span>).clone();</div><div class="line"><span class="keyword">const</span> mesh2 = <span class="keyword">new</span> THREE.Mesh(geo_noindex, material);</div><div class="line">mesh2.userData.pos_home = mesh2.geometry.getAttribute(<span class="string">'position'</span>).clone();</div><div class="line">group.add(mesh1);</div><div class="line">group.add(mesh2);</div><div class="line">mesh1.position.set(<span class="number">-2</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">mesh2.position.set(<span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="comment">// grid helper</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">300</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>, frame = <span class="number">0</span>, lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">    <span class="keyword">const</span> a2 = <span class="number">1</span> - <span class="built_in">Math</span>.abs( <span class="number">0.5</span> - a1 ) / <span class="number">0.5</span>;</div><div class="line">    <span class="comment">// loop over group children</span></div><div class="line">    group.children.forEach( <span class="function">(<span class="params">mesh</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> pos = mesh.geometry.getAttribute(<span class="string">'position'</span>);</div><div class="line">        <span class="keyword">const</span> pos_home = mesh.userData.pos_home;</div><div class="line">        <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">let</span> len = pos.array.length;</div><div class="line">        pos.array[<span class="number">9</span>] = pos_home.array[<span class="number">9</span>] + <span class="number">2</span> * a2;</div><div class="line">        pos.array[<span class="number">12</span>] = pos_home.array[<span class="number">12</span>] + <span class="number">2</span> * a2;</div><div class="line">        pos.array[<span class="number">15</span>] = pos_home.array[<span class="number">15</span>] + <span class="number">2</span> * a2;</div><div class="line">        pos.needsUpdate = <span class="literal">true</span>;</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h3 id="3-2-Two-Plane-Geometry-Objects-video1-example"><a href="#3-2-Two-Plane-Geometry-Objects-video1-example" class="headerlink" title="3.2 - Two Plane Geometry Objects video1 example"></a>3.2 - Two Plane Geometry Objects video1 example</h3><p>Although the box geometry example shows what the deference is between index and non indexed geometry I have found that this example that involves the use of plane geometry does a better job of showing the difference. When it comes to the mesh that uses the geometry that does not have an index that breaks apart into a whole bunch of triangles, where the indexed geometry just turns into a bunch of peaks and values and starts to look like land.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">9</span>, <span class="number">9</span>) );</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>)</div><div class="line">scene.add(dl);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// create ddeltas for the traingle y values</span></div><div class="line"><span class="keyword">const</span> createTriDeltas = <span class="function">(<span class="params">geo</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> pos = geo.getAttribute(<span class="string">'position'</span>);</div><div class="line">    <span class="keyword">const</span> len_tri = <span class="built_in">Math</span>.floor(pos.array.length / <span class="number">9</span>);</div><div class="line">    <span class="keyword">let</span> i_tri = <span class="number">0</span>;</div><div class="line">    <span class="keyword">const</span> deltas = [];</div><div class="line">    <span class="keyword">while</span>(i_tri &lt; len_tri)&#123;</div><div class="line">        deltas.push(<span class="number">-2</span> + <span class="number">4</span> * <span class="built_in">Math</span>.random() );</div><div class="line">        i_tri += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> deltas;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// create group helper</span></div><div class="line"><span class="keyword">const</span> createGroup = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="comment">// material</span></div><div class="line">    <span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">        <span class="attr">side</span>: THREE.DoubleSide,</div><div class="line">        <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>),</div><div class="line">        <span class="attr">emissive</span>: <span class="keyword">new</span> THREE.Color(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>),</div><div class="line">        <span class="attr">emissiveIntensity</span>: <span class="number">0.1</span></div><div class="line">    &#125;);</div><div class="line">    <span class="comment">// geo indexed and non indxed</span></div><div class="line">    <span class="keyword">const</span> geo_index = <span class="keyword">new</span> THREE.PlaneGeometry(<span class="number">4</span>, <span class="number">5</span>, <span class="number">20</span>, <span class="number">25</span>);</div><div class="line">    geo_index.rotateX(<span class="built_in">Math</span>.PI * <span class="number">1.5</span>)</div><div class="line">    <span class="keyword">const</span> geo_noindex = geo_index.clone().toNonIndexed();</div><div class="line">    <span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">    <span class="comment">// indexed mesh</span></div><div class="line">    <span class="keyword">const</span> mesh1 = <span class="keyword">new</span> THREE.Mesh(geo_index, material);</div><div class="line">    mesh1.userData.pos_home = mesh1.geometry.getAttribute(<span class="string">'position'</span>).clone();</div><div class="line">    mesh1.userData.deltas = createTriDeltas(mesh1.geometry);</div><div class="line">    <span class="comment">// no index mesh</span></div><div class="line">    <span class="keyword">const</span> mesh2 = <span class="keyword">new</span> THREE.Mesh(geo_noindex, material);</div><div class="line">    mesh2.userData.pos_home = mesh2.geometry.getAttribute(<span class="string">'position'</span>).clone();</div><div class="line">    mesh2.userData.deltas = createTriDeltas(mesh2.geometry);</div><div class="line">    group.add(mesh1);</div><div class="line">    group.add(mesh2);</div><div class="line">    mesh1.position.set(<span class="number">-2.5</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    mesh2.position.set(<span class="number">2.5</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">return</span> group;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> updateGroup = <span class="function">(<span class="params">group, alpha</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// loop over group children</span></div><div class="line">    group.children.forEach( <span class="function">(<span class="params">mesh</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> pos = mesh.geometry.getAttribute(<span class="string">'position'</span>);</div><div class="line">        <span class="keyword">const</span> pos_home = mesh.userData.pos_home;</div><div class="line">        <span class="keyword">let</span> len_tri = <span class="built_in">Math</span>.floor(pos.array.length / <span class="number">9</span>);</div><div class="line">        <span class="keyword">let</span> i_tri = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(i_tri &lt; len_tri)&#123;</div><div class="line">            <span class="keyword">let</span> i = i_tri * <span class="number">9</span>;</div><div class="line">             <span class="keyword">const</span> delta = mesh.userData.deltas[i_tri];</div><div class="line">             pos.array[i + <span class="number">1</span>] = pos_home.array[ i + <span class="number">1</span>] + delta * alpha;</div><div class="line">             pos.array[i + <span class="number">4</span>] = pos_home.array[i + <span class="number">4</span>] + delta * alpha;</div><div class="line">             pos.array[i + <span class="number">7</span>] = pos_home.array[ i + <span class="number">7</span>] + delta * alpha;</div><div class="line">             i_tri += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        pos.needsUpdate = <span class="literal">true</span>;</div><div class="line">        mesh.geometry.computeVertexNormals();</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> createCanvasTexture = <span class="function"><span class="keyword">function</span> (<span class="params">draw, size</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>),</div><div class="line">    ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    canvas.width = size || <span class="number">32</span>;</div><div class="line">    canvas.height = size || <span class="number">32</span>;</div><div class="line">    draw(ctx, canvas);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> THREE.CanvasTexture(canvas);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// TEXTURE</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> texture_map = createCanvasTexture(<span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> w = <span class="number">16</span>, h = <span class="number">16</span>;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>, len = w * h;</div><div class="line">    <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">        <span class="keyword">const</span> x = i % w;</div><div class="line">        <span class="keyword">const</span> y = <span class="built_in">Math</span>.floor(i / w);</div><div class="line">        <span class="keyword">const</span> px = canvas.width / w * x;</div><div class="line">        <span class="keyword">const</span> py = canvas.height / h * y;</div><div class="line">        <span class="keyword">const</span> v = <span class="number">0.5</span> * <span class="built_in">Math</span>.random().toFixed(<span class="number">2</span>);</div><div class="line">        <span class="keyword">const</span> color = <span class="keyword">new</span> THREE.Color(v,v,v);</div><div class="line">        ctx.fillStyle = color.getStyle();</div><div class="line">        ctx.fillRect(px, py, canvas.width / w, canvas.width / h);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;, <span class="number">64</span>);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// GROUP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> group = createGroup();</div><div class="line">scene.add(group);</div><div class="line">group.children.forEach(<span class="function">(<span class="params">mesh</span>) =&gt;</span> &#123;</div><div class="line">    mesh.material.map = texture_map;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">7</span>, <span class="number">7</span>, <span class="number">7</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">300</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>, frame = <span class="number">0</span>, lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">    <span class="keyword">const</span> a2 = <span class="number">1</span> - <span class="built_in">Math</span>.abs( <span class="number">0.5</span> - a1 ) / <span class="number">0.5</span>;</div><div class="line">    updateGroup(group, a2);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In any case the index of a geometry is something to be aware of to say the least. There are situations in which I might want to create one in order to crunch down the size of the position array. Also there are situations in which I might want to create a non indexed geometry and recompute the normal and uv attributes for a geometry while I am at it.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2022/12/09/threejs-buffer-geometry-index/" data-id="cliahb4ov02ay3ov1alzoh8vz" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2022/12/09/threejs-buffer-geometry-index/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/12/16/threejs-curve-geometry-from/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Using the curve class to create geometry in threejs
        
      </div>
    </a>
  
  
    <a href="/2022/12/02/threejs-tetrahedron/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Pyramid AKA Tetrahedron Geometry in threejs.</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2022/12/09/threejs-buffer-geometry-index/index.html';
    this.page.identifier = '1017';
    this.page.title = 'Indexed Buffer Geometry in threejs';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 13.64px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/25/threejs-curve-quadratic-bezier-curve/">2D Quadratic Bezier Curves in threejs</a>
          </li>
        
          <li>
            <a href="/2023/05/24/git-push/">Git Push command</a>
          </li>
        
          <li>
            <a href="/2023/05/19/threejs-lod/">Level Of Detail Objects in threejs</a>
          </li>
        
          <li>
            <a href="/2023/05/18/git-pull/">Git Pull sub command</a>
          </li>
        
          <li>
            <a href="/2023/05/12/threejs-buffer-geometry-set-draw-range/">The set draw range method of the buffer geometry class in threejs</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2022/12/09/threejs-buffer-geometry-index/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>