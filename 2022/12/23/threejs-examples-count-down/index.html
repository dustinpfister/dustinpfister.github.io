<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>A Timer video javaScript module threejs example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2022/12/23/threejs-examples-count-down/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This threejs project examples post is on a javaScript file that I am using to help me with the process of making what I would call a count down, or timer videos. This is just simply a kind of video wh">
<meta property="og:type" content="article">
<meta property="og:title" content="A Timer video javaScript module threejs example">
<meta property="og:url" content="https://dustinpfister.github.io/2022/12/23/threejs-examples-count-down/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="This threejs project examples post is on a javaScript file that I am using to help me with the process of making what I would call a count down, or timer videos. This is just simply a kind of video wh">
<meta property="og:updated_time" content="2023-02-13T17:52:16.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A Timer video javaScript module threejs example">
<meta name="twitter:description" content="This threejs project examples post is on a javaScript file that I am using to help me with the process of making what I would call a count down, or timer videos. This is just simply a kind of video wh">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-examples-count-down" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/12/23/threejs-examples-count-down/" class="article-date"> Published:
  <time datetime="2022-12-23T16:00:00.000Z" itemprop="datePublished">2022-12-23</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2022/12/23/threejs-examples-count-down/" class="article-date"> Modified:
  <time datetime="2023-02-13T17:52:16.000Z" itemprop="dateModified">2023-02-13</time>
</a>

    <span class="article-date">V1.11</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      A Timer video javaScript module threejs example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>This <a href="https://threejs.org/examples/" target="_blank" rel="external">threejs project examples post</a> is on a javaScript file that I am using to help me with the process of making what I would call a count down, or <a href="https://www.youtube.com/watch?v=_W0bSen8Qjg" target="_blank" rel="external">timer videos</a>. This is just simply a kind of video where there is a count down that starts from when the video starts from a given start time such as 30 seconds, and then counts down to 0. When 0 is reached the video is over, or there is a little additional time that is an alarm sound or something to that effect.</p>
<p>When it comes to making videos for these blog posts using threejs as well as some of my own additional software, I am always thinking about what it is that I should do different with them. For now as of this writing the existing state of affairs is to just continue with simple demo videos that just showcase what the JavaScript code for a given post on threejs will do. Once again I think that this will be the case here, but maybe with only just one video. I can use the countdown module to create one of my usual 30 second demo videos that has been the pattern thus far, however I can also use it to make videos that are any given time length long. So this will then be a great tool for my other collection of video content thus far which is just a general experimental collection of content.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/5g1hAQ0LuX0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="The-count-down-js-threejs-project-example-and-what-to-know-first"><a href="#The-count-down-js-threejs-project-example-and-what-to-know-first" class="headerlink" title="The count-down.js threejs project example and what to know first"></a>The count-down.js threejs project example and what to know first</h2><p>This is a blog post on some JavaScript code that I have made that works on top of threejs as well as additional code both of mine as well as additional official threejs assets to create timer videos. It should got without saying but I will say it anyway, this is not a <a href="/2018/04/04/threejs-getting-started/">post for people that are new to threejs</a> or JavaScript in general. This post and the many others that i have made like it thus far, are for people that have at least a fair about of experience with JavaScript and the threejs library and are now looking for ideas for various projects to make. I will not then be getting into basic things that should be solid at this point. Still in this section I might write about a few things that you might want to read about more before reading the rest of the content.</p>
<h3 id="The-count-down-js-file-as-well-as-the-demos-make-use-of-additional-files-and-assets-beyond-just-threejs"><a href="#The-count-down-js-file-as-well-as-the-demos-make-use-of-additional-files-and-assets-beyond-just-threejs" class="headerlink" title="The count-down.js file as well as the demos make use of additional files and assets beyond just threejs"></a>The count-down.js file as well as the demos make use of additional files and assets beyond just threejs</h3><p>On top of using threejs alone I also am using the <a href="/2021/04/30/threejs-dae-collada-loader/">threejs DAE file Loader</a> as an additional threejs file. The reason why is because I have a DAE loader method as one of the public methods of the count-down.js file that works on top of this feature that is not baked into the core of threejs itself. Also a number of my demos make use of this methods and thus also external <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/dae/count_down_basic" target="_blank" rel="external">dae files</a> that are loaded with said dae loader methods and underlying file that makes use of it. Also a number of my demos for count-down.js make use of canvas texture that I am creating with my canvas.js file that I made for my <a href="/2018/04/17/threejs-canvas-texture/">blog post on canvas textures</a>.</p>
<iframe class="youtube_video" src="https://www.youtube.com/embed/E1RSRGI6RkA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h3 id="Source-code-examples-up-on-Github"><a href="#Source-code-examples-up-on-Github" class="headerlink" title="Source code examples up on Github"></a>Source code examples up on Github</h3><p>I also have the source that I am writing about here <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-examples-count-down" target="_blank" rel="external">up on github</a>.</p>
<h3 id="Version-Numbers-matter"><a href="#Version-Numbers-matter" class="headerlink" title="Version Numbers matter."></a>Version Numbers matter.</h3><p>When I first wrote this post I was using <a href="https://github.com/mrdoob/three.js/releases/tag/r146" target="_blank" rel="external">r146 of threejs</a>.</p>
<h2 id="1-R1-of-count-down-js-and-demos-Removed-dae-loader-and-using-Scene-objects-for-source-mesh-objects"><a href="#1-R1-of-count-down-js-and-demos-Removed-dae-loader-and-using-Scene-objects-for-source-mesh-objects" class="headerlink" title="1 - R1 of count-down.js and demos, Removed dae loader and using Scene objects for source mesh objects"></a>1 - R1 of count-down.js and demos, Removed dae loader and using Scene objects for source mesh objects</h2><p>One major change with this revision of count-down.js is the removal of the DAE loader abstraction in favor of the use of another abstraction that works better, or just directly working with the DAE loader alone. Another major change was to start using Scene objects in place of plain old javaScript objects when it comes to giving a set of objects to use for the numbers. This allows for me to make use of object3d class methods like that of the <a href="/2021/05/12/threejs-object3d-get-by-name/">get object by name method</a> as a way to get only the objects that are needed in the given source object.</p>
<p>There is a lot more that I also wanted to change of course but for now I will be just chalking all of that up for the next revision of this module that may very well happen if I do continue to use this module in actual projects. So in this section I will be just quikly going over the state of R1 of count-down.js, and just two demos.</p>
<h3 id="1-a-Source-code-of-count-down-js-r1"><a href="#1-a-Source-code-of-count-down-js-r1" class="headerlink" title="1.a - Source code of count-down.js ( r1 )"></a>1.a - Source code of count-down.js ( r1 )</h3><p>First off the source code of the module itself. With that said code that has to do with loading and processing objects created from a DAE file asset have been removed. There is now just the create and set methods along with that one add lines method when it comes to public methods. Changes have also been made when it comes to the </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// count-down.js - r1 - from threejs-examples-count-down</span></div><div class="line"><span class="comment">//    * create method now takes a scene_source object that is a THREE.Scene Object</span></div><div class="line"><span class="comment">//    * DAE loader removed in favor of using things like demo-helper-r0 from threejs-dae-loader</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">api</span>)</span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// DEFAULT OPTIONS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> DEFAULT_WIDTH = <span class="number">2</span>;</div><div class="line">    <span class="keyword">const</span> DEFAULT_DIGIT_COUNT = <span class="number">2</span>;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// DEFAULT SCENE SOURCE OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> DEFAULT_SCENE_SOURCE = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; <span class="number">10</span>)&#123;</div><div class="line">        <span class="keyword">const</span> n = <span class="number">5</span> + <span class="number">10</span> * i;</div><div class="line">        <span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.SphereGeometry(DEFAULT_WIDTH / <span class="number">2</span>, n, n);</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geo, <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123; <span class="attr">wireframe</span>: <span class="literal">true</span>&#125;));</div><div class="line">        mesh.name = <span class="string">'num_'</span> + i;</div><div class="line">        DEFAULT_SCENE_SOURCE.add(mesh);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// to pad string ( 9 to 009 if 3 digits )</span></div><div class="line">    <span class="keyword">const</span> toPadString = <span class="function">(<span class="params">a, digits</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">String</span>(a).padStart(digits, <span class="string">'0'</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// position a digit group</span></div><div class="line">    <span class="keyword">const</span> positionDigit = <span class="function">(<span class="params">digit, di, digitCount, width</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> hd = digitCount / <span class="number">2</span>;</div><div class="line">        <span class="keyword">const</span> sx = hd * width * <span class="number">-1</span>;</div><div class="line">        digit.position.x = width / <span class="number">2</span> + sx + width * di;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// CREATE METHOD</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    api.create = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.digitCount = opt.digitCount === <span class="literal">undefined</span> ? DEFAULT_DIGIT_COUNT : opt.digitCount;  <span class="comment">// 2 digits</span></div><div class="line">        opt.timeStr = opt.timeStr || <span class="string">''</span>;</div><div class="line">        <span class="comment">// USE A SCENE OBJECT</span></div><div class="line">        opt.scene_source = opt.scene_source || DEFAULT_SCENE_SOURCE;</div><div class="line">        opt.width = opt.width === <span class="literal">undefined</span> ? DEFAULT_WIDTH : opt.width;</div><div class="line">        opt.countID = opt.countID || <span class="string">''</span>;</div><div class="line">        <span class="comment">// main count object</span></div><div class="line">        <span class="keyword">const</span> countObj = <span class="keyword">new</span> THREE.Group();</div><div class="line">        countObj.name = opt.countID;</div><div class="line">        <span class="comment">// for each digit, clone all source objects</span></div><div class="line">        <span class="keyword">let</span> di = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(di &lt; opt.digitCount)&#123;</div><div class="line">            <span class="keyword">const</span> digit = <span class="keyword">new</span> THREE.Group();</div><div class="line">            digit.name = opt.countID + <span class="string">'_'</span> + di;</div><div class="line">            <span class="comment">// position digit group</span></div><div class="line">            positionDigit(digit, di, opt.digitCount, opt.width);</div><div class="line">            countObj.add(digit);</div><div class="line">            <span class="keyword">let</span> ni = <span class="number">0</span>;</div><div class="line">            <span class="keyword">while</span>(ni &lt; <span class="number">10</span>)&#123;</div><div class="line">                <span class="comment">// clone the mesh object by getting the propper object from scene</span></div><div class="line">                <span class="keyword">const</span> mesh = opt.scene_source.getObjectByName(<span class="string">'num_'</span> + ni).clone();</div><div class="line">                mesh.name = opt.countID + <span class="string">'_'</span> + di + <span class="string">'_'</span> + ni;</div><div class="line">                mesh.visible = <span class="literal">false</span>; <span class="comment">// mesh objects viable gets set true based on time value</span></div><div class="line">                <span class="comment">// I will want a clone for the geometry and material also</span></div><div class="line">                mesh.geometry = mesh.geometry.clone();</div><div class="line">                mesh.material = mesh.material.clone();</div><div class="line">                digit.add(mesh);</div><div class="line">                ni += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            di += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        api.set(countObj, opt.timeStr);</div><div class="line">        <span class="keyword">return</span> countObj;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SET METHOD</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// set to the given time string</span></div><div class="line">    api.set = <span class="function">(<span class="params">countObj, timeStr</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">let</span> di = <span class="number">0</span>;</div><div class="line">        <span class="keyword">const</span> digitCount = countObj.children.length;</div><div class="line">        timeStr = toPadString(timeStr, digitCount);</div><div class="line">        <span class="keyword">while</span>(di &lt; digitCount)&#123;</div><div class="line">            <span class="keyword">let</span> ni = <span class="number">0</span>;</div><div class="line">            <span class="keyword">while</span>(ni &lt; <span class="number">10</span>)&#123;</div><div class="line">                <span class="keyword">const</span> mesh = countObj.getObjectByName(countObj.name + <span class="string">'_'</span> + di + <span class="string">'_'</span> + ni);</div><div class="line">                <span class="keyword">const</span> n = <span class="built_in">parseInt</span>(timeStr[di]);</div><div class="line">                mesh.visible = <span class="literal">false</span>;</div><div class="line">                <span class="keyword">if</span>(n === ni)&#123;</div><div class="line">                    mesh.visible = <span class="literal">true</span>;</div><div class="line">                &#125;</div><div class="line">                ni += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            di += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// OTHER PUBLIC METHODS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// add lines for a mesh object</span></div><div class="line">    api.addLine = <span class="function">(<span class="params">obj, s, pos, lw, color</span>) =&gt;</span> &#123;</div><div class="line">        s = s === <span class="literal">undefined</span> ? <span class="number">1</span> : s;</div><div class="line">        pos = pos || <span class="keyword">new</span> THREE.Vector3();</div><div class="line">        <span class="keyword">const</span> material_line = <span class="keyword">new</span> THREE.LineBasicMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: color || <span class="number">0xffffff</span>, </div><div class="line">            <span class="attr">linewidth</span>: lw === <span class="literal">undefined</span> ? <span class="number">8</span>: lw,</div><div class="line">            <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">1</span></div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">const</span> line = <span class="keyword">new</span> THREE.LineSegments( <span class="keyword">new</span> THREE.EdgesGeometry(obj.geometry), material_line );</div><div class="line">        line.scale.set(s, s, s);</div><div class="line">        line.position.copy(pos);</div><div class="line">        obj.add(line);</div><div class="line">    &#125;;</div><div class="line">&#125;( <span class="keyword">this</span>[<span class="string">'countDown'</span>] = &#123;&#125; ));</div></pre></td></tr></table></figure>
<h3 id="1-1-Built-in-objects-work-okay-r1-demo"><a href="#1-1-Built-in-objects-work-okay-r1-demo" class="headerlink" title="1.1 - Built in objects work okay ( r1 demo )"></a>1.1 - Built in objects work okay ( r1 demo )</h3><p>For this demo I just wanted to make sure that the new default scene object works okay when it comes to just calling the main create method without any arguments at all. I never do this when it comes to final projects of course but still I thing this module should have some built in place holder objects. This is a feature that I might refine better in future revisions, but for now the built in objects are still just mesh objects with sphere geometry that will increases in terms of the number of vertices for each number.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> group_cd_default = countDown.create();</div><div class="line">group_cd_default.position.set(<span class="number">0</span>,<span class="number">0</span>,<span class="number">-3</span>)</div><div class="line">scene.add(group_cd_default);</div><div class="line"><span class="keyword">const</span> group_cd = countDown.create(&#123; <span class="attr">digitCount</span>: <span class="number">3</span> &#125;);</div><div class="line">scene.add(group_cd);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">30</span>,  <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">300</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    countDown.set( group_cd_default, frame );</div><div class="line">    countDown.set( group_cd, frame );</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h3 id="1-2-Using-DAE-helper-method-from-my-post-on-the-DAE-loader"><a href="#1-2-Using-DAE-helper-method-from-my-post-on-the-DAE-loader" class="headerlink" title="1.2 - Using DAE helper method from my post on the DAE loader"></a>1.2 - Using DAE helper method from my post on the DAE loader</h3><p>I pulled out the code from count-down.js that was an abstraction for the DAE loader. There where a number of problems with it that I could have fixed, but I figured that this is something that should be done in the demo or project code actually. This is what I have found myself starting to do with projects anyway, that is just directly working with the DAE loader, or when it comes to this demo use a better abstraction that resolves the problems that I have ran into. With that said in this example I am using the dae helper module that I write about in detail <a href="/2021/04/30/threejs-dae-collada-loader/">my blog post on the DAE loader</a>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// THE COINT DOWN GROUP - using let here so that I can re-assign in loader code below</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">let</span> group_cd = countDown.create();</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">30</span>,  <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">300</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    countDown.set( group_cd, frame );</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LOAD CUSTOM SCENE OBJECT FOR NUMBERS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">DAE_loader(&#123;</div><div class="line">    <span class="attr">urls_dae</span>: [<span class="string">'/dae/count_down_basic/cd4-nums.dae'</span>],</div><div class="line">    <span class="attr">urls_resource</span>: [<span class="string">'/dae/count_down_basic/skins/depth_256/'</span>],</div><div class="line">    <span class="attr">cloner</span>: <span class="function"><span class="keyword">function</span>(<span class="params">obj, scene_source, scene_result, result</span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span>(obj.type === <span class="string">'Mesh'</span> )&#123;</div><div class="line">            obj.position.set(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">            obj.material = <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">map</span>: obj.material.map &#125;);</div><div class="line">            scene_source.add(obj.clone());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line">.then(<span class="function">(<span class="params">scene_source</span>) =&gt;</span> &#123;</div><div class="line">    group_cd = countDown.create(&#123;</div><div class="line">        <span class="attr">scene_source</span>: scene_source,</div><div class="line">        <span class="attr">digitCount</span>: <span class="number">3</span></div><div class="line">    &#125;);</div><div class="line">    scene.add(group_cd);</div><div class="line">    loop();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="2-The-first-version-of-count-down-js-r0-and-demos"><a href="#2-The-first-version-of-count-down-js-r0-and-demos" class="headerlink" title="2 - The first version of count-down.js ( r0 ) and demos"></a>2 - The first version of count-down.js ( r0 ) and demos</h2><p>In this section I am writing about the very first version of this count down module, and a few demos that make use of it.</p>
<h3 id="2-a-The-count-down-module"><a href="#2-a-The-count-down-module" class="headerlink" title="2.a - The count down module"></a>2.a - The count down module</h3><p>The very first version of this count down module all ready has a number of public methods. There is the create method that when called will create and return a main group object. This main group object will contain a number of children each of which is another group that is for a given digit. Each digit group object will then also contain ten mesh objects one for each number that is used in a base 10 counting system. Setting the current time is then a matter of looping over each child of each digit group setting the <a href="/2021/05/24/threejs-object3d-visible/">visible object3d property</a> of each mesh to false by default and then true if the current mesh object is the number for the current digit.</p>
<p>There is the idea of making the kind of system where I just simply create a single mesh object for each digit, and maybe that is something that I will get to in future revisions when and if I even make it to that bridge to begin with. It may prove to be a better all around solution, but it also presents a number of problems that can be fixed by way this alternative nested group like system. One of the major concerns that comes to mind has to do with updating the geometry for the mesh objects, I would need to keep things consistent in terms of the number of points used in each geometry for each number. Maybe that is not such a bad thing and maybe it is something that I should be doing anyway when it comes to making my DAE files for this project. However getting into this can of worms is something that I would like to not get into at this point. This is the first version after all so for now I would like to have something that just works okay to create the final product, which in this case is a collection of frames for a video.</p>
<p>I then have my set method in which I pass one of these group objects that I make with the create method along with a string value that will be used to set the current state of the objects to a given count. After that I have a DAE loader method that works on top of the threejs DAE loader.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// count-down.js - r0 - from threejs-examples-count-down</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">api</span>)</span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// DEFAULT SOURCE OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> DEFAULT_OBJECTS = &#123;&#125;;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; <span class="number">10</span>)&#123;</div><div class="line">        <span class="keyword">const</span> n = <span class="number">5</span> + <span class="number">10</span> * i;</div><div class="line">        <span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.5</span>, n, n);</div><div class="line">        DEFAULT_OBJECTS[i] = <span class="keyword">new</span> THREE.Mesh(geo, <span class="keyword">new</span> THREE.MeshNormalMaterial(&#123; <span class="attr">wireframe</span>: <span class="literal">true</span>&#125;));</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// to pad string ( 9 to 009 if 3 digits )</span></div><div class="line">    <span class="keyword">const</span> toPadString = <span class="function">(<span class="params">a, digits</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">String</span>(a).padStart(digits, <span class="string">'0'</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// position a digit group</span></div><div class="line">    <span class="keyword">const</span> positionDigit = <span class="function">(<span class="params">digit, di, digits, width</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> hd = digits / <span class="number">2</span>;</div><div class="line">        <span class="keyword">const</span> sx = hd * width * <span class="number">-1</span>;</div><div class="line">        digit.position.x = width / <span class="number">2</span> + sx + width * di;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// what to do for a DAE result object</span></div><div class="line">    <span class="keyword">const</span> DAE_on_loaded_item = <span class="function">(<span class="params">result, SOURCE_OBJECTS</span>) =&gt;</span> &#123;</div><div class="line">        <span class="comment">// loop children of scene object</span></div><div class="line">        result.scene.children.forEach( <span class="function">(<span class="params">obj</span>) =&gt;</span> &#123;</div><div class="line">            <span class="comment">// if an object is a mesh object</span></div><div class="line">            <span class="keyword">if</span>(obj.type === <span class="string">'Mesh'</span>)&#123;</div><div class="line">                <span class="keyword">let</span> key = obj.name;</div><div class="line">                <span class="comment">// if name begins with num_ replace with ''</span></div><div class="line">                <span class="keyword">if</span>(key.match(<span class="regexp">/num_/</span>))&#123;</div><div class="line">                    key = key.replace(<span class="string">'num_'</span>, <span class="string">''</span>);</div><div class="line">                &#125;</div><div class="line">                SOURCE_OBJECTS[key] = obj;</div><div class="line">                obj.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// CREATE METHOD</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    api.create = <span class="function">(<span class="params">opt</span>) =&gt;</span> &#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.timeStr = opt.timeStr || <span class="string">'00'</span>;</div><div class="line">        opt.digits = opt.digits === <span class="literal">undefined</span> ? <span class="number">2</span> : opt.digits;  <span class="comment">// 2 digits</span></div><div class="line">        opt.source_objects = opt.source_objects || DEFAULT_OBJECTS;</div><div class="line">        opt.width = opt.width === <span class="literal">undefined</span> ? <span class="number">1</span> : opt.width;</div><div class="line">        opt.countID = opt.countID || <span class="string">''</span>;</div><div class="line">        <span class="comment">// main count object</span></div><div class="line">        <span class="keyword">const</span> countObj = <span class="keyword">new</span> THREE.Group();</div><div class="line">        countObj.name = opt.countID;</div><div class="line">        <span class="comment">// for each digit, clone all source objects</span></div><div class="line">        <span class="keyword">let</span> di = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(di &lt; opt.digits)&#123;</div><div class="line">            <span class="keyword">const</span> digit = <span class="keyword">new</span> THREE.Group();</div><div class="line">            digit.name = opt.countID + <span class="string">'_'</span> + di;</div><div class="line">            <span class="comment">// position digit group</span></div><div class="line">            positionDigit(digit, di, opt.digits, opt.width);</div><div class="line">            countObj.add(digit);</div><div class="line">            <span class="keyword">let</span> ni = <span class="number">0</span>;</div><div class="line">            <span class="keyword">while</span>(ni &lt; <span class="number">10</span>)&#123;</div><div class="line">                <span class="comment">// clone the mesh object</span></div><div class="line">                <span class="keyword">const</span> mesh = opt.source_objects[ni].clone();</div><div class="line">                mesh.name = opt.countID + <span class="string">'_'</span> + di + <span class="string">'_'</span> + ni;</div><div class="line">                mesh.visible = <span class="literal">false</span>; <span class="comment">// mesh objects viable gets set true based on time value</span></div><div class="line">                <span class="comment">// I will want a clone for the geometry and material also</span></div><div class="line">                mesh.geometry = mesh.geometry.clone();</div><div class="line">                mesh.material = mesh.material.clone();</div><div class="line">                digit.add(mesh);</div><div class="line">                ni += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            di += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        api.set(countObj, opt.timeStr);</div><div class="line">        <span class="keyword">return</span> countObj;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SET METHOD</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// set to the given time string</span></div><div class="line">    api.set = <span class="function">(<span class="params">countObj, timeStr</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">let</span> di = <span class="number">0</span>;</div><div class="line">        <span class="keyword">const</span> digits = countObj.children.length;</div><div class="line">        timeStr = toPadString(timeStr, digits);</div><div class="line">        <span class="keyword">while</span>(di &lt; digits)&#123;</div><div class="line">            <span class="keyword">let</span> ni = <span class="number">0</span>;</div><div class="line">            <span class="keyword">while</span>(ni &lt; <span class="number">10</span>)&#123;</div><div class="line">                <span class="keyword">const</span> mesh = countObj.getObjectByName(countObj.name + <span class="string">'_'</span> + di + <span class="string">'_'</span> + ni);</div><div class="line">                <span class="keyword">const</span> n = <span class="built_in">parseInt</span>(timeStr[di]);</div><div class="line">                mesh.visible = <span class="literal">false</span>;</div><div class="line">                <span class="keyword">if</span>(n === ni)&#123;</div><div class="line">                    mesh.visible = <span class="literal">true</span>;</div><div class="line">                &#125;</div><div class="line">                ni += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            di += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// DAE FILE LOADER </span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    api.DAE_loader = <span class="function"><span class="keyword">function</span>(<span class="params"> dae_urls, on_loaded_item </span>)</span>&#123;</div><div class="line">        on_loaded_item = on_loaded_item || <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line">        <span class="keyword">const</span> manager = <span class="keyword">new</span> THREE.LoadingManager();</div><div class="line">        <span class="keyword">const</span> SOURCE_OBJECTS = &#123;&#125;;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">            <span class="comment">// ERROR WHEN LOADING</span></div><div class="line">            manager.onError = <span class="function"><span class="keyword">function</span>(<span class="params">url</span>)</span>&#123;</div><div class="line">                reject(<span class="keyword">new</span> <span class="built_in">Error</span>( <span class="string">'error when loading: '</span> + url ));</div><div class="line">            &#125;;</div><div class="line">            <span class="comment">// WHEN ALL LOADING IS DONE</span></div><div class="line">            manager.onLoad = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                resolve(SOURCE_OBJECTS);</div><div class="line">            &#125;;</div><div class="line">            dae_urls.forEach(<span class="function">(<span class="params">url</span>) =&gt;</span> &#123;</div><div class="line">                <span class="keyword">const</span> loader = <span class="keyword">new</span> THREE.ColladaLoader(manager);</div><div class="line">                loader.load(url, <span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</div><div class="line">                    <span class="comment">// what to do for each DAE by calling the built in helper for this</span></div><div class="line">                    DAE_on_loaded_item(result, SOURCE_OBJECTS);</div><div class="line">                    on_loaded_item(result, SOURCE_OBJECTS );</div><div class="line">                &#125;);</div><div class="line">            &#125;);</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// add lines for a mesh object</span></div><div class="line">    api.addLine = <span class="function">(<span class="params">obj, s, pos, lw, color</span>) =&gt;</span> &#123;</div><div class="line">        s = s === <span class="literal">undefined</span> ? <span class="number">1</span> : s;</div><div class="line">        pos = pos || <span class="keyword">new</span> THREE.Vector3();</div><div class="line">        <span class="keyword">const</span> material_line = <span class="keyword">new</span> THREE.LineBasicMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: color || <span class="number">0xffffff</span>, </div><div class="line">            <span class="attr">linewidth</span>: lw === <span class="literal">undefined</span> ? <span class="number">8</span>: lw,</div><div class="line">            <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">1</span></div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">const</span> line = <span class="keyword">new</span> THREE.LineSegments( <span class="keyword">new</span> THREE.EdgesGeometry(obj.geometry), material_line );</div><div class="line">        line.scale.set(s, s, s);</div><div class="line">        line.position.copy(pos);</div><div class="line">        obj.add(line);</div><div class="line">    &#125;;</div><div class="line">&#125;( <span class="keyword">this</span>[<span class="string">'countDown'</span>] = &#123;&#125; ));</div></pre></td></tr></table></figure>
<h3 id="2-1-Using-canvas-elements-to-create-textures"><a href="#2-1-Using-canvas-elements-to-create-textures" class="headerlink" title="2.1 - Using canvas elements to create textures"></a>2.1 - Using canvas elements to create textures</h3><p>This will be the first demo of the count-down.js file in which I am using a custom set of source objects that I create in the demo file. I do have the default objects of course, but I am sure that in any given project I am not going to be using those. The source objects for this demo are then just a bunch of mesh objects that use the <a href="/2021/04/26/threejs-box-geometry/">THREE.BoxGeometry</a> class for the Geometry of each object. However I will be making use of my <a href="/2018/04/17/threejs-canvas-texture/">canvas.js file from my canvas textures module</a> in order to create the textures that I will use for each mesh object of each number.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">    camera.position.set(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// CUSTOM OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// draw method</span></div><div class="line">    <span class="keyword">const</span> drawNumber = <span class="function">(<span class="params">canObj, ctx, canvas, state</span>) =&gt;</span> &#123;</div><div class="line">        <span class="comment">// black background</span></div><div class="line">        ctx.fillStyle = canObj.palette[<span class="number">0</span>];</div><div class="line">        ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">        <span class="comment">// white outline</span></div><div class="line">        ctx.strokeStyle = canObj.palette[<span class="number">1</span>];</div><div class="line">        ctx.strokeRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">        <span class="comment">// white text</span></div><div class="line">        ctx.fillStyle = canObj.palette[<span class="number">1</span>];</div><div class="line">        ctx.textBaseline = <span class="string">'middle'</span>;</div><div class="line">        ctx.textAlign = <span class="string">'center'</span>;</div><div class="line">        ctx.font = <span class="string">'16px arial'</span>;</div><div class="line">        ctx.fillText(state.char, <span class="number">16</span>, <span class="number">16</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// createing custom objects using canvas.js r2</span></div><div class="line">    <span class="keyword">const</span> SOURCE_OBJECTS = &#123;&#125;;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; <span class="number">10</span>)&#123;</div><div class="line">        <span class="keyword">const</span> canObj = canvasMod.create(&#123;</div><div class="line">            <span class="attr">size</span>: <span class="number">32</span>,</div><div class="line">            <span class="attr">update_mode</span>: <span class="string">'canvas'</span>,</div><div class="line">            <span class="attr">palette</span>: [<span class="string">'black'</span>, <span class="string">'white'</span>],</div><div class="line">            <span class="attr">state</span>: &#123;</div><div class="line">               <span class="attr">char</span>: i,</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">draw</span>: drawNumber</div><div class="line">        &#125;);</div><div class="line">        canvasMod.update(canObj);</div><div class="line">        SOURCE_OBJECTS[i] = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">                <span class="attr">map</span>: canObj.texture</div><div class="line">            &#125;)</div><div class="line">        );</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">    <span class="comment">// seconds</span></div><div class="line">    <span class="keyword">const</span> count_sec = countDown.create(&#123;</div><div class="line">        <span class="attr">countID</span>: <span class="string">'sec'</span>,</div><div class="line">        <span class="attr">digits</span>: <span class="number">2</span>,</div><div class="line">        <span class="attr">width</span>: <span class="number">1.25</span>,</div><div class="line">        <span class="attr">source_objects</span>: SOURCE_OBJECTS</div><div class="line">    &#125;);</div><div class="line">    count_sec.position.set(<span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(count_sec);</div><div class="line">    <span class="keyword">const</span> count_ms = countDown.create(&#123;</div><div class="line">        <span class="attr">countID</span>: <span class="string">'ms'</span>,</div><div class="line">        <span class="attr">digits</span>: <span class="number">3</span>,</div><div class="line">        <span class="attr">width</span>: <span class="number">1.15</span>,</div><div class="line">        <span class="attr">source_objects</span>: SOURCE_OBJECTS</div><div class="line">    &#125;);</div><div class="line">    count_ms.scale.set(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line">    count_ms.position.set(<span class="number">1.25</span>, <span class="number">0</span>, <span class="number">0.5</span>);</div><div class="line">    scene.add(count_ms);</div><div class="line">    <span class="comment">// frame counter</span></div><div class="line">    <span class="keyword">const</span> count_frames = countDown.create(&#123;</div><div class="line">        <span class="attr">countID</span>: <span class="string">'frames'</span>,</div><div class="line">        <span class="attr">digits</span>: <span class="number">3</span>,</div><div class="line">        <span class="attr">width</span>: <span class="number">1.25</span>,</div><div class="line">        <span class="attr">source_objects</span>: SOURCE_OBJECTS</div><div class="line">    &#125;);</div><div class="line">    count_frames.position.set(<span class="number">-3.5</span>,<span class="number">0</span>,<span class="number">-5</span>);</div><div class="line">    scene.add(count_frames);</div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">30</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = <span class="number">900</span>;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// update</span></div><div class="line">    <span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> a1 = (frame + <span class="number">1</span>) / frameMax;</div><div class="line">        <span class="keyword">let</span> secs = <span class="built_in">Math</span>.floor(<span class="number">30</span> - <span class="number">30</span> * a1);</div><div class="line">        <span class="keyword">let</span> a2 = (<span class="number">30</span> - <span class="number">30</span> * a1) % <span class="number">1</span>;</div><div class="line">        <span class="keyword">let</span> ms = <span class="built_in">Math</span>.floor(<span class="number">1000</span> * a2);</div><div class="line">        <span class="comment">//const timeStr = String(secs).padStart(3, '0');</span></div><div class="line">        countDown.set(count_sec, secs);</div><div class="line">        countDown.set(count_ms, ms);</div><div class="line">        countDown.set(count_frames, frame);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="2-2-Using-the-DAE-load-method"><a href="#2-2-Using-the-DAE-load-method" class="headerlink" title="2.2 - Using the DAE load method"></a>2.2 - Using the DAE load method</h3><p>When it comes to any and all real projects that I will be making with this module I am sure that I will want to use one or more DAE files to load custom geometry for the numbers and additional geometry for other objects that will compose the over all scene. For this example I am loading just one DAE file which is my cd1.dae file in which I just have objects for each number that have a position and normal attribute and that is it. For now I am not doing anything fancy when it comes to changing values for the materials of the objects that default to phong material. Because of this I will want to add a light source as usual then and for this I am going with my typical choice these days with that which is a directional light.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">3</span>, <span class="number">3</span>, <span class="number">5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>);</div><div class="line">scene.add(dl);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SOURCE_OBJECTS OBJECT that will hold the number objects</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> SOURCE_OBJECTS = &#123;&#125;;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// what to do for a DAE result object</span></div><div class="line"><span class="keyword">const</span> DAE_on_loaded_item = <span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; <span class="number">10</span>)&#123;</div><div class="line">        <span class="keyword">const</span> obj = result.scene.getObjectByName(<span class="string">'num_'</span> + i);</div><div class="line">        obj.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        SOURCE_OBJECTS[i] = obj;</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// create a count_sec count down object</span></div><div class="line"><span class="keyword">const</span> create_count_sec = <span class="function">(<span class="params"> objects </span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> count_sec = countDown.create(&#123;</div><div class="line">        <span class="attr">countID</span>: <span class="string">'sec'</span>,</div><div class="line">        <span class="attr">digits</span>: <span class="number">2</span>,</div><div class="line">        <span class="attr">width</span>: <span class="number">1.05</span>,</div><div class="line">        <span class="attr">source_objects</span>: objects</div><div class="line">    &#125;);</div><div class="line">    count_sec.position.set(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">return</span> count_sec;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// create loop method with given update method</span></div><div class="line"><span class="keyword">const</span> create_loop = <span class="function">(<span class="params">update</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">30</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = <span class="number">800</span>;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// update</span></div><div class="line">    update = update || <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;&#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> loop;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LOADING MANAGER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">countDown.DAE_loader([<span class="string">'/dae/count_down_basic/cd1.dae'</span>], DAE_on_loaded_item)</div><div class="line">.then( <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Done Loading.'</span>);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">    <span class="comment">// count secs count down object</span></div><div class="line">    <span class="keyword">const</span> count_sec = create_count_sec(SOURCE_OBJECTS);</div><div class="line">    scene.add(count_sec);</div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="comment">// UPDATE / ANIMATION LOOP</span></div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> a1 = (frame + <span class="number">1</span>) / frameMax;</div><div class="line">        <span class="keyword">let</span> secs = <span class="built_in">Math</span>.floor(<span class="number">30</span> - <span class="number">30</span> * a1);</div><div class="line">        countDown.set(count_sec, secs);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">const</span> loop = create_loop(update);</div><div class="line">    loop();</div><div class="line">&#125;)</div><div class="line">.catch( <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(e.message);</div><div class="line">    scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="2-3-Using-the-DAE-load-method-and-canvas-to-add-texture"><a href="#2-3-Using-the-DAE-load-method-and-canvas-to-add-texture" class="headerlink" title="2.3 - Using the DAE load method, and canvas to add texture"></a>2.3 - Using the DAE load method, and canvas to add texture</h3><p>With this example I am once again using the DAE loader method, but now I am also once again using my canvas module to create textures for these objects. With that said at this time I am using the cd2.dae file in which I have worked out okay uv maps for each number.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, <span class="number">0.8</span>, <span class="number">0.8</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">1.5</span>, <span class="number">2.5</span>, <span class="number">4.0</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0.85</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">0.8</span>);</div><div class="line">dl.position.set(<span class="number">-2</span>, <span class="number">1</span>, <span class="number">2</span>);</div><div class="line">scene.add(dl);</div><div class="line"><span class="keyword">const</span> al = <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>, <span class="number">0.1</span>);</div><div class="line">scene.add(al);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CONST</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> SECS = <span class="number">30</span>;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// TEXTURE</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> canObj_rnd1 = canvasMod.create(&#123;</div><div class="line">    <span class="attr">size</span>: <span class="number">1024</span>,</div><div class="line">    <span class="attr">draw</span>: <span class="string">'rnd'</span>,</div><div class="line">    <span class="attr">palette</span>: [</div><div class="line">        <span class="string">'#ffffff'</span>, <span class="string">'#fefefe'</span>,<span class="string">'#fdfdfd'</span>,<span class="string">'#fcfcfc'</span>, <span class="string">'#fbfbfb'</span>, <span class="string">'#fafafa'</span>, <span class="string">'#f9f9f9'</span>,<span class="string">'#f8f8f8'</span>, <span class="string">'#f7f7f7'</span>, <span class="string">'#f6f6f6'</span>,</div><div class="line">        <span class="string">'#f5f5f5'</span>,<span class="string">'#f4f4f4'</span>, <span class="string">'#eeeeee'</span>, <span class="string">'#dddddd'</span>, <span class="string">'#cccccc'</span>,<span class="string">'#bbbbbb'</span>, <span class="string">'#aaaaaa'</span>, <span class="string">'#999999'</span>, <span class="string">'#888888'</span>, <span class="string">'#666666'</span></div><div class="line">    ],</div><div class="line">    <span class="attr">state</span>: &#123; <span class="attr">gSize</span>: <span class="number">64</span> &#125;</div><div class="line">&#125;);</div><div class="line"><span class="keyword">const</span> canObj_rnd2 = canvasMod.create(&#123;</div><div class="line">    <span class="attr">size</span>: <span class="number">1024</span>,</div><div class="line">    <span class="attr">draw</span>: <span class="string">'rnd'</span>,</div><div class="line">    <span class="attr">palette</span>: [</div><div class="line">        <span class="string">'#007700'</span>,<span class="string">'#009900'</span>,<span class="string">'#00bb00'</span>,<span class="string">'#00dd00'</span>,<span class="string">'#00ff00'</span>, <span class="comment">// light greens</span></div><div class="line">        <span class="string">'#007733'</span>,<span class="string">'#009944'</span>,<span class="string">'#00bb55'</span>,<span class="string">'#00dd66'</span>,<span class="string">'#00ff77'</span>, <span class="comment">// light cyans</span></div><div class="line">        <span class="string">'#004400'</span>,<span class="string">'#005500'</span>,<span class="string">'#006600'</span>, <span class="comment">// dark greens</span></div><div class="line">        <span class="string">'#003311'</span> <span class="comment">// drak cyan</span></div><div class="line">    ],</div><div class="line">    <span class="attr">state</span>: &#123; <span class="attr">gSize</span>: <span class="number">128</span> &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// create loop method with given update method</span></div><div class="line"><span class="keyword">const</span> create_loop = <span class="function">(<span class="params">update</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">30</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = SECS * FPS_UPDATE;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// update</span></div><div class="line">    update = update || <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;&#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> loop;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LOADING MANAGER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">countDown.DAE_loader([ <span class="string">'/dae/count_down_basic/cd2.dae'</span> ])</div><div class="line">.then( <span class="function">(<span class="params">SOURCE_OBJECTS</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Done Loading.'</span>);</div><div class="line">    <span class="comment">// use canvas textures</span></div><div class="line">    <span class="built_in">Object</span>.keys(SOURCE_OBJECTS).forEach( <span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> obj = SOURCE_OBJECTS[key];</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">parseInt</span>(key) + <span class="string">''</span> != <span class="string">'NaN'</span>)&#123;</div><div class="line">            obj.material.map = canObj_rnd1.texture_data;</div><div class="line">            countDown.addLine(obj, <span class="number">1</span>, <span class="keyword">new</span> THREE.Vector3(), <span class="number">2</span>, <span class="number">0xffffff</span>);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            obj.material.map = canObj_rnd2.texture_data;</div><div class="line">            countDown.addLine(obj, <span class="number">1</span>, <span class="keyword">new</span> THREE.Vector3(<span class="number">0.01</span>,<span class="number">0</span>,<span class="number">0.01</span>), <span class="number">2</span>, <span class="number">0xffffff</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// count secs count down object</span></div><div class="line">    <span class="keyword">const</span> count_sec = countDown.create(&#123;</div><div class="line">        <span class="attr">countID</span>: <span class="string">'sec'</span>,</div><div class="line">        <span class="attr">digits</span>: <span class="number">2</span>,</div><div class="line">        <span class="attr">width</span>: <span class="number">1.1</span>,</div><div class="line">        <span class="attr">source_objects</span>: SOURCE_OBJECTS</div><div class="line">    &#125;);</div><div class="line">    count_sec.scale.set(<span class="number">0.75</span>, <span class="number">0.75</span>, <span class="number">0.75</span>);</div><div class="line">    count_sec.position.set(<span class="number">0</span>, <span class="number">2.05</span>, <span class="number">-0.5</span>);</div><div class="line">    scene.add(count_sec);</div><div class="line">    <span class="comment">// adding a frame count</span></div><div class="line">    <span class="keyword">const</span> count_frames = countDown.create(&#123;</div><div class="line">        <span class="attr">countID</span>: <span class="string">'frames'</span>,</div><div class="line">        <span class="attr">digits</span>: <span class="number">3</span>,</div><div class="line">        <span class="attr">width</span>: <span class="number">1.4</span>,</div><div class="line">        <span class="attr">source_objects</span>: SOURCE_OBJECTS</div><div class="line">    &#125;);</div><div class="line">    count_frames.scale.set(<span class="number">0.25</span>, <span class="number">0.25</span>, <span class="number">0.25</span>);</div><div class="line">    count_frames.position.set(<span class="number">0</span>, <span class="number">0.80</span>, <span class="number">0.30</span>);</div><div class="line">    scene.add(count_frames);</div><div class="line">    <span class="comment">// add ground object</span></div><div class="line">    scene.add( SOURCE_OBJECTS[<span class="string">'ground_0'</span>] );</div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="comment">// UPDATE / ANIMATION LOOP</span></div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="keyword">const</span> loop = create_loop(<span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> a1 = (frame + <span class="number">1</span>) / frameMax;</div><div class="line">        <span class="keyword">let</span> secs = <span class="built_in">Math</span>.floor(SECS - SECS * a1);</div><div class="line">        countDown.set(count_sec, secs);</div><div class="line">        countDown.set(count_frames, frame);</div><div class="line">        <span class="comment">// camera</span></div><div class="line">        camera.position.x = <span class="number">2</span> - <span class="number">4</span> * a1;</div><div class="line">        camera.lookAt( <span class="number">0</span>, <span class="number">1.20</span>, <span class="number">0</span> );</div><div class="line">    &#125;);</div><div class="line">    loop();</div><div class="line">&#125;)</div><div class="line">.catch( <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(e.message);</div><div class="line">    scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="2-4-Using-the-DAE-load-method-with-more-than-one-file-and-with-DAE-file-textures"><a href="#2-4-Using-the-DAE-load-method-with-more-than-one-file-and-with-DAE-file-textures" class="headerlink" title="2.4 - Using the DAE load method with more than one file, and with DAE file textures"></a>2.4 - Using the DAE load method with more than one file, and with DAE file textures</h3><p>For this example I am now ditching the use of canvas textures in favor of textures that I have made for the DAE files. As at this point I am not only using external files for geometry that has position, as well as custom uv and normals attributes, but now also textures as well. Also I am now getting into the habit of making more than one DAE file one for numbers, and the other for everything else that I want in the scene. Moving forward I am sure that I will end up with just one great file for the numbers that I will want to reuse from one project to the next, but have many other files for additional objects to place in the scene. So for this example I am now using my cd3-nums file along with my cd3-ground files. These files have uvmaps and on top of that textures that are use for each material of each object. I am thinking that this might be the final form of the kinds of files I want to make for this, at least when it comes to r0 of the count-down.js file.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0</span>, <span class="number">0.8</span>, <span class="number">0.8</span>);</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">32</span> / <span class="number">24</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">1.5</span>, <span class="number">1.5</span>, <span class="number">5.0</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0.85</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">0.8</span>);</div><div class="line">dl.position.set(<span class="number">-2</span>, <span class="number">1</span>, <span class="number">2</span>);</div><div class="line">scene.add(dl);</div><div class="line"><span class="keyword">const</span> al = <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>, <span class="number">0.1</span>);</div><div class="line">scene.add(al);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// CONST</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> SECS = <span class="number">30</span>;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// create loop method with given update method</span></div><div class="line"><span class="keyword">const</span> create_loop = <span class="function">(<span class="params">update</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> FPS_UPDATE = <span class="number">30</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">    FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">    FRAME_MAX = SECS * FPS_UPDATE;</div><div class="line">    <span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">    frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">// update</span></div><div class="line">    update = update || <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;&#125;;</div><div class="line">    <span class="comment">// loop</span></div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">            <span class="comment">// update, render</span></div><div class="line">            update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">            renderer.render(scene, camera);</div><div class="line">            <span class="comment">// step frame</span></div><div class="line">            frame += FPS_MOVEMENT * secs;</div><div class="line">            frame %= FRAME_MAX;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> loop;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LOADING MANAGER</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">countDown.DAE_loader(</div><div class="line">    [</div><div class="line">        <span class="string">'/dae/count_down_basic/cd4-nums.dae'</span>,</div><div class="line">        <span class="string">'/dae/count_down_basic/cd3-ground.dae'</span></div><div class="line">    ]</div><div class="line">)</div><div class="line">.then( <span class="function">(<span class="params">SOURCE_OBJECTS</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Done Loading.'</span>);</div><div class="line">    <span class="built_in">Object</span>.keys( SOURCE_OBJECTS ).forEach( <span class="function">(<span class="params"> key </span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> obj = SOURCE_OBJECTS[key];</div><div class="line">        <span class="keyword">const</span> mat = obj.material;</div><div class="line">        <span class="keyword">if</span>(mat.map)&#123;</div><div class="line">            <span class="keyword">const</span> tex = mat.map;</div><div class="line">            tex.magFilter = THREE.NearestFilter;</div><div class="line">            tex.minFilter = THREE.NearestFilter;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// colon object</span></div><div class="line">    <span class="keyword">const</span> colon = SOURCE_OBJECTS.colon;</div><div class="line">    colon.position.set(<span class="number">-1.5</span>, <span class="number">1.30</span>, <span class="number">0.4</span>);</div><div class="line">    scene.add(colon);</div><div class="line">    <span class="comment">// count secs count down object</span></div><div class="line">    <span class="keyword">const</span> count_sec = countDown.create(&#123;</div><div class="line">        <span class="attr">countID</span>: <span class="string">'sec'</span>,</div><div class="line">        <span class="attr">digits</span>: <span class="number">2</span>,</div><div class="line">        <span class="attr">width</span>: <span class="number">1.1</span>,</div><div class="line">        <span class="attr">source_objects</span>: SOURCE_OBJECTS</div><div class="line">    &#125;);</div><div class="line">    count_sec.position.set(<span class="number">0</span>, <span class="number">1.30</span>, <span class="number">0.4</span>);</div><div class="line">    scene.add(count_sec);</div><div class="line">    <span class="comment">// adding a frame count</span></div><div class="line">    <span class="keyword">const</span> count_frames = countDown.create(&#123;</div><div class="line">        <span class="attr">countID</span>: <span class="string">'frames'</span>,</div><div class="line">        <span class="attr">digits</span>: <span class="number">3</span>,</div><div class="line">        <span class="attr">width</span>: <span class="number">1.4</span>,</div><div class="line">        <span class="attr">source_objects</span>: SOURCE_OBJECTS</div><div class="line">    &#125;);</div><div class="line">    count_frames.scale.set(<span class="number">0.25</span>, <span class="number">0.25</span>, <span class="number">0.25</span>);</div><div class="line">    count_frames.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1.50</span>);</div><div class="line">    scene.add(count_frames);</div><div class="line">    <span class="comment">// add ground object</span></div><div class="line">    scene.add( SOURCE_OBJECTS[<span class="string">'ground_0'</span>] );</div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="comment">// UPDATE / ANIMATION LOOP</span></div><div class="line">    <span class="comment">// ---------- ----------</span></div><div class="line">    <span class="keyword">const</span> loop = create_loop(<span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">        <span class="keyword">const</span> a1 = (frame + <span class="number">1</span>) / frameMax;</div><div class="line">        <span class="keyword">let</span> secs = <span class="built_in">Math</span>.floor(SECS - SECS * a1);</div><div class="line">        countDown.set(count_sec, secs);</div><div class="line">        countDown.set(count_frames, frame);</div><div class="line">        <span class="comment">// camera</span></div><div class="line">        camera.position.x = <span class="number">2</span> - <span class="number">4</span> * a1;</div><div class="line">        camera.lookAt( <span class="number">0</span>, <span class="number">0.5</span>, <span class="number">0</span> );</div><div class="line">    &#125;);</div><div class="line">    loop();</div><div class="line">&#125;)</div><div class="line">.catch( <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(e.message);</div><div class="line">    scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>This far I would have to say that this count down module is working just the way that I would like it, at least when it comes to a first set of basic timer videos to say the least. It is not to say that there is not more work to do with any and all future revisions of this examples when and it I get to it. Sure there are a whole lot of ideas that comes to mind with that, in fact way to many actually. The bottom line here though when it comes to making videos though is how the frames come out though, that is what is most important here. So many ideas that have to do with improving pref romance are of lower priority as I do not have to worry so much about real time rendering.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2022/12/23/threejs-examples-count-down/" data-id="cliqa07e60261bwv19fu2a0t6" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2022/12/23/threejs-examples-count-down/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/12/29/threejs-phong-material/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          The Phong material in three.js
        
      </div>
    </a>
  
  
    <a href="/2022/12/16/threejs-curve-geometry-from/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Using the curve class to create geometry in threejs</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2022/12/23/threejs-examples-count-down/index.html';
    this.page.identifier = '1019';
    this.page.title = 'A Timer video javaScript module threejs example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 13.64px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/07/23/threejs-lathe-geometry/">Lathe Geometry in threejs</a>
          </li>
        
          <li>
            <a href="/2023/06/09/threejs-vector2/">The Vector2 class for 2D curves, mouse pointers, ect</a>
          </li>
        
          <li>
            <a href="/2023/06/08/linux-dd/">Linux dd command and files</a>
          </li>
        
          <li>
            <a href="/2023/06/06/linux-sysbench/">Linux sysbench command for benchmarking a file system</a>
          </li>
        
          <li>
            <a href="/2023/06/02/threejs-tube-geometry/">Tube Geometry in threejs</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2022/12/23/threejs-examples-count-down/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>