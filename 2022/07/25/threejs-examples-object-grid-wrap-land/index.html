<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>THREEJS Looping land animation using the Object grid wrap module | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2022/07/25/threejs-examples-object-grid-wrap-land/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This week I took another look at my object grid wrap module threejs example that I made a while ago, and when doing so I made some revised versions of that source code. While I was at it I thought I w">
<meta property="og:type" content="article">
<meta property="og:title" content="THREEJS Looping land animation using the Object grid wrap module">
<meta property="og:url" content="https://dustinpfister.github.io/2022/07/25/threejs-examples-object-grid-wrap-land/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="This week I took another look at my object grid wrap module threejs example that I made a while ago, and when doing so I made some revised versions of that source code. While I was at it I thought I w">
<meta property="og:updated_time" content="2022-07-19T14:31:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="THREEJS Looping land animation using the Object grid wrap module">
<meta name="twitter:description" content="This week I took another look at my object grid wrap module threejs example that I made a while ago, and when doing so I made some revised versions of that source code. While I was at it I thought I w">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS-Examples</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas-Examples</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-examples-object-grid-wrap-land" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/07/25/threejs-examples-object-grid-wrap-land/" class="article-date"> Published:
  <time datetime="2022-07-25T12:55:00.000Z" itemprop="datePublished">2022-07-25</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2022/07/25/threejs-examples-object-grid-wrap-land/" class="article-date"> Modified:
  <time datetime="2022-07-19T14:31:57.000Z" itemprop="dateModified">2022-07-19</time>
</a>

    <span class="article-date">V1.14</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      THREEJS Looping land animation using the Object grid wrap module
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>This week I took another look at my <a href="/2022/05/20/threejs-examples-object-grid-wrap/">object grid wrap module threejs example</a> that I made a while ago, and when doing so I made some revised versions of that source code. While I was at it I thought I would start a <a href="/2021/02/19/threejs-examples/">new threejs example project</a> that will be another javaScript file in which I am building on top of this object grid wrap module that is a way to create a grid with a collection of mesh objects that looks like some land in terms of terrain at least. </p>
<p>When it comes to using this object grid wrap module I need to define a collection of source objects to clone for each grid location, so for this threejs example I am just creating a module that in part creates this collection of objects that include mesh objects with built in <a href="/2021/04/26/threejs-box-geometry/">box geometry</a> as well as <a href="https://threejs.org/docs/#api/en/geometries/ExtrudeGeometry" target="_blank" rel="external">Extrude geometry</a> using <a href="https://threejs.org/docs/#api/en/extras/core/Shape" target="_blank" rel="external">shapes</a>.</p>
<a id="more"></a>
<h2 id="The-land-object-grid-wrap-module-and-what-to-know-first"><a href="#The-land-object-grid-wrap-module-and-what-to-know-first" class="headerlink" title="The land object grid wrap module and what to know first"></a>The land object grid wrap module and what to know first</h2><p>This is one of my many threejs example posts in which I am going over some source code for something that is the start of an actual project of some kind using threejs rather than just yet another simple demo of a threejs feature of one kind or another. So then this is not at all in any way a post for people that are <a href="/2018/04/04/threejs-getting-started/">new to threejs</a> or javaScript in general. So I will not be going over various threejs let alone javaScript basics here, however in this section I will be writing about a few things that you might want to read up more on before continuing with the rest of this post.</p>
<iframe class="youtube_video" src="https://www.youtube.com/embed/CFFCF6lGmHc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h3 id="Check-out-Shape-and-Extrude-geometry-if-you-have-not-done-so"><a href="#Check-out-Shape-and-Extrude-geometry-if-you-have-not-done-so" class="headerlink" title="Check out Shape and Extrude geometry if you have not done so"></a>Check out Shape and Extrude geometry if you have not done so</h3><p>In this example I am using the threejs Shape constructor to create an instance of a 2d shape with the built in threejs shape class. I can then use one of these shape classes to create an instance of Extrude geometry that is just a 2d shape with a little depth added to it. For this project example this is what I am using to create mesh objects that will be slopes in the object grid that will resemble land. However this is of course something that you might want to read up more on in detail and with that said I wrote a <a href="/2021/06/01/threejs-shape/">blog post on this subject of shapes and Extrude geometry in threejs</a>.</p>
<h3 id="The-source-code-here-is-also-on-Github"><a href="#The-source-code-here-is-also-on-Github" class="headerlink" title="The source code here is also on Github"></a>The source code here is also on Github</h3><p>The source code that I am writing about here can also be found in my <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-examples-object-grid-wrap-land" target="_blank" rel="external">test threejs repository</a>. There is also the for <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-examples-object-grid-wrap" target="_blank" rel="external">post folder for my object grid wrap module</a> that I am working on top of that can also be found in that repository.</p>
<h3 id="Version-Numbers-matter"><a href="#Version-Numbers-matter" class="headerlink" title="Version Numbers matter"></a>Version Numbers matter</h3><p>When I wrote this post I was testing out the source code here with r140 of threejs and everything was working okay on my end with that revision of threejs.</p>
<h2 id="1-Starting-out-with-a-single-main-javaScript-file-and-a-new-opacity-effect-for-the-object-grid-wrap-module"><a href="#1-Starting-out-with-a-single-main-javaScript-file-and-a-new-opacity-effect-for-the-object-grid-wrap-module" class="headerlink" title="1 - Starting out with a single main javaScript file and a new opacity effect for the object grid wrap module"></a>1 - Starting out with a single main javaScript file and a new opacity effect for the object grid wrap module</h2><p>Like with many of my threejs example projects I often start out with a usual copy and paste cook book style block of code that sets up just a basic threejs scene object, camera, and renderer. I then just start writing some code that ends up being a crude yet effective starting point for the specific project idea in the main javaScript file. For this section I will then be writing about this main javaScript file that is the first version of what I want, and I will also be touching base on the source code of a new opacity effect plug in for revision 2 of my object grid wrap module.</p>
<h3 id="1-1-The-main-javaScript-file"><a href="#1-1-The-main-javaScript-file" class="headerlink" title="1.1 - The main javaScript file"></a>1.1 - The main javaScript file</h3><p>In the main javaScript file I have the usual set of objects that I am creating such as the scene object, camera, and renderer. On top ox this I am also setting up a few light sources as I will be going with the standard material when it comes to skinning the mesh objects that will be used in the grid.</p>
<p>To help with the process of creating the collection of source objects for the grid I have a few helper functions that I can use to quickly create the desired objects that will be coned for each grid location. So I have a make cube helper, and another helper function that will create each of the slope objects that I can work with when it comes to creating a land grid.</p>
<p>Now that I have my usual collection of threejs objects, and some helper functions for creating mesh objects, I can now create my grid object using the object grid wrap module. To do so I call the create method of the object grid wrap module, and pass an object containing all the options to use when setting up the grid. For the source objects I am of course calling the helper functions with the desired arguments for each object index. For now when it comes to creating the array of index values for each grid location I am just working out a array literal of primitives. On top of the source object index values I will also want to have an array of values that are the altitude values for each mesh object also, for this I am also working this out manually and just having arrays of primitives for these values as well.</p>
<p>When it comes to setting up some effects to use for this grid I am using opacity2 which is a new alternative to the original opacity effect that I made for the object grid wrap module that I made for this project. I will be getting into this in detail later in this section, but the basic idea is to have it so that opacity does not start to go down right away, but after a certain distance from the center of the grid.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="keyword">var</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'#000000'</span>);</div><div class="line"><span class="comment">//scene.add( new THREE.GridHelper(10, 10, 0x00ff00, 0xffffff) )</span></div><div class="line"><span class="keyword">var</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">60</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">-10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">var</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="keyword">var</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">8</span>, <span class="number">2</span>, <span class="number">4</span>);</div><div class="line">scene.add(dl);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>, <span class="number">0.05</span> ) )</div><div class="line"> </div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">// MESH OBJECTS</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"> </div><div class="line"><span class="keyword">var</span> MATERIAL_LAND = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;<span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="string">'green'</span>)&#125;)</div><div class="line"> </div><div class="line"><span class="comment">// MESH basic cube</span></div><div class="line"><span class="keyword">var</span> makeCube = <span class="function"><span class="keyword">function</span>(<span class="params">size</span>)</span>&#123;</div><div class="line">    size = size === <span class="literal">undefined</span> ? <span class="number">1</span> : size;</div><div class="line">    <span class="keyword">var</span> cube = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">        <span class="keyword">new</span> THREE.BoxGeometry(size, size, size), </div><div class="line">        MATERIAL_LAND</div><div class="line">    );</div><div class="line">    <span class="keyword">return</span> cube</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// MAKE MESH SLOPE HELPER</span></div><div class="line"><span class="keyword">var</span> makeSlopeMesh = <span class="function"><span class="keyword">function</span>(<span class="params">alphaR, size</span>)</span>&#123;</div><div class="line">    alphaR = alphaR === <span class="literal">undefined</span> ? <span class="number">0</span> : alphaR;</div><div class="line">    size = size === <span class="literal">undefined</span> ? <span class="number">1</span> : size;</div><div class="line">    <span class="keyword">var</span> shape_slope = <span class="keyword">new</span> THREE.Shape();</div><div class="line">    <span class="keyword">var</span> hSize = size / <span class="number">2</span>;</div><div class="line">    shape_slope.moveTo(hSize, hSize);</div><div class="line">    shape_slope.lineTo(hSize * <span class="number">-1</span>, hSize * <span class="number">-1</span>);</div><div class="line">    shape_slope.lineTo(hSize, hSize * <span class="number">-1</span>);</div><div class="line">    <span class="comment">// geometry</span></div><div class="line">    <span class="keyword">var</span> geometry = <span class="keyword">new</span> THREE.ExtrudeGeometry(shape_slope, &#123;</div><div class="line">        <span class="attr">depth</span>: size,</div><div class="line">        <span class="attr">bevelEnabled</span>: <span class="literal">false</span></div><div class="line">    &#125;);</div><div class="line">    geometry.computeBoundingBox();</div><div class="line">    geometry.center();</div><div class="line">    geometry.rotateY( <span class="built_in">Math</span>.PI * <span class="number">2</span> * alphaR );</div><div class="line">    <span class="keyword">var</span> slope = <span class="keyword">new</span> THREE.Mesh( geometry, MATERIAL_LAND);</div><div class="line">    <span class="keyword">return</span> slope;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">// GRID</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"> </div><div class="line"><span class="keyword">var</span> tw = <span class="number">10</span>,</div><div class="line">th = <span class="number">10</span>,</div><div class="line">space = <span class="number">2</span>;</div><div class="line"><span class="keyword">var</span> grid = ObjectGridWrap.create(&#123;</div><div class="line">    <span class="attr">spaceW</span>: space + <span class="number">0.05</span>,</div><div class="line">    <span class="attr">spaceH</span>: space + <span class="number">0.05</span>,</div><div class="line">    <span class="attr">tw</span>: tw,</div><div class="line">    <span class="attr">th</span>: th,</div><div class="line">    <span class="attr">dAdjust</span>: <span class="number">1.25</span>,</div><div class="line">    <span class="attr">effects</span>: [<span class="string">'opacity2'</span>],</div><div class="line">    <span class="attr">sourceObjects</span>: [</div><div class="line">        makeCube(space),</div><div class="line">        makeSlopeMesh(<span class="number">0.00</span>, space),</div><div class="line">        makeSlopeMesh(<span class="number">0.25</span>, space),</div><div class="line">        makeSlopeMesh(<span class="number">0.50</span>, space),</div><div class="line">        makeSlopeMesh(<span class="number">0.75</span>, space)</div><div class="line">    ],</div><div class="line"></div><div class="line">    <span class="attr">objectIndices</span>: [</div><div class="line">        <span class="number">0</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">3</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">3</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">3</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">    ]</div><div class="line">&#125;);</div><div class="line">scene.add(grid);</div><div class="line"> </div><div class="line"><span class="comment">// I will want to have some way to set altitude for each</span></div><div class="line"><span class="comment">// cloned mesh object in the gird</span></div><div class="line"><span class="keyword">var</span> altitude = [</div><div class="line">        <span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">];</div><div class="line">grid.children.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">obj, i</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> alt = altitude[i];</div><div class="line">    obj.geometry = obj.geometry.clone();</div><div class="line">    obj.geometry.translate(<span class="number">0</span>, alt * space, <span class="number">0</span>)</div><div class="line">&#125;);</div><div class="line"><span class="comment">// base position for whone grid</span></div><div class="line">grid.position.set(<span class="number">0</span>, <span class="number">0.5</span>, <span class="number">0</span>);</div><div class="line"> </div><div class="line"><span class="comment">// adjust 'minB' value for opacity2 effect</span></div><div class="line">grid.userData.minB = <span class="number">0.3</span>;</div><div class="line"> </div><div class="line"><span class="built_in">console</span>.log(grid.userData)</div><div class="line"> </div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">// LOOP</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="keyword">var</span> controls = <span class="keyword">new</span> THREE.OrbitControls(camera, renderer.domElement);</div><div class="line"><span class="keyword">var</span> fps = <span class="number">30</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">maxFrame = <span class="number">300</span>;</div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    per = frame / maxFrame,</div><div class="line">    bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - per) / <span class="number">0.5</span>,</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>,</div><div class="line">    ud = grid.userData;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps)&#123;</div><div class="line"></div><div class="line">        <span class="comment">// set position of the grid</span></div><div class="line">        ObjectGridWrap.setPos(grid, ( <span class="number">1</span> - per ) * <span class="number">2</span>, <span class="number">0</span> );</div><div class="line">        <span class="comment">// update grid by current alphas and effects</span></div><div class="line">        ObjectGridWrap.update(grid);</div><div class="line"></div><div class="line">        renderer.render(scene, camera);</div><div class="line">        frame += fps * secs;</div><div class="line">        frame %= maxFrame;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h3 id="1-2-The-new-opacity-effect-plug-in"><a href="#1-2-The-new-opacity-effect-plug-in" class="headerlink" title="1.2 - The new opacity effect plug in"></a>1.2 - The new opacity effect plug in</h3><p>For this project example I made a new opacity effect plug in for r2 of my object grid wrap module that seems to be working great so far and as such I might make this part of a collection of standard effects for future revisions of the module. With my first opacity effect objects will begin to loose opacity from the very center of the grid, which more often than not is not what I want to happen when adding an opacity effect to projects that make use of the object grid wrap module. So then in this new opacity effect I am still doing more or less the same thing as with the first opacity effect it is just that now I have a way to set a value between 0 and 1 that will be the minimum remaining distance from center where opacity loss will start.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*********</span></div><div class="line"> Opcaity2 effect for object-grid-wrap.js r2</div><div class="line">*********/</div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">// set opacity helper function</span></div><div class="line">    <span class="keyword">var</span> setOpacity = <span class="function"><span class="keyword">function</span>(<span class="params">obj_root, alpha</span>)</span>&#123;</div><div class="line">        obj_root.traverse(<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">            <span class="comment">// any object with a material</span></div><div class="line">            <span class="keyword">if</span>(obj.material)&#123;</div><div class="line">                <span class="keyword">if</span>(obj.material <span class="keyword">instanceof</span> <span class="built_in">Array</span>)&#123;</div><div class="line">                    obj.material.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">m</span>)</span>&#123;</div><div class="line">                        m.transparent = <span class="literal">true</span>;</div><div class="line">                        m.opacity = alpha;</div><div class="line">                    &#125;);</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    obj.material.transparent = <span class="literal">true</span>;</div><div class="line">                    obj.material.opacity = alpha;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    ObjectGridWrap.load( &#123;</div><div class="line">        <span class="attr">EFFECTS</span> : &#123;</div><div class="line">            <span class="comment">// opacity2 works by only lowering the alpha value once objData.b value</span></div><div class="line">            <span class="comment">// is lower than of equal to a min value such as 0.25. A 'minB' value of the </span></div><div class="line">            <span class="comment">// userData object of the grid can be used to change this</span></div><div class="line">            opacity2 : <span class="function"><span class="keyword">function</span>(<span class="params">grid, obj, objData, ud</span>)</span>&#123;</div><div class="line">                <span class="keyword">var</span> minB = grid.userData.minB === <span class="literal">undefined</span> ? <span class="number">0.5</span>: grid.userData.minB;</div><div class="line">                <span class="keyword">if</span>(objData.b &lt;= minB)&#123;</div><div class="line">                   <span class="keyword">var</span> alpha = objData.b / minB;</div><div class="line">                   alpha = alpha &lt; <span class="number">0</span> ? <span class="number">0</span> : alpha;</div><div class="line">                   <span class="comment">// using Math.pow for smoother change</span></div><div class="line">                   alpha = <span class="built_in">Math</span>.pow(<span class="number">1.75</span>, <span class="number">8</span> * alpha) / <span class="built_in">Math</span>.pow(<span class="number">1.75</span>, <span class="number">8</span>)</div><div class="line">                   setOpacity(obj, alpha);</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                   setOpacity(obj, <span class="number">1</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125; );</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h2 id="2-Stand-alone-object-grid-wrap-land-module-r2"><a href="#2-Stand-alone-object-grid-wrap-land-module-r2" class="headerlink" title="2 - Stand alone object grid wrap land module ( r2 )"></a>2 - Stand alone object grid wrap land module ( r2 )</h2><p>After working out the crude basic idea of what I want to get done I now just need to create a new javaScript file in which I am taking what I worked out in the main javaScript file and turn it into a stand alone javaScript file. This way I can take this land module with me from project to project just like with the other javaScript file assets that I am working on top of with the object grid module itself, and the additional effect file that I made.</p>
<p>At the time of this writing I all ready complicated two revisions of this land module that works on top of my object grid module, so in this section I will be writing about what I have done thus far with r2 of the land module. So then I will also be covering all of the features that I started in r1 of the module as well in this section.</p>
<h3 id="2-1-The-object-grid-wrap-land-javascript-file"><a href="#2-1-The-object-grid-wrap-land-javascript-file" class="headerlink" title="2.1 - The object grid wrap land javascript file"></a>2.1 - The object grid wrap land javascript file</h3><p>The main method of interest with this module is the create method which is what I will be calling in my main javaScript file to create a land grid. In the body of this create function I will in turn also be calling the create method of my object grid wrap module, so the main thing about this create method is to just set up the proper options, and do any additional custom work after creating the grid that needs to get done. </p>
<p>The main thing that needs to get done after creating the grid then is to adjust the geometry of each tile in the gird so that each land tile grid mesh geometry is set at a desired altitude. This is done by looping over each tile in the grid and using the clone method of the buffer geometry class to clone a copy of the geometry for the mesh, and then using the translate method of the geometry to set the proper altitude that is set by way of an additional option that is given when calling the create method.</p>
<p>As of r2 of the land module I have added support for built in data textures for the various land mesh objects that are created for the source objects array that is used when creating the grid. This way I can quickly get up and running making a custom land scene and not bother adding textures for the land tiles as they are all ready there to begin with by default. However I might still want to call this set data textures public method when creating the grid in the main javaScript file to make it so that there is more than one texture that is used.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">// ObjectGridWrap module land module - r2</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="keyword">var</span> ObjectGridWrapLand = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">// public API</span></div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// make data texture helper</span></div><div class="line">    <span class="keyword">var</span> makeDataTexture = <span class="function"><span class="keyword">function</span>(<span class="params">width, height, vHigh, vLow</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> size = width * height;</div><div class="line">        <span class="keyword">var</span> data = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>( <span class="number">4</span> * size );</div><div class="line">        <span class="keyword">for</span> ( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; size; i ++ ) &#123;</div><div class="line">            <span class="keyword">var</span> stride = i * <span class="number">4</span>;</div><div class="line">            <span class="keyword">var</span> v = <span class="built_in">Math</span>.floor( vLow + THREE.MathUtils.seededRandom() * ( vHigh - vLow ) );</div><div class="line">            data[ stride ] = v;</div><div class="line">            data[ stride + <span class="number">1</span> ] = v;</div><div class="line">            data[ stride + <span class="number">2</span> ] = v;</div><div class="line">            data[ stride + <span class="number">3</span> ] = <span class="number">255</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> texture = <span class="keyword">new</span> THREE.DataTexture( data, width, height );</div><div class="line">        texture.needsUpdate = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">return</span> texture;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// default material for land mesh objects</span></div><div class="line">    <span class="keyword">var</span> MATERIAL_LAND = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123; </div><div class="line">        <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="string">'green'</span>), </div><div class="line">        <span class="attr">map</span>: makeDataTexture(<span class="number">16</span>, <span class="number">16</span>, <span class="number">120</span>, <span class="number">255</span>)</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">//******** **********</span></div><div class="line">    <span class="comment">// MESH OBJECTS</span></div><div class="line">    <span class="comment">//******** **********</span></div><div class="line">    <span class="comment">// MESH basic cube</span></div><div class="line">    <span class="keyword">var</span> makeCube = <span class="function"><span class="keyword">function</span>(<span class="params">material, size</span>)</span>&#123;</div><div class="line">        size = size === <span class="literal">undefined</span> ? <span class="number">1</span> : size;</div><div class="line">        <span class="keyword">var</span> cube = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(size, size, size), </div><div class="line">            material</div><div class="line">        );</div><div class="line">        <span class="comment">// not a slope</span></div><div class="line">        cube.userData.isSlope = <span class="literal">false</span>;</div><div class="line">        cube.userData.isCorner = <span class="literal">false</span>;</div><div class="line">        cube.userData.isInvert = <span class="literal">false</span>;</div><div class="line">        <span class="keyword">return</span> cube</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// MAKE MESH SLOPE HELPER</span></div><div class="line">    <span class="keyword">var</span> makeSlopeMesh = <span class="function"><span class="keyword">function</span>(<span class="params">material, size, alphaR</span>)</span>&#123;</div><div class="line">        alphaR = alphaR === <span class="literal">undefined</span> ? <span class="number">0</span> : alphaR;</div><div class="line">        size = size === <span class="literal">undefined</span> ? <span class="number">1</span> : size;</div><div class="line">        <span class="keyword">var</span> shape_slope = <span class="keyword">new</span> THREE.Shape();</div><div class="line">        <span class="keyword">var</span> hSize = size / <span class="number">2</span>;</div><div class="line">        shape_slope.moveTo(hSize, hSize);</div><div class="line">        shape_slope.lineTo(hSize * <span class="number">-1</span>, hSize * <span class="number">-1</span>);</div><div class="line">        shape_slope.lineTo(hSize, hSize * <span class="number">-1</span>);</div><div class="line">        <span class="comment">// geometry</span></div><div class="line">        <span class="keyword">var</span> geometry = <span class="keyword">new</span> THREE.ExtrudeGeometry(shape_slope, &#123;</div><div class="line">            <span class="attr">depth</span>: size,</div><div class="line">            <span class="attr">bevelEnabled</span>: <span class="literal">false</span></div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// uv fix ( ceil values like 0.97... to 1 )</span></div><div class="line">        <span class="keyword">var</span> uv = geometry.getAttribute(<span class="string">'uv'</span>);</div><div class="line">        uv.array.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">n, i</span>)</span>&#123;</div><div class="line">            uv.array[i] = <span class="built_in">Math</span>.ceil(n);</div><div class="line">            uv.array[i] = uv.array[i] &lt; <span class="number">1</span> ? <span class="number">0</span> : <span class="number">1</span>;</div><div class="line">        &#125;);</div><div class="line">        uv.needsUpdate = <span class="literal">true</span>;</div><div class="line">        geometry.computeBoundingBox();</div><div class="line">        geometry.center();</div><div class="line">        geometry.rotateY( <span class="built_in">Math</span>.PI * <span class="number">2</span> * alphaR );</div><div class="line">        <span class="keyword">var</span> slope = <span class="keyword">new</span> THREE.Mesh( geometry, material);</div><div class="line">        <span class="comment">// is a slope</span></div><div class="line">        slope.userData.isSlope = <span class="literal">true</span>;</div><div class="line">        slope.userData.isCorner = <span class="literal">false</span>;</div><div class="line">        slope.userData.isInvert = <span class="literal">false</span>;</div><div class="line">        <span class="keyword">return</span> slope;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// MAKE CORNER MESH HELPER</span></div><div class="line">    <span class="keyword">var</span> makeCornerMesh = <span class="function"><span class="keyword">function</span>(<span class="params">material, size, alphaR, invert</span>)</span>&#123;</div><div class="line">        alphaR = alphaR === <span class="literal">undefined</span> ? <span class="number">0</span> : alphaR;</div><div class="line">        size = size === <span class="literal">undefined</span> ? <span class="number">1</span> : size;</div><div class="line">        invert = invert || <span class="literal">false</span>;</div><div class="line">        <span class="keyword">var</span> geometry = <span class="keyword">new</span> THREE.PlaneGeometry(size, size, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">        <span class="comment">// get pos attribute</span></div><div class="line">        <span class="keyword">var</span> pos = geometry.getAttribute(<span class="string">'position'</span>);</div><div class="line">        <span class="keyword">if</span>(invert)&#123;</div><div class="line">            [<span class="number">5</span>,<span class="number">8</span>,<span class="number">11</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123;</div><div class="line">                pos.array[i] = size;</div><div class="line">            &#125;)</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            pos.array[<span class="number">2</span>] = size;</div><div class="line"> </div><div class="line">        &#125;</div><div class="line">        pos.needsUpdate = <span class="literal">true</span>;</div><div class="line">        geometry.computeVertexNormals();</div><div class="line">        <span class="comment">// rotate and translate</span></div><div class="line">        geometry.rotateX( <span class="built_in">Math</span>.PI * <span class="number">1.5</span> );</div><div class="line">        geometry.translate(<span class="number">0</span>, size / <span class="number">2</span> * <span class="number">-1</span> ,<span class="number">0</span>);</div><div class="line">        geometry.rotateY( <span class="built_in">Math</span>.PI * <span class="number">2</span> * alphaR);</div><div class="line">        <span class="keyword">var</span> corner = <span class="keyword">new</span> THREE.Mesh( geometry, material);</div><div class="line">        <span class="comment">// not a slope</span></div><div class="line">        corner.userData.isSlope = <span class="literal">true</span>;</div><div class="line">        corner.userData.isCorner = <span class="literal">true</span>;</div><div class="line">        corner.userData.isInvert = invert;</div><div class="line">        <span class="keyword">return</span> corner;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//******** **********</span></div><div class="line">    <span class="comment">//  CREATE METHOD</span></div><div class="line">    <span class="comment">//******** **********</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.crackSize = opt.crackSize === <span class="literal">undefined</span> ? <span class="number">0.1</span> : opt.crackSize;</div><div class="line">        opt.tw = opt.tw === <span class="literal">undefined</span> ? <span class="number">4</span>: opt.tw;</div><div class="line">        opt.th = opt.th === <span class="literal">undefined</span> ? <span class="number">2</span>: opt.th;</div><div class="line">        opt.dAdjust = opt.dAdjust === <span class="literal">undefined</span> ? <span class="number">1.20</span>: opt.dAdjust;</div><div class="line">        <span class="keyword">var</span> space = opt.space = opt.space === <span class="literal">undefined</span> ? <span class="number">2</span>: opt.space;</div><div class="line">        opt.effects = opt.effects || [<span class="string">'opacity2'</span>];</div><div class="line">        opt.MATERIAL_LAND = opt.MATERIAL_LAND || MATERIAL_LAND;</div><div class="line">        <span class="keyword">var</span> meshSize = space - opt.crackSize;</div><div class="line">        opt.sourceObjects = [</div><div class="line">            makeCube(opt.MATERIAL_LAND, meshSize),</div><div class="line">            makeSlopeMesh(opt.MATERIAL_LAND, meshSize, <span class="number">0.00</span>),</div><div class="line">            makeSlopeMesh(opt.MATERIAL_LAND, meshSize, <span class="number">0.25</span>),</div><div class="line">            makeSlopeMesh(opt.MATERIAL_LAND, meshSize, <span class="number">0.50</span>),</div><div class="line">            makeSlopeMesh(opt.MATERIAL_LAND, meshSize, <span class="number">0.75</span>),</div><div class="line">            makeCornerMesh(opt.MATERIAL_LAND, meshSize, <span class="number">0.00</span>),</div><div class="line">            makeCornerMesh(opt.MATERIAL_LAND, meshSize, <span class="number">0.25</span>),</div><div class="line">            makeCornerMesh(opt.MATERIAL_LAND, meshSize, <span class="number">0.50</span>),</div><div class="line">            makeCornerMesh(opt.MATERIAL_LAND, meshSize, <span class="number">0.75</span>),</div><div class="line">            makeCornerMesh(opt.MATERIAL_LAND, meshSize, <span class="number">0.00</span>, <span class="literal">true</span>),</div><div class="line">            makeCornerMesh(opt.MATERIAL_LAND, meshSize, <span class="number">0.25</span>, <span class="literal">true</span>),</div><div class="line">            makeCornerMesh(opt.MATERIAL_LAND, meshSize, <span class="number">0.50</span>, <span class="literal">true</span>),</div><div class="line">            makeCornerMesh(opt.MATERIAL_LAND, meshSize, <span class="number">0.75</span>, <span class="literal">true</span>)</div><div class="line">        ];</div><div class="line">        opt.objectIndices = opt.objectIndices || [</div><div class="line">            <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,</div><div class="line">            <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span></div><div class="line">        ];</div><div class="line">        <span class="keyword">var</span> grid = ObjectGridWrap.create(opt);</div><div class="line">        <span class="comment">// I will want to have some way to set altitude for each</span></div><div class="line">        <span class="comment">// cloned mesh object in the gird</span></div><div class="line">        <span class="keyword">var</span> altitude = opt.altitude || [</div><div class="line">            <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,</div><div class="line">            <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span></div><div class="line">        ];</div><div class="line">        grid.children.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">obj, i</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> alt = altitude[i];</div><div class="line">            obj.geometry = obj.geometry.clone();</div><div class="line">            obj.geometry.translate(<span class="number">0</span>, alt * space, <span class="number">0</span>)</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// base position for whone grid</span></div><div class="line">        grid.position.set(<span class="number">0</span>, <span class="number">0.5</span>, <span class="number">0</span>);</div><div class="line">        <span class="keyword">var</span> ud = grid.userData; </div><div class="line">        <span class="comment">// adjust 'minB' value for opacity2 effect</span></div><div class="line">        ud.minB = <span class="number">0.3</span>;</div><div class="line">        ud.space = opt.space;</div><div class="line">        ud.tw = opt.tw;</div><div class="line">        ud.th = opt.th;</div><div class="line">        ud.opt = opt;</div><div class="line">        <span class="keyword">return</span> grid;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//******** **********</span></div><div class="line">    <span class="comment">//  ADD AT METHOD</span></div><div class="line">    <span class="comment">//******** **********</span></div><div class="line">    api.addAt = <span class="function"><span class="keyword">function</span>(<span class="params">grid, mesh, ix, y</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> tile = <span class="number">0</span>,</div><div class="line">        ud = grid.userData;</div><div class="line">        <span class="keyword">if</span>(y === <span class="literal">undefined</span>)&#123;</div><div class="line">            tile = grid.children[ix];</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">var</span> w = grid.userData.tw;</div><div class="line">            tile = grid.children[ y * w + ix];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> box = <span class="keyword">new</span> THREE.Box3();</div><div class="line">        tile.geometry.computeBoundingBox();</div><div class="line">        box.copy( tile.geometry.boundingBox ).applyMatrix4( tile.matrixWorld );</div><div class="line">        <span class="comment">// on cubes add half hight, on slopes add 0</span></div><div class="line">        mesh.geometry.computeBoundingBox();</div><div class="line">        <span class="keyword">var</span> v = <span class="keyword">new</span> THREE.Vector3();</div><div class="line">        mesh.geometry.boundingBox.getSize(v);</div><div class="line">        <span class="comment">// figure out yDelta value starting with a </span></div><div class="line">        <span class="comment">// default value that should work okay for cubes</span></div><div class="line">        <span class="keyword">var</span> yDelta = v.y / <span class="number">2</span>;</div><div class="line">        <span class="comment">// if the tile is a slope?</span></div><div class="line">        <span class="keyword">if</span>(tile.userData.isSlope)&#123;</div><div class="line">            yDelta = v.y / <span class="number">2</span> - ud.space * <span class="number">0.75</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// if the tile is a corner</span></div><div class="line">        <span class="keyword">if</span>(tile.userData.isCorner)&#123;</div><div class="line">            yDelta = v.y / <span class="number">2</span> - ud.space;</div><div class="line">            <span class="keyword">if</span>(tile.userData.isInvert)&#123;</div><div class="line">               yDelta = v.y / <span class="number">2</span> - ud.space * <span class="number">0.5</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        mesh.position.y = box.max.y + yDelta;</div><div class="line">        tile.add(mesh);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//******** **********</span></div><div class="line">    <span class="comment">//  setDataTextures</span></div><div class="line">    <span class="comment">//******** **********</span></div><div class="line"> </div><div class="line">    <span class="keyword">var</span> DEFAULT_DATATEXT = [</div><div class="line">        [<span class="string">'#00ff00'</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">180</span>, <span class="number">255</span>],</div><div class="line">        [<span class="string">'#00ff00'</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">64</span>, <span class="number">255</span>],</div><div class="line">        [<span class="string">'#00ff00'</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">80</span>, <span class="number">160</span>],</div><div class="line">        [<span class="string">'#00ff6f'</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">180</span>, <span class="number">255</span>],</div><div class="line">        [<span class="string">'#aaff6f'</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">100</span>, <span class="number">255</span>],</div><div class="line">        [<span class="string">'#00ff6f'</span>, <span class="number">8</span>, <span class="number">8</span>, <span class="number">80</span>, <span class="number">160</span>]</div><div class="line">    ];</div><div class="line"> </div><div class="line">    api.setDataTextures = <span class="function"><span class="keyword">function</span>(<span class="params">grid, dataText</span>)</span>&#123;</div><div class="line"> </div><div class="line">        dataText = dataText || DEFAULT_DATATEXT;</div><div class="line"> </div><div class="line">        <span class="keyword">var</span> materials = [];</div><div class="line">        dataText.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>)</span>&#123;</div><div class="line">            materials.push(<span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">                <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(d[<span class="number">0</span>]),</div><div class="line">                <span class="attr">map</span>: makeDataTexture(d[<span class="number">1</span>], d[<span class="number">2</span>], d[<span class="number">3</span>], d[<span class="number">4</span>])</div><div class="line">            &#125;));</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        <span class="comment">// seeded random material index values</span></div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>, len = grid.userData.tw * grid.userData.th;</div><div class="line">        <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">           <span class="keyword">var</span> mi = <span class="built_in">Math</span>.floor(THREE.MathUtils.seededRandom() * materials.length);</div><div class="line">           grid.children[i].material = materials[mi].clone();</div><div class="line">           i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return public API</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;());</div></pre></td></tr></table></figure>
<h3 id="2-2-The-new-main-js-file"><a href="#2-2-The-new-main-js-file" class="headerlink" title="2.2 - The new main.js file"></a>2.2 - The new main.js file</h3><p>There is the the question of having a little demo of the use of the module in a main javaScript file with the usual scene object and so forth so then lets get to that here. After setting up my usual collection of objects that I want to have with just about any other threejs example I then also set up a few light sources as I am going with the standard material here and color maps. There is then calling the create method of the land module and preforming any other additional tasks that I want to do to set up this land grid when it comes to doing things like adding additional mesh objects as children for each land tile that are trees or anything to that effect. Finally I will want to set up a basic animation loop function and update the state of the object grid wrap with the typical methods for doing so.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="keyword">var</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="string">'#00afaf'</span>);</div><div class="line"><span class="comment">//scene.add( new THREE.GridHelper(10, 10, 0x00ff00, 0xffffff) )</span></div><div class="line"><span class="keyword">var</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">60</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">0.1</span>, <span class="number">1000</span>);</div><div class="line">camera.position.set(<span class="number">-10</span>, <span class="number">10</span>, <span class="number">-5</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">var</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="keyword">var</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">-8</span>, <span class="number">2</span>, <span class="number">4</span>);</div><div class="line">scene.add(dl);</div><div class="line"><span class="comment">//camera.add(dl);</span></div><div class="line"><span class="comment">//scene.add(camera);</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>, <span class="number">0.05</span> ) )</div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">// GRID</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="keyword">var</span> grid = ObjectGridWrapLand.create(&#123;</div><div class="line">    <span class="attr">tw</span>: <span class="number">14</span>,</div><div class="line">    <span class="attr">th</span>: <span class="number">14</span>,</div><div class="line">    <span class="attr">crackSize</span>: <span class="number">0</span>,</div><div class="line">    <span class="comment">//effects:[],</span></div><div class="line">    altitude: [</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,</div><div class="line">        <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span></div><div class="line">    ],</div><div class="line">    <span class="attr">objectIndices</span>: [</div><div class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">5</span>,<span class="number">11</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">0</span>,</div><div class="line">        <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">    ]</div><div class="line">&#125;);</div><div class="line">grid.scale.set(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line"> </div><div class="line">ObjectGridWrapLand.setDataTextures(grid)</div><div class="line"> </div><div class="line">scene.add(grid);</div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">// ADDING CHILD MESH OBJECTS</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="keyword">var</span> mkCone = <span class="function"><span class="keyword">function</span>(<span class="params">height</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> THREE.Mesh(</div><div class="line">        <span class="keyword">new</span> THREE.ConeGeometry(<span class="number">0.5</span>, height, <span class="number">30</span>, <span class="number">30</span>),</div><div class="line">        <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;<span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="string">'#00ff88'</span>)&#125;)</div><div class="line">    );</div><div class="line">&#125;;</div><div class="line"><span class="comment">// can make another system that involves a grid if index values</span></div><div class="line"><span class="comment">// but with child objects</span></div><div class="line"><span class="keyword">var</span> mkMeshFunctions = [</div><div class="line">    <span class="literal">null</span>,</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> mkCone(<span class="number">2</span>)</div><div class="line">    &#125;,</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> mkCone(<span class="number">3</span>)</div><div class="line">    &#125;,</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> mkCone(<span class="number">4</span>)</div><div class="line">    &#125;</div><div class="line">];</div><div class="line"><span class="comment">// object index grid</span></div><div class="line">[</div><div class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">1</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">1</span>,</div><div class="line">    <span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span></div><div class="line">].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">objIndex, i</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> mkMesh = mkMeshFunctions[objIndex];</div><div class="line">    <span class="keyword">if</span>(mkMesh)&#123;</div><div class="line">        <span class="keyword">var</span> mesh = mkMesh(),</div><div class="line">        x = i % grid.userData.tw,</div><div class="line">        y = <span class="built_in">Math</span>.floor(i / grid.userData.tw)</div><div class="line">        ObjectGridWrapLand.addAt(grid, mesh, x, y);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="comment">// LOOP</span></div><div class="line"><span class="comment">//******** **********</span></div><div class="line"><span class="keyword">var</span> controls = <span class="keyword">new</span> THREE.OrbitControls(camera, renderer.domElement);</div><div class="line"><span class="keyword">var</span> fps = <span class="number">30</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">maxFrame = <span class="number">600</span>;</div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    per = frame / maxFrame,</div><div class="line">    bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - per) / <span class="number">0.5</span>,</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>,</div><div class="line">    ud = grid.userData;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / fps)&#123;</div><div class="line">        <span class="comment">// set position of the grid</span></div><div class="line">        ObjectGridWrap.setPos(grid, ( <span class="number">1</span> - per ) * <span class="number">2</span>, <span class="built_in">Math</span>.sin( <span class="built_in">Math</span>.PI * <span class="number">2</span> * per ) * <span class="number">0.5</span> );</div><div class="line">        <span class="comment">// update grid by current alphas and effects</span></div><div class="line">        ObjectGridWrap.update(grid);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        frame += fps * secs;</div><div class="line">        frame %= maxFrame;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="conclusion"><a href="#conclusion" class="headerlink" title="conclusion"></a>conclusion</h2><p>This project is looking good so far even thought I just have a ruff starting point thus far. The state of the source code is not where I would like it to be, but when it comes to the final outcome with how things look I would say I all ready have a done deal with this. Any additional revisions of this project will likely involve better ways of creating the grid that involve passing just one array literal to create the state of the land, as well as maybe ways to generate the state of the grid also. Another thing that comes to mind is just having a wider collection of source objects that are used to create the state of the grid as well.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2022/07/25/threejs-examples-object-grid-wrap-land/" data-id="cl5y2jsn502hjc0v1xm2imel9" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2022/07/25/threejs-examples-object-grid-wrap-land/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2022/07/22/threejs-capsule-geometry/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Capsule geometry in threejs</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2022/07/25/threejs-examples-object-grid-wrap-land/index.html';
    this.page.identifier = '996';
    this.page.title = 'THREEJS Looping land animation using the Object grid wrap module';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.5px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.5px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.5px;">angular</a> <a href="/tags/animation/" style="font-size: 12px;">animation</a> <a href="/tags/automation/" style="font-size: 12px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.5px;">backbone</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.5px;">canvas</a> <a href="/tags/corejs/" style="font-size: 13px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 11px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.5px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.5px;">express</a> <a href="/tags/games/" style="font-size: 17px;">games</a> <a href="/tags/git/" style="font-size: 13px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 12px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.5px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.5px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.5px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.5px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.5px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.5px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.5px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.5px;">python</a> <a href="/tags/statistics/" style="font-size: 14px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/07/25/threejs-examples-object-grid-wrap-land/">THREEJS Looping land animation using the Object grid wrap module</a>
          </li>
        
          <li>
            <a href="/2022/07/22/threejs-capsule-geometry/">Capsule geometry in threejs</a>
          </li>
        
          <li>
            <a href="/2022/07/08/threejs-examples-weird-face-one/">Weird face one threejs example</a>
          </li>
        
          <li>
            <a href="/2022/07/01/threejs-examples-lerp-geo/">Lerping the points of a geometry from one to another</a>
          </li>
        
          <li>
            <a href="/2022/06/17/threejs-curve/">The Curve class and tube geometry in threejs</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS-Examples</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas-Examples</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2022/07/25/threejs-examples-object-grid-wrap-land/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>