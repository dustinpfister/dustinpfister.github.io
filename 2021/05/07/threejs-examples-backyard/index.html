<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Backyard Scene threejs example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2021/05/07/threejs-examples-backyard/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="For yet another threejs example post I made this backyard scene example that I should write a post on. What I wanted to do is have at least one or more examples that make use of a number of my other p">
<meta property="og:type" content="article">
<meta property="og:title" content="Backyard Scene threejs example">
<meta property="og:url" content="https://dustinpfister.github.io/2021/05/07/threejs-examples-backyard/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="For yet another threejs example post I made this backyard scene example that I should write a post on. What I wanted to do is have at least one or more examples that make use of a number of my other p">
<meta property="og:updated_time" content="2022-12-27T20:03:26.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Backyard Scene threejs example">
<meta name="twitter:description" content="For yet another threejs example post I made this backyard scene example that I should write a post on. What I wanted to do is have at least one or more examples that make use of a number of my other p">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-examples-backyard" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/05/07/threejs-examples-backyard/" class="article-date"> Published:
  <time datetime="2021-05-07T18:02:00.000Z" itemprop="datePublished">2021-05-07</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2021/05/07/threejs-examples-backyard/" class="article-date"> Modified:
  <time datetime="2022-12-27T20:03:26.000Z" itemprop="dateModified">2022-12-27</time>
</a>

    <span class="article-date">V1.29</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Backyard Scene threejs example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>For yet another <a href="/2021/02/19/threejs-examples/">threejs example</a> post I made this backyard scene example that I should write a post on. What I wanted to do is have at least one or more examples that make use of a number of my other projects where I crate a bunch of objects with just the built in threejs geometry classes. That is to create a group of mesh objects that from an over all object of some kind. After I made a few projects like this I just wanted to create a project where I am making use of a whole bunch of projects like that to make an over all larger project. With that goal in mind I guess this project was a success, but now I think I need to put a little more time into what the final product is with an actual three.js project example before even getting started.</p>
<p>This might in time prove to be just one of several more additional future projects that is a composition of several other examples. There is just only so much to write about when it comes to the features of the library itself, so sooner or later I just have to start making some kind of full project that is some kind of animation, game, or some kind of application.</p>
<a id="more"></a>
<h2 id="This-backyard-threejs-scene-examples-and-what-to-know-fist"><a href="#This-backyard-threejs-scene-examples-and-what-to-know-fist" class="headerlink" title="This backyard threejs scene examples and what to know fist"></a>This backyard threejs scene examples and what to know fist</h2><p>This is a full threejs project example in which I am making use of all kinds of features in three.js to make something that is starting to look like a final product of some kind. So it should go without saying that this is not in any way a <a href="/2018/04/04/threejs-getting-started/">getting started type post for people that are new to three.js</a>. I then assume that you have logged a fair amount of time playing around with threejs, as well as with client side javaScript in general.</p>
<iframe class="youtube_video" src="https://www.youtube.com/embed/o21ABjF0UVs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h3 id="The-source-code-examples-that-I-am-writing-about-here-are-on-Github"><a href="#The-source-code-examples-that-I-am-writing-about-here-are-on-Github" class="headerlink" title="The source code examples that I am writing about here are on Github"></a>The source code examples that I am writing about here are on Github</h3><p>the source code examples that I am writing about in this post can be found in my <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-examples-backyard" target="_blank" rel="external">test threejs repository on Github</a>. This is also where I am parking the source code for all my other posts on threejs, including the various other examples that I am in turn also using in this example.</p>
<h3 id="version-numbers-used"><a href="#version-numbers-used" class="headerlink" title="version numbers used"></a>version numbers used</h3><p>When I started this example I was using r127 of three.js back in may of 2021. The last time I came around to doing a little editing I was using r135, and last I check the example works okay on top of that version of three.js.</p>
<h2 id="1-The-canvas-texture-module"><a href="#1-The-canvas-texture-module" class="headerlink" title="1 - The canvas texture module"></a>1 - The canvas texture module</h2><p>I wanted to have a way to create some quick textures for this example without having to bother with extremal image assets. So the way that I often choose to do that is to make use of <a href="/2018/04/17/threejs-canvas-texture/">canvas elements as a way to go about adding textures to a threejs project</a>. So for this project I made a canvas texture module that provides a create canvas texture helper where I just have to give a draw method and an image size and the result is a texture that I can use as a map for a material. I also have a few built in methods that make use of this to quickly create some basic textures that are just random color grids, to just quickly add some texture to materials.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">canvasTextureMod</span>) </span>&#123;</div><div class="line">    <span class="comment">// create a canvas texture with a draw method and size</span></div><div class="line">    canvasTextureMod.createCanvasTexture = <span class="function"><span class="keyword">function</span> (<span class="params">draw, size</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>),</div><div class="line">        ctx = canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">        canvas.width = size || <span class="number">64</span>;</div><div class="line">        canvas.height = size || <span class="number">64</span>;</div><div class="line">        draw(ctx, canvas);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> THREE.CanvasTexture(canvas);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> randomGridDraw = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas, colorsArray, minValue, maxValue</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">        r1,</div><div class="line">        r,</div><div class="line">        g,</div><div class="line">        b,</div><div class="line">        x,</div><div class="line">        y,</div><div class="line">        len = canvas.width * canvas.height;</div><div class="line">        <span class="keyword">while</span> (i &lt; len) &#123;</div><div class="line">            x = i % canvas.width;</div><div class="line">            y = <span class="built_in">Math</span>.floor(i / canvas.width);</div><div class="line">            r1 = minValue + <span class="built_in">Math</span>.floor((maxValue - minValue) * <span class="built_in">Math</span>.random());</div><div class="line">            r = colorsArray[<span class="number">0</span>] === <span class="string">'r1'</span> ? r1 : colorsArray[<span class="number">0</span>];</div><div class="line">            g = colorsArray[<span class="number">1</span>] === <span class="string">'r1'</span> ? r1 : colorsArray[<span class="number">1</span>];</div><div class="line">            b = colorsArray[<span class="number">2</span>] === <span class="string">'r1'</span> ? r1 : colorsArray[<span class="number">2</span>];</div><div class="line">            ctx.fillStyle = <span class="string">'rgb('</span> + r + <span class="string">','</span> + g + <span class="string">','</span> + b + <span class="string">')'</span>;</div><div class="line">            ctx.fillRect(x, y, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// create random gird texture</span></div><div class="line">    canvasTextureMod.randomGrid = <span class="function"><span class="keyword">function</span> (<span class="params">colorsArray, size, valueMin, valueMax</span>) </span>&#123;</div><div class="line">        colorsArray = colorsArray === <span class="literal">undefined</span> ? [<span class="string">'r1'</span>, <span class="string">'r1'</span>, <span class="string">'r1'</span>] : colorsArray;</div><div class="line">        size = size || <span class="number">32</span>;</div><div class="line">        valueMin = valueMin === <span class="literal">undefined</span> ? <span class="number">64</span> : valueMin;</div><div class="line">        valueMax = valueMax === <span class="literal">undefined</span> ? <span class="number">128</span> : valueMax;</div><div class="line">        <span class="keyword">return</span> canvasTextureMod.createCanvasTexture(<span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas</span>) </span>&#123;</div><div class="line">            randomGridDraw(ctx, canvas, colorsArray, valueMin, valueMax);</div><div class="line">        &#125;, size);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a basic square texture</span></div><div class="line">    canvasTextureMod.basicSquare = <span class="function"><span class="keyword">function</span> (<span class="params">colorsArray, size, lineSize, lineStyle, minValue, maxValue</span>) </span>&#123;</div><div class="line">        colorsArray = colorsArray === <span class="literal">undefined</span> ? [<span class="string">'r1'</span>, <span class="string">'r1'</span>, <span class="string">'r1'</span>] : colorsArray;</div><div class="line">        size = size || <span class="number">32</span>;</div><div class="line">        <span class="keyword">return</span> canvasTextureMod.createCanvasTexture(<span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas</span>) </span>&#123;</div><div class="line">            <span class="comment">// draw random grid texture</span></div><div class="line">            randomGridDraw(ctx, canvas, colorsArray, minValue || <span class="number">0</span>, maxValue === <span class="literal">undefined</span> ? <span class="number">64</span> : maxValue);</div><div class="line">            <span class="comment">// draw lines</span></div><div class="line">            ctx.strokeStyle = lineStyle || <span class="string">'white'</span>;</div><div class="line">            ctx.lineWidth = lineSize || <span class="number">3</span>;</div><div class="line">            ctx.rect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">            ctx.stroke();</div><div class="line">        &#125;, size);</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">    (<span class="keyword">this</span>[<span class="string">'canvasTextureMod'</span>] = &#123;&#125;));</div></pre></td></tr></table></figure>
<p>There are additional options for creating a texture with javaScript code, one of which would be the <a href="/2022/04/15/threejs-data-texture/">data texture constructor</a> that will work with raw data in the form of a uint8array.</p>
<h2 id="2-The-guy-module"><a href="#2-The-guy-module" class="headerlink" title="2 - The guy module"></a>2 - The guy module</h2><p>This is a copy of my <a href="/2021/04/29/threejs-examples-guy-one/">basic guy module that I worked out for one of my other three.js examples</a>. This is just yet another one of my crude models where I am creating something just using the built in three.js geometry constructors rather than creating a professionally made module in blender and then importing it. Animation of the guy is then achieved by making use of one of the various methods that can be used to create a simple walk cycle or something to that effect, another alternative is to just work out some custom logic to move the arms or legs in a novel way, but I am not getting into that sort of thing with this example at least.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">GuyMod</span>) </span>&#123;</div><div class="line">    <span class="comment">// material used for the legs</span></div><div class="line">    <span class="keyword">var</span> material_leg = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0x0000ff</span>,</div><div class="line">            <span class="attr">emissive</span>: <span class="number">0x00001a</span></div><div class="line">        &#125;),</div><div class="line">    <span class="comment">// material used for the arms</span></div><div class="line">    material_arm = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0xaf0000</span>,</div><div class="line">            <span class="attr">emissive</span>: <span class="number">0x001a00</span></div><div class="line">        &#125;);</div><div class="line">    <span class="comment">// material used for the body</span></div><div class="line">    material_body = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0xff0000</span>,</div><div class="line">            <span class="attr">emissive</span>: <span class="number">0x001a00</span></div><div class="line">        &#125;);</div><div class="line">    <span class="comment">// array of materials used for the head</span></div><div class="line">    <span class="keyword">var</span> faceTexture = canvasTextureMod.createCanvasTexture(<span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas</span>) </span>&#123;</div><div class="line">            <span class="comment">// face color</span></div><div class="line">            ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">            ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">            <span class="comment">// eyes</span></div><div class="line">            ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">            ctx.fillRect(<span class="number">16</span>, <span class="number">16</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">            ctx.fillRect(<span class="number">64</span> - <span class="number">24</span>, <span class="number">16</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">            <span class="comment">// mouth</span></div><div class="line">            ctx.fillRect(<span class="number">32</span> - <span class="number">8</span>, <span class="number">40</span>, <span class="number">16</span>, <span class="number">16</span>);</div><div class="line">            <span class="comment">// nose</span></div><div class="line">            ctx.fillStyle = <span class="string">'gray'</span>;</div><div class="line">            ctx.fillRect(<span class="number">32</span> - <span class="number">4</span>, <span class="number">20</span>, <span class="number">8</span>, <span class="number">13</span>);</div><div class="line"> </div><div class="line">        &#125;);</div><div class="line">    materials_head = [</div><div class="line">        <span class="comment">// 0 default material</span></div><div class="line">        <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0xffff00</span>,</div><div class="line">            <span class="attr">emissive</span>: <span class="number">0x1a1a00</span></div><div class="line">        &#125;),</div><div class="line">        <span class="comment">// 1 used for the face</span></div><div class="line">        <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="attr">map</span>: faceTexture</div><div class="line">        &#125;)</div><div class="line">    ];</div><div class="line">    <span class="comment">// the guy constructor</span></div><div class="line">    GuyMod.create = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> guy = &#123;&#125;;</div><div class="line">        <span class="comment">// a group that will hold all mesh objects</span></div><div class="line">        guy.group = <span class="keyword">new</span> THREE.Group();</div><div class="line">        <span class="comment">// HEAD</span></div><div class="line">        guy.head = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">                materials_head);</div><div class="line">        guy.head.position.y = <span class="number">1.6</span>;</div><div class="line">        <span class="comment">// set material index</span></div><div class="line">        guy.head.geometry.groups.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">face</span>) </span>&#123;</div><div class="line">            <span class="comment">// set all to zero by default</span></div><div class="line">            face.materialIndex = <span class="number">0</span>;</div><div class="line">        &#125;);</div><div class="line">        guy.head.geometry.groups[<span class="number">4</span>].materialIndex = <span class="number">1</span>;</div><div class="line">        <span class="comment">// one side of face set to face material</span></div><div class="line">        <span class="comment">//this.head.geometry.groups[8].materialIndex = 1;</span></div><div class="line">        <span class="comment">//this.head.geometry.groups[9].materialIndex = 1;</span></div><div class="line">        guy.head.castShadow = <span class="literal">true</span>;</div><div class="line">        guy.group.add(guy.head);</div><div class="line">        <span class="comment">// BODY</span></div><div class="line">        guy.body = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>),</div><div class="line">                material_body);</div><div class="line">        guy.body.castShadow = <span class="literal">true</span>;</div><div class="line">        guy.group.add(guy.body);</div><div class="line">        <span class="comment">// RIGHT ARM</span></div><div class="line">        guy.arm_right = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">.5</span>, <span class="number">1.5</span>, <span class="number">.5</span>),</div><div class="line">                material_arm);</div><div class="line">        guy.arm_right.geometry.translate(<span class="number">0</span>,  - <span class="number">.5</span>, <span class="number">0</span>);</div><div class="line">        guy.arm_right.position.x = <span class="number">1</span>;</div><div class="line">        guy.arm_right.position.y = <span class="number">.75</span>;</div><div class="line">        guy.arm_right.castShadow = <span class="literal">true</span>;</div><div class="line">        guy.group.add(guy.arm_right);</div><div class="line">        <span class="comment">// LEFT ARM</span></div><div class="line">        guy.arm_left = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">.5</span>, <span class="number">1.5</span>, <span class="number">.5</span>),</div><div class="line">                material_arm);</div><div class="line">        guy.arm_left.geometry.translate(<span class="number">0</span>,  - <span class="number">.5</span>, <span class="number">0</span>);</div><div class="line">        guy.arm_left.position.x = <span class="number">-1</span>;</div><div class="line">        guy.arm_left.position.y = <span class="number">.75</span>;</div><div class="line">        guy.arm_left.castShadow = <span class="literal">true</span>;</div><div class="line">        guy.group.add(guy.arm_left);</div><div class="line">        <span class="comment">// RIGHT LEG</span></div><div class="line">        guy.leg_right = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">.5</span>, <span class="number">2</span>, <span class="number">.5</span>),</div><div class="line">                material_leg);</div><div class="line">        guy.leg_right.geometry.translate(<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>);</div><div class="line">        guy.leg_right.position.x = <span class="number">.35</span>;</div><div class="line">        guy.leg_right.position.y = <span class="number">-1.1</span>;</div><div class="line">        guy.leg_right.castShadow = <span class="literal">true</span>;</div><div class="line">        guy.group.add(guy.leg_right);</div><div class="line">        <span class="comment">// LEFT LEG</span></div><div class="line">        guy.leg_left = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">.5</span>, <span class="number">2</span>, <span class="number">.5</span>),</div><div class="line">                material_leg);</div><div class="line">        guy.leg_left.geometry.translate(<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>);</div><div class="line">        guy.leg_left.position.x =  - <span class="number">.35</span>;</div><div class="line">        guy.leg_left.position.y = <span class="number">-1.1</span>;</div><div class="line">        guy.leg_left.castShadow = <span class="literal">true</span>;</div><div class="line">        guy.group.add(guy.leg_left);</div><div class="line">        <span class="comment">// retun the guy object</span></div><div class="line">        <span class="keyword">return</span> guy;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// move the arm of give id ('arm_right' or 'arm_left');</span></div><div class="line">    <span class="comment">// x and z should be a value between 0, and 1</span></div><div class="line">    GuyMod.moveArm = <span class="function"><span class="keyword">function</span> (<span class="params">guy, armId, x, z</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> arm = guy[armId];</div><div class="line">        z = <span class="built_in">Math</span>.PI / <span class="number">2</span> * z;</div><div class="line">        <span class="keyword">if</span> (armId === <span class="string">'arm_left'</span>) &#123;</div><div class="line">            z -= z * <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        arm.rotation.set(<span class="built_in">Math</span>.PI * <span class="number">2</span> * x, <span class="number">0</span>, z);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// rotate head around</span></div><div class="line">    <span class="comment">// per is 0 to 1</span></div><div class="line">    GuyMod.moveHead = <span class="function"><span class="keyword">function</span> (<span class="params">guy, per</span>) </span>&#123;</div><div class="line">        guy.head.rotation.set(<span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span> * per, <span class="number">0</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// move legs in respect to a walk cycle</span></div><div class="line">    <span class="comment">// where per is between 0, and 1.</span></div><div class="line">    GuyMod.moveLegs = <span class="function"><span class="keyword">function</span> (<span class="params">guy, per</span>) </span>&#123;</div><div class="line">        per %= <span class="number">1</span>;</div><div class="line">        <span class="keyword">var</span> bias = <span class="built_in">Math</span>.abs(<span class="number">.5</span> - per) / <span class="number">.5</span>;</div><div class="line">        guy.leg_left.rotation.set(<span class="number">.75</span> - bias * <span class="number">1.5</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        guy.leg_right.rotation.set( - <span class="number">.75</span> + bias * <span class="number">1.5</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// walk</span></div><div class="line">    GuyMod.walk = <span class="function"><span class="keyword">function</span> (<span class="params">guy, per, swings</span>) </span>&#123;</div><div class="line">        per = per === <span class="literal">undefined</span> ? <span class="number">0</span> : per;</div><div class="line">        swings = swings === <span class="literal">undefined</span> ? <span class="number">1</span> : swings;</div><div class="line">        <span class="keyword">var</span> r = <span class="built_in">Math</span>.PI * <span class="number">2</span> * per;</div><div class="line">        <span class="keyword">var</span> armPer = <span class="built_in">Math</span>.cos(r * swings) + <span class="number">1</span> / <span class="number">2</span>;</div><div class="line">        GuyMod.moveArm(guy, <span class="string">'arm_right'</span>,  - <span class="number">.1</span> + <span class="number">.2</span> * armPer, <span class="number">0</span>);</div><div class="line">        GuyMod.moveArm(guy, <span class="string">'arm_left'</span>, <span class="number">.1</span> - <span class="number">.2</span> * armPer, <span class="number">0</span>);</div><div class="line">        GuyMod.moveLegs(guy, per * swings);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return the Guy Class</span></div><div class="line">    <span class="comment">//return Guy;</span></div><div class="line">&#125;</div><div class="line">    (<span class="keyword">this</span>[<span class="string">'GuyMod'</span>] = &#123;&#125;));</div></pre></td></tr></table></figure>
<h2 id="3-Hamster-wheel"><a href="#3-Hamster-wheel" class="headerlink" title="3 - Hamster wheel"></a>3 - Hamster wheel</h2><p>I also wanted to place my <a href="/2021/04/19/threejs-examples-hamster-wheel/">hamster wheel model into the backyard scene</a>, just for the hell of it to make the scene a little more interesting. In my main example post of this model I made it so my guy model was running inside of it, but for this example I just want to place the model in there just to have something more in the scene. It seems like I was going in the direction of just turning this example into some kind of crude clock like example, so I intended to have the wheel spin in relation to some kind of unit of time.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">WheelMod</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> material = <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="comment">//color: 0x00ffff,</span></div><div class="line">            map: canvasTextureMod.basicSquare([<span class="string">'r1'</span>, <span class="string">'r1'</span>, <span class="string">'r1'</span>], <span class="number">64</span>, <span class="number">6</span>, <span class="string">'black'</span>, <span class="number">128</span>, <span class="number">255</span>),</div><div class="line">            <span class="comment">//transparent: true,</span></div><div class="line">            <span class="comment">//opacity: 0.6</span></div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    <span class="comment">// create a base for the given wheel object</span></div><div class="line">    <span class="keyword">var</span> createBase = <span class="function"><span class="keyword">function</span> (<span class="params">wheel</span>) </span>&#123;</div><div class="line">        wheel.base = <span class="keyword">new</span> THREE.Group();</div><div class="line">        wheel.group.add(wheel.base);</div><div class="line">        <span class="comment">// BASE</span></div><div class="line">        <span class="keyword">var</span> parts = [&#123;</div><div class="line">                <span class="attr">len</span>: <span class="number">1</span>,</div><div class="line">                <span class="attr">rx</span>: <span class="built_in">Math</span>.PI / <span class="number">2</span>,</div><div class="line">                <span class="attr">rz</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">px</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">py</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">pz</span>: <span class="number">0.5</span></div><div class="line">            &#125;, &#123;</div><div class="line">                <span class="attr">len</span>: <span class="number">4</span>,</div><div class="line">                <span class="attr">rx</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">rz</span>: <span class="built_in">Math</span>.PI / <span class="number">4</span>,</div><div class="line">                <span class="attr">px</span>: <span class="number">1.4</span>,</div><div class="line">                <span class="attr">py</span>: <span class="number">-1.4</span>,</div><div class="line">                <span class="attr">pz</span>: <span class="number">0.9</span></div><div class="line">            &#125;, &#123;</div><div class="line">                <span class="attr">len</span>: <span class="number">6</span>,</div><div class="line">                <span class="attr">rx</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">rz</span>: <span class="built_in">Math</span>.PI / <span class="number">2</span>,</div><div class="line">                <span class="attr">px</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">py</span>: <span class="number">-2.8</span>,</div><div class="line">                <span class="attr">pz</span>: <span class="number">0.9</span></div><div class="line">            &#125;, &#123;</div><div class="line">                <span class="attr">len</span>: <span class="number">2</span>,</div><div class="line">                <span class="attr">rx</span>: <span class="built_in">Math</span>.PI / <span class="number">2</span>,</div><div class="line">                <span class="attr">rz</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">px</span>: <span class="number">-2.9</span>,</div><div class="line">                <span class="attr">py</span>: <span class="number">-2.8</span>,</div><div class="line">                <span class="attr">pz</span>: <span class="number">0</span></div><div class="line">            &#125;</div><div class="line">        ];</div><div class="line">        <span class="keyword">var</span> self = wheel;</div><div class="line">        parts.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">part</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">            len = <span class="number">2</span>;</div><div class="line">            <span class="keyword">while</span> (i &lt; len) &#123;</div><div class="line">                <span class="keyword">var</span> neg = <span class="number">1</span>;</div><div class="line">                <span class="keyword">if</span> (i === <span class="number">1</span>) &#123;</div><div class="line">                    neg = <span class="number">-1</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">var</span> cy = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                        <span class="keyword">new</span> THREE.CylinderGeometry(<span class="number">.125</span>, <span class="number">.125</span>, part.len),</div><div class="line">                        material);</div><div class="line">                cy.rotation.x = part.rx;</div><div class="line">                cy.rotation.z = part.rz;</div><div class="line">                cy.position.set(</div><div class="line">                    part.px,</div><div class="line">                    part.py,</div><div class="line">                    part.pz * neg - <span class="number">2</span> * i);</div><div class="line">                self.base.add(cy);</div><div class="line">                i += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// create the wheel with rims and tubes connected between them</span></div><div class="line">    <span class="keyword">var</span> createWheel = <span class="function"><span class="keyword">function</span> (<span class="params">wheel</span>) </span>&#123;</div><div class="line">        wheel.wheel = <span class="keyword">new</span> THREE.Group();</div><div class="line">        wheel.group.add(wheel.wheel);</div><div class="line">        <span class="keyword">var</span> geo = <span class="keyword">new</span> THREE.TorusGeometry(<span class="number">2</span>, <span class="number">.125</span>, <span class="number">20</span>, <span class="number">20</span>);</div><div class="line">        <span class="comment">// RIMS</span></div><div class="line">        <span class="keyword">var</span> ct = <span class="number">2</span>,</div><div class="line">        rim,</div><div class="line">        i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (i &lt; ct) &#123;</div><div class="line">            rim = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                    geo,</div><div class="line">                    material);</div><div class="line">            rim.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">-2</span> + <span class="number">2</span> * i);</div><div class="line">            wheel.wheel.add(rim);</div><div class="line">            <span class="keyword">var</span> bar = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                    <span class="keyword">new</span> THREE.CylinderGeometry(<span class="number">.125</span>, <span class="number">.125</span>, <span class="number">4</span>),</div><div class="line">                    material);</div><div class="line">            bar.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">-2</span> + <span class="number">2</span> * i);</div><div class="line">            wheel.wheel.add(bar);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> ct = <span class="number">15</span>,</div><div class="line">        rim,</div><div class="line">        i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (i &lt; ct) &#123;</div><div class="line">            <span class="keyword">var</span> r = <span class="built_in">Math</span>.PI * <span class="number">2</span> / ct * i;</div><div class="line">            <span class="comment">// TUBES connecting rims</span></div><div class="line">            <span class="keyword">var</span> cy = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                    <span class="keyword">new</span> THREE.CylinderGeometry(<span class="number">.125</span>, <span class="number">.125</span>, <span class="number">2</span>),</div><div class="line">                    material);</div><div class="line">            cy.rotation.x = <span class="built_in">Math</span>.PI / <span class="number">2</span>;</div><div class="line">            cy.position.x = <span class="built_in">Math</span>.cos(r) * <span class="number">2</span>;</div><div class="line">            cy.position.y = <span class="built_in">Math</span>.sin(r) * <span class="number">2</span>;</div><div class="line">            cy.position.z = <span class="number">-1</span>;</div><div class="line">            wheel.wheel.add(cy);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// the Wheel constructor</span></div><div class="line">    WheelMod.create = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> wheel = &#123;&#125;;</div><div class="line">        <span class="comment">// a group that will hold all mesh objects</span></div><div class="line">        wheel.group = <span class="keyword">new</span> THREE.Group();</div><div class="line">        createWheel(wheel);</div><div class="line">        createBase(wheel);</div><div class="line">        <span class="keyword">return</span> wheel;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    (<span class="keyword">this</span>[<span class="string">'WheelMod'</span>] = &#123;&#125;));</div></pre></td></tr></table></figure>
<h2 id="4-The-House-model"><a href="#4-The-House-model" class="headerlink" title="4 - The House model"></a>4 - The House model</h2><p>This is a backyard type scene, so of course I need to add a house, and for that I went with the <a href="/2021/04/23/threejs-examples-house/">house module example that I made</a>. In fact this backyard example is more or less just a far more advanced version of that starting point. In that example I just wanted to make a crude house module like that of my many other crude yet effective type modules. Nothing fancy with this one though except for that I experimented with making a custom geometry for a small triangle type area of the house.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">HouseMod</span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="comment">// default materials</span></div><div class="line">    <span class="keyword">var</span> materials_default = &#123;</div><div class="line">        <span class="attr">base</span>: <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="comment">//color: 0xff0000,</span></div><div class="line">            map: canvasTextureMod.randomGrid([<span class="string">'r1'</span>, <span class="string">'0'</span>, <span class="string">'0'</span>], <span class="number">64</span>, <span class="number">128</span>, <span class="number">255</span>),</div><div class="line">            <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">        &#125;),</div><div class="line">        <span class="attr">tri</span>: <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="comment">//color: 0xaf0000,</span></div><div class="line">            map: canvasTextureMod.randomGrid([<span class="string">'r1'</span>, <span class="string">'0'</span>, <span class="string">'0'</span>], <span class="number">64</span>, <span class="number">128</span>, <span class="number">255</span>),</div><div class="line">            <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">        &#125;),</div><div class="line">        <span class="attr">roof</span>: <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="comment">//color: 0x404040,</span></div><div class="line">            map: canvasTextureMod.randomGrid([<span class="string">'r1'</span>, <span class="string">'r1'</span>, <span class="string">'r1'</span>], <span class="number">64</span>, <span class="number">64</span>, <span class="number">128</span>),</div><div class="line">            <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">        &#125;)</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// create a triangle part of the house</span></div><div class="line">    <span class="keyword">var</span> HouseTriangle = <span class="function"><span class="keyword">function</span> (<span class="params">materials</span>) </span>&#123;</div><div class="line">        materials = materials || materials_default;</div><div class="line">        <span class="keyword">var</span> geometry = <span class="keyword">new</span> THREE.BufferGeometry();</div><div class="line">        <span class="keyword">var</span> vertices = <span class="keyword">new</span> <span class="built_in">Float32Array</span>([</div><div class="line">                    <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>,</div><div class="line">                    <span class="number">0.5</span>, <span class="number">1.5</span>, <span class="number">0</span>,</div><div class="line">                    <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span></div><div class="line">                ]);</div><div class="line">        geometry.setAttribute(<span class="string">'position'</span>, <span class="keyword">new</span> THREE.BufferAttribute(vertices, <span class="number">3</span>));</div><div class="line">        geometry.computeVertexNormals(); <span class="comment">// compute vertex normals</span></div><div class="line">        geometry.addGroup(<span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>); <span class="comment">// just one group</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            geometry,</div><div class="line">            materials.tri);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// create and return a house</span></div><div class="line">    HouseMod.create = <span class="function"><span class="keyword">function</span> (<span class="params">materials</span>) </span>&#123;</div><div class="line">        materials = materials || materials_default;</div><div class="line">        <span class="comment">// mian house group</span></div><div class="line">        <span class="keyword">var</span> house = <span class="keyword">new</span> THREE.Group();</div><div class="line"> </div><div class="line">        <span class="comment">// base of house is just a BOX</span></div><div class="line">        <span class="keyword">var</span> base = <span class="keyword">new</span> THREE.Mesh(<span class="keyword">new</span> THREE.BoxGeometry(<span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>), materials.base);</div><div class="line">        house.add(base);</div><div class="line"> </div><div class="line">        <span class="comment">// house triangle parts</span></div><div class="line">        <span class="keyword">var</span> tri1 = HouseTriangle(materials);</div><div class="line">        tri1.position.set(<span class="number">-0.5</span>, <span class="number">1</span>, <span class="number">2</span>);</div><div class="line">        house.add(tri1);</div><div class="line">        <span class="keyword">var</span> tri2 = HouseTriangle(materials);</div><div class="line">        tri2.position.set(<span class="number">-0.5</span>, <span class="number">1</span>, <span class="number">-2</span>);</div><div class="line">        house.add(tri2);</div><div class="line"> </div><div class="line">        <span class="comment">// roof</span></div><div class="line">        <span class="keyword">var</span> roof1 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.PlaneGeometry(<span class="number">2.84</span>, <span class="number">4.5</span>),</div><div class="line">                materials.roof);</div><div class="line">        roof1.position.set(<span class="number">-1</span>, <span class="number">1.51</span>, <span class="number">0</span>);</div><div class="line">        roof1.rotation.set(<span class="built_in">Math</span>.PI * <span class="number">0.5</span>, <span class="built_in">Math</span>.PI * <span class="number">0.25</span>, <span class="number">0</span>);</div><div class="line">        house.add(roof1);</div><div class="line">        <span class="keyword">var</span> roof2 = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.PlaneGeometry(<span class="number">2.84</span>, <span class="number">4.5</span>),</div><div class="line">                materials.roof);</div><div class="line">        roof2.position.set(<span class="number">1</span>, <span class="number">1.51</span>, <span class="number">0</span>);</div><div class="line">        roof2.rotation.set(<span class="built_in">Math</span>.PI * <span class="number">0.5</span>, <span class="built_in">Math</span>.PI * <span class="number">-0.25</span>, <span class="number">0</span>);</div><div class="line">        house.add(roof2);</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> house;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    (<span class="keyword">this</span>[<span class="string">'HouseMod'</span>] = &#123;&#125;));</div></pre></td></tr></table></figure>
<h2 id="5-Main-javaScript-file"><a href="#5-Main-javaScript-file" class="headerlink" title="5 - Main javaScript file"></a>5 - Main javaScript file</h2><p>Now I am going to want a fair amount of additional javaScript code and a few more mesh objects and so forth that I have not yet packed away into there own files. So then I am going to want a main.js javaScript file just like with any other major three.js example where I create my main scene object, as well as a camera, renderer, and animation loop method.</p>
<p>After creating the scene object here I then create and add an instance of the house module, then I am going to want to have some ground for the house to be on. For this I went with a box geometry rather than a plane geometry, and also made some custom materials for this ground mesh object using my canvas texture module. Next I add in my guy, and hamster wheel models, followed by an additional mesh that will act as a sun object for the scene. Because it will be a light source for this I made the sun object have a point light as a child.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0x00ffff</span>);</div><div class="line"> </div><div class="line"><span class="comment">// HOUSE</span></div><div class="line"><span class="keyword">var</span> house = HouseMod.create();</div><div class="line">house.position.set(<span class="number">-2</span>, <span class="number">1.05</span>, <span class="number">0</span>);</div><div class="line">scene.add(house);</div><div class="line"> </div><div class="line"><span class="comment">// GROUND</span></div><div class="line"><span class="keyword">var</span> materials = &#123;</div><div class="line">    <span class="attr">ground</span>: [</div><div class="line">        <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0x00ff00</span>,</div><div class="line">            <span class="attr">map</span>: canvasTextureMod.randomGrid([<span class="string">'0'</span>, <span class="string">'r1'</span>, <span class="string">'0'</span>], <span class="number">96</span>, <span class="number">96</span>, <span class="number">220</span>),</div><div class="line">            <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0xffaa00</span>,</div><div class="line">            <span class="attr">map</span>: canvasTextureMod.randomGrid([<span class="string">'r1'</span>, <span class="string">'r1'</span>, <span class="string">'0'</span>], <span class="number">64</span>, <span class="number">96</span>, <span class="number">220</span>),</div><div class="line">            <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">        &#125;)</div><div class="line">    ]</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> ground = <span class="keyword">new</span> THREE.Mesh(<span class="keyword">new</span> THREE.BoxGeometry(<span class="number">14</span>, <span class="number">14</span>, <span class="number">1.25</span>), materials.ground);</div><div class="line">ground.position.set(<span class="number">0</span>, <span class="number">-0.575</span>, <span class="number">0</span>);</div><div class="line">ground.rotation.set(-<span class="built_in">Math</span>.PI / <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">ground.geometry.groups.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">face</span>) </span>&#123;</div><div class="line">    face.materialIndex = <span class="number">1</span>;</div><div class="line">&#125;);</div><div class="line">ground.geometry.groups[<span class="number">4</span>].materialIndex = <span class="number">0</span>;</div><div class="line">scene.add(ground);</div><div class="line"> </div><div class="line"><span class="comment">// WHEEL</span></div><div class="line"><span class="keyword">var</span> wheel = WheelMod.create();</div><div class="line">wheel.group.scale.set(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line">wheel.group.position.set(<span class="number">2</span>, <span class="number">1.5</span>, <span class="number">2</span>);</div><div class="line">scene.add(wheel.group);</div><div class="line"><span class="comment">// GUY</span></div><div class="line"><span class="keyword">var</span> guy = GuyMod.create();</div><div class="line">guy.group.scale.set(<span class="number">0.25</span>, <span class="number">0.25</span>, <span class="number">0.25</span>);</div><div class="line">guy.group.position.set(<span class="number">0</span>, <span class="number">0.8</span>, <span class="number">5.5</span>);</div><div class="line">scene.add(guy.group);</div><div class="line"> </div><div class="line"><span class="comment">// sun</span></div><div class="line"><span class="keyword">var</span> sunTexture = canvasTextureMod.randomGrid([<span class="string">'r1'</span>, <span class="string">'r1'</span>, <span class="string">'0'</span>]);</div><div class="line"><span class="keyword">var</span> sun = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">        <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">1</span>, <span class="number">20</span>, <span class="number">20</span>),</div><div class="line">        <span class="keyword">new</span> THREE.MeshStandardMaterial(&#123;</div><div class="line">            <span class="attr">emissive</span>: <span class="string">'white'</span>,</div><div class="line">            <span class="attr">emissiveMap</span>: sunTexture</div><div class="line">        &#125;));</div><div class="line">sun.add(<span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>));</div><div class="line">sun.position.set(<span class="number">0</span>, <span class="number">8</span>, <span class="number">0</span>);</div><div class="line">scene.add(sun);</div><div class="line"> </div><div class="line"><span class="comment">// add AmbientLight</span></div><div class="line"><span class="keyword">var</span> ambientLight = <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>);</div><div class="line">ambientLight.intensity = <span class="number">0.3</span>;</div><div class="line">scene.add(ambientLight);</div><div class="line"> </div><div class="line"><span class="comment">// CAMERA</span></div><div class="line"><span class="keyword">var</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">640</span> / <span class="number">480</span>, <span class="number">1</span>, <span class="number">1000</span>);</div><div class="line"><span class="comment">//camera.position.set(14, 6, 14);</span></div><div class="line"></div><div class="line"> </div><div class="line">camera.position.set(<span class="number">-15</span>, <span class="number">10</span>, <span class="number">25</span>);</div><div class="line">camera.lookAt(guy.group.position);</div><div class="line"> </div><div class="line">guy.group.add(camera);</div><div class="line"> </div><div class="line"><span class="comment">// RENDERER</span></div><div class="line"><span class="keyword">var</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line"><span class="comment">//renderer.width = 640;</span></div><div class="line">renderer.domElement.width = <span class="number">640</span>;</div><div class="line">renderer.domElement.height = <span class="number">480</span>;</div><div class="line">renderer.setViewport(<span class="number">0</span>, <span class="number">0</span>, <span class="number">640</span>, <span class="number">480</span>);</div><div class="line"><span class="keyword">var</span> container = <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>);</div><div class="line">container.appendChild(renderer.domElement);</div><div class="line"><span class="keyword">var</span> full = <span class="literal">false</span>;</div><div class="line"><span class="keyword">var</span> toggleFull = <span class="function"><span class="keyword">function</span> (<span class="params">canvas</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = renderer.domElement;</div><div class="line">    full = !full;</div><div class="line">    container.style.position = <span class="string">'static'</span>;</div><div class="line">    container.style.width = <span class="string">'640px'</span>;</div><div class="line">    container.style.height = <span class="string">'480px'</span>;</div><div class="line">    canvas.style.width = <span class="string">'640px'</span>;</div><div class="line">    canvas.style.height = <span class="string">'480px'</span>;</div><div class="line">    <span class="keyword">if</span> (full) &#123;</div><div class="line">        canvas.style.width = <span class="string">'auto'</span>;</div><div class="line">        canvas.style.height = <span class="built_in">window</span>.innerHeight + <span class="string">'px'</span>;</div><div class="line">        canvas.style.margin = <span class="string">'auto'</span>;</div><div class="line">        container.style.position = <span class="string">'fixed'</span>;</div><div class="line">        container.style.width = <span class="string">'100%'</span>;</div><div class="line">        container.style.height = <span class="string">'100%'</span>;</div><div class="line">        container.style.background = <span class="string">'black'</span>;</div><div class="line">        container.style.left = <span class="string">'0px'</span>;</div><div class="line">        container.style.top = <span class="string">'0px'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// press f for full screen</span></div><div class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'keydown'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (e.key === <span class="string">'f'</span>) &#123;</div><div class="line">        toggleFull();</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="comment">// CONTROLS</span></div><div class="line"><span class="comment">//var controls = new THREE.OrbitControls(camera, renderer.domElement);</span></div><div class="line"><span class="comment">//controls.autoRotate = true;</span></div><div class="line"> </div><div class="line"><span class="comment">// Loop in which the directional light position changes</span></div><div class="line"><span class="keyword">var</span> frame = <span class="number">0</span>,</div><div class="line">maxFrame = <span class="number">100</span>;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> state = &#123;</div><div class="line">    <span class="attr">second</span>: &#123;</div><div class="line">        <span class="attr">per</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">r</span>: <span class="number">0</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">minute</span>: &#123;</div><div class="line">        <span class="attr">per</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">r</span>: <span class="number">0</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">day</span>: &#123;</div><div class="line">        <span class="attr">per</span>: <span class="number">0</span>,</div><div class="line">        <span class="attr">r</span>: <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> getDayPer = <span class="function"><span class="keyword">function</span> (<span class="params">now</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> now.getHours() / <span class="number">24</span> +</div><div class="line">    now.getMinutes() / <span class="number">1440</span> +</div><div class="line">    now.getSeconds() / <span class="number">86400</span> +</div><div class="line">    now.getMilliseconds() / <span class="number">86400000</span>;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// update minute object</span></div><div class="line"><span class="keyword">var</span> updateMinute = <span class="function"><span class="keyword">function</span> (<span class="params">state, now</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> ms = now.getMilliseconds() / <span class="number">1000</span>;</div><div class="line">    state.minute.per = (now.getSeconds() + ms) / <span class="number">60</span>;</div><div class="line">    state.minute.r = <span class="built_in">Math</span>.PI * <span class="number">2</span> * state.minute.per;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> updateDay = <span class="function"><span class="keyword">function</span> (<span class="params">state, now</span>) </span>&#123;</div><div class="line">    state.day.per = getDayPer(now);</div><div class="line">    state.day.r = <span class="built_in">Math</span>.PI * <span class="number">2</span> * state.day.per + <span class="built_in">Math</span>.PI * <span class="number">1.5</span>;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    setTimeout(loop, <span class="number">33</span>);</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="comment">//var now = new Date(2021, 1, 1, 6, 0);</span></div><div class="line"> </div><div class="line">    state.second.per = now.getMilliseconds() / <span class="number">1000</span>;</div><div class="line">    state.second.r = <span class="built_in">Math</span>.PI * <span class="number">2</span> * state.second.per + <span class="built_in">Math</span>.PI * <span class="number">1.5</span>;</div><div class="line">    updateMinute(state, now);</div><div class="line">    updateDay(state, now);</div><div class="line"> </div><div class="line">    <span class="comment">// sun</span></div><div class="line">    <span class="keyword">var</span> r = state.day.r;</div><div class="line">    <span class="keyword">var</span> sunBias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(state.minute.per - <span class="number">0.5</span>) / <span class="number">0.5</span>;</div><div class="line">    sun.position.set(<span class="built_in">Math</span>.cos(r) * <span class="number">10</span>, <span class="built_in">Math</span>.sin(r) * <span class="number">10</span>, <span class="number">4</span> - <span class="number">8</span> * sunBias);</div><div class="line">    ambientLight.intensity = (<span class="number">1</span> - (<span class="built_in">Math</span>.abs(state.day.per - <span class="number">0.5</span>) / <span class="number">0.5</span>)) * <span class="number">0.1</span>;</div><div class="line"> </div><div class="line">    <span class="comment">// wheel</span></div><div class="line">    wheel.wheel.rotation.z = state.second.r; <span class="comment">//msper;</span></div><div class="line"> </div><div class="line">    <span class="comment">// guy</span></div><div class="line">    GuyMod.walk(guy, state.minute.per, <span class="number">32</span>);</div><div class="line">    <span class="keyword">var</span> r = <span class="built_in">Math</span>.PI * <span class="number">2</span> - state.minute.r;</div><div class="line">    guy.group.position.set(<span class="built_in">Math</span>.cos(r) * <span class="number">5</span>, <span class="number">0.8</span>, <span class="built_in">Math</span>.sin(r) * <span class="number">5</span>);</div><div class="line">    guy.group.lookAt(<span class="built_in">Math</span>.cos(r - <span class="number">0.5</span>) * <span class="number">5</span>, <span class="number">0.8</span>, <span class="built_in">Math</span>.sin(r - <span class="number">0.5</span>) * <span class="number">5</span>);</div><div class="line"> </div><div class="line">    <span class="comment">//controls.update();</span></div><div class="line"> </div><div class="line">    frame = (frame + <span class="number">1</span>) % maxFrame;</div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// WHAT TO DO WHEN CUBE TEXTURE IS LOADED</span></div><div class="line"> </div><div class="line"><span class="keyword">var</span> cubeTextureLoaded = <span class="function"><span class="keyword">function</span> (<span class="params">cubeTexture</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (cubeTexture) &#123;</div><div class="line">        cubeTexture.encoding = THREE.sRGBEncoding;</div><div class="line">        scene.background = cubeTexture;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">var</span> texture = canvasTextureMod.basicSquare([<span class="string">'r1'</span>, <span class="string">'r1'</span>, <span class="string">'r1'</span>], <span class="number">128</span>, <span class="number">6</span>, <span class="string">'black'</span>, <span class="number">32</span>, <span class="number">64</span>).image;</div><div class="line">        cubeTexture = <span class="keyword">new</span> THREE.CubeTexture(<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">6</span>).fill(texture));</div><div class="line">        cubeTexture.needsUpdate = <span class="literal">true</span>;</div><div class="line">        scene.background = cubeTexture;</div><div class="line">    &#125;</div><div class="line">    loop();</div><div class="line">&#125;;</div><div class="line"><span class="comment">// LOAD CUBE TEXTURE</span></div><div class="line"><span class="keyword">var</span> loadfail = <span class="literal">false</span>;</div><div class="line"><span class="keyword">new</span> THREE.CubeTextureLoader()</div><div class="line">.setPath(<span class="string">'/img/cube/milky/'</span>)</div><div class="line">.load([<span class="string">'px.jpg'</span>, <span class="string">'nx.jpg'</span>, <span class="string">'py.jpg'</span>, <span class="string">'ny.jpg'</span>, <span class="string">'pz.jpg'</span>, <span class="string">'nz.jpg'</span>],</div><div class="line">    cubeTextureLoaded,</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">e, b</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (!loadfail) &#123;</div><div class="line">        loadfail = <span class="literal">true</span>;</div><div class="line">        cubeTextureLoaded()</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>In the main application loop I am updating the position of various mesh objects, as well as groups created with my various modules based on the time of day. So this projects has turned into a weird kind of clock like project where the about of time it takes for the guy modules to walk in a circle takes about a minute, and the sun object makes a complete run around the whole scene once each day.</p>
<p>For this example I also wanted to add a sky map just for the sake of having something other than a solid color background. For this I made use of the cube texture loader to load a collection of cube texture image files the should be at a given absolute path when hosting this. However in the event that there is an error loading the texture does not load I just create a default texture using canvas generated content.</p>
<h2 id="6-Conclusion"><a href="#6-Conclusion" class="headerlink" title="6 - Conclusion"></a>6 - Conclusion</h2><p>This has tuned out to be an interesting project in that it is more of a situation in which I am using a whole bunch of other projects to create one big main project. I am not sure if I want to put more time into this one or not though, but I am sure that I am going to want to start creating at least a few more examples like this as I think that this is just what needs to happen if I keep working on three.js code examples. There is only so much to write about when it comes to the basics of the threejs library itself, sooner or later I am going to want to start making things with this library.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2021/05/07/threejs-examples-backyard/" data-id="cliahb50l02dd3ov16hh52gey" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2021/05/07/threejs-examples-backyard/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/05/10/threejs-examples-nested-groups/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Nested Groups threejs example
        
      </div>
    </a>
  
  
    <a href="/2021/05/06/threejs-examples-scene-shake/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Scene Shake threejs example</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2021/05/07/threejs-examples-backyard/index.html';
    this.page.identifier = '862';
    this.page.title = 'Backyard Scene threejs example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 13.64px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/25/threejs-curve-quadratic-bezier-curve/">2D Quadratic Bezier Curves in threejs</a>
          </li>
        
          <li>
            <a href="/2023/05/24/git-push/">Git Push command</a>
          </li>
        
          <li>
            <a href="/2023/05/19/threejs-lod/">Level Of Detail Objects in threejs</a>
          </li>
        
          <li>
            <a href="/2023/05/18/git-pull/">Git Pull sub command</a>
          </li>
        
          <li>
            <a href="/2023/05/12/threejs-buffer-geometry-set-draw-range/">The set draw range method of the buffer geometry class in threejs</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2021/05/07/threejs-examples-backyard/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>