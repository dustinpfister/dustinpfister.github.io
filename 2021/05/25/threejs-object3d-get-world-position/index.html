<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner_2023.png">
  
  <title>Getting world position of any Object3D Class based object in three.js | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2021/05/25/threejs-object3d-get-world-position/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="In threejs there is getting into using groups as a way to compartmentalize a collection of mesh objects. When doing so there is using the look at method to get a mesh to look at another child object o">
<meta property="og:type" content="article">
<meta property="og:title" content="Getting world position of any Object3D Class based object in three.js">
<meta property="og:url" content="https://dustinpfister.github.io/2021/05/25/threejs-object3d-get-world-position/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="In threejs there is getting into using groups as a way to compartmentalize a collection of mesh objects. When doing so there is using the look at method to get a mesh to look at another child object o">
<meta property="og:updated_time" content="2023-06-29T22:36:09.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Getting world position of any Object3D Class based object in three.js">
<meta name="twitter:description" content="In threejs there is getting into using groups as a way to compartmentalize a collection of mesh objects. When doing so there is using the look at method to get a mesh to look at another child object o">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-object3d-get-world-position" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/05/25/threejs-object3d-get-world-position/" class="article-date"> Published:
  <time datetime="2021-05-25T15:45:00.000Z" itemprop="datePublished">2021-05-25</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2021/05/25/threejs-object3d-get-world-position/" class="article-date"> Modified:
  <time datetime="2023-06-29T22:36:09.000Z" itemprop="dateModified">2023-06-29</time>
</a>

    <span class="article-date">V1.39</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Getting world position of any Object3D Class based object in three.js
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>In <a href="https://threejs.org/docs/#manual/en/introduction/Creating-a-scene" target="_blank" rel="external">threejs</a> there is <a href="https://threejs.org/docs/#api/en/objects/Group" target="_blank" rel="external">getting into using groups</a> as a way to compartmentalize a collection of <a href="/2018/05/04/threejs-mesh/">mesh objects</a>. When doing so there is using the <a href="https://threejs.org/docs/#api/en/core/Object3D.lookAt" target="_blank" rel="external">look at method</a> to get a mesh to look at another child object of the group, or some other group in an over all <a href="/2018/05/03/threejs-scene/">scene object</a>. </p>
<p>One thing that I have found that pops up when dealing with nested objects, and the look at method of the objecy3d class, it is that the look at method will always have the object look at something relative to world space. With that said there is knowing what world space is, and how it compares to local space, or space relative to a parent object if you prefer. To help with these kinds of problems there is the <a href="https://threejs.org/docs/#api/en/core/Object3D.getWorldPosition" target="_blank" rel="external">get world position method of the object3d class</a> that when called will return the position of an object relative to world space rather than the position that is relative to the parent object. </p>
<p>There is one weird thing about the get world position method though which is that a target vector3 instance must be given as an argument when it comes to late versions of threejs at least r135+ last I checked. In other words I can not just call the method and have a new Vector3 returned, I must create a new one and pass it to the get world space method as the first argument. The world position will then be copied into this Vector3 that is passed to the method, and that can then be passed as the position to look at, or be used for whatever reason that is needed when it comes to this kind of situation.</p>
<p>So in this post I will be addressing this issue with some source code that has to do with nested object3d class based objects and the use of this get world space method. There is also just working out a few basic examples that have to do with the differences between local and world space in general as well.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/H9jAlG9fOa8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="Getting-world-position-in-threejs-and-what-to-know-first"><a href="#Getting-world-position-in-threejs-and-what-to-know-first" class="headerlink" title="Getting world position in threejs and what to know first"></a>Getting world position in threejs and what to know first</h2><p>In this post I will be writing about the <a href="https://stackoverflow.com/questions/15098479/how-to-get-the-global-world-position-of-a-child-object" target="_blank" rel="external">get world position method in the object3d base class</a> in the javaScript library known as threejs. So the content here has to do with just one little issue in an over all larger library that is written in a specific programing language called <a href="/2018/11/27/js-getting-started/">javaScript</a>. I assume that you have at least some basic working knowledge of how to get up and running with the basics at least, because I am not going to do that here in this post. However I always like to start off my threejs posts with a section like this in which I outline some things that you should be aware of before continuing to read the rest of the content.</p>
<h3 id="Read-up-more-on-the-look-at-method-of-object3d-and-what-it-has-to-do-with-world-space"><a href="#Read-up-more-on-the-look-at-method-of-object3d-and-what-it-has-to-do-with-world-space" class="headerlink" title="Read up more on the look at method of object3d and what it has to do with world space"></a>Read up more on the look at method of object3d and what it has to do with world space</h3><p>There is working out not just one but many examples of the <a href="/2021/05/13/threejs-object3d-lookat/">look at method</a> of the object3d class to get a feel for where and when the method is useful, but also to become aware of the <a href="/2022/05/06/threejs-examples-lookat-with-apply-euler/">drawbacks in some situations</a>. The method works great but it will always look at a position that is relative to world space rather than local space. Using the get world position method can help with this, but even then there are some situations in which I am just going to need to work out another solution to set the orientation of an object.</p>
<h3 id="Check-out-my-main-post-on-the-object3d-class-in-general"><a href="#Check-out-my-main-post-on-the-object3d-class-in-general" class="headerlink" title="Check out my main post on the object3d class in general"></a>Check out my main post on the object3d class in general</h3><p>The get world position method is just one of many methods of the Object3d class in threejs. There is a whole lot more to be aware of when it comes to other methods, as well as various properties that will also come into play. Also although often I might not work with the object3d class directly I do work with other objects that are based on top of object3d all the time such as mesh objects, cameras, lights, and much more. There is also a whole lot that comes up when it comes to things that branch off of the object3d class as well such as the <a href="/2018/04/15/threejs-vector3/">vector3 class</a> that is the value of the <a href="/2022/04/04/threejs-object3d-position/">position property</a>, and the <a href="/2021/04/28/threejs-euler/">Euler class</a> that is the value of the <a href="/2022/04/08/threejs-object3d-rotation/">rotation property</a> of object3d. With all this said you might want to read <a href="/2018/04/23/threejs-object3d/">my main post on object3d</a>.</p>
<h3 id="Learn-a-thing-or-two-about-groups-and-and-nested-objects-in-general"><a href="#Learn-a-thing-or-two-about-groups-and-and-nested-objects-in-general" class="headerlink" title="Learn a thing or two about groups and and nested objects in general"></a>Learn a thing or two about groups and and nested objects in general</h3><p>The use of the get world position often ends up going hand in hand with the <a href="/2018/05/16/threejs-grouping-mesh-objects/">use of groups</a>, or in any way shape or form the use of objects that are a child of a <a href="/2021/06/02/threejs-object3d-parent/">parent object</a>. That parent object can be a group, but it can also be anything that is based off of object3d, including even the scene object.</p>
<h3 id="The-source-code-examples-in-this-post-are-up-on-Github"><a href="#The-source-code-examples-in-this-post-are-up-on-Github" class="headerlink" title="The source code examples in this post are up on Github"></a>The source code examples in this post are up on Github</h3><p>The source code examples that I am writing about in this post can be found on Github in my <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-object3d-get-world-position" target="_blank" rel="external">test threejs repo</a>. This is also where I park the source code examples for my <a href="/categories/three-js/">many other blog posts on the threejs library</a>.</p>
<h3 id="Version-numbers-matter-in-threejs"><a href="#Version-numbers-matter-in-threejs" class="headerlink" title="Version numbers matter in threejs"></a>Version numbers matter in threejs</h3><p>When I first wrote this post I was using revision 127 of threejs which was a late version of threejs as of April of 2021, and the last time I came around to do some editing I was using <a href="https://github.com/dustinpfister/test_threejs/blob/master/views/demos/r146/README.md" target="_blank" rel="external">r146 and thus the demos where updated to the style</a> that I set for that revision. At one point I have found that a basic example that I have made for this post did in fact break with r135. In older versions of threejs I did not have to give a target vector as the first and only argument, but now the method will not work if I do note give one. Code breaking changes are introduced to threejs all the time, this is just one of may examples of this sort of thing. So if the code examples are not working as expected always check the version number that you are using.</p>
<h2 id="1-Some-Basic-examples-of-the-Object3d-getWorldPosition-method"><a href="#1-Some-Basic-examples-of-the-Object3d-getWorldPosition-method" class="headerlink" title="1 - Some Basic examples of the Object3d.getWorldPosition method"></a>1 - Some Basic examples of the Object3d.getWorldPosition method</h2><p>In this section I will be starting out with a few basic examples of the get world position method. These will just be a few quick examples that have to do with just two objects of interest with the aim of just focusing on the core idea of what the get world position method is all about. </p>
<h3 id="1-1-Parent-and-Child-objects"><a href="#1-1-Parent-and-Child-objects" class="headerlink" title="1.1 - Parent and Child objects"></a>1.1 - Parent and Child objects</h3><p>For this very first example in the basic section here I will of course try to keep things as simple as possible. The general idea here is that I have a single mesh object that is a child of another parent mesh object which in turn is also a child of the scene object. The scene object is also an example of an object3d based object and as such it also has a position property but for now I am leaving the scene object aligned with world space. So there is just thinking in terms of the parent mesh and the child mesh. When I set the position of the child mesh that position is relative to the parent mesh, and the parent mesh is relative to the position of the scene object which in this case is the same as world space as I am not going to move the mesh object around here.</p>
<p>Anyway if you are still a little confused by this just start playing around with a code examples like this one here:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">5</span>, <span class="number">5</span>) );</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">60</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">1</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// OBJECTS - a parent mesh, with a single child mesh</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> mat = <span class="keyword">new</span> THREE.MeshNormalMaterial();</div><div class="line"><span class="keyword">const</span> parent = <span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), mat );</div><div class="line"><span class="keyword">const</span> child = <span class="keyword">new</span> THREE.Mesh( <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.5</span>, <span class="number">30</span>, <span class="number">30</span>), mat );</div><div class="line">parent.add(child);</div><div class="line">scene.add(parent);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// Setting position of parent and child</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">parent.position.set(<span class="number">-1.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>); <span class="comment">// realtive to scene object ( aligned with world space )</span></div><div class="line">child.position.set(<span class="number">1.2</span>, <span class="number">1.2</span>, <span class="number">1.2</span>); <span class="comment">// relative to parent object</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>);</div><div class="line"><span class="comment">// JUST PASSING child.position WILL RESULT IN THE CAMERA LOOKING AT WHERE THE LOCATION OF THE CHILD</span></div><div class="line"><span class="comment">// MESH WOULD BE IF IT WAS RELATIVE TO WORLD SPACE RATHER THAN THE PARENT MESH. TO FIX THIS USE</span></div><div class="line"><span class="comment">// THE Object3d.getWorldPosition METHOD</span></div><div class="line"><span class="comment">//camera.lookAt( child.position );</span></div><div class="line">camera.lookAt( child.getWorldPosition(<span class="keyword">new</span> THREE.Vector3()) );</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>Notice the difference between just passing the child objects position property value to look at compared to using the get world position method. When I just pass the child position property the camera looks away from the child mesh, and when I use the get world position method the camera looks at the child mesh object. This is because the look at method will always make an object look at a position that is relative to world space. So when I give the child position value it is not the position relative to the parent mesh, but rather the position relative to world space, which in this case is aligned with the scene object.</p>
<h3 id="1-2-Basic-group-example-of-look-at-using-and-not-using-get-world-position"><a href="#1-2-Basic-group-example-of-look-at-using-and-not-using-get-world-position" class="headerlink" title="1.2 - Basic group example of look at using and not using get world position"></a>1.2 - Basic group example of look at using and not using get world position</h3><p>In this example I am making a helper function that will create and return a group that I can then add to a scene object. This group object contains two mesh objects, one of which is a cone, and the other is a cube. In this helper function that creates the group I am doing a rotation of the geometry of the cone once to make it so that the orientation of the cone geometry lines up with the face of the mesh object. So it is now just a question of using the look at method of the cone mesh to have it point at something where the tip of the cone is facing the given direction.</p>
<p>So everything in my create group helper method seems to work just fine when it comes to creating a group with two children. So now there is just creating two instances of this group as a way to showcase what the difference is between just passing the position property of the cube to the look at method of the cone, compared to using the get world position method.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">5</span>, <span class="number">5</span>) );</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">60</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">1</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> createGroup = <span class="function"><span class="keyword">function</span> (<span class="params">color</span>) </span>&#123;</div><div class="line">    color = color || <span class="keyword">new</span> THREE.Color(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">    <span class="comment">// creating a group</span></div><div class="line">    <span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">    <span class="comment">// creating and adding a pointer mesh to the group</span></div><div class="line">    <span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.CylinderGeometry(<span class="number">0</span>, <span class="number">0.5</span>, <span class="number">1</span>, <span class="number">12</span>);</div><div class="line">    geo.rotateX(<span class="built_in">Math</span>.PI * <span class="number">0.5</span>);</div><div class="line">    <span class="keyword">const</span> pointer = group.userData.pointer = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            geo,</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    pointer.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    pointer.rotation.y = <span class="number">1.57</span>; <span class="comment">// BY DEFAULT THE POINTER IS NOT POINTING AT THE CUBE</span></div><div class="line">    group.add(pointer);</div><div class="line">    <span class="comment">// creating and adding a cube</span></div><div class="line">    <span class="keyword">const</span> cube = group.userData.cube = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: color, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.5</span> &#125;));</div><div class="line">    cube.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">    group.add(cube);</div><div class="line">    <span class="comment">// box helper for the group</span></div><div class="line">    group.add(<span class="keyword">new</span> THREE.BoxHelper(group));</div><div class="line">    <span class="keyword">return</span> group;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GROUPS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> group = createGroup(<span class="number">0xff0000</span>); <span class="comment">// group 1</span></div><div class="line">scene.add(group);</div><div class="line">group.position.set(<span class="number">-2.0</span>, <span class="number">0</span>, <span class="number">0.0</span>);</div><div class="line"><span class="keyword">const</span> group2 = createGroup(<span class="number">0x00ff00</span>); <span class="comment">// group2</span></div><div class="line">scene.add(group2);</div><div class="line">group2.position.set(<span class="number">2.0</span>, <span class="number">0</span>, <span class="number">0.0</span>);</div><div class="line"><span class="comment">// the first group in am just using the look at method, and passing</span></div><div class="line"><span class="comment">// the value of the cube.position instance of vector3. THIS RESULTS IN THE</span></div><div class="line"><span class="comment">// CONE NOT POINTING AT THE CUBE, but at the location of the cube if it where</span></div><div class="line"><span class="comment">// positioned relative to world space rather than a location relative to the group</span></div><div class="line">group.userData.pointer.lookAt(group.userData.cube.position); </div><div class="line"><span class="comment">// IF I WANT TO HAVE THE POINTER LOOK AT THE CUBE</span></div><div class="line"><span class="comment">// THAT IS A CHILD OF THE GROUP, THEN I WILL WANT TO ADJUST</span></div><div class="line"><span class="comment">// FOR THAT FOR THIS THERE IS THE getWorldPosition METHOD</span></div><div class="line"><span class="keyword">const</span> v = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">group2.userData.cube.getWorldPosition(v);</div><div class="line">group2.userData.pointer.lookAt(v);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// RENDER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">4</span>, <span class="number">4</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">renderer.render(scene, camera);</div></pre></td></tr></table></figure>
<p>With the group in which I am using the get world position method as a way to get a position to pass to look at the cone points to the cube that is inside the group. However the group where I am just passing the position of the cube to the look at method that cone is not pointing to the cube, it is however pointing to a position where the cube world be if that position value was relative to the world rather that the parent group object. So then this example helps to show the difference, and why in some cases I will want to use the get world position method when working with an object that is a child of a group.</p>
<h2 id="2-Animation-loop-examples"><a href="#2-Animation-loop-examples" class="headerlink" title="2 - Animation loop examples"></a>2 - Animation loop examples</h2><p>I would like to make at least one if not more videos for each of my blog posts on threejs, and this one is no exception. Also in order to really gain a good sense of what is going on with various things that have to go with world space and local space it would be best to make at least a few animation examples with this sort of thing. So in this section I will be going over at least one if not more animation examples that involve the use of the get world position method of the object3d class.</p>
<h3 id="2-1-Animation-example-of-the-cone-and-cube-groups"><a href="#2-1-Animation-example-of-the-cone-and-cube-groups" class="headerlink" title="2.1 - Animation example of the cone and cube groups"></a>2.1 - Animation example of the cone and cube groups</h3><p>Here I have an animation example of the groups that contain a cone and a cube as a way to show what the difference is with world space compared to the typical local space that is given to the look at method of the object3d class. Once again I create two groups with the same create group helper function that returns a new group object with two child mesh objects. One child mesh object contains a cylinder geometry that is shaped like a cone, and the other mesh object is just a box geometry. I then also now have an update group helper function that will move the box geometry mesh around in a circle relative to the position of the group.</p>
<p>So then I am creating both groups with the same helper, and I am also updating the positions of the cubes with the same helper function as well. The difference in the update method of the animation loop though is that for group1 I am just passing the raw position of the child cube of group1 to the look a method that I am calling off the cone. This results in the cone looking in the direction of where the cube would be relative to world space. Often I will not want this to happen so I need to get the position of the cube relative to world space rather than just use the local space relative to the group. So to do this with group2 I am using the get world position method to copy the world relative location to a vector3 that I then use with the look at method, the end result is that the cone looks where the cube really is rather than where it would be if it where relative to the scene object rather than the group.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">60</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">1</span>, <span class="number">100</span>);</div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">4</span>, <span class="number">4</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGLRenderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> createGroup = <span class="function"><span class="keyword">function</span> (<span class="params">color, x</span>) </span>&#123;</div><div class="line">    color = color || <span class="keyword">new</span> THREE.Color(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</div><div class="line">    <span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">    <span class="keyword">const</span> geo = <span class="keyword">new</span> THREE.CylinderGeometry(<span class="number">0</span>, <span class="number">0.5</span>, <span class="number">1</span>, <span class="number">12</span>);</div><div class="line">    geo.rotateX(<span class="built_in">Math</span>.PI * <span class="number">0.5</span>);</div><div class="line">    <span class="keyword">const</span> pointer = group.userData.pointer = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            geo,</div><div class="line">            <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    pointer.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    pointer.rotation.y = <span class="number">1.57</span>;</div><div class="line">    group.add(pointer);</div><div class="line">    <span class="keyword">const</span> cube = group.userData.cube = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">            <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>),</div><div class="line">            <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123; <span class="attr">color</span>: color, <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.5</span> &#125;));</div><div class="line">    cube.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">    group.add(cube);</div><div class="line">    group.position.set(x, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    <span class="keyword">return</span> group;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> updateGroup = <span class="function">(<span class="params">group, alpha</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> e = <span class="keyword">new</span> THREE.Euler();</div><div class="line">    e.y = <span class="built_in">Math</span>.PI * <span class="number">2</span> * alpha;</div><div class="line">    group.userData.cube.position.copy( <span class="keyword">new</span> THREE.Vector3(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>) ).applyEuler(e).normalize().multiplyScalar(<span class="number">1.5</span>);</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add(<span class="keyword">new</span> THREE.GridHelper(<span class="number">5</span>, <span class="number">5</span>));</div><div class="line"><span class="comment">// just set up group1 and group2</span></div><div class="line"><span class="keyword">const</span> group1 = createGroup(<span class="number">0xff0000</span>, <span class="number">-2</span>);</div><div class="line">scene.add(group1);</div><div class="line"><span class="keyword">const</span> group2 = createGroup(<span class="number">0x00ff00</span>, <span class="number">2</span>);</div><div class="line">scene.add(group2);</div><div class="line"><span class="keyword">const</span> helper1 = <span class="keyword">new</span> THREE.BoxHelper(group1);</div><div class="line">scene.add(helper1);</div><div class="line"><span class="keyword">const</span> helper2 = <span class="keyword">new</span> THREE.BoxHelper(group2);</div><div class="line">scene.add(helper2);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">120</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="comment">// animate groups the same way</span></div><div class="line">    <span class="keyword">let</span> a = frame / frameMax;</div><div class="line">    updateGroup(group1, a);</div><div class="line">    updateGroup(group2, a);</div><div class="line">    helper1.update();</div><div class="line">    helper2.update();</div><div class="line">    <span class="comment">// with group1 I am just passing lookAt the LOCAL position of the cube</span></div><div class="line">    group1.userData.pointer.lookAt(group1.userData.cube.position);</div><div class="line">    <span class="comment">// with group to I am USING GETWORLDPOSITION to get a vector to pass to lookAt</span></div><div class="line">    <span class="keyword">const</span> v = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    group2.userData.cube.getWorldPosition(v);</div><div class="line">    group2.userData.pointer.lookAt(v);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>This is then the source code that I have together for the first video that I have made for this blog post. In time I might very well come around to edit this post again, and when I do so I may or may not make an additional video or two and then expand this section. The main thing here though is to just have a decent visual demo of why the get world positing method can prove to be useful and all ready I would say that this animation dies a good job of that.</p>
<h3 id="2-2-Moving-a-camera-to-move-between-viewing-a-static-object-and-a-child-of-a-group"><a href="#2-2-Moving-a-camera-to-move-between-viewing-a-static-object-and-a-child-of-a-group" class="headerlink" title="2.2 - Moving a camera to move between viewing a static object, and a child of a group"></a>2.2 - Moving a camera to move between viewing a static object, and a child of a group</h3><p>This is then a loop demo in which I am moving a camera between a view of a static mesh object, and then to a child mesh object of a group.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">60</span>, <span class="number">320</span> / <span class="number">240</span>, <span class="number">1</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> update_group = <span class="function">(<span class="params">group, a1=<span class="number">0</span> </span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">const</span> len = <span class="number">10</span>;</div><div class="line">    <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">        <span class="keyword">const</span> a_child = i / len;</div><div class="line">        <span class="keyword">const</span> mesh = group.children[i];</div><div class="line">        <span class="keyword">const</span> e = <span class="keyword">new</span> THREE.Euler();</div><div class="line">        e.y = <span class="built_in">Math</span>.PI * <span class="number">2</span> * ( (a1 + a_child) / <span class="number">2</span> );</div><div class="line">        e.z = <span class="built_in">Math</span>.PI * <span class="number">2</span> * ( (a1 + a_child) / <span class="number">2</span> );</div><div class="line">        mesh.position.set(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>).applyEuler(e).multiplyScalar(<span class="number">3</span>);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE CHILD OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="comment">// group</span></div><div class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshNormalMaterial();</div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">0.5</span>, <span class="number">20</span>, <span class="number">20</span>);</div><div class="line"><span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">group.position.set(<span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>)</div><div class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> len = <span class="number">10</span>;</div><div class="line"><span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">   <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(geometry, material);</div><div class="line">   group.add(mesh);</div><div class="line">   i += <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line">scene.add(group);</div><div class="line"><span class="comment">// static mesh</span></div><div class="line"><span class="keyword">const</span> mesh_static = <span class="keyword">new</span> THREE.Mesh(geometry, material);</div><div class="line">mesh_static.position.set(<span class="number">-5</span>,<span class="number">0</span>,<span class="number">-5</span>);</div><div class="line">scene.add(mesh_static)</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line">camera.position.set(<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">20</span>, FPS_MOVEMENT = <span class="number">30</span>, FRAME_MAX = <span class="number">900</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>, frame = <span class="number">0</span>, lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">    <span class="keyword">const</span> a2 = <span class="built_in">Math</span>.sin( <span class="built_in">Math</span>.PI * <span class="number">2</span> * (a1 * <span class="number">4</span> % <span class="number">1</span>) );</div><div class="line">    <span class="keyword">const</span> a3 = <span class="built_in">Math</span>.sin( <span class="built_in">Math</span>.PI * <span class="number">1</span> * (a1 * <span class="number">1</span> % <span class="number">1</span>) );</div><div class="line">    update_group(group, a2);</div><div class="line">    <span class="keyword">const</span> v2 = <span class="keyword">new</span> THREE.Vector3();</div><div class="line">    group.children[<span class="number">5</span>].getWorldPosition(v2);</div><div class="line">    <span class="keyword">const</span> v1 = mesh_static.position.clone();</div><div class="line">    <span class="keyword">const</span> v3 = v1.clone().lerp(v2, a3);</div><div class="line">    camera.position.copy( v3.clone().add( <span class="keyword">new</span> THREE.Vector3(<span class="number">-3</span>, <span class="number">3</span>, <span class="number">3</span>) ));</div><div class="line">    camera.lookAt(v3);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>The get world position method of the object3d class seems to work well for the sake of having a way to go about getting an instance of Vector3 that is relative to a fixed static world space rather than a parent instance of object3d such as a group, or even a scene. The look at method will always point to a position that it is given relative to world space, so it is nice to always have a way to go about getting that kind of position by just calling a method that will always return that kind of position.</p>
<p>Understanding the difference between positions that a relative to group, and positions that are relative to world space is an impotent part of the process of learning how to go about making crude yet effective models that are collections of mesh objects. As of this writing there are still a few ruff edges in my understanding of little topics like this, so each time I become aware of something that I think I should have solid by now I write a lengthly post such as this as a way to help me get a topic like this hardwired into my mind.</p>
<p>When it comes to additional reading in the long run sooner or later there is getting into starting to make some actual projects of one kind or another with three.js. With that said I have a <a href="/2021/02/19/threejs-examples/">post that I have wrote that is my current standard collection of general threejs project example prototypes</a> for all kids of various things.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2021/05/25/threejs-object3d-get-world-position/" data-id="cllo1cswm02uk60v14ihlx24c" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2021/05/25/threejs-object3d-get-world-position/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/05/26/threejs-sphere/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Spheres in threejs geometry, positioning, and more
        
      </div>
    </a>
  
  
    <a href="/2021/05/24/threejs-object3d-visible/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Making objects visible or not in three.js</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2021/05/25/threejs-object3d-get-world-position/index.html';
    this.page.identifier = '874';
    this.page.title = 'Getting world position of any Object3D Class based object in three.js';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.38px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.48px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.33px;">angular</a> <a href="/tags/animation/" style="font-size: 11.9px;">animation</a> <a href="/tags/automation/" style="font-size: 11.9px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.38px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.71px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.57px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.86px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.95px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.43px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.81px;">electronjs</a> <a href="/tags/express/" style="font-size: 17.14px;">express</a> <a href="/tags/games/" style="font-size: 17.62px;">games</a> <a href="/tags/git/" style="font-size: 13.81px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15.24px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.9px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.76px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.48px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.43px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 18.1px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.57px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.76px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.52px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.1px;">phaser</a> <a href="/tags/python/" style="font-size: 16.19px;">python</a> <a href="/tags/statistics/" style="font-size: 14.29px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.05px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.67px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/08/23/threejs-sprite/">Sprite Objects, and 2d overlays in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/17/threejs-buffer-geometry-attributes-tangent/">The tangent attribute of buffer geometry and normal maps in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/10/threejs-matcap-material/">The Matcap material in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/02/threejs-matrix4/">Matrix4 Objects in threejs</a>
          </li>
        
          <li>
            <a href="/2023/08/01/linux-folders/">Linux Root Folders</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2021/05/25/threejs-object3d-get-world-position/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>