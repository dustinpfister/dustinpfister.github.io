<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Basic Guy Model threejs example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2021/04/29/threejs-examples-guy-one/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="I want to start thinking in terms of what the long term plan with threejs might be for me if I am going to continue writing new posts on it. Also I what to known what to do when it comes to starting s">
<meta property="og:type" content="article">
<meta property="og:title" content="Basic Guy Model threejs example">
<meta property="og:url" content="https://dustinpfister.github.io/2021/04/29/threejs-examples-guy-one/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="I want to start thinking in terms of what the long term plan with threejs might be for me if I am going to continue writing new posts on it. Also I what to known what to do when it comes to starting s">
<meta property="og:updated_time" content="2022-11-17T15:36:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Basic Guy Model threejs example">
<meta name="twitter:description" content="I want to start thinking in terms of what the long term plan with threejs might be for me if I am going to continue writing new posts on it. Also I what to known what to do when it comes to starting s">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-examples-guy-one" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/04/29/threejs-examples-guy-one/" class="article-date"> Published:
  <time datetime="2021-04-29T18:15:00.000Z" itemprop="datePublished">2021-04-29</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2021/04/29/threejs-examples-guy-one/" class="article-date"> Modified:
  <time datetime="2022-11-17T15:36:37.000Z" itemprop="dateModified">2022-11-17</time>
</a>

    <span class="article-date">V1.33</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Basic Guy Model threejs example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>I want to start thinking in terms of what the long term plan with <a href="https://threejs.org/" target="_blank" rel="external">threejs</a> might be for me if I am going to continue writing new posts on it. Also I what to known what to do when it comes to starting some kind of actual project using threejs rather than the simple tech demos that I write about for the most part when writing these <a href="/categories/three-js/">posts on threejs</a>. However I think what I really need to start doing is making a <a href="/2021/02/19/threejs-examples/">few examples</a> that are some kind of starting point for an actual project of some kind. With that said I think In this post I will be writing about my first, basic guy, or person model using three.js that I made a while back, and then updated just a little for the sake of this post.</p>
<p>I actually have a number of crude modules that are really just a collection of mesh objects using the built in three.js geometries, rather than a professionally made model that is imported from something like blender. When it comes to doing that there is getting into how to go about <a href="/2021/04/30/threejs-dae-collada-loader/">loading exported dae files</a>, or some other kind of file format. I have nothing against making those kinds of modules, it is just that those kinds of modules can prove to be time consuming to make, and they do not always result in an over all better finished product in the end actually. Also I am taking into account what I want to really make with three.js and I am thinking more so in terms of animations in the form of videos, rather than games. </p>
<p>So when it comes to making videos all that matters in the end is if the final product looks the way I want it to when it comes to the final video and that is it. Also it is not just how a video looks that is important really but the over all subject matter, and so may other things that go beyond the scope of this blog post. Crude modules might look crude, but if I am going for that kind of style to begin with, then they will work just fine and I can move on to other aspects of making that kind of content. What really matters most then is the over all finished product in terms of everything, not just the animation, and I am finding <a href="https://www.youtube.com/watch?v=3a1gCQzBQws" target="_blank" rel="external">content on youtube that I would say are examples of doing this kind of thing right</a>.</p>
<p>So when it comes to the kinds of over all scenes that I would like to make, I will want to have at least one, if not a few basic guy, or person type models. With that said this post is on one of my first modules for this sort of thing. This kind of module, and several other variations of it, has all ready appears in some of my other examples. However in this post I think I will be just writing about the guy model by itself, and a single demo of the model.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/qquR4ehWTAk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="Basic-three-js-guy-model-and-what-to-know-before-hand"><a href="#Basic-three-js-guy-model-and-what-to-know-before-hand" class="headerlink" title="Basic three.js guy model and what to know before hand"></a>Basic three.js guy model and what to know before hand</h2><p>This is a post on using three.js to make a very crude guy module using built in three.js features along with a little javaScript code. There are other more standard ways of making a model that might prove to be a better option in the long run, but I kind of like just making simple modules like this with javaScript code alone thus far.</p>
<p>This is not a <a href="/2018/04/04/threejs-getting-started/">getting started post on three.js then</a>, let alone javaScript in general, and any additional skills that are required before hand in other to really get something of value from reading this. So if you want to reproduce what I have worked out here I trust you have at least some grasp on the basics at least when it comes to doing something with three.js and a little client side javaScript.</p>
<h3 id="Version-Numbers-matter-with-three-js"><a href="#Version-Numbers-matter-with-three-js" class="headerlink" title="Version Numbers matter with three.js"></a>Version Numbers matter with three.js</h3><p>This is something that I have found that I just need to repeat over and over again in every three.js post. When I first made this model I was using three.js version r91. Sense then I made some changes to get this to work find with version r127, which had to do with changes with how to do about using more than one material with a mesh object. Also the last time I cam around to do some editing I had to make some changes to the demos to get this working without error to get them working okay for r146.</p>
<p>It should go without saying that one should always look at dates of posts when reading content on the open web that have to do with a javaScript library. This is especially true with such a fast moving library like three.js, as code breaking changes are made often with this one more so then other projects where things might move a little slower.</p>
<h3 id="The-source-code-examples-in-this-post-are-on-Github"><a href="#The-source-code-examples-in-this-post-are-on-Github" class="headerlink" title="The source code examples in this post are on Github"></a>The source code examples in this post are on Github</h3><p>The source code examples that I am writing about here can be found on Github at my <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-examples-guy-one" target="_blank" rel="external">test threejs</a> repository. Also I am writing about something that I started in another project that I just called <a href="https://github.com/dustinpfister/threejs_guy" target="_blank" rel="external">threejs guy</a> that is also up on Gthub.</p>
<h2 id="1-guy-js-r0-and-demo"><a href="#1-guy-js-r0-and-demo" class="headerlink" title="1 - guy.js r0 and demo"></a>1 - guy.js r0 and demo</h2><p>This is a section on the first revision of the guy.js module that I started a long time ago now. I might add one or two more demos makijg use of this, and in time might also make changes to the code actaully. However at this point any chnages will just to be to make it work with newer verions of threejs and that is it.</p>
<h3 id="1-0-The-guy-js-file"><a href="#1-0-The-guy-js-file" class="headerlink" title="1.0 - The guy.js file"></a>1.0 - The guy.js file</h3><p>Here I have the source code of my first basic guy model. When I made this I was thinking in terms of having a base class that I might built on top of when it comes to making additional variants of this kind of thing for better or worse. When it comes to actually using this though I have made other modules that are just like this only they take a more functional approach. However what I really care about is to just have a very crude basic guy, or person type module that I can just skin with some textures by hacking over the materials that are being used a little. With that said this is more or less what I hand in mind when it comes to having something to that effect.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// guy.js - r0 - from threejs-examples-guy-one</span></div><div class="line"><span class="comment">// By Dustin Pfister</span></div><div class="line"><span class="comment">// https://dustinpfister.github.io/2021/04/29/threejs-examples-guy-one/</span></div><div class="line"><span class="comment">// </span></div><div class="line"><span class="keyword">var</span> Guy = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// material used for the legs</span></div><div class="line">    <span class="keyword">var</span> material_leg = <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0x0000ff</span>,</div><div class="line">            <span class="attr">emissive</span>: <span class="number">0x00001a</span></div><div class="line">        &#125;),</div><div class="line">    <span class="comment">// material used for the arms</span></div><div class="line">    material_arm = <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0x00ff00</span>,</div><div class="line">            <span class="attr">emissive</span>: <span class="number">0x001a00</span></div><div class="line">        &#125;);</div><div class="line">    <span class="comment">// material used for the body</span></div><div class="line">    material_body = <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0x00ff00</span>,</div><div class="line">            <span class="attr">emissive</span>: <span class="number">0x001a00</span></div><div class="line">        &#125;),</div><div class="line">    <span class="comment">// array of materials used for the head</span></div><div class="line">    materials_head = [</div><div class="line">        <span class="comment">// 0 default material</span></div><div class="line">        <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0xffff00</span>,</div><div class="line">            <span class="attr">emissive</span>: <span class="number">0x1a1a00</span></div><div class="line">        &#125;),</div><div class="line">        <span class="comment">// 1 used for the face</span></div><div class="line">        <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0xffffff</span>,</div><div class="line">            <span class="attr">emissive</span>: <span class="number">0x1a1a1a</span></div><div class="line">        &#125;)</div><div class="line">    ];</div><div class="line">    <span class="comment">// the guy constructor</span></div><div class="line">    <span class="keyword">var</span> Guy = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="comment">// a group that will hold all mesh objects</span></div><div class="line">        <span class="keyword">this</span>.group = <span class="keyword">new</span> THREE.Group();</div><div class="line">        <span class="comment">// HEAD</span></div><div class="line">        <span class="keyword">this</span>.head = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">                materials_head);</div><div class="line">        <span class="keyword">this</span>.head.position.y = <span class="number">1.6</span>;</div><div class="line">        <span class="comment">// set material index</span></div><div class="line">        <span class="keyword">this</span>.head.geometry.groups.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">face</span>) </span>&#123;</div><div class="line">            <span class="comment">// set all to zero by default</span></div><div class="line">            face.materialIndex = <span class="number">0</span>;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// one side of face set to face material</span></div><div class="line">        <span class="keyword">this</span>.head.geometry.groups[<span class="number">4</span>].materialIndex = <span class="number">1</span>;</div><div class="line">        <span class="keyword">this</span>.head.castShadow = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">this</span>.group.add(<span class="keyword">this</span>.head);</div><div class="line">        <span class="comment">// BODY</span></div><div class="line">        <span class="keyword">this</span>.body = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>),</div><div class="line">                material_body);</div><div class="line">        <span class="keyword">this</span>.body.castShadow = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">this</span>.group.add(<span class="keyword">this</span>.body);</div><div class="line">        <span class="comment">// RIGHT ARM</span></div><div class="line">        <span class="keyword">this</span>.arm_right = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">.5</span>, <span class="number">1.5</span>, <span class="number">.5</span>),</div><div class="line">                material_arm);</div><div class="line">        <span class="keyword">this</span>.arm_right.geometry.translate(<span class="number">0</span>,  - <span class="number">.5</span>, <span class="number">0</span>);</div><div class="line">        <span class="keyword">this</span>.arm_right.position.x = <span class="number">1</span>;</div><div class="line">        <span class="keyword">this</span>.arm_right.position.y = <span class="number">.75</span>;</div><div class="line">        <span class="keyword">this</span>.arm_right.castShadow = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">this</span>.group.add(<span class="keyword">this</span>.arm_right);</div><div class="line">        <span class="comment">// LEFT ARM</span></div><div class="line">        <span class="keyword">this</span>.arm_left = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">.5</span>, <span class="number">1.5</span>, <span class="number">.5</span>),</div><div class="line">                material_arm);</div><div class="line">        <span class="keyword">this</span>.arm_left.geometry.translate(<span class="number">0</span>,  - <span class="number">.5</span>, <span class="number">0</span>);</div><div class="line">        <span class="keyword">this</span>.arm_left.position.x = <span class="number">-1</span>;</div><div class="line">        <span class="keyword">this</span>.arm_left.position.y = <span class="number">.75</span>;</div><div class="line">        <span class="keyword">this</span>.arm_left.castShadow = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">this</span>.group.add(<span class="keyword">this</span>.arm_left);</div><div class="line">        <span class="comment">// RIGHT LEG</span></div><div class="line">        <span class="keyword">this</span>.leg_right = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">.5</span>, <span class="number">2</span>, <span class="number">.5</span>),</div><div class="line">                material_leg);</div><div class="line">        <span class="keyword">this</span>.leg_right.geometry.translate(<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>);</div><div class="line">        <span class="keyword">this</span>.leg_right.position.x = <span class="number">.35</span>;</div><div class="line">        <span class="keyword">this</span>.leg_right.position.y = <span class="number">-1.1</span>;</div><div class="line">        <span class="keyword">this</span>.leg_right.castShadow = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">this</span>.group.add(<span class="keyword">this</span>.leg_right);</div><div class="line">        <span class="comment">// LEFT LEG</span></div><div class="line">        <span class="keyword">this</span>.leg_left = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">.5</span>, <span class="number">2</span>, <span class="number">.5</span>),</div><div class="line">                material_leg);</div><div class="line">        <span class="keyword">this</span>.leg_left.geometry.translate(<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>);</div><div class="line">        <span class="keyword">this</span>.leg_left.position.x =  - <span class="number">.35</span>;</div><div class="line">        <span class="keyword">this</span>.leg_left.position.y = <span class="number">-1.1</span>;</div><div class="line">        <span class="keyword">this</span>.leg_left.castShadow = <span class="literal">true</span>;</div><div class="line">        <span class="keyword">this</span>.group.add(<span class="keyword">this</span>.leg_left);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// move the arm of give id ('arm_right' or 'arm_left');</span></div><div class="line">    <span class="comment">// x and z should be a value between 0, and 1</span></div><div class="line">    Guy.prototype.moveArm = <span class="function"><span class="keyword">function</span> (<span class="params">armId, x, z</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> arm = <span class="keyword">this</span>[armId];</div><div class="line">        z = <span class="built_in">Math</span>.PI / <span class="number">2</span> * z;</div><div class="line">        <span class="keyword">if</span> (armId === <span class="string">'arm_left'</span>) &#123;</div><div class="line">            z -= z * <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        arm.rotation.set(<span class="built_in">Math</span>.PI * <span class="number">2</span> * x, <span class="number">0</span>, z);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// rotate head around</span></div><div class="line">    <span class="comment">// y is 0 to 1</span></div><div class="line">    Guy.prototype.moveHead = <span class="function"><span class="keyword">function</span> (<span class="params">y</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.head.rotation.set(<span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span> * y, <span class="number">0</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// move legs in respect to a walk cycle</span></div><div class="line">    <span class="comment">// where per is between 0, and 1.</span></div><div class="line">    Guy.prototype.moveLegs = <span class="function"><span class="keyword">function</span> (<span class="params">per</span>) </span>&#123;</div><div class="line">        per %= <span class="number">1</span>;</div><div class="line">        <span class="keyword">var</span> bias = <span class="built_in">Math</span>.abs(<span class="number">.5</span> - per) / <span class="number">.5</span>;</div><div class="line">        <span class="keyword">this</span>.leg_left.rotation.set(<span class="number">.75</span> - bias * <span class="number">1.5</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        <span class="keyword">this</span>.leg_right.rotation.set( - <span class="number">.75</span> + bias * <span class="number">1.5</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// walk</span></div><div class="line">    Guy.prototype.walk = <span class="function"><span class="keyword">function</span> (<span class="params">per, swings</span>) </span>&#123;</div><div class="line">        per = per === <span class="literal">undefined</span> ? <span class="number">0</span> : per;</div><div class="line">        swings = swings === <span class="literal">undefined</span> ? <span class="number">1</span> : swings;</div><div class="line">        <span class="keyword">var</span> r = <span class="built_in">Math</span>.PI * <span class="number">2</span> * per;</div><div class="line">        <span class="keyword">var</span> armPer = <span class="built_in">Math</span>.cos(r * swings) + <span class="number">1</span> / <span class="number">2</span>;</div><div class="line">        <span class="keyword">this</span>.moveArm(<span class="string">'arm_right'</span>,  - <span class="number">.1</span> + <span class="number">.2</span> * armPer, <span class="number">0</span>);</div><div class="line">        <span class="keyword">this</span>.moveArm(<span class="string">'arm_left'</span>, <span class="number">.1</span> - <span class="number">.2</span> * armPer, <span class="number">0</span>);</div><div class="line">        <span class="keyword">this</span>.moveLegs(per * swings);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// just return an instance of guy for now</span></div><div class="line">    <span class="keyword">return</span> Guy;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<p>So then the whole idea is to just have a way to create an instance of one of these, and then just use the prototype methods to work with the model in a project. With that said maybe I should take the moment to go over just one little demo that makes use of this for what it is worth.</p>
<h3 id="1-1-Single-guy-one-r0-model-hello-world-exmple"><a href="#1-1-Single-guy-one-r0-model-hello-world-exmple" class="headerlink" title="1.1 - Single guy one r0 model hello world exmple"></a>1.1 - Single guy one r0 model hello world exmple</h3><p>Now to test out this guy model to see if things work out okay so far, and it would seem that they do. For this first getting started type example I am just creating a static scene in which I create a single guy object and then use the built in methods to chnage the state of the arms.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">64</span> / <span class="number">48</span>, <span class="number">0.05</span>, <span class="number">100</span>);</div><div class="line">    <span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">    camera.position.set(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    ( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LIGHT</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> pl = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">    pl.position.set(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>);</div><div class="line">    scene.add(pl);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// ADDING GUY OBJECT TO SCENE</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> guy1 = <span class="keyword">new</span> Guy();</div><div class="line">    guy1.group.position.set(<span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>)</div><div class="line">    scene.add(guy1.group);</div><div class="line">    guy1.moveArm(<span class="string">'arm_right'</span>, <span class="number">0</span>, <span class="number">1.25</span>);</div><div class="line">    guy1.moveArm(<span class="string">'arm_left'</span>, <span class="number">0.1</span>, <span class="number">1.25</span>);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h3 id="1-2-Using-more-than-one-guy-js-r0-module-demo"><a href="#1-2-Using-more-than-one-guy-js-r0-module-demo" class="headerlink" title="1.2 - Using more than one guy.js r0 module demo"></a>1.2 - Using more than one guy.js r0 module demo</h3><p>Here I am creating not one, not two, but three instances of this guy model. For each guy model I am doing something a little different, where one is just shaking there head, another is moving there arms up and down, and another is being really animated in a few ways. So then this seems to work okay at least for making little video projects that might involve a few of these, or maybe even a lot of them actually.</p>
<iframe class="youtube_video" src="https://www.youtube.com/embed/u5tRAChrMfM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<p>What I worked out here when it comes to the guy model that is fairly animated might prove to be a good starting point for another helper method for setting position of one of these. However there is a bit more than just that of course so I think at least a few more demos are called for when it comes to setting position and rotation of something like this.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">28</span>, <span class="number">7</span>) );</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">8</span> / <span class="number">6</span>, <span class="number">.05</span>, <span class="number">100</span>);</div><div class="line">    <span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">    camera.position.set(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    camera.add(<span class="keyword">new</span> THREE.PointLight());</div><div class="line">    scene.add(camera);</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    (<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// ADDING GUY OBJECTS TO SCENE</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> guy1 = <span class="keyword">new</span> Guy();</div><div class="line">    guy1.group.position.set(<span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>)</div><div class="line">    scene.add(guy1.group);</div><div class="line">    <span class="keyword">const</span> guy2 = <span class="keyword">new</span> Guy();</div><div class="line">    guy2.group.position.set(<span class="number">5</span>, <span class="number">3</span>, <span class="number">0</span>);</div><div class="line">    scene.add(guy2.group);</div><div class="line">    <span class="keyword">const</span> guy3 = <span class="keyword">new</span> Guy();</div><div class="line">    guy3.group.position.set(<span class="number">-5</span>, <span class="number">3</span>, <span class="number">0</span>);</div><div class="line">    scene.add(guy3.group);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">let</span> frame = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">const</span> maxFrame = <span class="number">200</span>;</div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span> (secs &gt; <span class="number">0.05</span>) &#123;</div><div class="line">            <span class="keyword">const</span> per = frame / maxFrame,</div><div class="line">            bias = <span class="built_in">Math</span>.abs(<span class="number">.5</span> - per) / <span class="number">.5</span>,</div><div class="line">            r = <span class="built_in">Math</span>.PI * <span class="number">2</span> * per;</div><div class="line">            <span class="comment">// guy1 walks around, and moves head</span></div><div class="line">            guy1.walk(per, <span class="number">8</span>);</div><div class="line">            guy1.moveHead(<span class="number">.25</span> - <span class="number">.25</span> * bias);</div><div class="line">            guy1.group.position.set(</div><div class="line">                <span class="built_in">Math</span>.cos(r) * <span class="number">5</span> - <span class="number">5</span>,</div><div class="line">                <span class="number">3</span>,</div><div class="line">                <span class="built_in">Math</span>.sin(r) * <span class="number">5</span>);</div><div class="line">            guy1.group.lookAt(</div><div class="line">                <span class="built_in">Math</span>.cos(r + <span class="number">0.5</span>) * <span class="number">5</span> - <span class="number">5</span>,</div><div class="line">                <span class="number">3</span>,</div><div class="line">                <span class="built_in">Math</span>.sin(r + <span class="number">0.5</span>) * <span class="number">5</span>);</div><div class="line">            <span class="comment">// guy 2 shakes his head</span></div><div class="line">            guy2.moveHead(<span class="number">.125</span> - <span class="number">.25</span> * bias);</div><div class="line">            <span class="comment">// guy 3 just moves arms</span></div><div class="line">            guy3.moveArm(<span class="string">'arm_right'</span>, <span class="number">0</span>, bias * <span class="number">2</span>);</div><div class="line">            guy3.moveArm(<span class="string">'arm_left'</span>, <span class="number">0</span>, bias * <span class="number">2</span>);</div><div class="line">            <span class="comment">// draw</span></div><div class="line">            renderer.render(scene, camera);</div><div class="line">            frame += <span class="number">30</span> * secs;</div><div class="line">            frame %= maxFrame;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<p>So now I think what I need to do is make some examples that are not just about a single model like this, but a number of models like this. I will want to have one or more of these kinds of models in a scene, along with some additional models that are other objects to place in the scene. Then there is just working out what the over all project is from that point forward when it comes to the animation, and things that are outside of animation all together like having a script, or a storyboard, but maybe getting into that kind of thing is a matter for a whole other post.</p>
<p>For now I just want to have a very basic, crude, guy model, and with that said I think I have something. Maybe when I start to use this I will want to add at least a few more methods, mesh objects, and so forth, but I think I want to keep this very basic and crude. For wherever the reason I seem to like that kind of style actually.</p>
<h3 id="1-3-Scale-and-position-r0-demo"><a href="#1-3-Scale-and-position-r0-demo" class="headerlink" title="1.3 - Scale and position r0 demo"></a>1.3 - Scale and position r0 demo</h3><p>In future revisions of this guy one module that I may or may not get to at some point I am sure that I will want to have better methods for helping me with the process of positioning one of these little guys to the surface of something. I am thinking that when I use this module it will be for some very simple crude scenes where I will just have everything positioned on top of a plane geometry for now maybe. So for this demo I made a simple helper function that I can call to just set the y value of the Vector3 class instance stored at the position property of the main group object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">64</span> / <span class="number">48</span>, <span class="number">0.05</span>, <span class="number">100</span>);</div><div class="line">    <span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">    camera.position.set(<span class="number">10</span>, <span class="number">5</span>, <span class="number">7</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    ( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LIGHT</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> pl = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">    pl.position.set(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>);</div><div class="line">    scene.add(pl);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// set to plain surface by subtracting by known values</span></div><div class="line">    <span class="comment">// for legSize, bodSize, and space that work well</span></div><div class="line">    <span class="keyword">const</span> setYToPlainSurface = <span class="function">(<span class="params">guy, scale</span>) =&gt;</span> &#123;</div><div class="line">        scale = scale === <span class="literal">undefined</span> ? <span class="number">1</span> : scale;</div><div class="line">        <span class="keyword">const</span> legSize = <span class="number">2</span> * scale;</div><div class="line">        <span class="keyword">const</span> bodSize = <span class="number">2</span> * scale;</div><div class="line">        <span class="keyword">const</span> space = <span class="number">0.1</span> * scale;</div><div class="line">        guy.group.position.y = legSize + bodSize / <span class="number">2</span> + space * <span class="number">2</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// ADDING GUY OBJECT TO SCENE</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> guy1 = <span class="keyword">new</span> Guy();</div><div class="line">    guy1.group.scale.set(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line">    scene.add(guy1.group);</div><div class="line">    <span class="comment">// using set to plain surface</span></div><div class="line">    setYToPlainSurface(guy1, <span class="number">0.5</span>);</div><div class="line">    <span class="keyword">const</span> guy2 = <span class="keyword">new</span> Guy();</div><div class="line">    guy2.group.scale.set(<span class="number">0.75</span>, <span class="number">0.75</span>, <span class="number">0.75</span>);</div><div class="line">    scene.add(guy2.group);</div><div class="line">    <span class="comment">// using set to plain surface</span></div><div class="line">    setYToPlainSurface(guy2, <span class="number">0.75</span>);</div><div class="line">    guy2.group.position.x = <span class="number">3</span>;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h3 id="1-4-Box3-scale-position-and-rotation-r0-demo"><a href="#1-4-Box3-scale-position-and-rotation-r0-demo" class="headerlink" title="1.4 - Box3 scale position, and rotation r0 demo"></a>1.4 - Box3 scale position, and rotation r0 demo</h3><p>Here I now have another helper for setting the position of the guy, but this time I am using the box3 class to do so which might prove to be a better way to go about doing this sort of thing. I also worked out a helper function for setting the rotation of the guy model as well where I have some things worked out that might be just what I want to happen when using this in a project when it comes to rotation.</p>
<p>By default I will want for the y value of the Vector3 that I given to use for the look at value to be ignored and use the y position of the main group object for the y value. This will allow me to have the guy model face a given direction but only with respect to the x and z values of the given Vector3 object. I can disable this of course and then use the y value, but do so in a way in which things are adjusted to it looks right.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">64</span> / <span class="number">48</span>, <span class="number">0.05</span>, <span class="number">100</span>);</div><div class="line">    <span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">    camera.position.set(<span class="number">10</span>, <span class="number">5</span>, <span class="number">7</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    ( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LIGHT</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> pl = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">    pl.position.set(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>);</div><div class="line">    scene.add(pl);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// create guy helper</span></div><div class="line">    <span class="keyword">const</span> createGuy = <span class="function">(<span class="params">scale</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> guy = <span class="keyword">new</span> Guy();</div><div class="line">        <span class="keyword">const</span> gud =  guy.group.userData;</div><div class="line">        gud.scale = scale;</div><div class="line">        guy.group.scale.set(scale, scale, scale);</div><div class="line">        <span class="comment">// using set to plain surface</span></div><div class="line">        setGuyPos(guy);</div><div class="line">        <span class="keyword">return</span> guy;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get guy size helper</span></div><div class="line">    <span class="keyword">const</span> getGuySize = <span class="function">(<span class="params">guy</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> b3 = <span class="keyword">new</span> THREE.Box3();</div><div class="line">        b3.setFromObject(guy.group);</div><div class="line">        <span class="keyword">const</span> v3_size = <span class="keyword">new</span> THREE.Vector3();</div><div class="line">        b3.getSize(v3_size);</div><div class="line">        <span class="keyword">return</span> v3_size;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set guy pos using box3 and userData object</span></div><div class="line">    <span class="keyword">const</span> setGuyPos = <span class="function">(<span class="params">guy, v3_pos</span>) =&gt;</span> &#123;</div><div class="line">        v3_pos = v3_pos || <span class="keyword">new</span> THREE.Vector3();</div><div class="line">        <span class="keyword">const</span> gud = guy.group.userData;</div><div class="line">        <span class="keyword">const</span> v3_size = getGuySize(guy);</div><div class="line">        guy.group.position.copy(v3_pos);</div><div class="line">        guy.group.position.y = ( v3_size.y + gud.scale ) / <span class="number">2</span> + v3_pos.y;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// a set guy rotation helper</span></div><div class="line">    <span class="keyword">const</span> setGuyRotation = <span class="function">(<span class="params">guy, v3_lookat, ignoreY</span>) =&gt;</span> &#123;</div><div class="line">        ignoreY = ignoreY === <span class="literal">undefined</span> ? <span class="literal">true</span>: ignoreY;</div><div class="line">        <span class="keyword">const</span> gud = guy.group.userData;</div><div class="line">        <span class="keyword">const</span> v3_size = getGuySize(guy);</div><div class="line">        <span class="keyword">const</span> v3 = v3_lookat.clone();</div><div class="line">        v3.y = guy.group.position.y;</div><div class="line">        <span class="keyword">if</span>(!ignoreY)&#123;</div><div class="line">            v3.y = v3_lookat.y + ( v3_size.y + gud.scale ) / <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        guy.group.lookAt( v3 );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// ADDING GUY OBJECT TO SCENE</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scale_h1 = <span class="number">1</span> / getGuySize( createGuy(<span class="number">1</span>) ).y;</div><div class="line">    <span class="comment">// height 1</span></div><div class="line">    <span class="keyword">const</span> guy1 = createGuy(scale_h1);</div><div class="line">    setGuyPos(guy1, <span class="keyword">new</span> THREE.Vector3(<span class="number">-2</span>,<span class="number">0</span>,<span class="number">0</span>));</div><div class="line">    scene.add(guy1.group);</div><div class="line">    <span class="comment">// height 2</span></div><div class="line">    <span class="keyword">const</span> guy2 = createGuy(scale_h1 * <span class="number">2</span>);</div><div class="line">    setGuyPos(guy2, <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>));</div><div class="line">    scene.add(guy2.group);</div><div class="line">    <span class="comment">// height 4, also moving arms and testing out etGuyRotation helper</span></div><div class="line">    <span class="keyword">const</span> guy3 = createGuy(scale_h1 * <span class="number">4</span>);</div><div class="line">    guy3.moveArm(<span class="string">'arm_left'</span>, <span class="number">-0.125</span>, <span class="number">0</span>);</div><div class="line">    guy3.moveArm(<span class="string">'arm_right'</span>, <span class="number">0.125</span>, <span class="number">0</span>);</div><div class="line">    setGuyPos(guy3, <span class="keyword">new</span> THREE.Vector3(<span class="number">2</span>,<span class="number">0</span>,<span class="number">0</span>));</div><div class="line">    setGuyRotation(guy3, <span class="keyword">new</span> THREE.Vector3(<span class="number">3</span>,<span class="number">0</span>,<span class="number">2</span>), <span class="literal">false</span>);</div><div class="line">    scene.add(guy3.group);</div><div class="line">    <span class="comment">// height 6</span></div><div class="line">    <span class="keyword">const</span> guy4 = createGuy(scale_h1 * <span class="number">6</span>);</div><div class="line">    setGuyPos(guy4, <span class="keyword">new</span> THREE.Vector3(<span class="number">6</span>,<span class="number">0</span>,<span class="number">0</span>));</div><div class="line">    scene.add(guy4.group);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// RENDER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    renderer.render(scene, camera);</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h3 id="1-5-Curve-path-animaiton-r0-demo"><a href="#1-5-Curve-path-animaiton-r0-demo" class="headerlink" title="1.5 - Curve path animaiton r0 demo"></a>1.5 - Curve path animaiton r0 demo</h3><p>Here I now have a new animation loop example involving curves in which I am testing out everything that I have made thus far when it comes to the guy module as well as the additional helper functions that I have made. I have a whole bunch of these guys actually and I am having them all move along a curve path.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">0.1</span>);</div><div class="line">    scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">64</span> / <span class="number">48</span>, <span class="number">0.05</span>, <span class="number">100</span>);</div><div class="line">    <span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">    camera.position.set(<span class="number">10</span>, <span class="number">5</span>, <span class="number">7</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    ( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LIGHT</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> pl = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">    pl.position.set(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>);</div><div class="line">    scene.add(pl);</div><div class="line">    <span class="keyword">const</span> al = <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>, <span class="number">0.15</span>);</div><div class="line">    scene.add(al);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// create guy helper</span></div><div class="line">    <span class="keyword">const</span> createGuy = <span class="function">(<span class="params">scale</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> guy = <span class="keyword">new</span> Guy();</div><div class="line">        <span class="keyword">const</span> gud =  guy.group.userData;</div><div class="line">        gud.scale = scale;</div><div class="line">        guy.group.scale.set(scale, scale, scale);</div><div class="line">        <span class="comment">// using set to plain surface</span></div><div class="line">        setGuyPos(guy);</div><div class="line">        <span class="keyword">return</span> guy;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get guy size helper</span></div><div class="line">    <span class="keyword">const</span> getGuySize = <span class="function">(<span class="params">guy</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> b3 = <span class="keyword">new</span> THREE.Box3();</div><div class="line">        b3.setFromObject(guy.group);</div><div class="line">        <span class="keyword">const</span> v3_size = <span class="keyword">new</span> THREE.Vector3();</div><div class="line">        b3.getSize(v3_size);</div><div class="line">        <span class="keyword">return</span> v3_size;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set guy pos using box3 and userData object</span></div><div class="line">    <span class="keyword">const</span> setGuyPos = <span class="function">(<span class="params">guy, v3_pos</span>) =&gt;</span> &#123;</div><div class="line">        v3_pos = v3_pos || <span class="keyword">new</span> THREE.Vector3();</div><div class="line">        <span class="keyword">const</span> gud = guy.group.userData;</div><div class="line">        <span class="keyword">const</span> v3_size = getGuySize(guy);</div><div class="line">        guy.group.position.copy(v3_pos);</div><div class="line">        guy.group.position.y = ( v3_size.y + gud.scale ) / <span class="number">2</span> + v3_pos.y;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// a set guy rotation helper</span></div><div class="line">    <span class="keyword">const</span> setGuyRotation = <span class="function">(<span class="params">guy, v3_lookat, ignoreY</span>) =&gt;</span> &#123;</div><div class="line">        ignoreY = ignoreY === <span class="literal">undefined</span> ? <span class="literal">true</span>: ignoreY;</div><div class="line">        <span class="keyword">const</span> gud = guy.group.userData;</div><div class="line">        <span class="keyword">const</span> v3_size = getGuySize(guy);</div><div class="line">        <span class="keyword">const</span> v3 = v3_lookat.clone();</div><div class="line">        v3.y = guy.group.position.y;</div><div class="line">        <span class="keyword">if</span>(!ignoreY)&#123;</div><div class="line">            v3.y = v3_lookat.y + ( v3_size.y + gud.scale ) / <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        guy.group.lookAt( v3 );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// just a short hand for THREE.QuadraticBezierCurve3</span></div><div class="line">    <span class="keyword">const</span> QBC3 = <span class="function"><span class="keyword">function</span>(<span class="params">x1, y1, z1, x2, y2, z2, x3, y3, z3</span>)</span>&#123;</div><div class="line">        <span class="keyword">let</span> vs = x1;</div><div class="line">        <span class="keyword">let</span> ve = y1;</div><div class="line">        <span class="keyword">let</span> vc = z1;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">arguments</span>.length === <span class="number">9</span>)&#123;</div><div class="line">            vs = <span class="keyword">new</span> THREE.Vector3(x1, y1, z1);</div><div class="line">            ve = <span class="keyword">new</span> THREE.Vector3(x2, y2, z2);</div><div class="line">            vc = <span class="keyword">new</span> THREE.Vector3(x3, y3, z3);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> THREE.QuadraticBezierCurve3( vs, vc, ve );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// QBDelta helper using QBC3</span></div><div class="line">    <span class="comment">// this works by giving deltas from the point that is half way between</span></div><div class="line">    <span class="comment">// the two start and end points rather than a direct control point for x3, y3, and x3</span></div><div class="line">    <span class="keyword">const</span> QBDelta = <span class="function"><span class="keyword">function</span>(<span class="params">x1, y1, z1, x2, y2, z2, x3, y3, z3</span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> vs = <span class="keyword">new</span> THREE.Vector3(x1, y1, z1);</div><div class="line">        <span class="keyword">const</span> ve = <span class="keyword">new</span> THREE.Vector3(x2, y2, z2);</div><div class="line">        <span class="comment">// deltas</span></div><div class="line">        <span class="keyword">const</span> vDelta = <span class="keyword">new</span> THREE.Vector3(x3, y3, z3);</div><div class="line">        <span class="keyword">const</span> vc = vs.clone().lerp(ve, <span class="number">0.5</span>).add(vDelta);</div><div class="line">        <span class="keyword">const</span> curve = QBC3(vs, ve, vc);</div><div class="line">        <span class="keyword">return</span> curve;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create guy collection</span></div><div class="line">    <span class="keyword">const</span> createGuyCollection = <span class="function">(<span class="params">guyCount, hScale</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> scale_h1 = <span class="number">1</span> / getGuySize( createGuy(<span class="number">1</span>) ).y;</div><div class="line">        <span class="comment">// height 1</span></div><div class="line">        <span class="keyword">const</span> guys = [];</div><div class="line">        <span class="keyword">let</span> gi = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(gi &lt; guyCount)&#123;</div><div class="line">            <span class="keyword">const</span> guy = createGuy(scale_h1 * hScale);</div><div class="line">            <span class="comment">// head</span></div><div class="line">            guy.head.material = [</div><div class="line">               <span class="comment">// 0 default material</span></div><div class="line">               <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">                   <span class="attr">color</span>: <span class="number">0xffff00</span>, <span class="attr">transparent</span>: <span class="literal">true</span></div><div class="line">               &#125;),</div><div class="line">               <span class="comment">// 1 used for the face</span></div><div class="line">               <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">                    <span class="attr">color</span>: <span class="number">0xffffff</span>, <span class="attr">transparent</span>: <span class="literal">true</span></div><div class="line">                &#125;)</div><div class="line">            ];</div><div class="line">            guy.body.material = <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">                <span class="attr">color</span>: <span class="number">0x00ff00</span>, <span class="attr">transparent</span>: <span class="literal">true</span></div><div class="line">            &#125;);</div><div class="line">            guy.arm_right.material = <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">                <span class="attr">color</span>: <span class="number">0x00ff00</span>, <span class="attr">transparent</span>: <span class="literal">true</span></div><div class="line">            &#125;);</div><div class="line">            guy.leg_right.material = <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">                <span class="attr">color</span>: <span class="number">0x00ffff</span>, <span class="attr">transparent</span>: <span class="literal">true</span></div><div class="line">            &#125;);</div><div class="line">            guy.arm_left.material = guy.arm_right.material;</div><div class="line">            guy.leg_left.material = guy.leg_right.material;</div><div class="line">            guys.push(guy);</div><div class="line">            scene.add(guy.group);</div><div class="line">            gi += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> guys;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update a guy collection</span></div><div class="line">    <span class="keyword">const</span> updateGuyCollection = <span class="function">(<span class="params">guys, f, fMax</span>) =&gt;</span> &#123;</div><div class="line">        guys.forEach(<span class="function">(<span class="params">guy, i, arr</span>)=&gt;</span>&#123;</div><div class="line">            <span class="keyword">const</span> offset = i / arr.length;</div><div class="line">            <span class="keyword">const</span> a1 = f / fMax;</div><div class="line">            <span class="keyword">let</span> a2 = (f + <span class="number">0.05</span>) / fMax;</div><div class="line">            a2 = a2 &gt; <span class="number">1</span> ? <span class="number">1</span> : a2;</div><div class="line">            <span class="comment">// position and rotation</span></div><div class="line">            <span class="keyword">const</span> a3 = (a1 + offset) % <span class="number">1</span>;</div><div class="line">            setGuyPos(guy, curvePath.getPoint( a3 ));</div><div class="line">            setGuyRotation(guy, curvePath.getPoint( (a2 + offset) % <span class="number">1</span> ) );</div><div class="line">            guy.walk(a1, <span class="number">10</span>);</div><div class="line">            <span class="comment">// opacity</span></div><div class="line">            <span class="keyword">const</span> a4 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a3) / <span class="number">0.5</span>;</div><div class="line">            guy.head.material[<span class="number">0</span>].opacity = a4;</div><div class="line">            guy.head.material[<span class="number">1</span>].opacity = a4;</div><div class="line">            guy.body.material.opacity = a4;</div><div class="line">            guy.arm_right.material.opacity = a4;</div><div class="line">            guy.leg_right.material.opacity = a4;</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// CURVE PATH</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> curvePath = <span class="keyword">new</span> THREE.CurvePath();</div><div class="line">    curvePath.add( QBDelta(<span class="number">-5</span>, <span class="number">0</span>, <span class="number">-5</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">-2.5</span>) );</div><div class="line">    curvePath.add( QBDelta(<span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>) );</div><div class="line">    curvePath.add( QBDelta(<span class="number">2</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">-5</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>) );</div><div class="line">    curvePath.add( QBDelta(<span class="number">-5</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">-10</span>, <span class="number">0</span>, <span class="number">-5</span>, <span class="number">-5</span>, <span class="number">0</span>, <span class="number">5</span>) );</div><div class="line">    <span class="comment">// PATH DEBUG POINTS</span></div><div class="line">    <span class="keyword">const</span> v3Array_path = curvePath.getPoints(<span class="number">20</span>);</div><div class="line">    <span class="keyword">const</span> points_debug = <span class="keyword">new</span> THREE.Points(</div><div class="line">        <span class="keyword">new</span> THREE.BufferGeometry().setFromPoints(v3Array_path),</div><div class="line">        <span class="keyword">new</span> THREE.PointsMaterial(&#123;<span class="attr">size</span>: <span class="number">0.25</span>, <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>)&#125;)</div><div class="line">    );</div><div class="line">    scene.add(points_debug);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// ADDING GUY OBJECT TO SCENE</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> guys = createGuyCollection(<span class="number">16</span>, <span class="number">2</span>);</div><div class="line">    <span class="comment">///-------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">let</span> f = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">const</span> fMax = <span class="number">200</span>;</div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span> (secs &gt; <span class="number">0.05</span>) &#123;</div><div class="line">            <span class="comment">// update guys</span></div><div class="line">            updateGuyCollection(guys, f, fMax)</div><div class="line">            <span class="comment">// draw</span></div><div class="line">            renderer.render(scene, camera);</div><div class="line">            f += <span class="number">30</span> * secs;</div><div class="line">            f %= fMax;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h3 id="1-6-Explosion-Effect-r0-demo"><a href="#1-6-Explosion-Effect-r0-demo" class="headerlink" title="1.6 - Explosion Effect r0 demo"></a>1.6 - Explosion Effect r0 demo</h3><p>Another little demo project that I wanted to work out using the first r0 revision of the guy module thus far is a little additional code that I can use to create a kind of explosion effect. That is to have a cool effect where the guy will just break apart into a whole bunch of triangles and then have those triangles move around all over the place. So for this demo I made an update guy effect helper function that will update the state of a guy object based on a given effect function and alpha values. With that thus far I have made a single effect function thus far that is not really what I had in mid with this, but it is a good start at least for something that I might build into future revisions or maybe make into some additional module project.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// SCENE, CAMERA, and RENDERER</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line">    scene.background = <span class="keyword">new</span> THREE.Color(<span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">0.1</span>);</div><div class="line">    scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line">    <span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">64</span> / <span class="number">48</span>, <span class="number">0.05</span>, <span class="number">100</span>);</div><div class="line">    <span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">    camera.position.set(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</div><div class="line">    camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">    scene.add(camera);</div><div class="line">    renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">    ( <span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// MATERIALS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> material_leg = <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0x000000</span>, <span class="attr">emissive</span>: <span class="number">0x00001a</span>, <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">        &#125;);</div><div class="line">    <span class="comment">// material used for the arms</span></div><div class="line">    <span class="keyword">const</span> material_arm = <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0x00ffff</span>, <span class="attr">emissive</span>: <span class="number">0x001a00</span>, <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">        &#125;);</div><div class="line">    <span class="comment">// material used for the body</span></div><div class="line">    <span class="keyword">const</span> material_body = <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0x00ffff</span>, <span class="attr">emissive</span>: <span class="number">0x001a00</span>, <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">        &#125;);</div><div class="line">    <span class="comment">// array of materials used for the head</span></div><div class="line">    <span class="keyword">const</span> material_head = [</div><div class="line">        <span class="comment">// 0 default material</span></div><div class="line">        <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0xffaf00</span>, <span class="attr">emissive</span>: <span class="number">0x1a1a00</span>, <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">        &#125;),</div><div class="line">        <span class="comment">// 1 used for the face</span></div><div class="line">        <span class="keyword">new</span> THREE.MeshLambertMaterial(&#123;</div><div class="line">            <span class="attr">color</span>: <span class="number">0xffffff</span>, <span class="attr">emissive</span>: <span class="number">0x1a1a1a</span>, <span class="attr">side</span>: THREE.DoubleSide</div><div class="line">        &#125;)</div><div class="line">    ];</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// LIGHT</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">const</span> pl = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">    pl.position.set(<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>);</div><div class="line">    scene.add(pl);</div><div class="line">    <span class="keyword">const</span> al = <span class="keyword">new</span> THREE.AmbientLight(<span class="number">0xffffff</span>, <span class="number">0.15</span>);</div><div class="line">    scene.add(al);</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPERS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// create guy helper</span></div><div class="line">    <span class="keyword">const</span> createGuy = <span class="function">(<span class="params">scale, maxUnitDelta, maxRotation</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> guy = <span class="keyword">new</span> Guy();</div><div class="line">        <span class="keyword">const</span> gud =  guy.group.userData;</div><div class="line">        gud.scale = scale;</div><div class="line">        gud.maxUnitDelta = maxUnitDelta === <span class="literal">undefined</span> ? <span class="number">1</span> : maxUnitDelta;</div><div class="line">        gud.maxRotation = maxRotation === <span class="literal">undefined</span> ? <span class="number">1</span> : maxRotation;</div><div class="line">        guy.group.scale.set(scale, scale, scale);</div><div class="line">        <span class="comment">// for each mesh</span></div><div class="line">        guy.group.traverse(<span class="function">(<span class="params"> obj </span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">if</span>(obj.type === <span class="string">'Mesh'</span>)&#123;</div><div class="line">                <span class="keyword">const</span> mesh = obj;</div><div class="line">                <span class="keyword">const</span> mud = mesh.userData;</div><div class="line">                <span class="comment">// I WANT A NON INDEX GEOMETRY</span></div><div class="line">                mesh.geometry = mesh.geometry.toNonIndexed();</div><div class="line">                <span class="comment">// store refs to pos and a clone of the pos</span></div><div class="line">                <span class="keyword">const</span> pos = mesh.geometry.getAttribute(<span class="string">'position'</span>);</div><div class="line">                mud.pos = pos;</div><div class="line">                mud.pos_home = pos.clone();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// use materials in this file</span></div><div class="line">        guy.head.material = material_head.map( <span class="function">(<span class="params">m</span>) =&gt;</span> &#123; <span class="keyword">return</span> m.clone(); &#125;);</div><div class="line">        guy.body.material = material_body.clone();</div><div class="line">        guy.arm_left.material = material_arm.clone();</div><div class="line">        guy.arm_right.material = material_arm.clone();</div><div class="line">        guy.leg_right.material = material_leg.clone();</div><div class="line">        guy.leg_left.material = material_leg.clone();</div><div class="line">        <span class="comment">// using set to plain surface</span></div><div class="line">        setGuyPos(guy);</div><div class="line">        <span class="keyword">return</span> guy;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a guy by way of a hight scale value</span></div><div class="line">    <span class="keyword">const</span> createGuyHScale = <span class="function">(<span class="params">HScale, maxUnitDelta, maxRotation</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> scale_h1 = <span class="number">1</span> / getGuySize( createGuy(<span class="number">1</span>) ).y;</div><div class="line">        <span class="keyword">const</span> guy = createGuy(HScale * scale_h1, maxUnitDelta, maxRotation);</div><div class="line">        <span class="keyword">return</span> guy;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get guy size helper</span></div><div class="line">    <span class="keyword">const</span> getGuySize = <span class="function">(<span class="params">guy</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> b3 = <span class="keyword">new</span> THREE.Box3();</div><div class="line">        b3.setFromObject(guy.group);</div><div class="line">        <span class="keyword">const</span> v3_size = <span class="keyword">new</span> THREE.Vector3();</div><div class="line">        b3.getSize(v3_size);</div><div class="line">        <span class="keyword">return</span> v3_size;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set guy pos using box3 and userData object</span></div><div class="line">    <span class="keyword">const</span> setGuyPos = <span class="function">(<span class="params">guy, v3_pos</span>) =&gt;</span> &#123;</div><div class="line">        v3_pos = v3_pos || <span class="keyword">new</span> THREE.Vector3();</div><div class="line">        <span class="keyword">const</span> gud = guy.group.userData;</div><div class="line">        <span class="keyword">const</span> v3_size = getGuySize(guy);</div><div class="line">        guy.group.position.copy(v3_pos);</div><div class="line">        guy.group.position.y = ( v3_size.y + gud.scale ) / <span class="number">2</span> + v3_pos.y;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// a set guy rotation helper</span></div><div class="line">    <span class="keyword">const</span> setGuyRotation = <span class="function">(<span class="params">guy, v3_lookat, ignoreY</span>) =&gt;</span> &#123;</div><div class="line">        ignoreY = ignoreY === <span class="literal">undefined</span> ? <span class="literal">true</span>: ignoreY;</div><div class="line">        <span class="keyword">const</span> gud = guy.group.userData;</div><div class="line">        <span class="keyword">const</span> v3_size = getGuySize(guy);</div><div class="line">        <span class="keyword">const</span> v3 = v3_lookat.clone();</div><div class="line">        v3.y = guy.group.position.y;</div><div class="line">        <span class="keyword">if</span>(!ignoreY)&#123;</div><div class="line">            v3.y = v3_lookat.y + ( v3_size.y + gud.scale ) / <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        guy.group.lookAt( v3 );</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update guy method</span></div><div class="line">    <span class="keyword">const</span> updateGuyEffect = <span class="function">(<span class="params">guy, globalAlpha, effect</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> group = guy.group;</div><div class="line">        <span class="keyword">const</span> gud = group.userData;</div><div class="line">        group.traverse( <span class="function">(<span class="params">obj</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">if</span>(obj.type === <span class="string">'Mesh'</span>)&#123;</div><div class="line">                <span class="keyword">const</span> mesh = obj;</div><div class="line">                <span class="keyword">const</span> mud = mesh.userData;</div><div class="line">                <span class="keyword">let</span> ti = <span class="number">0</span>;</div><div class="line">                <span class="keyword">const</span> ct = mud.pos.array.length;</div><div class="line">                <span class="comment">// for each trinagle</span></div><div class="line">                <span class="keyword">while</span>(ti &lt; ct)&#123;</div><div class="line">                    <span class="comment">// for each point of a triangle</span></div><div class="line">                    <span class="keyword">let</span> pi = <span class="number">0</span>;</div><div class="line">                    <span class="keyword">while</span>(pi &lt; <span class="number">3</span>)&#123;</div><div class="line">                        <span class="keyword">const</span> i = ti + pi * <span class="number">3</span>;</div><div class="line">                        <span class="comment">// create vector3 from pos_home</span></div><div class="line">                        <span class="keyword">const</span> x = mud.pos_home.array[ i ];</div><div class="line">                        <span class="keyword">const</span> y = mud.pos_home.array[ i + <span class="number">1</span>];</div><div class="line">                        <span class="keyword">const</span> z = mud.pos_home.array[ i + <span class="number">2</span>];</div><div class="line">                        <span class="keyword">const</span> v_pos_home = <span class="keyword">new</span> THREE.Vector3(x, y, z);</div><div class="line">                        <span class="comment">// figure out the delta</span></div><div class="line">                        <span class="keyword">let</span> v_delta = <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</div><div class="line">                        v_delta = effect(ti, pi, v_pos_home, globalAlpha, mesh, group, mud, gud, v_delta);</div><div class="line">                        <span class="comment">// update pos</span></div><div class="line">                        <span class="keyword">const</span> v_pos = v_pos_home.clone().add( v_delta );</div><div class="line">                        mud.pos.array[ i ] = v_pos.x;</div><div class="line">                        mud.pos.array[ i + <span class="number">1</span>] = v_pos.y;</div><div class="line">                        mud.pos.array[ i + <span class="number">2</span>] = v_pos.z;</div><div class="line">                        pi += <span class="number">1</span>;</div><div class="line">                    &#125;</div><div class="line">                    ti += <span class="number">9</span>;</div><div class="line">                &#125;</div><div class="line">                mud.pos.needsUpdate = <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// EFFECTS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// EFFECT 1</span></div><div class="line">    <span class="keyword">const</span> EFFECT1 = <span class="function">(<span class="params">ti, pi, v_pos_home, globalAlpha, mesh, group, mud, gud, v_delta</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">const</span> a1 = ti / mud.pos.array.length;</div><div class="line">        <span class="keyword">const</span> e = <span class="keyword">new</span> THREE.Euler();</div><div class="line">        e.y = <span class="built_in">Math</span>.PI * <span class="number">2</span> * gud.maxRotation * globalAlpha * (<span class="number">0.25</span> + a1);</div><div class="line">        v_delta.applyEuler(e).normalize().multiplyScalar( globalAlpha * gud.maxUnitDelta);</div><div class="line">        <span class="keyword">return</span> v_delta;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// CREATE GUY</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// guy1</span></div><div class="line">    <span class="keyword">const</span> guy1 = createGuyHScale(<span class="number">3</span>, <span class="number">0.25</span>, <span class="number">8</span>);</div><div class="line">    scene.add(guy1.group);</div><div class="line">    <span class="comment">///-------- ----------</span></div><div class="line">    <span class="comment">// ANIMATION LOOP</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="keyword">let</span> f = <span class="number">0</span>,</div><div class="line">    lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">const</span> fMax = <span class="number">200</span>;</div><div class="line">    <span class="keyword">const</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">        secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">        requestAnimationFrame(loop);</div><div class="line">        <span class="keyword">if</span> (secs &gt; <span class="number">0.05</span>) &#123;</div><div class="line">            <span class="keyword">const</span> a1 = f / fMax;</div><div class="line">            <span class="keyword">const</span> a2 = <span class="number">1</span> - <span class="built_in">Math</span>.abs(<span class="number">0.5</span> - a1) / <span class="number">0.5</span>;</div><div class="line">            guy1.walk(a1, <span class="number">8</span>);</div><div class="line">            setGuyPos(guy1, <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>));</div><div class="line">            setGuyRotation(guy1, <span class="keyword">new</span> THREE.Vector3(<span class="number">1</span>, <span class="number">0</span>, <span class="number">5</span> * a2));</div><div class="line">            updateGuyEffect(guy1, a2, EFFECT1);</div><div class="line">            <span class="comment">// draw</span></div><div class="line">            renderer.render(scene, camera);</div><div class="line">            f += <span class="number">30</span> * secs;</div><div class="line">            f %= fMax;</div><div class="line">            lt = now;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    loop();</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>I am happy with this basic kind of guy module, and moving forward with it from here might just involve adding a few more features when it comes to how I go about using in an other projects. I might want to make a slightly more advanced version of this kind of guy model, but once I have a few models like this it gets to the point where all I have to do is just skin them in different ways and that is about it.</p>
<p>I am all ready using this guy model, and many variations of this in other projects, and examples. I have a few in the works actually, but so far one that I am most happy with thus far is my <a href="/2021/04/19/threejs-examples-hamster-wheel/">guy stuck on hamster wheel</a> example. I am sure that I will be making at least a few other examples here and there that make use of this, or other modules that are based on it, and as I do I will try to come back here and edit this post when I do so.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2021/04/29/threejs-examples-guy-one/" data-id="cle059rgt02aqdwv1w7l7cmp4" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2021/04/29/threejs-examples-guy-one/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/04/30/threejs-dae-collada-loader/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          The dae or Collada file loader in threejs
        
      </div>
    </a>
  
  
    <a href="/2021/04/28/threejs-euler/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Working with Angles in threejs with the Euler Class and various other features.</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2021/04/29/threejs-examples-guy-one/index.html';
    this.page.identifier = '856';
    this.page.title = 'Basic Guy Model threejs example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 12.73px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/02/10/threejs-curves-cubicbeziercurve3/">Cubic Bezier Curves in threejs</a>
          </li>
        
          <li>
            <a href="/2023/02/03/threejs-buffer-geometry-morph-attributes/">Morph Attributes of buffer geometry objects</a>
          </li>
        
          <li>
            <a href="/2023/01/27/threejs-examples-house-two/">House Model two threejs project example</a>
          </li>
        
          <li>
            <a href="/2023/01/20/threejs-buffer-geometry-attributes-color/">Material Vertex Color and the buffer geometry attribute used for doing so</a>
          </li>
        
          <li>
            <a href="/2023/01/13/threejs-shader-material/">The shader material in threejs and getting started with a little GLSL</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2021/04/29/threejs-examples-guy-one/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>