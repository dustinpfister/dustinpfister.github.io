<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>Attack Wave Control System javaScript example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2021/03/31/js-javascript-example-attack-wave-control-system/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="For todays javaScript example I worked out an attack wave control system that I might use in one or move canvas projects that will be games that might make use of such a system. What I am taking about">
<meta property="og:type" content="article">
<meta property="og:title" content="Attack Wave Control System javaScript example">
<meta property="og:url" content="https://dustinpfister.github.io/2021/03/31/js-javascript-example-attack-wave-control-system/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="For todays javaScript example I worked out an attack wave control system that I might use in one or move canvas projects that will be games that might make use of such a system. What I am taking about">
<meta property="og:updated_time" content="2021-04-02T15:28:48.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Attack Wave Control System javaScript example">
<meta name="twitter:description" content="For todays javaScript example I worked out an attack wave control system that I might use in one or move canvas projects that will be games that might make use of such a system. What I am taking about">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-83195184-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image-->
        <div class="selfimage"></div>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas-Examples</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

<!-- adding my canvas thing ( Dustin ) -->
<script src="/js/the_matrix.js"></script>
      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-js-javascript-example-attack-wave-control-system" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/31/js-javascript-example-attack-wave-control-system/" class="article-date"> Published:
  <time datetime="2021-03-31T18:01:00.000Z" itemprop="datePublished">2021-03-31</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2021/03/31/js-javascript-example-attack-wave-control-system/" class="article-date"> Modified:
  <time datetime="2021-04-02T15:28:48.000Z" itemprop="dateModified">2021-04-02</time>
</a>

    <span class="article-date">V1.18</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Attack Wave Control System javaScript example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>For todays <a href="/2021/04/02/js-javascript-example/">javaScript example</a> I worked out an attack wave control system that I might use in one or move canvas projects that will be games that might make use of such a system. What I am taking about here is a system where there is an object pool that is used for buttons that from a bar or sorts. As time goes by the buttons move along to a given point such as the top of the canvas element. When a button reaches the top of the canvas it will become inactive, and that wave will then become the current wave, and as such will add however many enemies the wave will add to a queue.</p>
<p>There are a number of canvas examples that I would like to improve with a system such as this, and a whole bunch of additional ides for canvas element powered games that might make use of this feature in one way or another. So for this post for starters I would like to get a solid starting point for this kind of system up and running. Once I have that it is just a matter of shoehorning it into a project.</p>
<a id="more"></a>
<h2 id="1-The-wave-module"><a href="#1-The-wave-module" class="headerlink" title="1 - The wave module"></a>1 - The wave module</h2><p>I am going to start off this post with the main event of the over all system rather than starting with support modules. I will be getting to them later in this post, but many of them are just more of the same when it comes to the various other topics that I write about when it comes to the various resources that I make for a javaScript project.</p>
<p>At the top of the module I have some constant values that have to do with the size, as well as the min and max speed at which the wave buttons move. When I start using this in some games I might want to make some of these settings that I can change in the create method of the module. However for now I think I will just leave them as hard coded settings, I just wanted to get the basic idea that I had in mind up and running fast and did not get to doing things like that.</p>
<p>I then have the spawn and update methods that I will be using when creating an instance of the object pool that will be used for this module. I will nt be getting into detail with the object pool module here of course, but I will be getting to the file that I am using for this example in a later section.</p>
<p>I then have my create, update and on click public methods.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> waveMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> BUTTON_HEIGHT = <span class="number">128</span>,</div><div class="line">    BUTTON_BASE_PPS = BUTTON_HEIGHT / <span class="number">60</span>, <span class="comment">// every 30 secs</span></div><div class="line">    BUTTON_RUSH_PPS = BUTTON_HEIGHT / <span class="number">1</span>; <span class="comment">// every 1 sec</span></div><div class="line"> </div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// spawn an update methods</span></div><div class="line">    <span class="keyword">var</span> spawn = <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, sm, opt</span>) </span>&#123;</div><div class="line">        obj.heading = <span class="built_in">Math</span>.PI * <span class="number">1.5</span>;</div><div class="line">        obj.pps = pool.data.pps; <span class="comment">//opt.pps || BUTTON_BASE_PPS;</span></div><div class="line">        obj.h = BUTTON_HEIGHT;</div><div class="line">        obj.lifespan = <span class="literal">Infinity</span>;</div><div class="line">        obj.x = opt.x || <span class="number">0</span>;</div><div class="line">        obj.y = opt.startY;</div><div class="line"> </div><div class="line">        obj.data.waveNumber = pool.data.waveNumber || <span class="number">0</span>;</div><div class="line">        obj.data.unitCount = pool.data.baseUnitCount;</div><div class="line"> </div><div class="line">        pool.data.waveNumber += <span class="number">1</span>;</div><div class="line">        pool.data.toSpawn -= <span class="number">1</span>;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> update = <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, sm, secs</span>) </span>&#123;</div><div class="line">        obj.pps = pool.data.pps;</div><div class="line">        poolMod.moveByPPS(obj, secs);</div><div class="line">        <span class="keyword">if</span> (obj.y &lt;= <span class="number">0</span>) &#123;</div><div class="line">            obj.active = <span class="literal">false</span>;</div><div class="line">            sm.game.onWaveStart(obj, sm);</div><div class="line">            pool.data.currentWave += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// create a waveButtons pool</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.startY = opt.startY || <span class="number">0</span>;</div><div class="line">        <span class="keyword">var</span> pool = poolMod.create(&#123;</div><div class="line">                <span class="attr">count</span>: <span class="number">4</span>, <span class="comment">// max number of buttons on the canvas</span></div><div class="line">                spawn: spawn,</div><div class="line">                <span class="attr">update</span>: update,</div><div class="line">                <span class="attr">data</span>: &#123;</div><div class="line">                    <span class="attr">pps</span>: BUTTON_BASE_PPS,</div><div class="line">                    <span class="attr">baseUnitCount</span>: opt.baseUnitCount || <span class="number">1</span>,</div><div class="line">                    <span class="attr">currentWave</span>: <span class="number">0</span>,</div><div class="line">                    <span class="attr">waveNumber</span>: <span class="number">1</span>,</div><div class="line">                    <span class="attr">waveCount</span>: opt.waveCount || <span class="number">0</span>, <span class="comment">// total number of waves</span></div><div class="line">                    toSpawn: opt.waveCount,</div><div class="line">                    <span class="attr">activeCount</span>: <span class="number">4</span>,</div><div class="line">                    <span class="attr">rushTo</span>: <span class="number">0</span></div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        <span class="comment">// set all to active</span></div><div class="line">        <span class="comment">//poolMod.setActiveStateForAll(pool, true);</span></div><div class="line">        pool.objects.map(<span class="function"><span class="keyword">function</span> (<span class="params">obj, i</span>) </span>&#123;</div><div class="line">            <span class="comment">// if i is less than wave count then start the object</span></div><div class="line">            <span class="comment">// off as active</span></div><div class="line">            <span class="keyword">if</span> (i &lt; opt.waveCount) &#123;</div><div class="line">                poolMod.spawn(pool, sm, &#123;</div><div class="line">                    <span class="attr">x</span>: opt.x,</div><div class="line">                    <span class="attr">startY</span>: opt.startY + i * BUTTON_HEIGHT</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">x</span>: opt.x || <span class="number">0</span>, <span class="comment">// the upper left position of the wave bar</span></div><div class="line">            y: opt.y || <span class="number">0</span>,</div><div class="line">            <span class="attr">pool</span>: pool</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> getLowsetActive = <span class="function"><span class="keyword">function</span> (<span class="params">pool</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> lowest = &#123;</div><div class="line">            <span class="attr">y</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">obj</span>: &#123;&#125;</div><div class="line">        &#125;;</div><div class="line">        pool.objects.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">obj, i</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (obj.active &amp;&amp; obj.y &gt; lowest.y) &#123;</div><div class="line">                lowest.y = obj.y;</div><div class="line">                lowest.obj = obj;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> lowest.obj;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    api.update = <span class="function"><span class="keyword">function</span> (<span class="params">sm, secs</span>) </span>&#123;</div><div class="line">        <span class="comment">// get pool</span></div><div class="line">        <span class="keyword">var</span> pool = sm.game.waveButtons.pool;</div><div class="line">        <span class="comment">// update all buttons</span></div><div class="line">        poolMod.update(pool, secs, sm);</div><div class="line">        <span class="comment">// spawn next button</span></div><div class="line">        pool.data.activeCount = poolMod.activeCount(pool);</div><div class="line">        <span class="keyword">if</span> (pool.data.activeCount &lt; pool.objects.length &amp;&amp; pool.data.toSpawn &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">var</span> lowest = getLowsetActive(pool);</div><div class="line">            poolMod.spawn(pool, sm, &#123;</div><div class="line">                <span class="attr">startY</span>: lowest.y + BUTTON_HEIGHT <span class="comment">//sm.canvas.height</span></div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">        pool.data.pps = BUTTON_BASE_PPS;</div><div class="line">        <span class="keyword">if</span> (pool.data.rushTo &gt; pool.data.currentWave) &#123;</div><div class="line">            pool.data.pps = BUTTON_RUSH_PPS;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    api.onClick = <span class="function"><span class="keyword">function</span> (<span class="params">sm, pos</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> pool = sm.game.waveButtons.pool;</div><div class="line">        <span class="keyword">var</span> obj = poolMod.getObjectAt(pool, pos.x, pos.y);</div><div class="line">        <span class="keyword">if</span> (obj) &#123;</div><div class="line">            pool.data.rushTo = obj.data.waveNumber;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> api;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<p>There might be a few more things that I might want to add here and there, but I do not want to go to nuts with this for now. When it comes to all the other little ideas that come to mind many of them might change a little form one project to another. So maybe I should hold off for now at least, and get to that kind of stuff when I start to use this in a real game of some kind.</p>
<h2 id="2-A-utils-js-unilty-library"><a href="#2-A-utils-js-unilty-library" class="headerlink" title="2 - A utils.js unilty library"></a>2 - A utils.js unilty library</h2><p>This is a javaScript example, and as such the main feature is something that can be used in just about any kind of javaScript environment. However the typical use of the wave module will be as a canvas project in front end javaScript. As with just about any other canvas example I have a utility library that contains a bunch of copy and past methods that I use from one canvas example to another. This is s module that will change up a little from one example to another thigh, so for this example I am using bound box collision detection, as well as some additional methods that have to do with creating a canvas and getting a point relative to a canvas element.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> utils = &#123;&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// bounding box</span></div><div class="line">utils.boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, w1, h1, x2, y2, w2, h2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> !(</div><div class="line">        (y1 + h1) &lt; y2 ||</div><div class="line">        y1 &gt; (y2 + h2) ||</div><div class="line">        (x1 + w1) &lt; x2 ||</div><div class="line">        x1 &gt; (x2 + w2));</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// create a canvas</span></div><div class="line">utils.createCanvas = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    opt.container = opt.container || <span class="built_in">document</span>.getElementById(<span class="string">'canvas-app'</span>) || <span class="built_in">document</span>.body;</div><div class="line">    opt.canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">    opt.ctx = opt.canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    <span class="comment">// assign the 'canvas_example' className</span></div><div class="line">    opt.canvas.className = <span class="string">'canvas_example'</span>;</div><div class="line">    <span class="comment">// set native width</span></div><div class="line">    opt.canvas.width = opt.width === <span class="literal">undefined</span> ? <span class="number">320</span> : opt.width;</div><div class="line">    opt.canvas.height = opt.height === <span class="literal">undefined</span> ? <span class="number">240</span> : opt.height;</div><div class="line">    <span class="comment">// translate by 0.5, 0.5</span></div><div class="line">    opt.ctx.translate(<span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line">    <span class="comment">// disable default action for onselectstart</span></div><div class="line">    opt.canvas.onselectstart = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</div><div class="line">    opt.canvas.style.imageRendering = <span class="string">'pixelated'</span>;</div><div class="line">    opt.ctx.imageSmoothingEnabled = <span class="literal">false</span>;</div><div class="line">    <span class="comment">// append canvas to container</span></div><div class="line">    opt.container.appendChild(opt.canvas);</div><div class="line">    <span class="keyword">return</span> opt;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// get canvas relative point</span></div><div class="line">utils.getCanvasRelative = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> canvas = e.target,</div><div class="line">    bx = canvas.getBoundingClientRect(),</div><div class="line">    pos = &#123;</div><div class="line">        <span class="attr">x</span>: (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientX : e.clientX) - bx.left,</div><div class="line">        <span class="attr">y</span>: (e.changedTouches ? e.changedTouches[<span class="number">0</span>].clientY : e.clientY) - bx.top,</div><div class="line">        <span class="attr">bx</span>: bx</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// ajust for native canvas matrix size</span></div><div class="line">    pos.x = <span class="built_in">Math</span>.floor((pos.x / canvas.scrollWidth) * canvas.width);</div><div class="line">    pos.y = <span class="built_in">Math</span>.floor((pos.y / canvas.scrollHeight) * canvas.height);</div><div class="line">    <span class="comment">// prevent default</span></div><div class="line">    e.preventDefault();</div><div class="line">    <span class="keyword">return</span> pos;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="3-Object-pool-module"><a href="#3-Object-pool-module" class="headerlink" title="3 - Object pool module"></a>3 - Object pool module</h2><p>In this example I am also making use of an object pool module, this is something that I first worked out for my canvas example on objects pools, and take with me from one canvas example to another. I am using it to create wave bar buttons, and I am also using it to create enemy units for this example in the game module that I will be getting to a little later in this post.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> poolMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// Public API</span></div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// get next inactive object in the given pool</span></div><div class="line">    <span class="keyword">var</span> getInactive = <span class="function"><span class="keyword">function</span> (<span class="params">pool</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a new pool</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.count = opt.count || <span class="number">10</span>;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">        pool = &#123;</div><div class="line">            <span class="attr">maxSecs</span>: opt.maxSecs || <span class="number">0.125</span>,</div><div class="line">            <span class="attr">objects</span>: [],</div><div class="line">            <span class="attr">data</span>: opt.data || &#123;&#125;,</div><div class="line">            <span class="attr">spawn</span>: opt.spawn || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state, opt</span>) </span>&#123;&#125;,</div><div class="line">            <span class="attr">purge</span>: opt.purge || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state</span>) </span>&#123;&#125;,</div><div class="line">            <span class="attr">update</span>: opt.update || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state, secs</span>) </span>&#123;&#125;</div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">while</span> (i &lt; opt.count) &#123;</div><div class="line">            pool.objects.push(&#123;</div><div class="line">                <span class="attr">active</span>: <span class="literal">false</span>,</div><div class="line">                <span class="attr">i</span>: i,</div><div class="line">                <span class="attr">x</span>: opt.x === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.x,</div><div class="line">                <span class="attr">y</span>: opt.y === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.y,</div><div class="line">                <span class="attr">w</span>: opt.w === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.w,</div><div class="line">                <span class="attr">h</span>: opt.h === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.h,</div><div class="line">                <span class="attr">heading</span>: opt.heading === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.heading,</div><div class="line">                <span class="attr">pps</span>: opt.pps === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.pps,</div><div class="line">                <span class="attr">lifespan</span>: opt.lifespan || <span class="number">3</span>,</div><div class="line">                <span class="attr">data</span>: &#123;&#125;</div><div class="line">            &#125;);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> pool;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// spawn the next inactive object in the given pool</span></div><div class="line">    api.spawn = <span class="function"><span class="keyword">function</span> (<span class="params">pool, state, opt</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> obj = getInactive(pool);</div><div class="line">        state = state || &#123;&#125;;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">if</span> (obj) &#123;</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                obj.active = <span class="literal">true</span>;</div><div class="line">                pool.spawn.call(pool, obj, pool, state, opt);</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update a pool object by a secs value</span></div><div class="line">    api.update = <span class="function"><span class="keyword">function</span> (<span class="params">pool, secs, state</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        state = state || &#123;&#125;; <span class="comment">// your projects state object</span></div><div class="line">        secs = secs &gt;= pool.maxSecs ? pool.maxSecs : secs;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            <span class="keyword">if</span> (obj.active) &#123;</div><div class="line">                pool.update.call(pool, obj, pool, state, secs);</div><div class="line">                obj.lifespan -= secs;</div><div class="line">                obj.lifespan = obj.lifespan &lt; <span class="number">0</span> ? <span class="number">0</span> : obj.lifespan;</div><div class="line">                <span class="keyword">if</span> (obj.lifespan === <span class="number">0</span>) &#123;</div><div class="line">                    obj.active = <span class="literal">false</span>;</div><div class="line">                    pool.purge.call(pool, obj, pool, state);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set all to inActive or active state</span></div><div class="line">    api.setActiveStateForAll = <span class="function"><span class="keyword">function</span> (<span class="params">pool, bool</span>) </span>&#123;</div><div class="line">        bool = bool === <span class="literal">undefined</span> ? <span class="literal">false</span> : bool;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            obj.active = bool;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get an active object at the given position, or return false if nothing is there</span></div><div class="line">    api.getObjectAt = <span class="function"><span class="keyword">function</span> (<span class="params">pool, x, y</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            <span class="keyword">if</span> (obj.active) &#123;</div><div class="line">                <span class="keyword">if</span> (api.boundingBox(obj, &#123;</div><div class="line">                        <span class="attr">x</span>: x,</div><div class="line">                        <span class="attr">y</span>: y,</div><div class="line">                        <span class="attr">w</span>: <span class="number">1</span>,</div><div class="line">                        <span class="attr">h</span>: <span class="number">1</span></div><div class="line">                    &#125;)) &#123;</div><div class="line">                    <span class="keyword">return</span> obj;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// move the given object by its current heading and pps</span></div><div class="line">    api.moveByPPS = <span class="function"><span class="keyword">function</span> (<span class="params">obj, secs</span>) </span>&#123;</div><div class="line">        obj.x += <span class="built_in">Math</span>.cos(obj.heading) * obj.pps * secs;</div><div class="line">        obj.y += <span class="built_in">Math</span>.sin(obj.heading) * obj.pps * secs;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// move my frame percent object</span></div><div class="line">    <span class="comment">/*</span></div><div class="line">&#123;</div><div class="line">    sx: -100,</div><div class="line">    sy: 0,</div><div class="line">    dist: 100,</div><div class="line">    heading: 0,</div><div class="line">    frame: 0,</div><div class="line">    frameMax: 50,</div><div class="line">    rev: false</div><div class="line">    &#125;</div><div class="line">     */</div><div class="line">    api.moveByFramePerObj = <span class="function"><span class="keyword">function</span> (<span class="params">obj, fp</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> per = fp.frame / fp.frameMax;</div><div class="line">        per = per &gt; <span class="number">1</span> ? <span class="number">1</span> : per;</div><div class="line">        per = per &lt; <span class="number">0</span> ? <span class="number">0</span> : per;</div><div class="line">        per = fp.rev ? <span class="number">1</span> - per : per;</div><div class="line">        obj.x = fp.sx + <span class="built_in">Math</span>.cos(fp.heading) * fp.dist * per;</div><div class="line">        obj.y = fp.sy + <span class="built_in">Math</span>.sin(fp.heading) * fp.dist * per;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// check bounds for the given display object and canvas and return true if the object</span></div><div class="line">    <span class="comment">// is out of bounds and false if it is not.</span></div><div class="line">    api.checkBounds = <span class="function"><span class="keyword">function</span> (<span class="params">obj, canvas</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (obj.x &gt;= canvas.width || obj.x &lt; obj.w * <span class="number">-1</span> || obj.y &gt; canvas.height || obj.y &lt; obj.h * <span class="number">-1</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// bounding box</span></div><div class="line">    api.boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> utils.boundingBox(a.x, a.y, a.w, a.h, b.x, b.y, b.w, b.h);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// active count method</span></div><div class="line">    api.activeCount = <span class="function"><span class="keyword">function</span> (<span class="params">pool, activeState</span>) </span>&#123;</div><div class="line">        activeState = activeState === <span class="literal">undefined</span> ? <span class="literal">true</span> : activeState;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        count = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            <span class="keyword">if</span> (pool.objects[i].active === activeState) &#123;</div><div class="line">                count += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> count;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// return public method</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="4-A-game-module"><a href="#4-A-game-module" class="headerlink" title="4 - A game module"></a>4 - A game module</h2><p>I made a quick place holder game module for this example, for now this is just a very simple game where units spawn at the top of the canvas and move to the bottom of the canvas. I did not put much time into this because the main thing I wanted to work out for this post is of course the wave control module. However In a real game I might only built so much more on top of this.</p>
<p>Just like with the wave module I am using the object pool module, however here I am using it to create a collection of units that will spawn when a wave button reaches the top of the canvas.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gameMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> UNIT_PPS = <span class="number">32</span>,</div><div class="line">    UNIT_RELEASE_RATE_MIN = <span class="number">0.25</span>,</div><div class="line">    UNIT_RELEASE_RATE_MAX = <span class="number">3</span>;</div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// on unit spawn</span></div><div class="line">    <span class="keyword">var</span> unitSpawn = <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, sm, opt</span>) </span>&#123;</div><div class="line">        obj.heading = <span class="built_in">Math</span>.PI * <span class="number">0.5</span>;</div><div class="line">        <span class="keyword">var</span> delta = sm.canvas.width * <span class="number">0.5</span> * <span class="built_in">Math</span>.random();</div><div class="line">        obj.x = sm.canvas.width * <span class="number">0.25</span> + delta;</div><div class="line">        obj.y = <span class="number">0</span>;</div><div class="line">        obj.lifespan = <span class="literal">Infinity</span>;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// on unit update</span></div><div class="line">    <span class="keyword">var</span> unitUpdate = <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, sm, secs</span>) </span>&#123;</div><div class="line">        obj.pps = UNIT_PPS;</div><div class="line">        poolMod.moveByPPS(obj, secs);</div><div class="line">        <span class="keyword">if</span> (obj.y &gt;= sm.canvas.height - <span class="number">50</span>) &#123;</div><div class="line">            obj.lifespan = <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> onWaveStart = <span class="function"><span class="keyword">function</span> (<span class="params">waveObj, sm</span>) </span>&#123;</div><div class="line">        sm.game.unitQueue.unitCount += waveObj.data.unitCount;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    api.create = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">unitQueue</span>: &#123;</div><div class="line">                <span class="attr">unitCount</span>: <span class="number">0</span>,</div><div class="line">                <span class="attr">secs</span>: <span class="number">0</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">unitPool</span>: poolMod.create(&#123;</div><div class="line">                <span class="attr">count</span>: <span class="number">30</span>,</div><div class="line">                <span class="attr">spawn</span>: unitSpawn,</div><div class="line">                <span class="attr">update</span>: unitUpdate,</div><div class="line">                <span class="attr">data</span>: &#123;&#125;</div><div class="line">            &#125;),</div><div class="line">            <span class="attr">waveButtons</span>: waveMod.create(&#123;</div><div class="line">                <span class="attr">startY</span>: <span class="number">64</span>,</div><div class="line">                <span class="attr">waveCount</span>: <span class="number">99</span>,</div><div class="line">                <span class="attr">baseUnitCount</span>: <span class="number">10</span></div><div class="line">            &#125;),</div><div class="line">            <span class="attr">onWaveStart</span>: onWaveStart</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    api.update = <span class="function"><span class="keyword">function</span> (<span class="params">sm, secs</span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">if</span> (sm.game.unitQueue.unitCount &gt; <span class="number">0</span>) &#123;</div><div class="line">            sm.game.unitQueue.secs += secs;</div><div class="line">            <span class="keyword">var</span> releasePer = sm.game.unitQueue.unitCount / <span class="number">30</span>;</div><div class="line">            releasePer = releasePer &gt; <span class="number">1</span> ? <span class="number">1</span> : releasePer;</div><div class="line">            <span class="keyword">var</span> releaseDelta = (UNIT_RELEASE_RATE_MAX - UNIT_RELEASE_RATE_MIN) * (<span class="number">1</span> - releasePer);</div><div class="line">            sm.game.unit_release_rate = UNIT_RELEASE_RATE_MIN + releaseDelta;</div><div class="line">            <span class="keyword">if</span> (sm.game.unitQueue.secs &gt; sm.game.unit_release_rate) &#123;</div><div class="line">                <span class="keyword">var</span> unit = poolMod.spawn(sm.game.unitPool, sm, &#123;&#125;);</div><div class="line">                <span class="keyword">if</span> (unit) &#123;</div><div class="line">                    sm.game.unitQueue.unitCount -= <span class="number">1</span>;</div><div class="line">                &#125;</div><div class="line">                sm.game.unitQueue.secs = <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">        <span class="comment">// update wave buttons</span></div><div class="line">        waveMod.update(sm, secs);</div><div class="line"> </div><div class="line">        <span class="comment">//</span></div><div class="line">        poolMod.update(sm.game.unitPool, secs, sm);</div><div class="line"> </div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="5-A-draw-module"><a href="#5-A-draw-module" class="headerlink" title="5 - A draw module"></a>5 - A draw module</h2><p>I made the full example of this a canvas example, so I have a draw module that I put together real fast. Most of what i have here I copied over from one of my canvas examples, called pop the lock when it comes to the draw pool methods. For this example I am just going to want to have draw pool methods for the wave buttons, and the units that will spawn into the canvas when a wave button reaches the top of the canvas. In the event That I start to make some kind of real example with this I might have a few more things that i use the object pool library for that have to do with navigating menus and displaying all kinds of info and so forth.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> draw = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// plain background method</span></div><div class="line">    api.background = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas, style</span>) </span>&#123;</div><div class="line">        ctx.globalAlpha = <span class="number">1</span>;</div><div class="line">        ctx.fillStyle = style || <span class="string">'black'</span>;</div><div class="line">        ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// draw object pool</span></div><div class="line">    <span class="keyword">var</span> drawPool = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, pool, globalDraw</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">        ctx.strokeStyle = <span class="string">'black'</span>;</div><div class="line">        ctx.lineWidth = <span class="number">3</span>;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            <span class="keyword">if</span> (obj.active) &#123;</div><div class="line">                ctx.save();</div><div class="line">                <span class="keyword">if</span> (obj.data.draw) &#123;</div><div class="line">                    obj.data.draw(ctx, obj, i);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    globalDraw(ctx, obj, i);</div><div class="line">                &#125;</div><div class="line">                ctx.restore();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">var</span> globalDraw = &#123;</div><div class="line">        <span class="attr">basic</span>: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, obj, i</span>) </span>&#123;</div><div class="line">            ctx.fillStyle = obj.data.fill || <span class="string">'white'</span>;</div><div class="line">            ctx.globalAlpha = obj.data.alpha || <span class="number">1</span>;</div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.rect(obj.x, obj.y, obj.w, obj.h);</div><div class="line">            ctx.fill();</div><div class="line">            ctx.stroke();</div><div class="line">            ctx.globalAlpha = <span class="number">1</span>;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">waveButtons</span>: <span class="function"><span class="keyword">function</span> (<span class="params">ctx, obj, i</span>) </span>&#123;</div><div class="line">            globalDraw.basic(ctx, obj, i);</div><div class="line">            ctx.fillStyle = <span class="string">'black'</span>;</div><div class="line">            ctx.fillText(obj.data.waveNumber, obj.x + <span class="number">5</span>, obj.y + <span class="number">5</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// basic draw pool method with a solid background fallback if there is</span></div><div class="line">    <span class="comment">// draw method in an disp objects data object</span></div><div class="line">    api.pool = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, pool</span>) </span>&#123;</div><div class="line">        drawPool(ctx, pool, globalDraw.basic);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    api.waveButtons = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, pool</span>) </span>&#123;</div><div class="line">        drawPool(ctx, pool, globalDraw.waveButtons);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="comment">// debug info</span></div><div class="line">    api.debugInfo = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, sm, sx, sy</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> waveButtonsPool = sm.game.waveButtons.pool,</div><div class="line">        waveButtonData = waveButtonsPool.data;</div><div class="line">        ctx.fillStyle = <span class="string">'white'</span>;</div><div class="line">        ctx.font = <span class="string">'10px arial'</span>;</div><div class="line">        ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">        ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">        ctx.fillText(<span class="string">'currentWave: '</span> + waveButtonData.currentWave, sx, sy);</div><div class="line">        ctx.fillText(<span class="string">'waveCount: '</span> + waveButtonData.waveCount, sx, sy + <span class="number">20</span>);</div><div class="line">        ctx.fillText(<span class="string">'toSpawn: '</span> + waveButtonData.toSpawn, sx, sy + <span class="number">40</span>);</div><div class="line">        ctx.fillText(<span class="string">'ActiveCount: '</span> + waveButtonData.activeCount, sx, sy + <span class="number">60</span>);</div><div class="line">        ctx.fillText(<span class="string">'rushTo: '</span> + waveButtonData.rushTo, sx, sy + <span class="number">80</span>);</div><div class="line"> </div><div class="line">        ctx.fillText(<span class="string">'Unit Count: '</span> + sm.game.unitQueue.unitCount, sx, sy + <span class="number">120</span>);</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    api.resetButton = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, sm</span>) </span>&#123;</div><div class="line">        ctx.fillStyle =  <span class="string">'white'</span>;</div><div class="line">        ctx.globalAlpha = <span class="number">1</span>;</div><div class="line">        ctx.beginPath();</div><div class="line">        <span class="keyword">var</span> obj = sm.resetButton;</div><div class="line">        ctx.rect(obj.x, obj.y, obj.w, obj.h);</div><div class="line">        ctx.fill();</div><div class="line">        ctx.stroke();</div><div class="line">        ctx.globalAlpha = <span class="number">1</span>;</div><div class="line">    &#125;;</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> api;</div><div class="line"> </div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="6-Main-javaScript-file"><a href="#6-Main-javaScript-file" class="headerlink" title="6 - Main javaScript file"></a>6 - Main javaScript file</h2><p>I now just have a little more javaScript that will make use of everything that I put together here, and also a place to pack the main application loop. With many complex examples that I am starting to turn into a finished product of one kind or another often I might get into adding a state machine, and animated button system, and all kinds of additional little features. However for this example I have just a very simple main state object that contains an instance of a game module, which in turn holds an instance of my wave buttons module of course.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> canvasObj = utils.createCanvas(&#123;</div><div class="line">        <span class="attr">width</span>: <span class="number">640</span>,</div><div class="line">        <span class="attr">height</span>: <span class="number">480</span></div><div class="line">    &#125;);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> sm = &#123;</div><div class="line">    <span class="attr">canvas</span>: canvasObj.canvas,</div><div class="line">    <span class="attr">ctx</span>: canvasObj.ctx,</div><div class="line">    <span class="attr">game</span>: gameMod.create(),</div><div class="line">    <span class="attr">resetButton</span>: &#123;</div><div class="line">        <span class="attr">x</span>: canvasObj.canvas.width - <span class="number">48</span>,</div><div class="line">        <span class="attr">y</span>: <span class="number">8</span>,</div><div class="line">        <span class="attr">w</span>: <span class="number">40</span>,</div><div class="line">        <span class="attr">h</span>: <span class="number">40</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()</div><div class="line">&#125;;</div><div class="line"> </div><div class="line">sm.canvas.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> pos = utils.getCanvasRelative(e);</div><div class="line">    <span class="comment">// wave buttons</span></div><div class="line">    waveMod.onClick(sm, pos);</div><div class="line">    <span class="comment">// unit</span></div><div class="line">    <span class="keyword">var</span> unit = poolMod.getObjectAt(sm.game.unitPool, pos.x, pos.y);</div><div class="line">    <span class="keyword">if</span> (unit) &#123;</div><div class="line">        unit.lifespan = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// reset button</span></div><div class="line">    <span class="keyword">var</span> bx = sm.resetButton;</div><div class="line">    <span class="keyword">if</span> (utils.boundingBox(pos.x, pos.y, <span class="number">1</span>, <span class="number">1</span>, bx.x, bx.y, bx.w, bx.h)) &#123;</div><div class="line">        sm.game = gameMod.create();</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - sm.lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    gameMod.update(sm, secs);</div><div class="line">    <span class="comment">// draw</span></div><div class="line">    draw.background(sm.ctx, sm.canvas, <span class="string">'blue'</span>);</div><div class="line">    draw.waveButtons(sm.ctx, sm.game.waveButtons.pool);</div><div class="line">    draw.pool(sm.ctx, sm.game.unitPool);</div><div class="line">    draw.resetButton(sm.ctx, sm);</div><div class="line">    draw.debugInfo(sm.ctx, sm, <span class="number">128</span>, <span class="number">32</span>);</div><div class="line">    sm.lt = now;</div><div class="line">&#125;;</div><div class="line">loop()</div></pre></td></tr></table></figure>
<p>When this javaScript example is up and running things seem to work more or less as I expect. I get a collection of wave buttons on the side of the canvas that start moving up to the top of the canvas. Once a wave button gets to the top of the canvas the unit count of the wave is added to a total count stored in my main game module object. In the main game module object units are then spawn from the top of the canvas and they then move to the bottom of the canvas. If a unit reach the bottom of the canvas it will become inactive, and a unit will also become inactive if I click a unit.</p>
<h2 id="7-Conclusion"><a href="#7-Conclusion" class="headerlink" title="7 - Conclusion"></a>7 - Conclusion</h2><p>Well that is it for now when it comes to this javaScript example of an attack wave control system if I can call it that. I am not sure what else to call it, but so far it seems to work just the way that I wanted it to. I was able to put this together real fast in just a single day, and there is not really all that much more I can thing of that I might want to add to it. I am sure that some things will come up when I use this is an actual example of two. There are a few of my canvas examples that I would like to rework with something like this, and of course all kids of additional ideas that would work great with a system such as this that I might get around to starting at some point. </p>
<p>I just wanted to have a nice starting point for this kind of system, something that I can copy and past to a folder and start to hack over to make something else that will prove to be more interesting. As I start to make and update some of my canvas examples with this I will be sure to link to those examples in this post when I get around to editing.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2021/03/31/js-javascript-example-attack-wave-control-system/" data-id="ckrrzryh200pxs4v1qs7vhsd4" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2021/03/31/js-javascript-example-attack-wave-control-system/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/04/01/js-javascript-example-draw-points/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Draw Points javaScript example
        
      </div>
    </a>
  
  
    <a href="/2021/03/30/js-intl/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">internationalization constructors of the javaScript Intl object</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2021/03/31/js-javascript-example-attack-wave-control-system/index.html';
    this.page.identifier = '835';
    this.page.title = 'Attack Wave Control System javaScript example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.38px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.48px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.33px;">angular</a> <a href="/tags/animation/" style="font-size: 11.9px;">animation</a> <a href="/tags/automation/" style="font-size: 11.9px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.38px;">backbone</a> <a href="/tags/blog/" style="font-size: 14.76px;">blog</a> <a href="/tags/canvas/" style="font-size: 19.05px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.86px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.95px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.43px;">ejs</a> <a href="/tags/express/" style="font-size: 16.19px;">express</a> <a href="/tags/games/" style="font-size: 16.67px;">games</a> <a href="/tags/git/" style="font-size: 12.86px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 14.76px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.9px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.29px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.48px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.43px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.14px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.1px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.29px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.52px;">node.js</a> <a href="/tags/phaser/" style="font-size: 17.62px;">phaser</a> <a href="/tags/python/" style="font-size: 15.24px;">python</a> <a href="/tags/statistics/" style="font-size: 13.81px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 18.57px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 15.71px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/30/js-function-one-to-one/">One to one functions in javaScript</a>
          </li>
        
          <li>
            <a href="/2021/07/29/js-function-many-to-one/">Many to one functions in javaScript</a>
          </li>
        
          <li>
            <a href="/2021/07/28/js-function-diminishing-returns/">Diminishing returns functions in javaScript</a>
          </li>
        
          <li>
            <a href="/2021/07/27/js-function-domain/">The domain of a function in javaScript</a>
          </li>
        
          <li>
            <a href="/2021/07/26/js-function-monotonic/">Writing monotonic functions in JavaScript</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas-Examples</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2021/03/31/js-javascript-example-attack-wave-control-system/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>