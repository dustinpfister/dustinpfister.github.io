<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner_2023.png">
  
  <title>Pool reduction digital art javaScript example | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2021/12/31/js-javascript-example-digital-art-reduce-pool/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="For the last day of the year I wanted to do something fun, so I made yet another quick javaScript example type post, this time it is a kind of digital art project that has to do with an object pool th">
<meta property="og:type" content="article">
<meta property="og:title" content="Pool reduction digital art javaScript example">
<meta property="og:url" content="https://dustinpfister.github.io/2021/12/31/js-javascript-example-digital-art-reduce-pool/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="For the last day of the year I wanted to do something fun, so I made yet another quick javaScript example type post, this time it is a kind of digital art project that has to do with an object pool th">
<meta property="og:updated_time" content="2022-01-04T18:25:10.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Pool reduction digital art javaScript example">
<meta name="twitter:description" content="For the last day of the year I wanted to do something fun, so I made yet another quick javaScript example type post, this time it is a kind of digital art project that has to do with an object pool th">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-js-javascript-example-digital-art-reduce-pool" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/12/31/js-javascript-example-digital-art-reduce-pool/" class="article-date"> Published:
  <time datetime="2021-12-31T17:51:00.000Z" itemprop="datePublished">2021-12-31</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2021/12/31/js-javascript-example-digital-art-reduce-pool/" class="article-date"> Modified:
  <time datetime="2022-01-04T18:25:10.000Z" itemprop="dateModified">2022-01-04</time>
</a>

    <span class="article-date">V1.25</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/js/">js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Pool reduction digital art javaScript example
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>For the last day of the year I wanted to do something fun, so I made yet another quick <a href="/2021/04/02/js-javascript-example/">javaScript example</a> type post, this time it is a kind of <a href="https://en.wikipedia.org/wiki/Digital_art" target="_blank" rel="external">digital art</a> project that has to do with an object pool that will reduce in terms of the active count of objects. When it comes to my <a href="/2020/03/23/canvas-example/">canvas examples</a> collection of posts I have put together a <a href="/2020/07/20/canvas-example-object-pool/">canvas example that makes use of an object pool module</a> for that example that I will then be using in this javaScript example.</p>
<p>I am thinking that this might just be the first of at least a few javaScript examples where the goal is to just do something artful with canvas elements, and also try to go in some new directions with programing in general while I am in the process of doing so. Often people think in terms of what they can do that is new, or different each time a new year comes around, and there are a whole lot of things that I would like to do that are new with javaScript, as well as with this website for sure. With that said there is treating this javaScript example differently this time around by setting some intentions, and making sure to follow threw with them. For example there is not just getting a crude idea up and working and moving on, but refining and improving the over all structure of the idea in terms of the quality of the source code which is one thing I would like to do with this javaScript example.</p>
<p>The general idea of this example came to me when I was editing my <a href="/2021/07/13/js-array-reduce/">post on the javaScript array reduce method</a> which is of course one of the many methods in the <a href="/2018/12/10/js-array/">array prototype</a> of native javaScript. What I had in mind was just a collection of display objects that move around on the canvas, and when one or more of them overlap with one all the display objects that overlap will combine into one parent display object. So then eventual all the display objects will end up, well reducing into a single display object. After that there is having some additional code that involves having the display objects split apart again. That is it in terms of the genera idea, and as of this writing I have that general idea up and running, but I would like to continue working on this project at least a little way beyond just having the general idea working.</p>
<a id="more"></a>
<h2 id="This-object-pool-reduction-digital-art-javaScript-example-and-what-to-know-before-hand"><a href="#This-object-pool-reduction-digital-art-javaScript-example-and-what-to-know-before-hand" class="headerlink" title="This object pool reduction digital art javaScript example and what to know before hand"></a>This object pool reduction digital art javaScript example and what to know before hand</h2><p>This is a post on a full client side javaScript project example that is just a simple digital art project involving object pools and canvas elements. This is then not in any way a blog post that is intended for people that are new to javaScript in general so if you are still new to javaScript you might want to start out with a <a href="/2018/11/27/js-getting-started/">getting started post with native javaScript</a>.</p>
<h3 id="The-current-source-code-is-up-on-Github"><a href="#The-current-source-code-is-up-on-Github" class="headerlink" title="The current source code is up on Github"></a>The current source code is up on Github</h3><p>As of this writing I have just finished revision 4 of this javaScript example as I have outlined in the todo list of this javaScript example. This todo list of which I speak, along with the full source code of this javaScript example can be found in <a href="https://github.com/dustinpfister/test_vjs/tree/master/for_post/js-javascript-example-digital-art-reduce-pool" target="_blank" rel="external">my test vjs Github preparatory in the for post folder that corresponds with the name of this blog post</a>. This should be the case with my many other javaScript project example posts, as well as with all my various <a href="/categories/js">blog posts on javaScript in general</a>.</p>
<h2 id="1-The-utilities-library-for-this-javaScript-example"><a href="#1-The-utilities-library-for-this-javaScript-example" class="headerlink" title="1 - The utilities library for this javaScript example"></a>1 - The utilities library for this javaScript example</h2><p>First off I have the <a href="/2021/08/06/js-javascript-example-utils/">utilities library</a> for this javaScript example, just like with many of my other javaScript examples I often have a library such as this as part of the project. In other words this is a custom cut collection of methods that I will be using in one or more additional javaScript files in the rest of the source code, as such I have methods that have to do with various things that will pop up when working on all kinds of various javaScript files. </p>
<p>For this javaScript example project I have a <a href="/2017/09/02/js-whats-wrong-with-modulo/">mathematical modulo</a> method as well as my wrap number method that I am using in the game module as of revision 4 of this example. I also have a distance and bounding box methods that are the usual suspect type methods with many projects such as this, they are also used in the object pool module that I am using that I borrowed from another project so I need them for that reason also.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> utils = &#123;&#125;;</div><div class="line"><span class="comment">// create a canvas element</span></div><div class="line">utils.createCanvas = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    opt.container = opt.container || <span class="built_in">document</span>.getElementById(<span class="string">'canvas-app'</span>) || <span class="built_in">document</span>.body;</div><div class="line">    opt.canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</div><div class="line">    opt.ctx = opt.canvas.getContext(<span class="string">'2d'</span>);</div><div class="line">    <span class="comment">// assign the 'canvas_example' className</span></div><div class="line">    opt.canvas.className = <span class="string">'canvas_example'</span>;</div><div class="line">    <span class="comment">// set native width</span></div><div class="line">    opt.canvas.width = opt.width === <span class="literal">undefined</span> ? <span class="number">320</span> : opt.width;</div><div class="line">    opt.canvas.height = opt.height === <span class="literal">undefined</span> ? <span class="number">240</span> : opt.height;</div><div class="line">    <span class="comment">// translate by 0.5, 0.5</span></div><div class="line">    opt.ctx.translate(<span class="number">0.5</span>, <span class="number">0.5</span>);</div><div class="line">    <span class="comment">// disable default action for onselectstart</span></div><div class="line">    opt.canvas.onselectstart = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</div><div class="line">    <span class="comment">// append canvas to container</span></div><div class="line">    opt.container.appendChild(opt.canvas);</div><div class="line">    <span class="keyword">return</span> opt;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// mathematical modulo</span></div><div class="line">utils.mod = <span class="function"><span class="keyword">function</span>(<span class="params">x, m</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> (x % m + m) % m;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// wrap a number</span></div><div class="line">utils.wrapNumber = <span class="function"><span class="keyword">function</span>(<span class="params">n, min, max</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> r = max - min;</div><div class="line">    <span class="keyword">return</span> (min + ((((n - min) % r) + r) % r));</div><div class="line">&#125;;</div><div class="line"><span class="comment">// distance</span></div><div class="line">utils.distance = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, x2, y2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="built_in">Math</span>.pow(x1 - x2, <span class="number">2</span>) + <span class="built_in">Math</span>.pow(y1 - y2, <span class="number">2</span>));</div><div class="line">&#125;;</div><div class="line"><span class="comment">// bounding box</span></div><div class="line">utils.boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">x1, y1, w1, h1, x2, y2, w2, h2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> !(</div><div class="line">        y1 + h1 &lt; y2 ||</div><div class="line">        y1 &gt; y2 + h2 ||</div><div class="line">        x1 + w1 &lt; x2 ||</div><div class="line">        x1 &gt; x2 + w2);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="2-The-object-pool-module"><a href="#2-The-object-pool-module" class="headerlink" title="2 - The object pool module"></a>2 - The object pool module</h2><p>This is the object pool library that I will be using for this example, which I have started out with by copying what I was using from another javaScript example which would be my <a href="/2021/12/10/js-javascript-example-turn-based-rpg/">turn based rpg game</a> that I was working on. In that javaScript example I was using this module for a circle menu that is being used to navigate threw various menus. In turn I also borrowed that copy of the object pool from another example, and so forth, as this seems to be a module that I keep reusing from one project to another. It would seem that much of this source code is very similar to my canvas example posts on object pools so it would seem that project is when this project started. Sense then I have found a few bugs with it that I have worked out, and I am also seeing some additional features that I wold like to add in additional future revisions of this javaScript example.</p>
<p>Here in this example I am going to be using it to create and update the object pool that will be these various objects that will move around and when they overlay combine into a single object with greater mass. This will happen in the main game module of this over all project example that will make use of the module that I have hear.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> poolMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// Public API</span></div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// get next inactive object in the given pool</span></div><div class="line">    <span class="keyword">var</span> getInactive = <span class="function"><span class="keyword">function</span> (<span class="params">pool</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a new pool</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.count = opt.count || <span class="number">10</span>;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">        pool = &#123;</div><div class="line">            <span class="attr">objects</span>: [],</div><div class="line">            <span class="attr">secsCap</span>: opt.secsCap === <span class="literal">undefined</span> ? <span class="literal">Infinity</span> : opt.secsCap,</div><div class="line">            <span class="attr">disableLifespan</span>: opt.disableLifespan || <span class="literal">false</span>,</div><div class="line">            <span class="attr">data</span>: opt.data || &#123;&#125;,</div><div class="line">            <span class="attr">spawn</span>: opt.spawn || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state, opt</span>) </span>&#123;&#125;,</div><div class="line">            <span class="attr">purge</span>: opt.purge || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state</span>) </span>&#123;&#125;,</div><div class="line">            <span class="attr">update</span>: opt.update || <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, state, secs</span>) </span>&#123;&#125;</div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">while</span> (i &lt; opt.count) &#123;</div><div class="line">            pool.objects.push(&#123;</div><div class="line">                <span class="attr">active</span>: <span class="literal">false</span>,</div><div class="line">                <span class="attr">i</span>: i,</div><div class="line">                <span class="attr">x</span>: opt.x === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.x,</div><div class="line">                <span class="attr">y</span>: opt.y === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.y,</div><div class="line">                <span class="attr">w</span>: opt.w === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.w,</div><div class="line">                <span class="attr">h</span>: opt.h === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.h,</div><div class="line">                <span class="attr">heading</span>: opt.heading === <span class="literal">undefined</span> ? <span class="number">0</span> : opt.heading,</div><div class="line">                <span class="attr">pps</span>: opt.pps === <span class="literal">undefined</span> ? <span class="number">32</span> : opt.pps,</div><div class="line">                <span class="attr">lifespan</span>: opt.lifespan || <span class="number">3</span>,</div><div class="line">                <span class="attr">data</span>: &#123;&#125;</div><div class="line">            &#125;);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> pool;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// spawn the next inactive object in the given pool</span></div><div class="line">    api.spawn = <span class="function"><span class="keyword">function</span> (<span class="params">pool, state, opt</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> obj = getInactive(pool);</div><div class="line">        state = state || &#123;&#125;;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">if</span> (obj) &#123;</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                obj.active = <span class="literal">true</span>;</div><div class="line">                pool.spawn.call(pool, obj, pool, state, opt);</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// spawn all objects</span></div><div class="line">    api.spawnAll = <span class="function"><span class="keyword">function</span>(<span class="params">pool, state, opt</span>)</span>&#123;</div><div class="line">        pool.objects.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                obj.active = <span class="literal">true</span>;</div><div class="line">                pool.spawn.call(pool, obj, pool, state, opt);</div><div class="line">                <span class="keyword">return</span> obj;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> pool.objects;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// purge an object ( make it inactive and call the purge method for the pool )</span></div><div class="line">    api.purge = <span class="function"><span class="keyword">function</span>(<span class="params">pool, obj, state</span>)</span>&#123;</div><div class="line">        obj.active = <span class="literal">false</span>;</div><div class="line">        pool.purge.call(pool, obj, pool, state);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// spawn all objects</span></div><div class="line">    api.purgeAll = <span class="function"><span class="keyword">function</span>(<span class="params">pool, state, opt</span>)</span>&#123;</div><div class="line">        pool.objects.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span> (!obj.active) &#123;</div><div class="line">                obj.active =  <span class="literal">false</span>;</div><div class="line">                pool.purge.call(pool, obj, pool, state);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> pool.objects;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update a pool object by a secs value</span></div><div class="line">    api.update = <span class="function"><span class="keyword">function</span> (<span class="params">pool, secs, state</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        state = state || &#123;&#125;; <span class="comment">// your projects state object</span></div><div class="line">        secs = secs &gt; pool.secsCap ? pool.secsCap : secs;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            <span class="keyword">if</span> (obj.active) &#123;</div><div class="line">                pool.update.call(pool, obj, pool, state, secs);</div><div class="line">                <span class="comment">// if disableLifespan featre</span></div><div class="line">                <span class="keyword">if</span>(pool.disableLifespan)&#123;</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    <span class="comment">// else use lifespan feature</span></div><div class="line">                    obj.lifespan -= secs;</div><div class="line">                    obj.lifespan = obj.lifespan &lt; <span class="number">0</span> ? <span class="number">0</span> : obj.lifespan;</div><div class="line">                    <span class="keyword">if</span> (obj.lifespan === <span class="number">0</span>) &#123;</div><div class="line">                        obj.active = <span class="literal">false</span>;</div><div class="line">                        <span class="comment">//pool.purge.call(pool, obj, pool, state);</span></div><div class="line">                        api.purge.call(pool, pool, obj, state);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// set all to inActive or active state</span></div><div class="line">    api.setActiveStateForAll = <span class="function"><span class="keyword">function</span> (<span class="params">pool, bool</span>) </span>&#123;</div><div class="line">        bool = bool === <span class="literal">undefined</span> ? <span class="literal">false</span> : bool;</div><div class="line">        <span class="keyword">var</span> i = pool.objects.length,</div><div class="line">        obj;</div><div class="line">        <span class="keyword">while</span> (i--) &#123;</div><div class="line">            obj = pool.objects[i];</div><div class="line">            obj.active = bool;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// move the given object by its current heading and pps</span></div><div class="line">    api.moveByPPS = <span class="function"><span class="keyword">function</span> (<span class="params">obj, secs</span>) </span>&#123;</div><div class="line">        obj.x += <span class="built_in">Math</span>.cos(obj.heading) * obj.pps * secs;</div><div class="line">        obj.y += <span class="built_in">Math</span>.sin(obj.heading) * obj.pps * secs;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// check bounds for the given display object and canvas and return true if the object</span></div><div class="line">    <span class="comment">// is out of bounds and false if it is not.</span></div><div class="line">    api.checkBounds = <span class="function"><span class="keyword">function</span> (<span class="params">obj, canvas</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (obj.x &gt;= canvas.width || obj.x &lt; obj.w * <span class="number">-1</span> || obj.y &gt; canvas.height || obj.y &lt; obj.h * <span class="number">-1</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// bounding box</span></div><div class="line">    api.boundingBox = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> utils.boundingBox(a.x, a.y, a.w, a.h, b.x, b.y, b.w, b.h);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// wrap an object to an area like a canvas</span></div><div class="line">    api.wrap = <span class="function"><span class="keyword">function</span>(<span class="params">obj, area, space</span>)</span>&#123;</div><div class="line">        area = area || &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span>, <span class="attr">width</span>: <span class="number">640</span>, <span class="attr">height</span>: <span class="number">480</span> &#125;;</div><div class="line">        space = space === <span class="literal">undefined</span> ? <span class="number">32</span> : space;</div><div class="line">        <span class="keyword">if</span>(!utils.boundingBox(obj.x, obj.y, obj.w, obj.h, space * <span class="number">-1</span>, space * <span class="number">-1</span>, area.width + space, area.height + space))&#123;</div><div class="line">            obj.x = utils.mod(obj.x + space, area.width + space * <span class="number">2</span>) - space;</div><div class="line">            obj.y = utils.mod(obj.y + space, area.height + space * <span class="number">2</span>) - space;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get a collection of overlaying active objects from a pool, that overlap with the gievn object</span></div><div class="line">    api.getOverlaping = <span class="function"><span class="keyword">function</span>(<span class="params">obj, pool</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>,</div><div class="line">        obj2,</div><div class="line">        overlap = [];</div><div class="line">        len = pool.objects.length;</div><div class="line">        <span class="keyword">if</span>(obj.active)&#123;</div><div class="line">            <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">                obj2 = pool.objects[i];</div><div class="line">                <span class="keyword">if</span>(obj != obj2 &amp;&amp; obj2.active)&#123;</div><div class="line">                    <span class="keyword">if</span>(utils.boundingBox(obj.x, obj.y, obj.w, obj.h, obj2.x, obj2.y, obj2.w, obj2.h))&#123;</div><div class="line">                         overlap.push(obj2);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                i += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> overlap;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get a current active count for a pool</span></div><div class="line">    api.getActiveCount = <span class="function"><span class="keyword">function</span>(<span class="params">pool</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> pool.objects.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">acc, obj</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> obj.active ? acc += <span class="number">1</span>: acc;</div><div class="line">        &#125;, <span class="number">0</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get active objects from a pool</span></div><div class="line">    api.getActiveObjects = <span class="function"><span class="keyword">function</span>(<span class="params">pool</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> pool.objects.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">acc, obj</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span>(obj.active)&#123;</div><div class="line">                acc.push(obj);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> acc;</div><div class="line">        &#125;, []);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get distance to object method</span></div><div class="line">    api.getDistanceToObj = <span class="function"><span class="keyword">function</span>(<span class="params">obj1, obj2</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> x1 = obj2.x + obj2.w / <span class="number">2</span>,</div><div class="line">        y1 = obj2.y + obj2.h / <span class="number">2</span>,</div><div class="line">        x2 = obj1.x + obj1.w / <span class="number">2</span>,</div><div class="line">        y2 = obj1.y + obj1.h / <span class="number">2</span>;</div><div class="line">        <span class="keyword">return</span> utils.distance(x1, y1, x2, y2);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return public method</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="3-The-game-module"><a href="#3-The-game-module" class="headerlink" title="3 - The game module"></a>3 - The game module</h2><p>I have a single javaScript file that will be used to create and update the main game state object of this example. There are aways at least two public methods that I would want in a module such as this, one of which would be a create method that is used to create the starting state of the game, and the other is an update method. In other various examples I might want to have at least a few more methods beyond that, but because this is just a digital art type thing for the most part I will just be needing those two methods.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gameMod = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// the public api</span></div><div class="line">    <span class="keyword">var</span> api = &#123;&#125;;</div><div class="line">    <span class="comment">// some constants</span></div><div class="line">    <span class="keyword">var</span> UNIT_SIZE_RANGE = [<span class="number">32</span>, <span class="number">256</span>],</div><div class="line">    UNIT_TRANSFER_RATE = <span class="number">100</span>,</div><div class="line">    UNIT_TRANSFER_MODE_MAX_PPS = <span class="number">256</span>,</div><div class="line">    UNIT_TRANSFER_MODE_MAX_DIST = <span class="number">100</span>,</div><div class="line">    UNIT_SPLIT_DELAY = <span class="number">5</span>,</div><div class="line">    UNIT_CHASE_PPS_DELTA = <span class="number">64</span>,</div><div class="line">    UNIT_PPS_RANGE = [<span class="number">32</span>, <span class="number">64</span>],</div><div class="line">    UNIT_MASS_PER = <span class="number">50</span>,</div><div class="line">    UNIT_COUNT = <span class="number">50</span>,</div><div class="line">    UNIT_MAX_ALPHA = <span class="number">0.7</span>,</div><div class="line">    UNIT_COLORS = [<span class="string">'red'</span>, <span class="string">'lime'</span>, <span class="string">'blue'</span>, <span class="string">'white'</span>, <span class="string">'purple'</span>, <span class="string">'pink'</span>],</div><div class="line">    BUG0_TEMP = [<span class="number">1.90</span>, <span class="number">0.10</span>];          <span class="comment">// bug #0 temp fix values used in updateByMass helper</span></div><div class="line">    <span class="comment">// the unit pool options object</span></div><div class="line">    <span class="keyword">var</span> UNIT_OPT = &#123;</div><div class="line">        <span class="attr">count</span>: UNIT_COUNT,</div><div class="line">        <span class="attr">disableLifespan</span>: <span class="literal">true</span></div><div class="line">    &#125;; </div><div class="line">    <span class="comment">// get adjusted center helper</span></div><div class="line">    <span class="keyword">var</span> getAdjustedCenter = <span class="function"><span class="keyword">function</span>(<span class="params">game, obj</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> canvas = game.sm.canvas;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">x</span> : canvas.width / <span class="number">2</span> - obj.x - obj.w / <span class="number">2</span>,</div><div class="line">            <span class="attr">y</span> : canvas.height / <span class="number">2</span> - obj.y - obj.h / <span class="number">2</span> </div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// distToCenter helper</span></div><div class="line">    <span class="keyword">var</span> distToCenter = <span class="function"><span class="keyword">function</span>(<span class="params">game, obj</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> centerPos = getAdjustedCenter(game, obj);</div><div class="line">        <span class="keyword">return</span> utils.distance(<span class="number">0</span>, <span class="number">0</span>, centerPos.x, centerPos.y);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// random heading helper</span></div><div class="line">    <span class="keyword">var</span> randomHeading = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">       <span class="keyword">return</span> <span class="built_in">Math</span>.PI * <span class="number">2</span> * <span class="built_in">Math</span>.random();</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// parse heading helper</span></div><div class="line">    <span class="keyword">var</span> parseHeading = <span class="function"><span class="keyword">function</span>(<span class="params">heading, obj, game</span>)</span>&#123;</div><div class="line">        <span class="comment">// if heading is a string</span></div><div class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> heading === <span class="string">'string'</span>)&#123;</div><div class="line">            <span class="comment">// for 'center' value set heading to adjusted center</span></div><div class="line">            <span class="keyword">if</span>(heading === <span class="string">'center'</span>)&#123;</div><div class="line">                <span class="keyword">var</span> pos = getAdjustedCenter(game, obj);</div><div class="line">                <span class="keyword">return</span> <span class="built_in">Math</span>.atan2(pos.y, pos.x);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// for random heading</span></div><div class="line">            <span class="keyword">if</span>(heading === <span class="string">'random'</span>)&#123;</div><div class="line">                <span class="keyword">return</span> randomHeading()</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// return heading value</span></div><div class="line">        <span class="keyword">return</span> heading;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get total mass helper (actual or exspcted)</span></div><div class="line">    <span class="keyword">var</span> getTotalMass = <span class="function"><span class="keyword">function</span>(<span class="params">game</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> game.units.objects.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">acc, unit</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> acc + unit.data.mass;</div><div class="line">        &#125;, <span class="number">0</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> getExpectedTotalMass = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> UNIT_COUNT * UNIT_MASS_PER;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// get the size of the given unit object</span></div><div class="line">    <span class="keyword">var</span> getSize = <span class="function"><span class="keyword">function</span> (<span class="params">unit</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> totalMass = getExpectedTotalMass(); <span class="comment">//UNIT_COUNT * UNIT_MASS_PER,</span></div><div class="line">        sizePer = unit.data.mass / totalMass,</div><div class="line">        size = UNIT_SIZE_RANGE[<span class="number">0</span>] + (UNIT_SIZE_RANGE[<span class="number">1</span>] - UNIT_SIZE_RANGE[<span class="number">0</span>]) * sizePer;</div><div class="line">        <span class="keyword">return</span> size;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> randomPPS = <span class="function"><span class="keyword">function</span>(<span class="params">unit</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> ppsMin = UNIT_PPS_RANGE[<span class="number">0</span>],</div><div class="line">        ppsMax = UNIT_PPS_RANGE[<span class="number">1</span>];</div><div class="line">        <span class="keyword">return</span> ppsMin + <span class="built_in">Math</span>.floor( (ppsMax - ppsMin) * <span class="built_in">Math</span>.random());</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> chasePPS = <span class="function"><span class="keyword">function</span>(<span class="params">unit</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> ud = unit.data;</div><div class="line">        <span class="keyword">if</span>(ud.target)&#123;</div><div class="line">            <span class="keyword">if</span>(ud.target.active)&#123;</div><div class="line">                <span class="keyword">return</span> ud.speed.basePPS + UNIT_CHASE_PPS_DELTA;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ud.speed.basePPS;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// move unit helper</span></div><div class="line">    <span class="keyword">var</span> moveUnit = <span class="function"><span class="keyword">function</span>(<span class="params">game, obj, secs</span>)</span>&#123;</div><div class="line">        <span class="comment">// parse heading first</span></div><div class="line">        obj.heading = parseHeading(obj.heading, obj, game);</div><div class="line">        <span class="comment">// move by pps</span></div><div class="line">        poolMod.moveByPPS(obj, secs);</div><div class="line">        <span class="comment">// wrap</span></div><div class="line">        <span class="keyword">var</span> size = UNIT_SIZE_RANGE[<span class="number">1</span>];</div><div class="line">        <span class="keyword">var</span> size = obj.w;</div><div class="line">        obj.x = utils.wrapNumber(obj.x, size * <span class="number">-1</span>, game.sm.canvas.width + size);</div><div class="line">        obj.y = utils.wrapNumber(obj.y, size * <span class="number">-1</span>, game.sm.canvas.height + size);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update unit helper</span></div><div class="line">    <span class="keyword">var</span> updateByMass = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">        <span class="comment">// center position</span></div><div class="line">        <span class="keyword">var</span> cx = obj.x + obj.w / <span class="number">2</span>;</div><div class="line">        cy = obj.y + obj.h / <span class="number">2</span>;</div><div class="line">        <span class="comment">// new size</span></div><div class="line">        <span class="keyword">var</span> size = getSize(obj);</div><div class="line">        obj.w = size;</div><div class="line">        obj.h = size;</div><div class="line">        <span class="comment">// adjust postion</span></div><div class="line">        <span class="comment">// !!! TEMP fix for bug #0 </span></div><div class="line">        obj.x = cx - obj.w / (BUG0_TEMP[<span class="number">0</span>] + BUG0_TEMP[<span class="number">1</span>] * <span class="built_in">Math</span>.random());</div><div class="line">        obj.y = cy - obj.h / (BUG0_TEMP[<span class="number">0</span>] + BUG0_TEMP[<span class="number">1</span>] * <span class="built_in">Math</span>.random());</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// seek unit helper</span></div><div class="line">    <span class="keyword">var</span> seekUnit = <span class="function"><span class="keyword">function</span>(<span class="params">game, unit</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> ud = unit.data,</div><div class="line">        getNewTarget = <span class="literal">false</span>;</div><div class="line">        getNewTarget = ud.target === <span class="literal">null</span> ? <span class="literal">true</span> : getNewTarget;</div><div class="line">        <span class="keyword">if</span>(ud.target)&#123;</div><div class="line">           getNewTarget = !ud.target.active ? <span class="literal">true</span>: getNewTarget;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// new new target</span></div><div class="line">        <span class="keyword">if</span>(getNewTarget)&#123;</div><div class="line">            <span class="keyword">var</span> activeUnits = poolMod.getActiveObjects(game.units).filter(<span class="function"><span class="keyword">function</span>(<span class="params">target</span>)</span>&#123;</div><div class="line">                <span class="keyword">return</span> target.i != unit.i;</div><div class="line">            &#125;),</div><div class="line">            i = activeUnits.length;</div><div class="line">            <span class="keyword">if</span>(activeUnits.length &gt;= <span class="number">1</span>)&#123;</div><div class="line">                ud.target = activeUnits[<span class="number">0</span>];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// unit modes</span></div><div class="line">    <span class="keyword">var</span> UNIT_MODES = &#123;&#125;;</div><div class="line">    <span class="comment">// move mode</span></div><div class="line">    UNIT_MODES.move = &#123;</div><div class="line">        <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params">obj, pool, game, secs</span>)</span>&#123;</div><div class="line">            <span class="comment">// target</span></div><div class="line">            <span class="keyword">var</span> ud = obj.data;</div><div class="line">            <span class="keyword">if</span>(ud.target === <span class="literal">null</span>)&#123;</div><div class="line">                <span class="comment">// seek</span></div><div class="line">                seekUnit(game, obj);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// if we have a target</span></div><div class="line">            <span class="keyword">if</span>(ud.target)&#123;</div><div class="line">                <span class="keyword">if</span>(ud.target.active)&#123;</div><div class="line">                    <span class="comment">// set heading for target</span></div><div class="line">                    obj.heading = <span class="built_in">Math</span>.atan2(ud.target.y - obj.y, ud.target.x - obj.x);</div><div class="line">                &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    ud.target = <span class="literal">null</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// set pps by chasePPS at this point</span></div><div class="line">            obj.pps = chasePPS(obj);</div><div class="line">            <span class="comment">// still no target? The this should be the last active div</span></div><div class="line">            <span class="keyword">if</span>(ud.target === <span class="literal">null</span> &amp;&amp; game.activeCount === <span class="number">1</span>)&#123;</div><div class="line">                obj.heading = <span class="string">'center'</span>;</div><div class="line">                <span class="keyword">var</span> d = distToCenter(game, obj),</div><div class="line">                per = d / <span class="number">300</span>;</div><div class="line">                per = per &gt; <span class="number">1</span> ? <span class="number">1</span> : per;</div><div class="line">                obj.pps = UNIT_PPS_RANGE[<span class="number">1</span>] * per;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// move the unit</span></div><div class="line">            moveUnit(game, obj, secs);</div><div class="line">            <span class="comment">// if any other unit is under this one switch them over to transfer mode</span></div><div class="line">            <span class="comment">// and make it so that the transfer target is this current unit</span></div><div class="line">            <span class="keyword">var</span> under = poolMod.getOverlaping(obj, pool);</div><div class="line">            <span class="keyword">if</span> (under.length &gt; <span class="number">0</span>) &#123;</div><div class="line">                under.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">underUnit</span>) </span>&#123;</div><div class="line">                    <span class="keyword">var</span> uud = underUnit.data;</div><div class="line">                    <span class="comment">// set unit into transfer mode</span></div><div class="line">                    <span class="keyword">if</span>(uud.mode === <span class="string">'move'</span>)&#123;</div><div class="line">                        uud.mode = <span class="string">'transfer'</span>;</div><div class="line">                        uud.transferTarget = obj;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// if active count is 1, set this last move mode unit to splitup mode</span></div><div class="line">            <span class="keyword">if</span>(game.activeCount === <span class="number">1</span>)&#123;</div><div class="line">                game.splitDelay -= secs;</div><div class="line">                <span class="keyword">if</span>(game.splitDelay &lt;= <span class="number">0</span>)&#123;</div><div class="line">                    game.splitDelay = UNIT_SPLIT_DELAY;</div><div class="line">                    obj.data.mode = <span class="string">'splitup'</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// transfer mode</span></div><div class="line">    UNIT_MODES.transfer = &#123;</div><div class="line">        <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params">obj, pool, game, secs</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> target = obj.data.transferTarget;</div><div class="line">            <span class="comment">// reduce mass</span></div><div class="line">            <span class="keyword">if</span>(obj.data.mass &gt; <span class="number">0</span>)&#123;</div><div class="line">                <span class="keyword">var</span> mDelta = <span class="built_in">Math</span>.floor(UNIT_TRANSFER_RATE * secs);</div><div class="line">                mDelta = mDelta === <span class="number">0</span> ? <span class="number">1</span> : mDelta;</div><div class="line">                <span class="keyword">if</span>(obj.data.mass - mDelta &lt; <span class="number">0</span>)&#123;</div><div class="line">                    mDelta = <span class="built_in">Math</span>.round(obj.data.mass);</div><div class="line">                &#125;</div><div class="line">                obj.data.mass = obj.data.mass - mDelta;</div><div class="line">                target.data.mass = target.data.mass + mDelta;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                poolMod.purge(pool, obj, game);</div><div class="line">            &#125;</div><div class="line">            <span class="comment">// adjust alpha</span></div><div class="line">            <span class="keyword">var</span> per = obj.data.mass / UNIT_MASS_PER;</div><div class="line">            per = per &gt; <span class="number">1</span> ? <span class="number">1</span> : per;</div><div class="line">            obj.data.alpha = UNIT_MAX_ALPHA * per;</div><div class="line">            <span class="comment">// update size on unit and target unit</span></div><div class="line">            updateByMass(obj);</div><div class="line">            updateByMass(target);</div><div class="line">            <span class="comment">// how to update heading and speed</span></div><div class="line">            <span class="keyword">var</span> x1 = obj.x + obj.w / <span class="number">2</span>,</div><div class="line">            y1 = obj.y + obj.h / <span class="number">2</span>,</div><div class="line">            x2 = target.x + target.w / <span class="number">2</span>,</div><div class="line">            y2 = target.y + target.h / <span class="number">2</span>;</div><div class="line">            <span class="keyword">var</span> d = utils.distance(x1, y1, x2, y2);</div><div class="line">            <span class="keyword">var</span> a = <span class="built_in">Math</span>.atan2(y2 - y1, x2 - x1);</div><div class="line">            obj.heading = a;</div><div class="line">            <span class="comment">// pps</span></div><div class="line">            <span class="keyword">var</span> per = d / UNIT_TRANSFER_MODE_MAX_DIST,</div><div class="line">            per = per &gt; <span class="number">1</span> ? <span class="number">1</span> : per;</div><div class="line">            obj.pps = UNIT_TRANSFER_MODE_MAX_PPS * per;</div><div class="line">            <span class="comment">// moce the unit</span></div><div class="line">            moveUnit(game, obj, secs);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// splitup mode</span></div><div class="line">    UNIT_MODES.splitup = &#123;</div><div class="line">        <span class="attr">update</span>: <span class="function"><span class="keyword">function</span>(<span class="params">obj, pool, game, secs</span>)</span>&#123;</div><div class="line">            <span class="comment">// move the unit</span></div><div class="line">            moveUnit(game, obj, secs);</div><div class="line">            updateByMass(obj);</div><div class="line">            <span class="comment">// subtract from delay</span></div><div class="line">            pool.data.splitDelay -= secs;</div><div class="line">            <span class="comment">// if active count is below UNIT COUNT then spawn new units</span></div><div class="line">            <span class="keyword">if</span>(game.activeCount &lt; UNIT_COUNT)&#123;</div><div class="line">                poolMod.getActiveObjects(pool).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">aObj</span>)</span>&#123;</div><div class="line">                   aObj.data.mass = UNIT_MASS_PER;</div><div class="line">                   updateByMass(aObj);</div><div class="line">                &#125;);</div><div class="line">                <span class="keyword">var</span> len = UNIT_COUNT - game.activeCount,</div><div class="line">                i = <span class="number">0</span>;</div><div class="line">                <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">                    poolMod.spawn(game.units, game, &#123;</div><div class="line">                        <span class="attr">mode</span>: <span class="string">'splitup'</span>,</div><div class="line">                        <span class="attr">mass</span>: UNIT_MASS_PER,</div><div class="line">                        <span class="attr">heading</span>: <span class="string">'random'</span>,</div><div class="line">                        <span class="attr">x</span>: obj.x,</div><div class="line">                        <span class="attr">y</span>: obj.y</div><div class="line">                    &#125;);</div><div class="line">                    i += <span class="number">1</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// spawn a unit</span></div><div class="line">    UNIT_OPT.spawn = <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, game, spawnOpt</span>) </span>&#123;</div><div class="line">        spawnOpt = spawnOpt || &#123;&#125;;</div><div class="line">        <span class="keyword">var</span> canvas = game.sm.canvas;</div><div class="line">        <span class="comment">// start in move mode by default</span></div><div class="line">        obj.data.mode = spawnOpt.mode || <span class="string">'move'</span>;</div><div class="line">        obj.data.transferTarget = <span class="literal">null</span>;</div><div class="line">        obj.data.target = <span class="literal">null</span>;</div><div class="line">        obj.data.alpha = spawnOpt.alpha === <span class="literal">undefined</span> ? UNIT_MAX_ALPHA: spawnOpt.alpha;</div><div class="line">        <span class="comment">// random colors for now</span></div><div class="line">        obj.data.fillStyle = UNIT_COLORS[ <span class="built_in">Math</span>.floor(UNIT_COLORS.length * <span class="built_in">Math</span>.random()) ];</div><div class="line">        <span class="comment">// heading</span></div><div class="line">        obj.heading = spawnOpt.heading || <span class="string">'random'</span>;</div><div class="line">        <span class="comment">// speed</span></div><div class="line">        obj.data.speed = &#123;</div><div class="line">            <span class="attr">basePPS</span>: randomPPS(obj)</div><div class="line">        &#125;;</div><div class="line">        obj.pps = obj.data.speed.basePPS;</div><div class="line">        <span class="comment">// start mass</span></div><div class="line">        obj.data.mass = spawnOpt.mass === <span class="literal">undefined</span> ? UNIT_MASS_PER : spawnOpt.mass;	</div><div class="line">        <span class="comment">// random pos from center by default</span></div><div class="line">        <span class="keyword">var</span> r = canvas.height * <span class="number">0.4</span>,</div><div class="line">        a = <span class="built_in">Math</span>.PI * <span class="number">2</span> * <span class="built_in">Math</span>.random();</div><div class="line">        x = canvas.width / <span class="number">2</span> - obj.w / <span class="number">2</span> + <span class="built_in">Math</span>.cos(a) * r,</div><div class="line">        y = canvas.height / <span class="number">2</span> - obj.h / <span class="number">2</span> + <span class="built_in">Math</span>.sin(a) * r;</div><div class="line">        <span class="comment">// use spawnOpt to set start postion, esle go with random from center</span></div><div class="line">        obj.x = spawnOpt.x === <span class="literal">undefined</span> ? x : spawnOpt.x;</div><div class="line">        obj.y = spawnOpt.y === <span class="literal">undefined</span> ? y : spawnOpt.y;</div><div class="line">        <span class="comment">// update size and positon based on mass</span></div><div class="line">        updateByMass(obj);</div><div class="line">        <span class="comment">// move unit by 0 secs this will parse heading for first time</span></div><div class="line">        <span class="comment">// as well as prefroming any wrapping of obj.x, and obj.y that might need to happen</span></div><div class="line">        moveUnit(game, obj, <span class="number">0</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update a unit</span></div><div class="line">    UNIT_OPT.update = <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, game, secs</span>) </span>&#123;</div><div class="line">        <span class="comment">// move the unit my pps and wrap</span></div><div class="line">        UNIT_MODES[obj.data.mode].update(obj, pool, game, secs);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// purge a unit</span></div><div class="line">    UNIT_OPT.purge = <span class="function"><span class="keyword">function</span> (<span class="params">obj, pool, game</span>) </span>&#123;&#125;;</div><div class="line">    <span class="comment">// public create method</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span> (<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        <span class="keyword">var</span> game = &#123;</div><div class="line">            <span class="attr">sm</span>: opt.sm || &#123;&#125;,</div><div class="line">            <span class="attr">units</span>: poolMod.create(UNIT_OPT),</div><div class="line">            <span class="attr">activeCount</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">totalMass</span>: <span class="number">0</span>,</div><div class="line">            <span class="attr">splitDelay</span>: UNIT_SPLIT_DELAY</div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// spawn all for starters</span></div><div class="line">        poolMod.spawnAll(game.units, game, &#123;&#125;);</div><div class="line">        game.activeCount = poolMod.getActiveCount(game.units);</div><div class="line">        <span class="keyword">return</span> game;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// public update method</span></div><div class="line">    api.update = <span class="function"><span class="keyword">function</span> (<span class="params">game, secs</span>) </span>&#123;</div><div class="line">        game.activeCount = poolMod.getActiveCount(game.units);</div><div class="line">        game.totalMass = getTotalMass(game);</div><div class="line">        <span class="comment">// update units</span></div><div class="line">        poolMod.update(game.units, secs, sm.game);</div><div class="line">        <span class="comment">// set units back to move if in split up mode</span></div><div class="line">        <span class="keyword">if</span>(game.activeCount === UNIT_COUNT &amp;&amp; game.units.objects[<span class="number">0</span>].data.mode === <span class="string">'splitup'</span>)&#123;</div><div class="line">            game.splitDelay -= secs;</div><div class="line">            <span class="keyword">if</span>(game.splitDelay &lt;= <span class="number">0</span>)&#123;</div><div class="line">                game.units.objects.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">                    obj.data.mode = <span class="string">'move'</span>;</div><div class="line">                &#125;);</div><div class="line">                game.splitDelay = UNIT_SPLIT_DELAY;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// return the public API</span></div><div class="line">    <span class="keyword">return</span> api;</div><div class="line">&#125;</div><div class="line">    ());</div></pre></td></tr></table></figure>
<h2 id="4-The-draw-module"><a href="#4-The-draw-module" class="headerlink" title="4 - The draw module"></a>4 - The draw module</h2><p>To display what is going on I am going to need to have to work out a few methods that will have to do with drawing the state of things to a canvas element. With just about any module like this I often have a method that will be used to just draw a background for the example, typically this is just a solid color background. After that I have a method that will draw the current status of the object pool of course, as well as some additional methods that will draw some basic debug into to the canvas element.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> draw = &#123;&#125;;</div><div class="line"><span class="comment">// draw the background</span></div><div class="line">draw.background = <span class="function"><span class="keyword">function</span> (<span class="params">ctx, canvas</span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'gray'</span>;</div><div class="line">    ctx.fillRect(<span class="number">-1</span>, <span class="number">-1</span>, canvas.width + <span class="number">2</span>, canvas.height + <span class="number">2</span>);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw the pool</span></div><div class="line">draw.pool = <span class="function"><span class="keyword">function</span> (<span class="params">game, ctx, canvas</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> pool = game.units;</div><div class="line">    pool.objects.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">        ctx.fillStyle = obj.data.fillStyle || <span class="string">'white'</span>;</div><div class="line">        ctx.strokeStyle = obj.data.strokeStyle || <span class="string">'black'</span>;</div><div class="line">        ctx.globalAlpha = obj.data.alpha === <span class="literal">undefined</span> ? <span class="number">1</span>: obj.data.alpha;</div><div class="line">        <span class="keyword">if</span> (obj.active) &#123;</div><div class="line">            <span class="keyword">var</span> cx = obj.x + obj.w / <span class="number">2</span>,</div><div class="line">            cy = obj.y + obj.h / <span class="number">2</span>;</div><div class="line">            ctx.beginPath();</div><div class="line">            ctx.arc(cx, cy, (obj.w + obj.h) / <span class="number">2</span> / <span class="number">2</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI * <span class="number">2</span>);</div><div class="line">            ctx.fill();</div><div class="line">            ctx.stroke();</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    ctx.globalAlpha = <span class="number">1</span>;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw version number</span></div><div class="line">draw.info = <span class="function"><span class="keyword">function</span> (<span class="params">sm, ctx, canvas</span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'yellow'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">    ctx.font = <span class="string">'12px arial'</span>;</div><div class="line">    ctx.fillText(<span class="string">'active count: '</span> + sm.game.activeCount, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">    ctx.fillText(<span class="string">'total mass: '</span> + sm.game.totalMass, <span class="number">10</span>, <span class="number">20</span>);</div><div class="line">    ctx.fillText(<span class="string">'splitDelay: '</span> + sm.game.splitDelay, <span class="number">10</span>, <span class="number">30</span>);</div><div class="line">    <span class="keyword">var</span> dInfo = sm.game.debugInfo;</div><div class="line">    <span class="keyword">if</span>(dInfo)&#123;</div><div class="line">        ctx.fillText( dInfo.key + <span class="string">' : '</span> + dInfo.value, <span class="number">10</span>, <span class="number">40</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// draw version number</span></div><div class="line">draw.ver = <span class="function"><span class="keyword">function</span> (<span class="params">sm, ctx, canvas</span>) </span>&#123;</div><div class="line">    ctx.fillStyle = <span class="string">'yellow'</span>;</div><div class="line">    ctx.textBaseline = <span class="string">'top'</span>;</div><div class="line">    ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">    ctx.font = <span class="string">'12px arial'</span>;</div><div class="line">    ctx.fillText(<span class="string">'version: '</span> + sm.ver, <span class="number">5</span>, canvas.height - <span class="number">15</span>);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="5-The-main-javaScript-file"><a href="#5-The-main-javaScript-file" class="headerlink" title="5 - The main javaScript file"></a>5 - The main javaScript file</h2><p>I am then just going to need a little more javaScript code that will make use of everything else to create the final end result. In this main javaScript file then I am creating what might eventually become a state machine object. Even though of revision 0 there is not any state objects and I am just updating the game module in the main app loop. Speaking of the app loop that is also where I will be keeping that as you might expect.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// state object</span></div><div class="line"><span class="keyword">var</span> canvasObj = utils.createCanvas(&#123;</div><div class="line">        <span class="attr">width</span>: <span class="number">640</span>,</div><div class="line">        <span class="attr">height</span>: <span class="number">480</span></div><div class="line">    &#125;);</div><div class="line"><span class="comment">// sm</span></div><div class="line"><span class="keyword">var</span> sm = &#123;</div><div class="line">    <span class="attr">ver</span>: <span class="string">'r4'</span>,</div><div class="line">    <span class="attr">lt</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    <span class="attr">fps</span>: <span class="number">30</span>,</div><div class="line">    <span class="attr">game</span>: <span class="literal">null</span>,</div><div class="line">    <span class="attr">ctx</span>: canvasObj.ctx,</div><div class="line">    <span class="attr">canvas</span>: canvasObj.canvas</div><div class="line">&#125;;</div><div class="line">sm.game = gameMod.create(&#123;</div><div class="line">        <span class="attr">sm</span>: sm</div><div class="line">    &#125;);</div><div class="line"><span class="comment">// basic app loop</span></div><div class="line"><span class="keyword">var</span> loop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - sm.lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span> (secs &gt;= <span class="number">1</span> / sm.fps) &#123;</div><div class="line">        gameMod.update(sm.game, secs);</div><div class="line">        draw.background(sm.ctx, sm.canvas);</div><div class="line">        draw.pool(sm.game, sm.ctx);</div><div class="line">        draw.info(sm, sm.ctx, sm.canvas);</div><div class="line">        draw.ver(sm, sm.ctx, sm.canvas);</div><div class="line">        sm.lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="6-Conclusion"><a href="#6-Conclusion" class="headerlink" title="6 - Conclusion"></a>6 - Conclusion</h2><p>So far this javaScript example is looking good as of revision four at least when I last updated the content of this post to reflect that specific revision. When it comes to plans for additional edits of this post in the future I all ready have some things drafted out in the repository folder for this example. At this point there is not just adding features, as there is not much more that I think that I would want to add to it at this point, the example is more or less done with respect to what it is that I had in mind for this example. So then many of the future edits that I will be getting to when I get to them will have to do with improving the over all structure of the example, rather than adding more to the example in terms of features.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2021/12/31/js-javascript-example-digital-art-reduce-pool/" data-id="clkd5djui00vx8kv1ivp0w95i" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2021/12/31/js-javascript-example-digital-art-reduce-pool/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/01/03/blog-post-plan-for-2022/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          The 2022 blog plan
        
      </div>
    </a>
  
  
    <a href="/2021/12/24/js-javascript-example-item-probability/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Item probability javaScript example</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2021/12/31/js-javascript-example-digital-art-reduce-pool/index.html';
    this.page.identifier = '947';
    this.page.title = 'Pool reduction digital art javaScript example';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 13.64px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/07/19/threejs-object-loader/">The Object Loader in threejs</a>
          </li>
        
          <li>
            <a href="/2023/07/13/threejs-animation-mixer/">The Animation Mixer in threejs</a>
          </li>
        
          <li>
            <a href="/2023/07/11/linux-apt/">Linux apt Debian package manager</a>
          </li>
        
          <li>
            <a href="/2023/07/05/threejs-text-geometry/">Text Geometry in threejs</a>
          </li>
        
          <li>
            <a href="/2023/07/03/linux-unar/">Extracting rar files with Linux unar command</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2021/12/31/js-javascript-example-digital-art-reduce-pool/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>