<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>User Data for a Mesh or anything based on Object3d in three.js | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2021/02/16/threejs-userdata/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="In threejs there is a standard way of adding custom user data for a mesh object, and any other object based off of the object3d class, which is the user data object. This is just an empty object that">
<meta property="og:type" content="article">
<meta property="og:title" content="User Data for a Mesh or anything based on Object3d in three.js">
<meta property="og:url" content="https://dustinpfister.github.io/2021/02/16/threejs-userdata/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="In threejs there is a standard way of adding custom user data for a mesh object, and any other object based off of the object3d class, which is the user data object. This is just an empty object that">
<meta property="og:updated_time" content="2023-02-01T19:53:04.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="User Data for a Mesh or anything based on Object3d in three.js">
<meta name="twitter:description" content="In threejs there is a standard way of adding custom user data for a mesh object, and any other object based off of the object3d class, which is the user data object. This is just an empty object that">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-threejs-userdata" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/02/16/threejs-userdata/" class="article-date"> Published:
  <time datetime="2021-02-16T21:20:00.000Z" itemprop="datePublished">2021-02-16</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2021/02/16/threejs-userdata/" class="article-date"> Modified:
  <time datetime="2023-02-01T19:53:04.000Z" itemprop="dateModified">2023-02-01</time>
</a>

    <span class="article-date">V1.5</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/three-js/">three.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      User Data for a Mesh or anything based on Object3d in three.js
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>In <a href="https://threejs.org/" target="_blank" rel="external">threejs</a> there is a standard way of adding custom user data for a <a href="/2018/05/04/threejs-mesh/">mesh object</a>, and any other object based off of the object3d class, which is the <a href="https://threejs.org/docs/#api/en/core/Object3D.userData" target="_blank" rel="external">user data object</a>. This is just an empty object that is not used by any internal logic of threejs itself, thus it is a safe place to park custom, user defined key value pairs in an object3d based object.</p>
<p>If I need to park some custom application data that has to do with a specific object, it is a good idea to do so by adding it to this user data object, as that will help to make sure that it is done in a safe way that will not conflict with anything internal with threejs. Many other libraries and frameworks have some kind of data object that is part of an instance of some kind of class as a way to park data that I want to have assigned to a given object also, and it makes sense to use it as that is what it is there for. </p>
<p>Just adding custom stuff to the root of an object3d based object itself can cause problems in the event that there is a conflict. Also making use of the user object helps to make things more clear as to what has to do with the logic of the application and what is part of threejs itself so I would say that this also helps with code readability. If I am looking at some code and I see stuff assigned to the user data object I right away know that it has to do with data that works with a little additional code on top of threejs. </p>
<p>With that said, in this post I will be going over a few simple examples of the user data object of the object3d class. Nothing major for starers at least, but I think I would like to get into some more advanced examples if I can get to it in order to really help showcase what this object is for when it comes to being creative and having a little fun with threejs.</p>
<a id="more"></a>
<iframe class="youtube_video" src="https://www.youtube.com/embed/0Qcq8peiUVQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<h2 id="Object-user-data-and-what-to-know-first"><a href="#Object-user-data-and-what-to-know-first" class="headerlink" title="Object user data and what to know first"></a>Object user data and what to know first</h2><p>This is a post on some examples that make use of the object3d user data object as a way to park some properties that have to do with an over all application, or module that runs on top of threejs in a client side javaScript environment. So then this is not really a <a href="/2018/04/04/threejs-getting-started/">post for people that are new to three.js</a>, as I think that you should have at least some background with the library and <a href="/2018/11/27/js-getting-started/">javaScript in general</a> before getting into these kinds of examples. There might still be at least a few things that I should cover before getting into the user data examples, so in this section I will be getting those things out of the way.</p>
<h2 id="Read-up-more-on-the-object3d-class-in-general"><a href="#Read-up-more-on-the-object3d-class-in-general" class="headerlink" title="Read up more on the object3d class in general"></a>Read up more on the object3d class in general</h2><p>There is a whole lot more to write about when it comes to the <a href="/2018/04/23/threejs-object3d/">oject3d class in threejs</a>, as well as a whole lot of other classes an with that methods and properties that branch off of object3d. What is great about this class is that it is a pretty big deal in threejs as it is a base class for a wide range of objects. So by learning about one little feature such as the user data object, this can be applied to any object in threejs that is based off of the object3d class.</p>
<h3 id="The-source-code-examples-in-this-post-are-on-Github"><a href="#The-source-code-examples-in-this-post-are-on-Github" class="headerlink" title="The source code examples in this post are on Github"></a>The source code examples in this post are on Github</h3><p>The source code examples that I am writing about here in this post are up <a href="https://github.com/dustinpfister/test_threejs/tree/master/views/forpost/threejs-userdata" target="_blank" rel="external">on Github in my test threejs repository</a>. So if there is something that you want to bring up there is the comments section at the bottom of this post, as well as making a pull request at the test threejs repo on Github.</p>
<h3 id="Version-numbers-matter-with-three-js"><a href="#Version-numbers-matter-with-three-js" class="headerlink" title="Version numbers matter with three.js"></a>Version numbers matter with three.js</h3><p>I get emails and blog comments that had to do with code breaking changes that happened in older source code examples. As such that tells me that I just need to mention in every post on threejs what version I was using. When I first wrote this post I was using r125 of threejs. The last time I came around to do a little editing I was using r146 and at that point at the source code examples seem to work fine on my end for what it is worth. Code breaking changes are made to threejs often, so it is always a good idea to look into how old a post might be, or how long it has been sense the last time someone came around to editing the post.</p>
<h2 id="1-Basic-User-Data-Object3d-Example-with-rotating-cubes"><a href="#1-Basic-User-Data-Object3d-Example-with-rotating-cubes" class="headerlink" title="1 - Basic User Data Object3d Example with rotating cubes"></a>1 - Basic User Data Object3d Example with rotating cubes</h2><p>In this example I have a create cube helper function that will create and return a mesh that uses the <a href="/2021/04/26/threejs-box-geometry/">Box geometry</a>, and the <a href="/2021/06/23/threejs-normal-material/">normal material</a>. While I am at it I add a value to the user data object of the mesh object that will be used to set what I want the rotation rates to be for the mesh object. In this create cube function I am using the user data object as a way to set some rotation rates for each angle in an instance of <a href="/2021/04/28/threejs-euler/">THREE.Euler</a> in radians per second. These rotation rates as well as the starting position of the cube can be set by way of the create cube helper functions arguments also.</p>
<p>I then also have a function that will update a given cube by these rates in the user data object by way of a given time delta value in seconds. This function will then need to be called in the body of some kind of main animation loop function that uses a client side javaScritp feature such as <a href="/2018/03/13/js-request-animation-frame/">request animation frame</a> that I have at the bottom of the source code example.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body ).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPER FUNCTIONS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> createCube = <span class="function"><span class="keyword">function</span> (<span class="params">rotationRates, position</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> cube = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">        <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">        <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">    <span class="keyword">const</span> ud = cube.userData;</div><div class="line">    ud.rotationRates = rotationRates || [<span class="number">0</span>, <span class="number">3.14</span>, <span class="number">0</span>];</div><div class="line">    cube.position.copy(position || <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</div><div class="line">    <span class="keyword">return</span> cube;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> clampRadian = <span class="function"><span class="keyword">function</span> (<span class="params">radian</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> radian %= <span class="built_in">Math</span>.PI * <span class="number">2</span>;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">const</span> updateCube = <span class="function"><span class="keyword">function</span> (<span class="params">cube, secs</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> ud = cube.userData,</div><div class="line">    rr = ud.rotationRates;</div><div class="line">    cube.rotation.x += rr[<span class="number">0</span>] * secs;</div><div class="line">    cube.rotation.y += rr[<span class="number">1</span>] * secs;</div><div class="line">    cube.rotation.z += rr[<span class="number">2</span>] * secs;</div><div class="line">    cube.rotation.x = clampRadian(cube.rotation.x);</div><div class="line">    cube.rotation.y = clampRadian(cube.rotation.y);</div><div class="line">    cube.rotation.z = clampRadian(cube.rotation.z);</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// MESH, GRID HELPER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> cubes = <span class="keyword">new</span> THREE.Group();</div><div class="line">cubes.add(createCube([<span class="number">1.57</span>, <span class="number">0.00</span>, <span class="number">0.00</span>], <span class="keyword">new</span> THREE.Vector3(<span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>)));</div><div class="line">cubes.add(createCube([<span class="number">3.14</span>, <span class="number">1.57</span>, <span class="number">0.25</span>], <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)));</div><div class="line">cubes.add(createCube([<span class="number">0.00</span>, <span class="number">0.00</span>, <span class="number">6.28</span>], <span class="keyword">new</span> THREE.Vector3(<span class="number">-3</span>, <span class="number">0</span>, <span class="number">0</span>)));</div><div class="line">scene.add(cubes);</div><div class="line">scene.add( <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>) );</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">let</span> lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">const</span> fps = <span class="number">24</span>;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span> (secs &gt; <span class="number">1</span> / fps) &#123;</div><div class="line">        cubes.children.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">cube</span>) </span>&#123;</div><div class="line">            updateCube(cube, secs);</div><div class="line">        &#125;);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>So after I create the main scene object for the example I then create an instance of <a href="/2018/05/16/threejs-grouping-mesh-objects/">THREE.Group</a>, and then create and add a bunch of these cube objects that use the user data object with my create cube helper. In the body of my animation loop I then call the update cube method by looping over all the children of this group, and calling the update cube function for each of them. The end result is then having each of these cubes rotate in different ways and rates, because of there unique values in the userData object.</p>
<h2 id="2-The-userData-object-can-also-be-used-in-groups-because-that-is-also-based-on-object3d"><a href="#2-The-userData-object-can-also-be-used-in-groups-because-that-is-also-based-on-object3d" class="headerlink" title="2 - The userData object can also be used in groups because that is also based on object3d"></a>2 - The userData object can also be used in groups because that is also based on object3d</h2><p>So now that I have the basic idea out of the way it is time to get into having some fun with the user data object. In this section I will be writing about a module that I made where I am using the user data object as a way to set values for an instance of <a href="/2018/05/16/threejs-grouping-mesh-objects/">THREE.Group</a>, and then I also have user data objects for each mesh in the group. Just like that of Mesh objects the THREE.Group class is also based off the Object3d Class so there is also a user Data object for an instance of a Group. So when it comes to creating a group that is a collection of Mesh objects, or any number of additional objects I can use the user data object of a group to park any values that will apply to the group as a whole.</p>
<h3 id="A-Cube-Groups-module-r0"><a href="#A-Cube-Groups-module-r0" class="headerlink" title="A Cube Groups module r0"></a>A Cube Groups module r0</h3><p>For this example I made a cube groups module that has a main create method that will create and return an Instance of THREE.Group. Inside the body of this create method I am assigning all kinds of values for the group as a whole by way of the user data object of the group. With that said I can set values like the total number of frames for the group animation, as well as the frame rate at which that animation will update. I can also pass options that will set user data objects for each mesh also though, for example I can set the number of rotations for each axis for each cube, and each instance of this cube groups is a collection of eight cubes.</p>
<p>Another major public method of this module is the update method where the first argument is a cube group that I have created with this modules create method, and the second argument is a time delta in seconds. Inside this update method I am updating the position and rotation of each cube in the group based on values set to the user data object of the group, as well as each cube.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// groups.js - r0 - from threejs-userdata</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">api</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> ANGLES_A = [<span class="number">225</span>, <span class="number">315</span>, <span class="number">135</span>, <span class="number">45</span>];</div><div class="line">    <span class="keyword">var</span> toRadians = <span class="function"><span class="keyword">function</span> (<span class="params">array</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> array.map(<span class="function"><span class="keyword">function</span>(<span class="params">deg</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="built_in">Math</span>.PI / <span class="number">180</span> * deg;</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a single cube mesh</span></div><div class="line">    <span class="keyword">var</span> createCube = <span class="function"><span class="keyword">function</span> (<span class="params">rotationCounts, position</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> cube = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">                <span class="keyword">new</span> THREE.MeshNormalMaterial());</div><div class="line">        <span class="comment">// USER DATA OBJECT FOR A SINGLE CUBE</span></div><div class="line">        <span class="keyword">var</span> ud = cube.userData;</div><div class="line">        ud.rotationCounts = rotationCounts || [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>];</div><div class="line">        cube.position.copy(position || <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</div><div class="line">        <span class="keyword">return</span> cube;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update a single cube</span></div><div class="line">    <span class="keyword">var</span> updateCube = <span class="function"><span class="keyword">function</span> (<span class="params">cube, per</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> ud = cube.userData,</div><div class="line">        rc = ud.rotationCounts,</div><div class="line">        pi2 = <span class="built_in">Math</span>.PI * <span class="number">2</span>;</div><div class="line">        cube.rotation.x = pi2 * rc[<span class="number">0</span>] * per;</div><div class="line">        cube.rotation.y = pi2 * rc[<span class="number">1</span>] * per;</div><div class="line">        cube.rotation.z = pi2 * rc[<span class="number">2</span>] * per;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// public method to create a cube group</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.cubeRotations = opt.cubeRotations || [];</div><div class="line">        <span class="keyword">var</span> cubes = <span class="keyword">new</span> THREE.Group(),</div><div class="line">        <span class="comment">// USER DATA OBJECT FOR A GROUP OF CUBES</span></div><div class="line">        gud = cubes.userData;</div><div class="line">        gud.frame = <span class="number">0</span>;</div><div class="line">        gud.maxFrame = opt.maxFrame || <span class="number">180</span>;</div><div class="line">        gud.fps = opt.fps || <span class="number">30</span>;</div><div class="line">        gud.anglesA = toRadians(opt.anglesA || ANGLES_A);</div><div class="line">        gud.yDelta = opt.yDelta === <span class="literal">undefined</span> ? <span class="number">2</span> : opt.yDelta;</div><div class="line">        gud.xzDelta = opt.xzDelta === <span class="literal">undefined</span> ? <span class="number">2</span> : opt.xzDelta;</div><div class="line">        gud.secs = <span class="number">0</span>;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(i &lt; <span class="number">8</span>)&#123;</div><div class="line">            <span class="keyword">var</span> cubeRotations = opt.cubeRotations[i] || [<span class="number">0.00</span>, <span class="number">0.00</span>, <span class="number">0.00</span>];</div><div class="line">            <span class="keyword">var</span> cube = createCube(</div><div class="line">                cubeRotations, </div><div class="line">                <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</div><div class="line">            cubes.add(cube);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;;        </div><div class="line">        <span class="keyword">return</span> cubes;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> setCubesRotation = <span class="function"><span class="keyword">function</span>(<span class="params">cubes, per</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> x = <span class="built_in">Math</span>.PI * <span class="number">0</span> * per,</div><div class="line">        y = <span class="built_in">Math</span>.PI * <span class="number">0</span> * per,</div><div class="line">        z = <span class="built_in">Math</span>.PI * <span class="number">0</span> * per;</div><div class="line">        cubes.rotation.set(x, y, z);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update the group</span></div><div class="line">    api.update = <span class="function"><span class="keyword">function</span>(<span class="params">cubes, secs</span>) </span>&#123;</div><div class="line">        <span class="comment">// GROUP USER DATA OBJECT</span></div><div class="line">        <span class="keyword">var</span> gud = cubes.userData;</div><div class="line">        <span class="keyword">var</span> per = gud.frame / gud.maxFrame,</div><div class="line">        bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(per - <span class="number">0.5</span>) / <span class="number">0.5</span>;</div><div class="line">        <span class="comment">// update cubes</span></div><div class="line">        cubes.children.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">cube, i</span>) </span>&#123;</div><div class="line">            <span class="comment">// start values</span></div><div class="line">            <span class="keyword">var</span> sx = i % <span class="number">2</span> - <span class="number">0.5</span>,</div><div class="line">            sz = <span class="built_in">Math</span>.floor(i / <span class="number">2</span>) - <span class="built_in">Math</span>.floor(i / <span class="number">4</span>) * <span class="number">2</span> - <span class="number">0.5</span>,</div><div class="line">            sy = <span class="built_in">Math</span>.floor(i / (<span class="number">2</span> * <span class="number">2</span>)) - <span class="number">0.5</span>;</div><div class="line">            <span class="comment">// adjusted</span></div><div class="line">            <span class="keyword">var</span> aIndex = i % <span class="number">4</span>,</div><div class="line">            bIndex = <span class="built_in">Math</span>.floor(i / <span class="number">4</span>),</div><div class="line">            r1 = gud.anglesA[aIndex],</div><div class="line">            x = sx + <span class="built_in">Math</span>.cos(r1) * gud.xzDelta * bias,</div><div class="line">            y = sy + gud.yDelta * bias * (bIndex === <span class="number">0</span> ? <span class="number">-1</span> : <span class="number">1</span>),</div><div class="line">            z = sz + <span class="built_in">Math</span>.sin(r1) * gud.xzDelta * bias;</div><div class="line">            <span class="comment">// set position of cube</span></div><div class="line">            cube.position.set(x, y, z);</div><div class="line">            <span class="comment">// call cube update method</span></div><div class="line">            updateCube(cube, per);</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// whole group rotation</span></div><div class="line">        setCubesRotation(cubes, per);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        gud.secs += secs;</div><div class="line">        <span class="keyword">if</span>(gud.secs &gt;= <span class="number">1</span> / gud.fps)&#123;</div><div class="line">            gud.frame += <span class="number">1</span>; <span class="comment">// gud.fps * secs;</span></div><div class="line">            gud.frame %= gud.maxFrame;</div><div class="line">            gud.secs %= <span class="number">1</span> / gud.fps; </div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;(<span class="keyword">this</span>[<span class="string">'CubeGroupMod'</span>] = &#123;&#125;));</div></pre></td></tr></table></figure>
<h3 id="2-1-Using-the-Cube-Groups-module"><a href="#2-1-Using-the-Cube-Groups-module" class="headerlink" title="2.1 - Using the Cube Groups module"></a>2.1 - Using the Cube Groups module</h3><p>Now that I have this cube groups module worked out it is time to test things out with the usual three.js setup. In this main javaScript file where I create my three.js scene as well as the camera, renderer and so forth I decided to create a few instances of this cube group created with this cube group module of mine. For tow instances of the cube group I decided to leave things more or less to the hard coded defaults aside from the frame counts and frame speeds. I also made one additional cube group instance where I really started playing around with all of the various values for one of these cube  groups.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// GRID HELPER, CUBE GROUPS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> gridHelper = <span class="keyword">new</span> THREE.GridHelper(<span class="number">10</span>, <span class="number">10</span>);</div><div class="line">scene.add(gridHelper);</div><div class="line"><span class="keyword">const</span> cubes1 = CubeGroupMod.create(&#123;<span class="attr">maxFrame</span>: <span class="number">50</span>, <span class="attr">fps</span>: <span class="number">30</span>&#125;);</div><div class="line">cubes1.position.set(<span class="number">4</span>,<span class="number">0</span>,<span class="number">4</span>);</div><div class="line">scene.add(cubes1);</div><div class="line"><span class="keyword">const</span> cubes2 = CubeGroupMod.create(&#123;<span class="attr">maxFrame</span>: <span class="number">50</span>, <span class="attr">fps</span>: <span class="number">1</span>&#125;);</div><div class="line">cubes2.position.set(<span class="number">-4</span>,<span class="number">0</span>,<span class="number">4</span>);</div><div class="line">scene.add(cubes2);</div><div class="line"><span class="keyword">const</span> cubes3 = CubeGroupMod.create(&#123;</div><div class="line">   <span class="attr">anglesA</span>:[<span class="number">180</span>, <span class="number">270</span>, <span class="number">90</span>, <span class="number">0</span>],</div><div class="line">   <span class="attr">yDelta</span>: <span class="number">1.25</span>,</div><div class="line">   <span class="attr">xzDelta</span>: <span class="number">0.75</span>,</div><div class="line">   <span class="attr">maxFrame</span>: <span class="number">60</span>,</div><div class="line">   <span class="attr">fps</span>: <span class="number">30</span>,</div><div class="line">   <span class="attr">cubeRotations</span>: [</div><div class="line">      [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>],</div><div class="line">      [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</div><div class="line">      [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>],</div><div class="line">      [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</div><div class="line">      [<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>],</div><div class="line">      [<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>],</div><div class="line">      [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</div><div class="line">      [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]</div><div class="line">   ]</div><div class="line">&#125;);</div><div class="line">scene.add(cubes3);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CONTROLS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">let</span> controls = <span class="literal">null</span>;</div><div class="line"><span class="keyword">if</span>(THREE.OrbitControls)&#123;</div><div class="line">    controls = <span class="keyword">new</span> THREE.OrbitControls(camera, renderer.domElement);</div><div class="line">&#125;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">0</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">let</span> lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">const</span> fps = <span class="number">24</span>;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span> (secs &gt; <span class="number">1</span> / fps) &#123;</div><div class="line">        CubeGroupMod.update(cubes1, secs);</div><div class="line">        CubeGroupMod.update(cubes2, secs);</div><div class="line">        CubeGroupMod.update(cubes3, secs);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>So then this example has turned into a somewhat interesting example of using the user data object of the object3d class with both mesh objects as well as groups. However there are a lot of other kinds of objects based in three.js such as cameras and even the whole scene object that contains just about everything of interest when rendering a three.js project. The user data object can be used with one or more mesh objects as well as groups, I can also nest groups, and also part data for other objects such as cameras and helpers. So maybe I should get into at least a few more examples of this user data object as a way to really start to exercise what user data is all about when it comes to making my own projects and examples with three.js</p>
<h2 id="3-Another-example-of-Spheres-changing-position-and-setting-back-when-the-go-out-of-range"><a href="#3-Another-example-of-Spheres-changing-position-and-setting-back-when-the-go-out-of-range" class="headerlink" title="3 - Another example of Spheres changing position and setting back when the go out of range."></a>3 - Another example of Spheres changing position and setting back when the go out of range.</h2><p>This example will not be anything to involved so it will be just a single file that contains all the threejs code as well as my own user data code. </p>
<p>I have helpers here that are used to create and update a group of mesh objects. If you are still fairly new to three.js a group is a good way to go about having a collection of mesh objects. The group object itself is also a kind of object in threejs that inherits from object3d, so it to actually has a user data object also.</p>
<p>In the create sphere group helper I am just appending some values to each mesh object as I created them and add them to a group that the helper will return. I set a property for user data that will be used to set or update the material in the array of materials, and then a bunch of values that have to do with direction and speed.</p>
<p>In the update sphere group method I am using the distance to method of the <a href="/2018/04/15/threejs-vector3/">Vector3 Class</a> instance of the current mesh position object relative to another Vector3 instance of the origin. This distance is then used as a way to know if I should reset the position of the mesh or not.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SETTINGS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> GROUPSIZE = <span class="number">9</span>,</div><div class="line">MAXDIST = <span class="number">5</span>,</div><div class="line">PPS_MIN = <span class="number">1</span>,</div><div class="line">PPS_MAX = <span class="number">7</span>;</div><div class="line"><span class="comment">// materials</span></div><div class="line"><span class="keyword">const</span> materials = [</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">        <span class="attr">color</span>: <span class="number">0xff0000</span>,</div><div class="line">        <span class="attr">wireframe</span>: <span class="literal">true</span></div><div class="line">    &#125;),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">        <span class="attr">color</span>: <span class="number">0x00ff00</span>,</div><div class="line">        <span class="attr">wireframe</span>: <span class="literal">true</span></div><div class="line">    &#125;),</div><div class="line">    <span class="keyword">new</span> THREE.MeshBasicMaterial(&#123;</div><div class="line">        <span class="attr">color</span>: <span class="number">0x0000ff</span>,</div><div class="line">        <span class="attr">wireframe</span>: <span class="literal">true</span></div><div class="line">    &#125;)</div><div class="line">];</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// HELPERS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// random angles helper</span></div><div class="line"><span class="keyword">const</span> randomAngles = <span class="function"><span class="keyword">function</span> (<span class="params">mesh</span>) </span>&#123;</div><div class="line">    mesh.userData.pitch = <span class="built_in">Math</span>.PI * <span class="number">2</span> * <span class="built_in">Math</span>.random();</div><div class="line">    mesh.userData.heading = <span class="built_in">Math</span>.PI * <span class="number">2</span> * <span class="built_in">Math</span>.random();</div><div class="line">&#125;;</div><div class="line"><span class="comment">// random speed value</span></div><div class="line"><span class="keyword">const</span> randomSpeed = <span class="function"><span class="keyword">function</span> (<span class="params">mesh</span>) </span>&#123;</div><div class="line">    mesh.userData.pitchPPS = PPS_MIN + (PPS_MAX - PPS_MIN) * <span class="built_in">Math</span>.random();</div><div class="line">    mesh.userData.headingPPS = PPS_MIN + (PPS_MAX - PPS_MIN) * <span class="built_in">Math</span>.random();</div><div class="line">&#125;;</div><div class="line"><span class="comment">// create a sphere group</span></div><div class="line"><span class="keyword">const</span> createSphereGroup = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (i &lt; GROUPSIZE) &#123;</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.SphereGeometry(<span class="number">1</span>, <span class="number">20</span>),</div><div class="line">                materials[<span class="number">0</span>]);</div><div class="line">        <span class="comment">// SETTING VALUES IN USER DATA OBJECT</span></div><div class="line">        mesh.userData.materalIndex = i % materials.length;</div><div class="line">        randomSpeed(mesh);</div><div class="line">        randomAngles(mesh);</div><div class="line">        group.add(mesh);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> group;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// update a sphere group</span></div><div class="line"><span class="keyword">const</span> updateSphereGroup = <span class="function"><span class="keyword">function</span> (<span class="params">group, secs</span>) </span>&#123;</div><div class="line">    group.children.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">mesh</span>) </span>&#123;</div><div class="line">        <span class="comment">// USING VALUES IN USER DATA OBJECT</span></div><div class="line">        <span class="keyword">const</span> ud = mesh.userData;</div><div class="line">        mesh.material = materials[ud.materalIndex];</div><div class="line">        mesh.position.x += <span class="built_in">Math</span>.cos(ud.pitch) * ud.pitchPPS * secs;</div><div class="line">        mesh.position.y += <span class="built_in">Math</span>.sin(ud.pitch) * ud.pitchPPS * secs;</div><div class="line">        mesh.position.z += <span class="built_in">Math</span>.cos(ud.heading) * ud.headingPPS * secs;</div><div class="line">        <span class="keyword">const</span> d = mesh.position.distanceTo(<span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</div><div class="line">        <span class="keyword">if</span> (d &gt;= MAXDIST) &#123;</div><div class="line">            mesh.position.set(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">            randomAngles(mesh);</div><div class="line">            randomSpeed(mesh);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> group = createSphereGroup();</div><div class="line">updateSphereGroup(group, <span class="number">0</span>);</div><div class="line">scene.add(group);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">8</span>, <span class="number">8</span>, <span class="number">8</span>);</div><div class="line">camera.lookAt(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">let</span> lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">const</span> fps = <span class="number">24</span>;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span> (secs &gt; <span class="number">1</span> / fps) &#123;</div><div class="line">        updateSphereGroup(group, secs);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<p>So once I have my helpers that create and return a group of mesh objects I just need to call that and then add the group that it returns to a scene. I then just need to set up a camera, renderer, and update loop just like any other threejs example I would make.</p>
<p>The result of this then is a bunch of spheres start out positioned at the center origin point and then move out from there in random directions and speeds. When the distance of a mesh goes out of the rang that I set with the MAX DIST value then the user data values get set to new values, and the position of the mesh goes back to the origin.</p>
<h2 id="4-Video-projects-for-this-post-on-the-user-data-object"><a href="#4-Video-projects-for-this-post-on-the-user-data-object" class="headerlink" title="4 - Video projects for this post on the user data object"></a>4 - Video projects for this post on the user data object</h2><p>For this section I am working out a few source code examples that are a start for one or more video projects for this blog post. The latest video project should be up at the top of this content.</p>
<h3 id="4-1-Video1-for-this-post"><a href="#4-1-Video1-for-this-post" class="headerlink" title="4.1 - Video1 for this post"></a>4.1 - Video1 for this post</h3><p>For the first video project for this post I made an updated r1 state of the groups module that I made for the post. When I made the final state of the video I added in a few more projects that have to do with the <a href="/2022/05/20/threejs-examples-object-grid-wrap/">object grid wrap module</a>, and also some additional code that has to do with data textures. However this is the basic start of what I worked out for the video here.</p>
<iframe class="youtube_video" src="https://www.youtube.com/embed/YIAuxl0sc0M" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// groups.js - r1 - from threejs-userdata</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">api</span>) </span>&#123;</div><div class="line">    <span class="comment">// CONST</span></div><div class="line">    <span class="keyword">var</span> ANGLES_A = [<span class="number">225</span>, <span class="number">315</span>, <span class="number">135</span>, <span class="number">45</span>];</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// HELPER FUNCTIONS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// to radians helper</span></div><div class="line">    <span class="keyword">var</span> toRadians = <span class="function"><span class="keyword">function</span> (<span class="params">array</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> array.map(<span class="function"><span class="keyword">function</span>(<span class="params">deg</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="built_in">Math</span>.PI / <span class="number">180</span> * deg;</div><div class="line">        &#125;);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// create a single cube mesh</span></div><div class="line">    <span class="keyword">var</span> createCube = <span class="function"><span class="keyword">function</span> (<span class="params">rotationCounts, position</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> cube = <span class="keyword">new</span> THREE.Mesh(</div><div class="line">                <span class="keyword">new</span> THREE.BoxGeometry(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>),</div><div class="line">                <span class="keyword">new</span> THREE.MeshPhongMaterial());</div><div class="line">        <span class="comment">// USER DATA OBJECT FOR A SINGLE CUBE</span></div><div class="line">        <span class="keyword">var</span> ud = cube.userData;</div><div class="line">        ud.rotationCounts = rotationCounts || [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>];</div><div class="line">        cube.position.copy(position || <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</div><div class="line">        <span class="keyword">return</span> cube;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update a single cube</span></div><div class="line">    <span class="keyword">var</span> updateCube = <span class="function"><span class="keyword">function</span> (<span class="params">cube, per</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> ud = cube.userData,</div><div class="line">        rc = ud.rotationCounts,</div><div class="line">        pi2 = <span class="built_in">Math</span>.PI * <span class="number">2</span>;</div><div class="line">        cube.rotation.x = pi2 * rc[<span class="number">0</span>] * per;</div><div class="line">        cube.rotation.y = pi2 * rc[<span class="number">1</span>] * per;</div><div class="line">        cube.rotation.z = pi2 * rc[<span class="number">2</span>] * per;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> setCubesRotation = <span class="function"><span class="keyword">function</span>(<span class="params">cubes, per</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> x = <span class="built_in">Math</span>.PI * <span class="number">0</span> * per,</div><div class="line">        y = <span class="built_in">Math</span>.PI * <span class="number">0</span> * per,</div><div class="line">        z = <span class="built_in">Math</span>.PI * <span class="number">0</span> * per;</div><div class="line">        cubes.rotation.set(x, y, z);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> setCubes = api.setCubes = <span class="function"><span class="keyword">function</span>(<span class="params">cubes, frame, maxFrame</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> gud = cubes.userData;</div><div class="line">        gud.frame = frame === <span class="literal">undefined</span> ? gud.frame: frame;</div><div class="line">        gud.maxFrame = maxFrame === <span class="literal">undefined</span> ? gud.maxFrame: maxFrame;</div><div class="line">        <span class="keyword">var</span> per = gud.frame / gud.maxFrame,</div><div class="line">        bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(per - <span class="number">0.5</span>) / <span class="number">0.5</span>;</div><div class="line">        <span class="comment">// update cubes</span></div><div class="line">        cubes.children.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">cube, i</span>) </span>&#123;</div><div class="line">            <span class="comment">// start values</span></div><div class="line">            <span class="keyword">var</span> sx = i % <span class="number">2</span> - <span class="number">0.5</span>,</div><div class="line">            sz = <span class="built_in">Math</span>.floor(i / <span class="number">2</span>) - <span class="built_in">Math</span>.floor(i / <span class="number">4</span>) * <span class="number">2</span> - <span class="number">0.5</span>,</div><div class="line">            sy = <span class="built_in">Math</span>.floor(i / (<span class="number">2</span> * <span class="number">2</span>)) - <span class="number">0.5</span>;</div><div class="line">            <span class="comment">// adjusted</span></div><div class="line">            <span class="keyword">var</span> aIndex = i % <span class="number">4</span>,</div><div class="line">            bIndex = <span class="built_in">Math</span>.floor(i / <span class="number">4</span>),</div><div class="line">            r1 = gud.anglesA[aIndex],</div><div class="line">            x = sx + <span class="built_in">Math</span>.cos(r1) * gud.xzDelta * bias,</div><div class="line">            y = sy + gud.yDelta * bias * (bIndex === <span class="number">0</span> ? <span class="number">-1</span> : <span class="number">1</span>),</div><div class="line">            z = sz + <span class="built_in">Math</span>.sin(r1) * gud.xzDelta * bias;</div><div class="line">            <span class="comment">// set position of cube</span></div><div class="line">            cube.position.set(x, y, z);</div><div class="line">            <span class="comment">// call cube update method</span></div><div class="line">            updateCube(cube, per);</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">// whole group rotation</span></div><div class="line">        setCubesRotation(cubes, per);</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// PUBLIC FUNCTIONS</span></div><div class="line">    <span class="comment">//-------- ----------</span></div><div class="line">    <span class="comment">// public method to create a cube group</span></div><div class="line">    api.create = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>) </span>&#123;</div><div class="line">        opt = opt || &#123;&#125;;</div><div class="line">        opt.cubeRotations = opt.cubeRotations || [];</div><div class="line">        <span class="keyword">var</span> cubes = <span class="keyword">new</span> THREE.Group(),</div><div class="line">        <span class="comment">// USER DATA OBJECT FOR A GROUP OF CUBES</span></div><div class="line">        gud = cubes.userData;</div><div class="line">        gud.frame = <span class="number">0</span>;</div><div class="line">        gud.maxFrame = opt.maxFrame || <span class="number">180</span>;</div><div class="line">        gud.fps = opt.fps || <span class="number">30</span>;</div><div class="line">        gud.anglesA = toRadians(opt.anglesA || ANGLES_A);</div><div class="line">        gud.yDelta = opt.yDelta === <span class="literal">undefined</span> ? <span class="number">2</span> : opt.yDelta;</div><div class="line">        gud.xzDelta = opt.xzDelta === <span class="literal">undefined</span> ? <span class="number">2</span> : opt.xzDelta;</div><div class="line">        gud.secs = <span class="number">0</span>;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(i &lt; <span class="number">8</span>)&#123;</div><div class="line">            <span class="keyword">var</span> cubeRotations = opt.cubeRotations[i] || [<span class="number">0.00</span>, <span class="number">0.00</span>, <span class="number">0.00</span>];</div><div class="line">            <span class="keyword">var</span> cube = createCube(</div><div class="line">                cubeRotations, </div><div class="line">                <span class="keyword">new</span> THREE.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</div><div class="line">            cubes.add(cube);</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;;        </div><div class="line">        <span class="keyword">return</span> cubes;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// update the group</span></div><div class="line">    api.update = <span class="function"><span class="keyword">function</span>(<span class="params">cubes, secs</span>) </span>&#123;</div><div class="line">        <span class="comment">// GROUP USER DATA OBJECT</span></div><div class="line">        <span class="keyword">var</span> gud = cubes.userData;</div><div class="line">        <span class="keyword">var</span> per = gud.frame / gud.maxFrame,</div><div class="line">        bias = <span class="number">1</span> - <span class="built_in">Math</span>.abs(per - <span class="number">0.5</span>) / <span class="number">0.5</span>;</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        gud.secs += secs;</div><div class="line">        <span class="keyword">if</span>(gud.secs &gt;= <span class="number">1</span> / gud.fps)&#123;</div><div class="line">            gud.frame += <span class="number">1</span>; <span class="comment">// gud.fps * secs;</span></div><div class="line">            gud.frame %= gud.maxFrame;</div><div class="line">            gud.secs %= <span class="number">1</span> / gud.fps; </div><div class="line">        &#125;</div><div class="line">        setCubes(cubes);</div><div class="line">    &#125;;</div><div class="line">&#125;(<span class="keyword">this</span>[<span class="string">'CubeGroupMod'</span>] = &#123;&#125;));</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>);</div><div class="line">scene.add(dl);</div><div class="line"><span class="keyword">const</span> pl = <span class="keyword">new</span> THREE.PointLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">scene.add(pl);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// CUBE GROUPS</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> cubes3 = CubeGroupMod.create(&#123;</div><div class="line">   <span class="attr">anglesA</span>:[<span class="number">180</span>, <span class="number">270</span>, <span class="number">90</span>, <span class="number">0</span>],</div><div class="line">   <span class="attr">yDelta</span>: <span class="number">0.25</span>,</div><div class="line">   <span class="attr">xzDelta</span>: <span class="number">0.75</span>,</div><div class="line">   <span class="attr">maxFrame</span>: <span class="number">60</span>,</div><div class="line">   <span class="attr">fps</span>: <span class="number">30</span>,</div><div class="line">   <span class="attr">cubeRotations</span>: [</div><div class="line">      [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>],</div><div class="line">      [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</div><div class="line">      [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>],</div><div class="line">      [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</div><div class="line">      [<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>],</div><div class="line">      [<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>],</div><div class="line">      [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</div><div class="line">      [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]</div><div class="line">   ]</div><div class="line">&#125;);</div><div class="line">cubes3.position.y = <span class="number">2</span>;</div><div class="line">scene.add(cubes3);</div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// LOOP</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line">camera.position.set(<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>);</div><div class="line"><span class="keyword">const</span> update = <span class="function">(<span class="params">frame, frameMax</span>) =&gt;</span> &#123;</div><div class="line">    CubeGroupMod.setCubes(cubes3, frame, frameMax);</div><div class="line">    camera.lookAt(cubes3.position);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">let</span> lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="keyword">let</span> frame = <span class="number">0</span>;</div><div class="line"><span class="keyword">const</span> frameMax = <span class="number">60</span>;</div><div class="line"><span class="keyword">const</span> fps = <span class="number">20</span>;</div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span> (secs &gt; <span class="number">1</span> / fps) &#123;</div><div class="line">        update(frame, frameMax);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        lt = now;</div><div class="line">        frame += <span class="number">1</span>;</div><div class="line">        frame %= frameMax;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h3 id="4-2-A-cube-droup-demo-for-Video2"><a href="#4-2-A-cube-droup-demo-for-Video2" class="headerlink" title="4.2 - A cube droup demo for Video2"></a>4.2 - A cube droup demo for Video2</h3><p>For a second video for this post that I made when doing a little updated of the code exmaples I wanted to make a quick little cube droup demo. This is a project where I have cubes just drop down until a y value is reached, at which point the y value is capped. However the cubes will then move along the x and x values at a givn rate until the go out of range, at which point they will continue to drop until they reach a min y value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="comment">// SCENE, CAMERA, RENDERER</span></div><div class="line"><span class="comment">//-------- ----------</span></div><div class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> THREE.Scene();</div><div class="line"><span class="keyword">const</span> camera = <span class="keyword">new</span> THREE.PerspectiveCamera(<span class="number">50</span>, <span class="number">4</span> / <span class="number">3</span>, <span class="number">0.5</span>, <span class="number">100</span>);</div><div class="line"><span class="keyword">const</span> renderer = <span class="keyword">new</span> THREE.WebGL1Renderer();</div><div class="line">renderer.setSize(<span class="number">640</span>, <span class="number">480</span>, <span class="literal">false</span>);</div><div class="line">(<span class="built_in">document</span>.getElementById(<span class="string">'demo'</span>) || <span class="built_in">document</span>.body).appendChild(renderer.domElement);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// SETTINGS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> CUBE_COUNT = <span class="number">40</span>;</div><div class="line"><span class="keyword">const</span> CUBE_SIZE = <span class="number">0.5</span>;</div><div class="line"><span class="keyword">const</span> CUBE_HSIZE = CUBE_SIZE / <span class="number">2</span>;</div><div class="line"><span class="keyword">const</span> CUBE_DROP_SPEED = <span class="number">20</span>;</div><div class="line"><span class="keyword">const</span> CUBE_MOVE_SPEED = [<span class="number">30</span>, <span class="number">100</span>];</div><div class="line"><span class="keyword">const</span> CUBE_START_HEIGHT = [<span class="number">5</span>, <span class="number">15</span>];</div><div class="line"><span class="keyword">const</span> CUBE_MIN_HEIGHT = <span class="number">-5</span>;</div><div class="line"><span class="keyword">const</span> PLANE_SIZE = <span class="number">5</span>;</div><div class="line"><span class="keyword">const</span> PLANE_HSIZE = PLANE_SIZE / <span class="number">2</span>;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// HELPER FUNCTIONS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> createCubes = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">const</span> count = CUBE_COUNT;</div><div class="line">    <span class="keyword">const</span> group = <span class="keyword">new</span> THREE.Group();</div><div class="line">    <span class="keyword">while</span>(i &lt; count)&#123;</div><div class="line">        <span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.BoxGeometry(CUBE_SIZE, CUBE_SIZE, CUBE_SIZE);</div><div class="line">        <span class="keyword">const</span> material = <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">            <span class="attr">transparent</span>: <span class="literal">true</span>, <span class="attr">opacity</span>: <span class="number">0.7</span>,</div><div class="line">            <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="built_in">Math</span>.random(),<span class="built_in">Math</span>.random(),<span class="built_in">Math</span>.random())</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">const</span> mesh = <span class="keyword">new</span> THREE.Mesh( geometry, material );</div><div class="line">        mesh.position.y = CUBE_MIN_HEIGHT - <span class="number">10</span>;</div><div class="line">        <span class="comment">// USER DATA FOR MESH OBJECTS</span></div><div class="line">        <span class="keyword">const</span> mud = mesh.userData;</div><div class="line">        mud.radian = <span class="built_in">Math</span>.PI * <span class="number">2</span> * <span class="built_in">Math</span>.random();</div><div class="line">        <span class="keyword">const</span> sr = CUBE_MOVE_SPEED;</div><div class="line">        mud.ups = sr[<span class="number">0</span>] + (sr[<span class="number">1</span>] - sr[<span class="number">0</span>]) * <span class="built_in">Math</span>.random();</div><div class="line">        group.add(mesh);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> group;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// update the given group by a secs value</span></div><div class="line"><span class="keyword">const</span> updateCubes = <span class="function">(<span class="params">group, secs</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</div><div class="line">    <span class="keyword">const</span> count = CUBE_COUNT;</div><div class="line">    <span class="keyword">while</span>(i &lt; count)&#123;</div><div class="line">        <span class="keyword">const</span> mesh = group.children[i];</div><div class="line">        <span class="keyword">const</span> mud = mesh.userData;</div><div class="line">        <span class="keyword">const</span> v_pos = mesh.position;</div><div class="line">        <span class="comment">// reset to spawn location if y is too low</span></div><div class="line">        <span class="keyword">if</span>(v_pos.y &lt; CUBE_MIN_HEIGHT)&#123;</div><div class="line">            <span class="keyword">const</span> sh = CUBE_START_HEIGHT;</div><div class="line">            v_pos.set(<span class="number">0</span>, sh[<span class="number">0</span>] + (sh[<span class="number">1</span>] - sh[<span class="number">0</span>]) * <span class="built_in">Math</span>.random(), <span class="number">0</span>);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// y adjust</span></div><div class="line">        v_pos.y -= CUBE_DROP_SPEED * secs;</div><div class="line">        <span class="comment">// is mesh on the plane</span></div><div class="line">        <span class="keyword">const</span> n = PLANE_HSIZE + CUBE_HSIZE;</div><div class="line">        <span class="keyword">if</span>(v_pos.x &lt;= n &amp;&amp; v_pos.x &gt;= n * <span class="number">-1</span> &amp;&amp; v_pos.z &lt;= n &amp;&amp; v_pos.z &gt;= n * <span class="number">-1</span>)&#123;</div><div class="line">            <span class="comment">// y will get capped if it is on the plane</span></div><div class="line">            v_pos.y = v_pos.y &lt; CUBE_HSIZE ? CUBE_HSIZE : v_pos.y;</div><div class="line">            <span class="keyword">if</span>(v_pos.y === CUBE_HSIZE)&#123;</div><div class="line">                <span class="keyword">const</span> dx = <span class="built_in">Math</span>.cos(mud.radian) * mud.ups * secs;</div><div class="line">                <span class="keyword">const</span> dz = <span class="built_in">Math</span>.sin(mud.radian) * mud.ups * secs;</div><div class="line">                v_pos.x += dx * secs;</div><div class="line">                v_pos.z += dz * secs;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// OBJECTS</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> group = createCubes();</div><div class="line">scene.add(group);</div><div class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.PlaneGeometry(PLANE_SIZE, PLANE_SIZE);</div><div class="line">geometry.rotateX(<span class="built_in">Math</span>.PI * <span class="number">1.5</span>)</div><div class="line"><span class="keyword">const</span> plane = <span class="keyword">new</span> THREE.Mesh(geometry, <span class="keyword">new</span> THREE.MeshPhongMaterial(&#123;</div><div class="line">   <span class="attr">color</span>: <span class="keyword">new</span> THREE.Color(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>),</div><div class="line">   <span class="attr">transparent</span>: <span class="literal">true</span>,</div><div class="line">   <span class="attr">opacity</span>: <span class="number">0.25</span></div><div class="line">&#125;))</div><div class="line">scene.add( plane );</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// LIGHT</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> dl = <span class="keyword">new</span> THREE.DirectionalLight(<span class="number">0xffffff</span>, <span class="number">1</span>);</div><div class="line">dl.position.set(<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>);</div><div class="line">scene.add(dl);</div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="comment">// ANIMATION LOOP</span></div><div class="line"><span class="comment">// ---------- ----------</span></div><div class="line"><span class="keyword">const</span> FPS_UPDATE = <span class="number">30</span>, <span class="comment">// fps rate to update ( low fps for low CPU use, but choppy video )</span></div><div class="line">FPS_MOVEMENT = <span class="number">30</span>;     <span class="comment">// fps rate to move object by that is independent of frame update rate</span></div><div class="line">FRAME_MAX = <span class="number">800</span>;</div><div class="line"><span class="keyword">let</span> secs = <span class="number">0</span>,</div><div class="line">frame = <span class="number">0</span>,</div><div class="line">lt = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line"><span class="comment">// update</span></div><div class="line">camera.position.set(<span class="number">5</span>,<span class="number">2</span>,<span class="number">5</span>);</div><div class="line"><span class="keyword">const</span> update = <span class="function"><span class="keyword">function</span>(<span class="params">frame, frameMax</span>)</span>&#123;</div><div class="line">    <span class="keyword">const</span> a1 = frame / frameMax;</div><div class="line">    updateCubes(group, <span class="number">1</span> / <span class="number">30</span>);</div><div class="line">    camera.lookAt(group.position);</div><div class="line">&#125;;</div><div class="line"><span class="comment">// loop</span></div><div class="line"><span class="keyword">const</span> loop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(),</div><div class="line">    secs = (now - lt) / <span class="number">1000</span>;</div><div class="line">    requestAnimationFrame(loop);</div><div class="line">    <span class="keyword">if</span>(secs &gt; <span class="number">1</span> / FPS_UPDATE)&#123;</div><div class="line">        <span class="comment">// update, render</span></div><div class="line">        update( <span class="built_in">Math</span>.floor(frame), FRAME_MAX);</div><div class="line">        renderer.render(scene, camera);</div><div class="line">        <span class="comment">// step frame</span></div><div class="line">        frame += FPS_MOVEMENT * secs;</div><div class="line">        frame %= FRAME_MAX;</div><div class="line">        lt = now;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">loop();</div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>So the user data object is one way to go about having some custom data set to a given mesh object, or any object in threejs that inherits from object 3d such as a camera object. There might be other ways of going about doing this sort of thing though such as having two sets of objects, one would be a collection of mesh objects in threejs, and another would be an independent array of user data objects. However it is good to know that there is an official object in every object based on the Object3d class that can be used as a way to go about packing application and module specific data. This allows me to create three.js modules that returned mesh objects, or groups, rather than my own weired object standards where there is a property that is a group or mesh. Which is a habit that I am not going to start to break because that sounds like a good idea to me.</p>
<p>There are a ton or more ideas that I have just for examples to write about for this post, so I am sure that there will be more to come next time I come around to editing this post. One of my three.js example posts is a continuation of one of the examples that I worked out for this post called just simply <a href="/2021/05/10/threejs-examples-nested-groups/">nested groups example</a>. The example is just an exercise of nesting groups, and using the user data object as a way to store data that has to do with certain objects, groups, and the whole main group object that is returned by a create method of the main module that is used in the example.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2021/02/16/threejs-userdata/" data-id="clhgco1pj02h8pwv1azhkhgro" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2021/02/16/threejs-userdata/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/three-js/">three.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/02/17/threejs-examples-biplane/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Biplane threejs example
        
      </div>
    </a>
  
  
    <a href="/2021/02/15/threejs-examples-land-sections/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">A Three js example of my land sections idea</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2021/02/16/threejs-userdata/index.html';
    this.page.identifier = '804';
    this.page.title = 'User Data for a Mesh or anything based on Object3d in three.js';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 12.73px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/05/threejs-examples-timeline/">Timeline module threejs example</a>
          </li>
        
          <li>
            <a href="/2023/04/28/electronjs-example-game-mrsun/">Idle Game Electronjs project example - MrSun Idle prototype</a>
          </li>
        
          <li>
            <a href="/2023/04/14/threejs-quaternion-slerp/">Quaternion slerp method</a>
          </li>
        
          <li>
            <a href="/2023/04/07/threejs-quaternion-setfromunitvectors/">Quaternion set from unit vectors method in threejs</a>
          </li>
        
          <li>
            <a href="/2023/03/31/threejs-quaternion-premultiply/">Quaternion premultiply method in threejs</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2021/02/16/threejs-userdata/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>