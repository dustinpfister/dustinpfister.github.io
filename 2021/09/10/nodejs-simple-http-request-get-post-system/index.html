<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <!-- disqus image-->
  <meta property="og:image" content="https://dustinpfister.github.io/css/images/banner.jpg">
  
  <title>A Simple nodejs example of a server that responds to post requests | Dustin John Pfister at github pages</title>
  
  <!-- no index tag or blank here -->
  
  
  <link rel="canonical" href="https://dustinpfister.github.io/2021/09/10/nodejs-simple-http-request-get-post-system/" />

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="A few years back I made a simple nodejs script that is a basic drop in script that can be used to start a simple static sever. I come back to the post now and then, and when I do I often edit the sour">
<meta property="og:type" content="article">
<meta property="og:title" content="A Simple nodejs example of a server that responds to post requests">
<meta property="og:url" content="https://dustinpfister.github.io/2021/09/10/nodejs-simple-http-request-get-post-system/index.html">
<meta property="og:site_name" content="Dustin John Pfister at github pages">
<meta property="og:description" content="A few years back I made a simple nodejs script that is a basic drop in script that can be used to start a simple static sever. I come back to the post now and then, and when I do I often edit the sour">
<meta property="og:updated_time" content="2022-07-29T18:00:39.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A Simple nodejs example of a server that responds to post requests">
<meta name="twitter:description" content="A few years back I made a simple nodejs script that is a basic drop in script that can be used to start a simple static sever. I come back to the post now and then, and when I do I often edit the sour">
  
    <link rel="alternate" href="/atom.xml" title="Dustin John Pfister at github pages" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8XLNG6JRW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8XLNG6JRW');
</script>
<!-- End Google Analytics -->


  <!-- structured data set in structured-data.ejs -->
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Person",
    "email": "distin.pfister@gmail.com",
    "givenName": "Dustin",
    "familyName" : "Pfister",
    "additionalName": "John",
    "name": "Dustin John Pfister",
    "gender": "Male"
}
</script>
<!-- end structured data -->
  
  <!-- adsense if indexed -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1658284027672315",
    enable_page_level_ads: true
  });
  </script>
  
  
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <!-- added the image, as well as the link to my youtube -->
        <a href="https://www.youtube.com/user/javaweaver"><div class="selfimage"></div></a>
        <!--<a href="/" id="logo">Dustin John Pfister at github pages</a>-->
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/2021/02/19/threejs-examples/">ThreeJS</a>
        
          <a class="main-nav-link" href="/2020/03/23/canvas-example/">Canvas</a>
        
          <a class="main-nav-link" href="https://www.youtube.com/user/javaweaver">Youtube</a>
        
          <a class="main-nav-link" href="https://github.com/dustinpfister">Github</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <!-- removed rss link-->
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dustinpfister.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article itemscope itemtype="http://schema.org/Blog" id="post-nodejs-simple-http-request-get-post-system" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/09/10/nodejs-simple-http-request-get-post-system/" class="article-date"> Published:
  <time datetime="2021-09-10T16:03:00.000Z" itemprop="datePublished">2021-09-10</time>
</a>

    <!-- other info (dustin) -->
    <a href="/2021/09/10/nodejs-simple-http-request-get-post-system/" class="article-date"> Modified:
  <time datetime="2022-07-29T18:00:39.000Z" itemprop="dateModified">2022-07-29</time>
</a>

    <span class="article-date">V1.38</span>

    
  <div class="article-category">
    <a class="article-category-link" href="/categories/node-js/">node.js</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      A Simple nodejs example of a server that responds to post requests
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="text">
      
        <p>A few years back I made a <a href="/2017/12/04/nodejs-simple-static-sever-file/">simple nodejs script that is a basic drop in script that can be used to start a simple static sever</a>. I come back to the post now and then, and when I do I often edit the source code and the content a little. Anyway it is the kind of script that might not be a good choice to use in production, but when it comes to a simple pet project where I just want to host a public folder over the http protocol it seems to work okay thus far. Anyway the thought occurred that it would be nice to have another similar vanilla javaScript type solution for setting up this kind of script for a project only this time make it a script that is a slightly more advanced and will respond to post requests.</p>
<a id="more"></a>
<h2 id="1-What-to-know-first-before-continuing-to-read-this"><a href="#1-What-to-know-first-before-continuing-to-read-this" class="headerlink" title="1 - What to know first before continuing to read this"></a>1 - What to know first before continuing to read this</h2><p>What I am writing about here is a script that I can run with nodejs by itself without any additional user space packages to set up a simple static sever, and also respond to post requests. This is then not any kind of <a href="/2017/04/05/nodejs-helloworld/">getting started type post on nodejs</a> so if you are still fairly new with it you might find this post a but to advanced.</p>
<p>In the script I am sticking to built in node modules such as the <a href="/2018/02/06/nodejs-http/">http module</a>, the <a href="/2018/02/08/nodejs-filesystem/">file system module</a>, and the <a href="/2017/12/27/nodejs-paths/">path module</a> just to name a few. I will not be getting into detail about how to go about suing these modules I have wrote posts on them all ready, and there are many other great resources on the open web that cover how to use these.</p>
<h3 id="1-1-I-was-using-nodejs-10-x-when-I-made-this"><a href="#1-1-I-was-using-nodejs-10-x-when-I-made-this" class="headerlink" title="1.1 - I was using nodejs 10.x when I made this"></a>1.1 - I was using nodejs 10.x when I made this</h3><p>When I made this script I was using nodejs 10.x which as of this writing is no longer supported. I do get around to editing my posts on nodejs once in a while, and with that said maybe next time I will be using a later version of nodejs. The thin about it though is that I like to make code examples that will still work okay on older versions of nodejs even if they are no longer supported. Often people will install a version of node that is supplied from a public repository in a Linux system, and sadly often these versions are out dated. Still I am currently thinking that I need to raise the bar to as least 12.x at some point soon.</p>
<h3 id="1-2-The-source-code-for-this-can-be-found-at-my-github"><a href="#1-2-The-source-code-for-this-can-be-found-at-my-github" class="headerlink" title="1.2 - The source code for this can be found at my github"></a>1.2 - The source code for this can be found at my github</h3><p>I am going over all the relevant source code in this post, but the full source code can be found at my <a href="https://github.com/dustinpfister/nodejs-simple-http-request-get-post-system" target="_blank" rel="external">Git hub repository on this script</a>. So if you see something that you think should change, or for whatever the reason you want to make a pull request that would be the place to do so. Also the repos might hold a later version of the script then what I am writing about here, and also it might be the best way to go about setting up what I have worked out here by just cloning it down, and then running the server.</p>
<h3 id="1-3-Vanilla-JavaScript-projects-are-fun-but-express-is-a-great-framework-for-this-kinds-of-projects-too"><a href="#1-3-Vanilla-JavaScript-projects-are-fun-but-express-is-a-great-framework-for-this-kinds-of-projects-too" class="headerlink" title="1.3 - Vanilla JavaScript projects are fun, but express is a great framework for this kinds of projects too."></a>1.3 - Vanilla JavaScript projects are fun, but express is a great framework for this kinds of projects too.</h3><p>The intention here is not to make areal serious full stack project, but just a simple script that I could use for some projects where what I am really working on is the client system. When it comes to making a serious back end system I do nt think that I would want to do everything from the ground up. With that said it really is a good idea to just go with a popular framework, <a href="/2018/05/21/express-getting-started/">such as express</a> and well supported middleware projects for it.</p>
<h2 id="2-The-server-script"><a href="#2-The-server-script" class="headerlink" title="2 - The server script"></a>2 - The server script</h2><p>Here in this section I will be going over the source code of the main server script that will be called with node directly, or indirectly with some additional script that has some hard coded defaults with the arguments. The script sets up a server using the http create sever method of the built in http module in nodejs. I then have a number of helper functions that will help with the process of handing incoming get requests for static files location sin a public folder than can be set with one of the several arguments that can be passed when calling the script.</p>
<p>The main feature of interest here though compared to the simple static sever script example is that this script will not use the method property of a request object to call a special methods for a certain kind of request. Not just get requests but post requests as well now also. I could add additional support fr the other kinds of requests but I wanted to keep this projects simple, and all in just on file.</p>
<p>There is however the question of how I go about costuming how to go about processing get requests from one project to the next where I might make use of this script. With that said I have a system set up for this where the script will look for an index JavaScript file that should be located in a middleware folder off of the root folder set for the script. If none is found then the script will just use a built in middleware function that does not do anything, and the script is then just a far to complex static sever. More on this middlewre file later in this post when I get to some source code that is a demo of the script.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"> *  server.js</div><div class="line"> *</div><div class="line"> *   This just provides a simple static server for the project.</div><div class="line"> *</div><div class="line"> *   ex: $ node server ./ 8080</div><div class="line"> *</div><div class="line"> */</div><div class="line"> </div><div class="line"><span class="keyword">let</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>),</div><div class="line">os = <span class="built_in">require</span>(<span class="string">'os'</span>),</div><div class="line">fs = <span class="built_in">require</span>(<span class="string">'fs'</span>),</div><div class="line">path = <span class="built_in">require</span>(<span class="string">'path'</span>),</div><div class="line">promisify = <span class="built_in">require</span>(<span class="string">'util'</span>).promisify,</div><div class="line">lstat = promisify(fs.lstat),</div><div class="line">readFile = promisify(fs.readFile),</div><div class="line">readdir = promisify(fs.readdir);</div><div class="line"> </div><div class="line"><span class="comment">// THE MAX BODY SIZE</span></div><div class="line"><span class="keyword">let</span> BODY_MAX_SIZE = <span class="number">1024</span>;</div><div class="line"> </div><div class="line"><span class="comment">// the root folder of the project</span></div><div class="line"><span class="keyword">let</span> dir_root = process.argv[<span class="number">2</span>] || path.join(__dirname, <span class="string">'../..'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// the folder to look for middleware to know what to do for post requests</span></div><div class="line"><span class="keyword">let</span> dir_middleware = path.join(dir_root, <span class="string">'middleware'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// default middleware that does nothing</span></div><div class="line"><span class="keyword">let</span> middleware = <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>)</span>&#123;</div><div class="line">    next(req, res);</div><div class="line">&#125;; </div><div class="line"> </div><div class="line"><span class="comment">// public folder to serve</span></div><div class="line"><span class="keyword">let</span> dir_public = process.argv[<span class="number">3</span>] || path.join(__dirname, <span class="string">'../../public'</span>);</div><div class="line"> </div><div class="line"><span class="comment">// set port with argument or hard coded default</span></div><div class="line"><span class="keyword">let</span> port = process.argv[<span class="number">4</span>] || <span class="number">8080</span>; <span class="comment">// port 8888 for now</span></div><div class="line"> </div><div class="line"><span class="comment">// host defaults to os.networkInterfaces().lo[0].address</span></div><div class="line"><span class="keyword">let</span> netInter = os.networkInterfaces(), </div><div class="line">host = process.argv[<span class="number">5</span>] || <span class="string">'localhost'</span>;</div><div class="line"><span class="keyword">if</span>(netInter.lo)&#123;</div><div class="line">    host = process.argv[<span class="number">5</span>] || netInter.lo[<span class="number">0</span>].address || <span class="string">'localhost'</span>;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// create path info object</span></div><div class="line"><span class="keyword">let</span> createPathInfoObject = <span class="function">(<span class="params">url</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// remove any extra / ( /foo/bar/  to /foo/bar )</span></div><div class="line">    <span class="keyword">let</span> urlArr = url.split(<span class="string">''</span>);</div><div class="line">    <span class="keyword">if</span>(urlArr[urlArr.length - <span class="number">1</span>] === <span class="string">'/'</span>)&#123;</div><div class="line">        urlArr.pop();</div><div class="line">        url = urlArr.join(<span class="string">''</span>);</div><div class="line">    &#125;  </div><div class="line">    <span class="comment">// starting state</span></div><div class="line">    <span class="keyword">let</span> pInfo = &#123;</div><div class="line">        <span class="attr">url</span> : url,</div><div class="line">        <span class="attr">uri</span> : path.join(dir_public, url),</div><div class="line">        <span class="attr">encoding</span>: <span class="string">'utf-8'</span>,</div><div class="line">        <span class="attr">mime</span>: <span class="string">'text/plain'</span>,</div><div class="line">        <span class="attr">ext</span>: <span class="string">''</span>,</div><div class="line">        <span class="attr">contents</span>: [],</div><div class="line">        <span class="attr">html</span>: <span class="string">''</span></div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//return pInfo;</span></div><div class="line">    <span class="keyword">return</span> lstat(pInfo.uri)</div><div class="line">    .then(<span class="function">(<span class="params">stat</span>)=&gt;</span>&#123;</div><div class="line">        pInfo.stat = stat;</div><div class="line">        <span class="keyword">if</span>(pInfo.stat.isFile())&#123;</div><div class="line">            pInfo.ext = path.extname(pInfo.uri).toLowerCase();</div><div class="line">            pInfo.ext = path.extname(pInfo.uri).toLowerCase();</div><div class="line">            pInfo.mime = pInfo.ext === <span class="string">'.html'</span> ? <span class="string">'text/html'</span> : pInfo.mime;</div><div class="line">            pInfo.mime = pInfo.ext === <span class="string">'.css'</span> ? <span class="string">'text/css'</span> : pInfo.mime;</div><div class="line">            pInfo.mime = pInfo.ext === <span class="string">'.js'</span> ? <span class="string">'text/javascript'</span> : pInfo.mime;</div><div class="line">            pInfo.mime = pInfo.ext === <span class="string">'.json'</span> ? <span class="string">'application/json'</span> : pInfo.mime;</div><div class="line">             <span class="comment">// images</span></div><div class="line">            pInfo.mime = pInfo.ext === <span class="string">'.png'</span> ? <span class="string">'image/png'</span> : pInfo.mime;</div><div class="line">            pInfo.mime = pInfo.ext === <span class="string">'.ico'</span> ? <span class="string">'image/x-icon'</span> : pInfo.mime;</div><div class="line">            <span class="comment">// binary encoding if...</span></div><div class="line">            pInfo.encoding = pInfo.ext === <span class="string">'.png'</span> || pInfo.ext === <span class="string">'.ico'</span> ? <span class="string">'binary'</span> : pInfo.encoding;</div><div class="line">            <span class="keyword">return</span> pInfo;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(pInfo.stat.isDirectory())&#123;</div><div class="line">            pInfo.ext = <span class="string">''</span>;</div><div class="line">            pInfo.mime = <span class="string">'text/plain'</span>;</div><div class="line">            pInfo.encoding = <span class="string">'utf-8'</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> createDirInfo(pInfo);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// create an html index of a folder</span></div><div class="line"><span class="keyword">let</span> createHTML = <span class="function">(<span class="params">pInfo</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">var</span> html = <span class="string">'&lt;html&gt;&lt;head&gt;&lt;title&gt;Index of - '</span> + pInfo.url + <span class="string">'&lt;/title&gt;'</span>+</div><div class="line">    <span class="string">'&lt;style&gt;body&#123;padding:20px;background:#afafaf;font-family:arial;&#125;div&#123;display: inline-block;padding:10px;&#125;&lt;/style&gt;'</span> +</div><div class="line">    <span class="string">'&lt;/head&gt;&lt;body&gt;'</span>;</div><div class="line">    html += <span class="string">'&lt;h3&gt;Contents of : '</span> + pInfo.url + <span class="string">'&lt;/h3&gt;'</span></div><div class="line">    pInfo.contents.forEach(<span class="function">(<span class="params">itemName</span>)=&gt;</span>&#123;</div><div class="line">        <span class="keyword">let</span> itemURL = pInfo.url + <span class="string">'/'</span> + itemName;</div><div class="line">        html += <span class="string">'&lt;div&gt; &lt;a href=\"'</span> + itemURL + <span class="string">'\" &gt;'</span> +  itemName + <span class="string">'&lt;/a&gt; &lt;/div&gt;'</span></div><div class="line">    &#125;);</div><div class="line">    html += <span class="string">'&lt;/body&gt;&lt;/html&gt;'</span>;</div><div class="line">    <span class="keyword">return</span> html;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// create dir info for a pInfo object</span></div><div class="line"><span class="keyword">let</span> createDirInfo = <span class="function">(<span class="params">pInfo</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// first check for an index.html</span></div><div class="line">    <span class="keyword">let</span> uriIndex = path.join( pInfo.uri, <span class="string">'index.html'</span> );</div><div class="line">    <span class="keyword">return</span> readFile(uriIndex)</div><div class="line">    <span class="comment">// if all goes file we have an index file call createPathInfoObject with new uri</span></div><div class="line">    .then(<span class="function">(<span class="params">file</span>)=&gt;</span>&#123;</div><div class="line">        pInfo.uri = uriIndex;</div><div class="line">        pInfo.ext = <span class="string">'.html'</span>;</div><div class="line">        pInfo.mime = <span class="string">'text/html'</span>;</div><div class="line">        <span class="keyword">return</span> pInfo;</div><div class="line">    &#125;)</div><div class="line">    <span class="comment">// else we do not get contents</span></div><div class="line">    .catch(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">        <span class="keyword">return</span> readdir(pInfo.uri);</div><div class="line">    &#125;).then(<span class="function">(<span class="params">contents</span>)=&gt;</span>&#123;</div><div class="line">        <span class="keyword">if</span>(contents &amp;&amp; pInfo.ext === <span class="string">''</span>)&#123;</div><div class="line">            pInfo.contents = contents;</div><div class="line">            pInfo.mime = <span class="string">'text/html'</span>;</div><div class="line">            pInfo.html = createHTML(pInfo);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> pInfo;</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// parse a body for a post request</span></div><div class="line"><span class="keyword">let</span> parseBody = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> bodyStr = <span class="string">''</span>;</div><div class="line">    req.body = &#123;&#125;;</div><div class="line">    req.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">chunk</span>) </span>&#123;</div><div class="line">        bodyStr += chunk.toString();</div><div class="line">        <span class="comment">// do some basic sanitation</span></div><div class="line">        <span class="keyword">if</span> (bodyStr.length &gt;= BODY_MAX_SIZE) &#123;</div><div class="line">            <span class="comment">// if body char length is greater than</span></div><div class="line">            <span class="comment">// or equal to 200 destroy the connection</span></div><div class="line">            res.connection.destroy();</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    <span class="comment">// once the body is received</span></div><div class="line">    req.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">try</span>&#123;</div><div class="line">            req.body = <span class="built_in">JSON</span>.parse(bodyStr);</div><div class="line">        &#125;<span class="keyword">catch</span>(e)&#123;</div><div class="line">            req.body = bodyStr;</div><div class="line">        &#125;</div><div class="line">        next(req, res);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// create server object</span></div><div class="line"><span class="keyword">let</span> server = http.createServer();</div><div class="line"> </div><div class="line"><span class="keyword">let</span> forRequest = &#123;&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// for ALL GET requests</span></div><div class="line">forRequest.GET = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// create path info object for req.url</span></div><div class="line">    createPathInfoObject(req.url)</div><div class="line">    <span class="comment">// if we have a pinfo object without any problems</span></div><div class="line">    .then(<span class="function">(<span class="params">pInfo</span>)=&gt;</span>&#123;</div><div class="line">        <span class="comment">// if we have html send that</span></div><div class="line">        <span class="keyword">if</span>(pInfo.html != <span class="string">''</span>)&#123;</div><div class="line">            res.writeHead(<span class="number">200</span>, &#123;</div><div class="line">                <span class="string">'Content-Type'</span>: pInfo.mime</div><div class="line">            &#125;);</div><div class="line">            res.write(pInfo.html, pInfo.encoding);</div><div class="line">            res.end();</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="comment">// else we are sending a file</span></div><div class="line">            readFile(pInfo.uri, pInfo.encoding).then(<span class="function">(<span class="params">file</span>)=&gt;</span>&#123;</div><div class="line">                res.writeHead(<span class="number">200</span>, &#123;</div><div class="line">                    <span class="string">'Content-Type'</span>: pInfo.mime</div><div class="line">                &#125;);</div><div class="line">                res.write(file, pInfo.encoding);</div><div class="line">                res.end();</div><div class="line">            &#125;).catch(<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</div><div class="line">                <span class="comment">// send content</span></div><div class="line">                res.writeHead(<span class="number">500</span>, &#123;</div><div class="line">                    <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span></div><div class="line">                &#125;);</div><div class="line">                res.write(e.message, <span class="string">'utf8'</span>);</div><div class="line">                res.end();</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;).catch(<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</div><div class="line">        <span class="comment">// send content</span></div><div class="line">        res.writeHead(<span class="number">500</span>, &#123;</div><div class="line">            <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span></div><div class="line">        &#125;);</div><div class="line">        res.write(e.message, <span class="string">'utf8'</span>);</div><div class="line">        res.end();</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// for any post request</span></div><div class="line">forRequest.POST = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// parse the given body</span></div><div class="line">    parseBody(req, res, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</div><div class="line">        res.resObj = &#123;</div><div class="line">           <span class="attr">body</span>: req.body,</div><div class="line">           <span class="attr">mess</span>: <span class="string">''</span></div><div class="line">        &#125;;</div><div class="line">        <span class="comment">// call middleware</span></div><div class="line">        middleware(req, res, <span class="function"><span class="keyword">function</span>(<span class="params">res, res</span>)</span>&#123;</div><div class="line">            <span class="comment">// when done send a response</span></div><div class="line">            res.writeHead(<span class="number">200</span>, &#123;</div><div class="line">                <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span></div><div class="line">            &#125;);</div><div class="line">            <span class="comment">// send back this object as a response</span></div><div class="line">            res.write(<span class="built_in">JSON</span>.stringify(res.resObj), <span class="string">'utf8'</span>);</div><div class="line">            res.end();</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// on request</span></div><div class="line">server.on(<span class="string">'request'</span>, (req, res)=&gt;&#123;</div><div class="line">    <span class="comment">// call method for request method</span></div><div class="line">    <span class="keyword">var</span> method = forRequest[req.method];</div><div class="line">    <span class="keyword">if</span>(method)&#123; </div><div class="line">        method.call(<span class="keyword">this</span>, req, res);</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="comment">// send content</span></div><div class="line">        res.writeHead(<span class="number">500</span>, &#123;</div><div class="line">            <span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span></div><div class="line">        &#125;);</div><div class="line">        res.write(<span class="string">'unsupported http method '</span> + req.method, <span class="string">'utf8'</span>);</div><div class="line">        res.end();</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="comment">// start server</span></div><div class="line">server.listen(port, host, () =&gt; &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'server is up: '</span>);   </div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'dir_root: '</span> + dir_root);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'dir_public: '</span> + dir_public);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'port: '</span> + port);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'host: '</span> + host);</div><div class="line">    <span class="comment">// try to set up middelware</span></div><div class="line">    <span class="keyword">try</span>&#123;</div><div class="line">        middleware = <span class="built_in">require</span>( path.join(dir_middleware, <span class="string">'index.js'</span>) );</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'middleware index found.'</span>);</div><div class="line">    &#125;<span class="keyword">catch</span>(e)&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'no /middleware/index.js found.'</span>);</div><div class="line">        <span class="built_in">console</span>.log(e.message);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="3-The-Demo-Project"><a href="#3-The-Demo-Project" class="headerlink" title="3 - The Demo Project"></a>3 - The Demo Project</h2><p>So then now that I have the sever script together it is time to test it out with some additional source code to make use of the script. So with that said I will want to have at least one demo project just for the sake of testing this thing out and to make sure it is working as expected.</p>
<p>So the first and only demo that I made for this script is a very simple system where I am just mutating the values of a json file in the public folder. This demo then consists of a single middle ware file in the middleware folder location that the script looks for that will create, read, and write the map.json file. It also consists with a static website that will be the client system that will interact with this back end script.</p>
<h3 id="3-1-The-middleware"><a href="#3-1-The-middleware" class="headerlink" title="3.1 - The middleware"></a>3.1 - The middleware</h3><p>Here I have the middleware file for th demo project that should be at the \/middleware\/index.js file off from the root project folder. This file is what I will be using to handle including post requests for the specific demo that is making use of the simple sever script. The way that this is done is by designing by client system to send body objects that contain custom data that will then in return be used in this middle ware file to append results to standard response object.</p>
<p>In this demo the idea is to just create and or mutate a json file in the public folder that contains map data for a simple grid. So the first thing that the script should do is to check if the map json file is there to begin with, in the event that it is not create a new map json file for the public folder. In the event that the map file is there, or after the new map file is created, preform an action on the map based on data from the body object, and then write the new state of the map object to the public folder.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>),</div><div class="line">os = <span class="built_in">require</span>(<span class="string">'os'</span>),</div><div class="line">fs = <span class="built_in">require</span>(<span class="string">'fs'</span>),</div><div class="line">path = <span class="built_in">require</span>(<span class="string">'path'</span>),</div><div class="line">promisify = <span class="built_in">require</span>(<span class="string">'util'</span>).promisify,</div><div class="line">lstat = promisify(fs.lstat),</div><div class="line">readFile = promisify(fs.readFile),</div><div class="line">writeFile = promisify(fs.writeFile),</div><div class="line">readdir = promisify(fs.readdir);</div><div class="line"> </div><div class="line"><span class="comment">// the public folder</span></div><div class="line"><span class="keyword">let</span> dir_public = path.join(__dirname, <span class="string">'../public'</span>),</div><div class="line"><span class="comment">// path to the map.json file</span></div><div class="line">uri_map = path.join( dir_public, <span class="string">'map.json'</span> );</div><div class="line"> </div><div class="line"><span class="comment">// create new map object helper</span></div><div class="line"><span class="keyword">let</span> createNewMap = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> map = &#123; <span class="attr">cells</span>:[], <span class="attr">w</span>: <span class="number">8</span>, <span class="attr">h</span>: <span class="number">8</span> &#125;;</div><div class="line">    <span class="keyword">let</span> i = <span class="number">0</span>, cell, len = map.w * map.h;</div><div class="line">    <span class="keyword">while</span>(i &lt; len)&#123;</div><div class="line">        cell = &#123;</div><div class="line">            <span class="attr">i</span> : i,</div><div class="line">            <span class="attr">x</span>: i % map.w,</div><div class="line">            <span class="attr">y</span>: <span class="built_in">Math</span>.floor(i / map.w),</div><div class="line">            <span class="attr">typeIndex</span>: <span class="number">0</span></div><div class="line">        &#125;;</div><div class="line">        map.cells.push(cell);</div><div class="line">        i += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// start off map cell 0 with type index 1</span></div><div class="line">    map.cells[<span class="number">0</span>].typeIndex = <span class="number">1</span>;</div><div class="line">    <span class="keyword">return</span> map;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="keyword">let</span> updateMap = <span class="function">(<span class="params">map, body</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span>(body.action === <span class="string">'setCellType'</span>)&#123;</div><div class="line">        <span class="keyword">var</span> cellIndex = body.cellIndex,</div><div class="line">        typeIndex = body.typeIndex;</div><div class="line">        map.cells[cellIndex].typeIndex = typeIndex;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</div><div class="line">    <span class="comment">// read map</span></div><div class="line">    readFile(uri_map)</div><div class="line">    <span class="comment">// if all goes well reading map</span></div><div class="line">    .then(<span class="function">(<span class="params">mapText</span>)=&gt;</span>&#123;</div><div class="line">        <span class="keyword">let</span> map = &#123;&#125;;</div><div class="line">        <span class="keyword">try</span>&#123;</div><div class="line">            map = <span class="built_in">JSON</span>.parse(mapText);</div><div class="line">        &#125;<span class="keyword">catch</span>(e)&#123;</div><div class="line">            map = &#123;&#125;;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// apply any actions to map</span></div><div class="line">        updateMap(map, req.body);</div><div class="line">        <span class="comment">// write map</span></div><div class="line">        writeFile(uri_map, <span class="built_in">JSON</span>.stringify(map), <span class="string">'utf8'</span>)</div><div class="line">        .then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">            res.resObj.map = map;</div><div class="line">            next(req, res);</div><div class="line">        &#125;)</div><div class="line">        .catch(<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</div><div class="line">            res.resObj.mess = <span class="string">'error updating map.json: '</span> + e.message;</div><div class="line">            res.resObj.map = map;</div><div class="line">            next(req, res);</div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">    &#125;)</div><div class="line">    <span class="comment">// error reading map</span></div><div class="line">    .catch(<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</div><div class="line">        res.resObj.map = &#123;&#125;;</div><div class="line">        <span class="comment">// write a new map</span></div><div class="line">        <span class="keyword">var</span> newMap = createNewMap();</div><div class="line">        <span class="comment">// apply any actions to new map</span></div><div class="line">        updateMap(newMap, req.body);</div><div class="line">        <span class="comment">// write map</span></div><div class="line">        writeFile(uri_map, <span class="built_in">JSON</span>.stringify(newMap), <span class="string">'utf8'</span>)</div><div class="line">        .then(<span class="function">(<span class="params">map</span>)=&gt;</span>&#123;</div><div class="line">            res.resObj.map = newMap;</div><div class="line">            next(req, res);</div><div class="line">        &#125;)</div><div class="line">        .catch(<span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</div><div class="line">            res.resObj.mess = <span class="string">'error making new map.json: '</span> + e.message;</div><div class="line">            res.resObj.map = newMap;</div><div class="line">            next(req, res);</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="3-2-The-utils-js-file-for-the-client-system"><a href="#3-2-The-utils-js-file-for-the-client-system" class="headerlink" title="3.2 - The utils.js file for the client system"></a>3.2 - The utils.js file for the client system</h3><p>When it comes to putting my client system together I want to have a general utilities library that will contains methods that I will be using in my client system. For this demo I have such a library that just contains a crude yet effective http client that I will be using to make the post requests to the server. I often have a secretive file like this where I park various methods that I will be using in one or more additional files across a system. I wrote a<a href="/2021/08/06/js-javascript-example-utils/">post in which I cover many of the usual suspect type methods</a> that might end up in this kind of library.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> utils = &#123;&#125;;</div><div class="line"> </div><div class="line"><span class="comment">/********* ********** ********** *********/</span></div><div class="line"><span class="comment">//  MISCELLANEOUS METHODS</span></div><div class="line"><span class="comment">/********* ********** ********** *********/</span></div><div class="line"> </div><div class="line"><span class="comment">// no operation ref</span></div><div class="line">utils.noop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"> </div><div class="line"><span class="comment">/********* ********** ********** *********/</span></div><div class="line"><span class="comment">//  HTTP</span></div><div class="line"> <span class="comment">/********* ********** ********** *********/</span></div><div class="line"> </div><div class="line"><span class="comment">// very simple http client</span></div><div class="line">utils.http = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> opt = opt || &#123;&#125;;</div><div class="line">    <span class="comment">// default options</span></div><div class="line">    opt.url = opt.url || <span class="string">''</span>;</div><div class="line">    opt.method = opt.method || <span class="string">'GET'</span>;</div><div class="line">    opt.async = opt.async === <span class="literal">undefined</span> ? <span class="literal">true</span>: opt.async;</div><div class="line">    opt.body = opt.body === <span class="literal">undefined</span> ? <span class="literal">null</span>: opt.body;</div><div class="line">    opt.onDone = opt.onDone || utils.noop;</div><div class="line">    opt.onError = opt.onError || utils.noop;</div><div class="line">    opt.responseType = opt.responseType || <span class="string">''</span>;  <span class="comment">// set to 'blob' for png</span></div><div class="line">    <span class="comment">// create and set up xhr</span></div><div class="line">    <span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">    xhr.responseType = opt.responseType;</div><div class="line">    xhr.open(opt.method, opt.url, opt.async);</div><div class="line">    xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span>) &#123;</div><div class="line">            <span class="keyword">if</span>(xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">400</span>)&#123;</div><div class="line">                opt.onDone.call(xhr, xhr.response, xhr);</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                opt.onError.call(xhr, xhr);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">// send</span></div><div class="line">    xhr.send(opt.body);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// load just a png file, this calls utils.http with proper settings, and the response is an Image</span></div><div class="line">utils.httpPNG = <span class="function"><span class="keyword">function</span>(<span class="params">opt</span>)</span>&#123;</div><div class="line">    opt = opt || &#123;&#125;;</div><div class="line">    opt.onDone = opt.onDone || utils.noop;</div><div class="line">    opt.onError = opt.onError || utils.noop;</div><div class="line">    utils.http(&#123;</div><div class="line">        <span class="attr">url</span>: opt.url,</div><div class="line">        <span class="attr">responseType</span>: <span class="string">'blob'</span>,</div><div class="line">        <span class="attr">onDone</span> : <span class="function"><span class="keyword">function</span>(<span class="params">res, xhr</span>)</span>&#123;</div><div class="line">            <span class="keyword">var</span> imageURL = <span class="built_in">window</span>.URL.createObjectURL(res);</div><div class="line">            <span class="keyword">var</span> image = <span class="keyword">new</span> Image();</div><div class="line">            image.src = imageURL;</div><div class="line">            <span class="comment">// need to do an unload for this</span></div><div class="line">            image.addEventListener(<span class="string">'load'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                opt.onDone.call(xhr, image, xhr);</div><div class="line">            &#125;);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">onError</span>: opt.onError</div><div class="line">    &#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="3-3-The-client-main-JavaScript-file"><a href="#3-3-The-client-main-JavaScript-file" class="headerlink" title="3.3 - The client main JavaScript file"></a>3.3 - The client main JavaScript file</h3><p>I then have a main javaScript file that will compose most of the JavaScript code that will be the client system for this demo. For this I just have some methods that help with making the proper requests that will work with the middle ware file that I made for the demo. I did not care to get to involve with this demo so for now there are just two helper method one to make a post request, and another to make a get request for the map json file. Each time the page loads I just make a plain old get request for the json file, and draw the state of the map. On top of that I am also adding some events for a button in the html that can be used to set the type index of one of the cells.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> state = &#123;</div><div class="line">    <span class="attr">map</span>: &#123;&#125;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="keyword">var</span> setCellType = <span class="function"><span class="keyword">function</span> (<span class="params">cellIndex, typeIndex, done</span>) </span>&#123;</div><div class="line">    utils.http(&#123;</div><div class="line">        <span class="attr">url</span>: <span class="string">'/'</span>,</div><div class="line">        <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">        <span class="attr">body</span>: <span class="built_in">JSON</span>.stringify(&#123;</div><div class="line">            <span class="attr">mess</span>: <span class="string">'hello'</span>,</div><div class="line">            <span class="attr">action</span>: <span class="string">'setCellType'</span>,</div><div class="line">            <span class="attr">cellIndex</span>: cellIndex,</div><div class="line">            <span class="attr">typeIndex</span>: typeIndex</div><div class="line">        &#125;),</div><div class="line">        <span class="attr">onDone</span>: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">            done(<span class="built_in">JSON</span>.parse(res), <span class="literal">null</span>);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">onError</span>: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">            done(<span class="literal">null</span>, e);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// get the current state of the map</span></div><div class="line"><span class="keyword">var</span> getMap = <span class="function"><span class="keyword">function</span> (<span class="params">done</span>) </span>&#123;</div><div class="line">    utils.http(&#123;</div><div class="line">        <span class="attr">url</span>: <span class="string">'/map.json'</span>,</div><div class="line">        <span class="attr">method</span>: <span class="string">'GET'</span>,</div><div class="line">        <span class="attr">onDone</span>: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                <span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(res);</div><div class="line">                done(obj, <span class="literal">null</span>);</div><div class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</div><div class="line">                done(<span class="literal">null</span>, e);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// draw the state of the map</span></div><div class="line"><span class="keyword">var</span> drawMap = <span class="function"><span class="keyword">function</span> (<span class="params">map</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> el = <span class="built_in">document</span>.querySelector(<span class="string">'#map_disp'</span>),</div><div class="line">    html = <span class="string">'&lt;table&gt;'</span>,</div><div class="line">    cell,</div><div class="line">    y = <span class="number">0</span>,</div><div class="line">    x;</div><div class="line">    <span class="keyword">while</span> (y &lt; map.h) &#123;</div><div class="line">        x = <span class="number">0</span>;</div><div class="line">        html += <span class="string">'&lt;tr&gt;'</span>;</div><div class="line">        <span class="keyword">while</span> (x &lt; map.w) &#123;</div><div class="line">            cell = map.cells[y * map.h + x];</div><div class="line">            html += <span class="string">'&lt;td&gt;'</span> + cell.typeIndex + <span class="string">'&lt;/td&gt;'</span>;</div><div class="line">            x += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        html += <span class="string">'&lt;/tr&gt;'</span>;</div><div class="line">        y += <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    el.innerHTML = html + <span class="string">'&lt;/table&gt;'</span>;</div><div class="line">&#125;;</div><div class="line"> </div><div class="line"><span class="comment">// call get map for the first time</span></div><div class="line">getMap(<span class="function"><span class="keyword">function</span> (<span class="params">map, e</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (e) &#123;</div><div class="line">        <span class="built_in">console</span>.log(e);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'GET map'</span>);</div><div class="line">        state.map = map;</div><div class="line">        drawMap(state.map);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">'input_set_typeindex'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="built_in">document</span>.getElementById(<span class="string">'input_x'</span>).value,</div><div class="line">    y = <span class="built_in">document</span>.getElementById(<span class="string">'input_y'</span>).value,</div><div class="line">    cellIndex = <span class="built_in">parseInt</span>(y) * state.map.w + <span class="built_in">parseInt</span>(x),</div><div class="line">    typeIndex = <span class="built_in">parseInt</span>(<span class="built_in">document</span>.getElementById(<span class="string">'input_typeindex'</span>).value);</div><div class="line">    <span class="comment">// set cell type</span></div><div class="line">    setCellType(cellIndex, typeIndex, <span class="function"><span class="keyword">function</span> (<span class="params">res, e</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (e) &#123;</div><div class="line">            <span class="built_in">console</span>.log(e);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            state.map = res.map;</div><div class="line">            drawMap(state.map);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="3-4-The-main-index-html-file-at-root"><a href="#3-4-The-main-index-html-file-at-root" class="headerlink" title="3.4 - The main index.html file at root"></a>3.4 - The main index.html file at root</h3><p>Here then is the source code of the main index html file for the root name space of the client system for the demo. Here I am linking to the utils.js file, and well as the main.js file that I coved above. In addition I have just a little but of hard coded html that will serve as the very basic user interface to just mutate the state of this map json file.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Simple http request get post system<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"/style.css"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"banner"</span> &gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"banner_text"</span> &gt;</span>Simple http request get post system<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"map_disp"</span>&gt;</span>Content<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">           Type Index: <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"input_typeindex"</span> <span class="attr">size</span>=<span class="string">"2"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">           pos: <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"input_x"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">size</span>=<span class="string">"2"</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span>, <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"input_y"</span> <span class="attr">size</span>=<span class="string">"2"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"input_set_typeindex"</span> <span class="attr">value</span>=<span class="string">"set type index"</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/js/utils.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/js/main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>When I start the main server file, the script finds and uses the middle ware file that I made and starts listening on the host and port number that I set for it. By default this means that I can go to a web browser on the completer that I start the script on and go to localhost:8080 to view the main index that can be used to view and edit the map.js file. In the event that I want to view the index from another computer on the same network I will need to find out what the local ip address is for the system that I started the script on and replace localhost with that ip address.</p>
<p>In any case when this is up and running and I am at the main index of the client system in my web browser I can use the client system to change the state of the map in the public folder. So then the basic idea that I had in mind just for testing this thing out seems to work okay.</p>
<h2 id="4-Conclusion"><a href="#4-Conclusion" class="headerlink" title="4 - Conclusion"></a>4 - Conclusion</h2><p>This turned out to be yet another interesting project where I just wanted to create a simple script that can be used to quickly set up a static sever, but can also be used to respond to post requests. I do not think I will be using this script in its current form for any kind of major project that I would deploy on line though mind you, but it might work okay for certain projects that I intended to use just on a local network.</p>
<p>I made the demo project in the from of the middle ware file and the various files that compose the public folder just for the sake of having something to test out that this system is working okay at least. However I can not say that it composes any kind of real project when it comes to having some kind of real project based off of this. However so far I would say that the question of making a real project with this might just involve making a far more advanced middle ware file, or perhaps a collection of files to compose the back end system. There is developing some kind of crude yet effective authentication system, and doing much more then it comes to public and private assets that will be read and edited for a project.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dustinpfister.github.io/2021/09/10/nodejs-simple-http-request-get-post-system/" data-id="cliqcgyjf023aiov12hs0d386" class="article-share-link">Share</a>
      
        <a href="https://dustinpfister.github.io/2021/09/10/nodejs-simple-http-request-get-post-system/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node-js/">node.js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/09/17/nodejs-simple-build-tool/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Making a Simple build tool in nodejs
        
      </div>
    </a>
  
  
    <a href="/2021/09/03/js-javascript-example-game-framework/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">A game framework JavaScript example</div>
    </a>
  
</nav>

  
</article>



<section id="comments">

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
    this.page.url = 'https://dustinpfister.github.io/2021/09/10/nodejs-simple-http-request-get-post-system/index.html';
    this.page.identifier = '928';
    this.page.title = 'A Simple nodejs example of a server that responds to post requests';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://dustinpfister-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/angular/">angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/api/">api</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/backbone/">backbone</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/discovery/">discovery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electronjs/">electronjs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/express/">express</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/games/">games</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grunt/">grunt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hapi/">hapi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/heroku/">heroku</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lodash/">lodash</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mongodb/">mongodb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/node-js/">node.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/phaser/">phaser</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/statistics/">statistics</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/three-js/">three.js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SEO/">SEO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/animation/">animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/automation/">automation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backbone/">backbone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/corejs/">corejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deterministic/">deterministic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/discovery/">discovery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejs/">ejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electronjs/">electronjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/express/">express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/games/">games</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hapi/">hapi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jimp/">jimp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js13k/">js13k</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lodash/">lodash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phaser/">phaser</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/structured-data/">structured-data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/themes/">themes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three-js/">three.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JSON/" style="font-size: 12.27px;">JSON</a> <a href="/tags/SEO/" style="font-size: 10.45px;">SEO</a> <a href="/tags/angular/" style="font-size: 13.18px;">angular</a> <a href="/tags/animation/" style="font-size: 11.82px;">animation</a> <a href="/tags/automation/" style="font-size: 11.82px;">automation</a> <a href="/tags/backbone/" style="font-size: 12.27px;">backbone</a> <a href="/tags/blog/" style="font-size: 15.45px;">blog</a> <a href="/tags/canvas/" style="font-size: 18.64px;">canvas</a> <a href="/tags/corejs/" style="font-size: 12.73px;">corejs</a> <a href="/tags/deterministic/" style="font-size: 10px;">deterministic</a> <a href="/tags/discovery/" style="font-size: 10.91px;">discovery</a> <a href="/tags/ejs/" style="font-size: 11.36px;">ejs</a> <a href="/tags/electronjs/" style="font-size: 13.64px;">electronjs</a> <a href="/tags/express/" style="font-size: 16.82px;">express</a> <a href="/tags/games/" style="font-size: 17.27px;">games</a> <a href="/tags/git/" style="font-size: 13.64px;">git</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hapi/" style="font-size: 15px;">hapi</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/hexo/" style="font-size: 14.55px;">hexo</a> <a href="/tags/jimp/" style="font-size: 10.45px;">jimp</a> <a href="/tags/jquery/" style="font-size: 11.36px;">jquery</a> <a href="/tags/js/" style="font-size: 20px;">js</a> <a href="/tags/js13k/" style="font-size: 10px;">js13k</a> <a href="/tags/linux/" style="font-size: 17.73px;">linux</a> <a href="/tags/lodash/" style="font-size: 18.64px;">lodash</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/mongodb/" style="font-size: 14.55px;">mongodb</a> <a href="/tags/node-js/" style="font-size: 19.55px;">node.js</a> <a href="/tags/phaser/" style="font-size: 18.18px;">phaser</a> <a href="/tags/python/" style="font-size: 15.91px;">python</a> <a href="/tags/statistics/" style="font-size: 14.09px;">statistics</a> <a href="/tags/structured-data/" style="font-size: 10px;">structured-data</a> <a href="/tags/themes/" style="font-size: 10px;">themes</a> <a href="/tags/three-js/" style="font-size: 19.09px;">three.js</a> <a href="/tags/vuejs/" style="font-size: 16.36px;">vuejs</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/06/09/threejs-vector2/">The Vector2 class for 2D curves, mouse pointers, ect</a>
          </li>
        
          <li>
            <a href="/2023/06/08/linux-dd/">Linux dd command and files</a>
          </li>
        
          <li>
            <a href="/2023/06/07/threejs-lathe-geometry/">Lathe Geometry in threejs</a>
          </li>
        
          <li>
            <a href="/2023/06/06/linux-sysbench/">Linux sysbench command for benchmarking a file system</a>
          </li>
        
          <li>
            <a href="/2023/06/02/threejs-tube-geometry/">Tube Geometry in threejs</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Dustin Pfister<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br>
      <br>
      <a href="/privacy.html" target="_blank">Privacy Policy</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/2021/02/19/threejs-examples/" class="mobile-nav-link">ThreeJS</a>
  
    <a href="/2020/03/23/canvas-example/" class="mobile-nav-link">Canvas</a>
  
    <a href="https://www.youtube.com/user/javaweaver" class="mobile-nav-link">Youtube</a>
  
    <a href="https://github.com/dustinpfister" class="mobile-nav-link">Github</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'dustinpfister-github-io';
  
  var disqus_url = 'https://dustinpfister.github.io/2021/09/10/nodejs-simple-http-request-get-post-system/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>